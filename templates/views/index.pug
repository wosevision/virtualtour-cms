doctype html
html.no-js
  head
    base(href='/')
    meta(charset='utf-8')
    meta(http-equiv='X-UA-Compatible', content='IE=edge,chrome=1')
    title(ncy-breadcrumb-last="{{ ncyBreadcrumbLabel ? ncyBreadcrumbLabel +' | ' : null }}UOIT Virtual Tour")
    meta(name='description', content='')
    meta(name='viewport', content='width=device-width')
    link(rel='stylesheet', href='css/main.css')
    script(src='https://maps.googleapis.com/maps/api/js?key=AIzaSyA3Z_tA7YdsRXkHdThiC-VA0dvwX6a4Kto')
  body(ng-controller='MainCtrl as mc', layout='column', layout-fill='', ng-cloak='')
    //
      <ng-include src="'titlebar/_titlebar.html'" flex="nogrow">
      </ng-include>
    div(flex='', layout='column', layout-fill='', style='position:absolute;')
      title-bar(title='Virtual Tour', mobile='mc.mobile', flex='nogrow')
        if user
          if user.canAccessKeystone
            md-button(href='/keystone' target='_self') Open Keystone
            md-button(href='/keystone/signout' target='_self') Sign Out
        else
          md-button(href='/keystone/signin' target='_self') Sign In
        title-bar-button(ng-repeat='(o, option) in mc.titlebar.options', on-click='mc.titlebar.clickHandlers[o]()', active='option.active', icon='option.icon', tooltip='option.tooltip')
      div(ng-class="{ 'toolbar-open' : mc.toolbar.isOpen&&!landscapeMobile, 'toolbar-condensed': mc.toolbar.isCondensed }", layout='row', layout-align='end start', flex='grow')
        button-bar(layout='column', items='mc.toolbar.views', open='mc.toolbar.isOpen', condensed='mc.toolbar.isCondensed', mobile='mc.mobile')
    div(ng-class="{ 'toolbar-open' : mc.toolbar.isOpen&&!landscapeMobile, 'toolbar-condensed': mc.toolbar.isCondensed }", layout='row', flex='')
      //
        <button-bar
        items="mc.toolbar.views"
        open="mc.toolbar.isOpen"
        condensed="mc.toolbar.isCondensed"
        layout="column"
        flex="nogrow">
        </button-bar>
      md-sidenav.md-sidenav-right(ng-class="{ 'map-open' : ('map' | isState) }", md-component-id='right', md-disable-backdrop='', md-whiteframe='4', flex='')
        ui-view(flex='', layout='column', layout-fill='')
      md-sidenav.md-sidenav-left(md-component-id='config', md-disable-backdrop='', md-whiteframe='4', style='max-width: none;width: auto;')
        div(resizable='', r-directions="['right']", style='min-width:400px;', flex='', layout-fill='')
          scene-builder(scene-data='mc.activeScene')
      section#scene-view.scene-view(flex='grow', layout='column', layout-fill='', ng-class="{ 'map-open' : ('map' | isState) }")
        aframe-scene(default-scene='north_ext_3h', scene='mc.activeScene')
        // scene="mc.activeScene" ng-if="mc.activeScene"
        //
          sky="{{mc.activeScene.sky}}"
          entities="mc.activeScene.entities"
          assets="mc.activeScene.assets"
          scene-links="mc.activeScene.sceneLinks"
    script(src='js/main.js')
