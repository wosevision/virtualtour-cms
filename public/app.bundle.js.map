{"version":3,"sources":["webpack:///app.bundle.js","webpack:///./client/app/app.js","webpack:///./client/app/common/common.js","webpack:///./client/app/common/buttonbar/buttonbar.js","webpack:///./client/app/common/buttonbar/buttonbar.component.js","webpack:///./client/app/common/buttonbar/buttonbar.html","webpack:///./client/app/common/buttonbar/buttonbar.controller.js","webpack:///./client/app/common/popup/popup.js","webpack:///./client/app/common/popup/error/error.js","webpack:///./client/app/common/popup/error/error.html","webpack:///./client/app/common/popup/error/error.controller.js","webpack:///./client/app/common/popup/info/info.js","webpack:///./client/app/common/popup/info/info.html","webpack:///./client/app/common/popup/info/info.controller.js","webpack:///./client/app/common/popup/login/login.js","webpack:///./client/app/common/popup/login/login.html","webpack:///./client/app/common/popup/login/login.controller.js","webpack:///./client/app/common/popup/welcome/welcome.js","webpack:///./client/app/common/popup/welcome/welcome.html","webpack:///./client/app/common/popup/welcome/welcome.controller.js","webpack:///./client/app/common/popup/popup.service.js","webpack:///./client/app/common/titlebar/titlebar.js","webpack:///./client/app/common/titlebar/titlebar.component.js","webpack:///./client/app/common/titlebar/titlebar.html","webpack:///./client/app/common/titlebar/titlebarButton.directive.js","webpack:///./client/app/common/titlebar/titlebarButton.html","webpack:///./client/app/common/user/user.js","webpack:///./client/app/common/user/userAuth.factory.js","webpack:///./client/app/common/user/userResolver.factory.js","webpack:///./client/app/common/user/userSession.service.js","webpack:///./client/app/common/util/util.js","webpack:///./client/app/common/util/dom/dom.js","webpack:///./client/app/common/util/dom/bindCompile.directive.js","webpack:///./client/app/common/util/model/model.js","webpack:///./client/app/common/util/model/toNumber.directive.js","webpack:///./client/app/common/util/resource/resource.js","webpack:///./client/app/common/util/resource/draftResource.factory.js","webpack:///./client/app/common/util/resource/mapResource.factory.js","webpack:///./client/app/common/util/resource/tourResource.factory.js","webpack:///./client/app/common/aframe/aframe.js","webpack:///./client/app/common/aframe/scenelink.js","webpack:///./client/app/common/aframe/hotspot.js","webpack:///./client/app/common/aframe/textpanel.js","webpack:///./client/app/common/aframe/hover.js","webpack:///./client/app/common/aframe/scale.js","webpack:///./client/app/common/aframe/delegate.js","webpack:///./client/app/components/components.js","webpack:///./client/app/components/aframe/aframe.js","webpack:///./client/app/components/aframe/scene/scene.js","webpack:///./client/app/components/aframe/scene/scene.component.js","webpack:///./client/app/components/aframe/scene/scene.html","webpack:///./client/app/components/aframe/scene/scene.controller.js","webpack:///./client/app/components/aframe/scene/scene.service.js","webpack:///./client/app/components/aframe/sky/sky.js","webpack:///./client/app/components/aframe/sky/sky.component.js","webpack:///./client/app/components/aframe/sky/sky.controller.js","webpack:///./client/app/components/aframe/sky/sky.service.js","webpack:///./client/app/components/aframe/scenelink/scenelink.js","webpack:///./client/app/components/aframe/scenelink/scenelink.directive.js","webpack:///./client/app/components/aframe/scenelink/scenelink.html","webpack:///./client/app/components/aframe/hotspot/hotspot.js","webpack:///./client/app/components/aframe/hotspot/hotspot.directive.js","webpack:///./client/app/components/aframe/hotspot/hotspot.html","webpack:///./client/app/components/aframe/editor/editor.js","webpack:///./client/app/components/aframe/editor/editor.directive.js","webpack:///./client/app/components/aframe/editor/editor.component.js","webpack:///./client/app/components/aframe/editor/editor.html","webpack:///./client/app/components/aframe/editor/editor.controller.js","webpack:///./client/app/components/aframe/editor/editor.service.js","webpack:///./client/app/components/aframe/editor/editorDialog.html","webpack:///./client/app/components/aframe/editor/editorDialog.controller.js","webpack:///./client/app/components/aframe/entity/entity.js","webpack:///./client/app/components/aframe/entity/entity.component.js","webpack:///./client/app/components/aframe/entity/entity.controller.js","webpack:///./client/app/components/aframe/entity/entityControls.component.js","webpack:///./client/app/components/aframe/entity/entityControls.html","webpack:///./client/app/components/aframe/entity/entityControls.controller.js","webpack:///./client/app/components/drilldown/drilldown.js","webpack:///./client/app/components/drilldown/drilldown.component.js","webpack:///./client/app/components/drilldown/drilldown.html","webpack:///./client/app/components/drilldown/drilldown.controller.js","webpack:///./client/app/components/map/map.js","webpack:///./client/app/components/map/map.html","webpack:///./client/app/components/map/map.controller.js","webpack:///./client/app/components/search/search.js","webpack:///./client/app/components/search/search.component.js","webpack:///./client/app/components/search/search.html","webpack:///./client/app/components/search/search.controller.js","webpack:///./client/app/components/settings/settings.js","webpack:///./client/app/components/settings/settings.component.js","webpack:///./client/app/components/settings/settings.html","webpack:///./client/app/components/settings/settings.controller.js","webpack:///./client/app/components/settings/settings.factory.js","webpack:///./client/app/components/settings/connectionDetails.service.js","webpack:///./client/app/app.component.js","webpack:///./client/app/app.html","webpack:///./client/app/app.controller.js"],"names":["webpackJsonp","0","module","exports","__webpack_require__","298","_interopRequireDefault","obj","__esModule","default","_angular","_angular2","_angularUiRouter","_angularUiRouter2","_angulartics","_angulartics2","_angularticsGoogleAnalytics","_angularticsGoogleAnalytics2","_angularAnimate","_angularAnimate2","_angularAria","_angularAria2","_angularMaterial","_angularMaterial2","_angularMaterialIcons","_angularMaterialIcons2","_angularLoadingBar","_angularLoadingBar2","_vAccordion","_vAccordion2","_common","_common2","_components","_components2","_app","_app2","component","config","$provide","$locationProvider","$stateProvider","$urlRouterProvider","$mdGestureProvider","$mdThemingProvider","cfpLoadingBarProvider","spinnerTemplate","skipClickHijack","definePalette","50","100","200","300","400","500","600","700","800","900","A100","A200","A400","A700","contrastDefaultColor","contrastDarkColors","contrastLightColors","theme","primaryPalette","hue-1","hue-2","hue-3","accentPalette","html5Mode","state","template","otherwise","decorator","$log","$delegate","$injector","exception","cause","$rootScope","get","$broadcast","run","$state","$compile","$mdUtil","$popupWindow","UserAuth","$on","event","nextTick","tick","element","document","getElementById","error","locals","type","message","suggest","warning","toState","toParams","fromState","fromParams","options","data","roles","isAuthorized","preventDefault","isAuthenticated","AUTH_EVENTS","notAuthorized","notAuthenticated","pageTitle","label","console","log","msg","unfoundState","to","initAuth","then","user","loginSuccess","318","Object","defineProperty","value","_buttonbar","_buttonbar2","_popup","_popup2","_titlebar","_titlebar2","_user","_user2","_util","_util2","_aframe","_aframe2","registerAll","commonModule","name","319","buttonBarModule","constant","locations","icon","desc","map","search","settings","320","_buttonbar3","_buttonbar4","buttonbarComponent","controller","bindings","items","open","condensed","mobile","321","322","_classCallCheck2","_classCallCheck3","_createClass2","_createClass3","ButtonbarController","$scope","$document","$mdSidenav","UserSession","this","_$scope","_$document","_$state","_$mdSidenav","showHints","val","$inject","key","_this","menuOpen","includes","close","transitionTo","enterVR","_this2","$watch","isOpen","newVal","343","347","_error","_error2","_info","_info2","_login","_login2","_welcome","_welcome2","popupModule","service","348","_angularSanitize","_angularSanitize2","_error3","_error4","errorModule","$mdDialogProvider","addPreset","controllerAs","bindToController","clickOutsideToClose","escapeToClose","parent","body","title","action","browser","url","window","goToSettings","351","352","ErrorController","$sce","$window","$mdDialog","ERROR_SUGGESTIONS","suggestions","length","forEach","index","push","closeDialog","reload","hide","go","refreshApp","location","stopProp","$event","stopPropagation","353","355","_info3","_info4","infoModule","356","357","InfoController","358","_login3","_login4","loginModule","359","360","LoginController","$timeout","attempt","success","failed","login","username","password","loginFailed","logout","361","363","_welcome3","_welcome4","welcomeModule","openFrom","top","left","width","height","closeTo","mask","visible","clickThrough","clickExit","scrollThrough","color","container","scrollBox","previousText","nextText","finishText","animationDuration","dark","steps","target","placementPriority","content","navigation","tips","image","poi","link","364","365","WelcomeController","TOUR_STEPS","WELCOME_TIP_LIST","WELCOME_TIPS","OnboardTour","alert","welcomeTipsList","currentTips","cancel","answer","tip","activeTip","start","currentSettings","showWelcome","366","368","PopupService","$mdToast","$mdMedia","standardToast","simple","hideDelay","highlightAction","highlightClass","position","show","welcome","_ref","arguments","undefined","_ref$locals","info","toast","_ref2","_ref2$action","textContent","_ref3","_ref3$locals","_ref4","_ref4$locals","369","_titlebarButton","_titlebarButton2","titleBarModule","directive","register","active","tooltip","class","schedule","apply","condense","right","370","titleBarComponent","transclude","371","372","374","titleBarButtonDirective","require","scope","onClick","375","376","_userAuth","_userAuth2","_userResolver","_userResolver2","_userSession","_userSession2","userModule","factory","toolbarOpen","toolbarCondensed","usage","auto","compression","min","max","step","labels","levels","<= 2","== 3",">= 4","preloading","== 0","== 1","== 2","resolution","profiles","conserve","balanced","mobile3g","mobileWifi","desktopSlow","desktopFast","admin","editor","contributor","logoutSuccess","sessionTimeout","377","UserAuthFactory","$http","createSession","create","res","catch","err","post","destroy","userId","authorizedRoles","isArray","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","_getIterator3","next","done","role","indexOf","return","_getIterator2","416","UserResolverFactory","$q","resolve","deferred","defer","unwatch","currentUser","angular","isDefined","reject","promise","417","_keys","_keys2","UserSessionService","SettingsFactory","USER_ROLES","USER_DEFAULTS","_roles","_settings","_usage","_id","isAdmin","isEditor","isContributor","Contributor","equals","set","_this3","save","_this4","_this5","422","_dom","_dom2","_model","_model2","_resource","_resource2","utilModule","423","_bindCompile","_bindCompile2","domModule","424","bindCompileDirective","attrs","ensureCompileRunsOnce","$eval","compile","html","contents","425","_toNumber","_toNumber2","modelModule","426","toNumberDirective","restrict","elem","ngModel","$parsers","$formatters","parseFloat","427","_angularResource","_angularResource2","_draftResource","_draftResource2","_mapResource","_mapResource2","_tourResource","_tourResource2","resourceModule","apiUrl","imageApiUrl","430","DraftResourceFactory","$resource","GLOBAL_SETTINGS","update","method","431","MapResourceFactory","category","feature","collection","432","TourResourceFactory","building","scene","preload","entity","433","_aframeExtras","_scenelink","_scenelink2","_hotspot","_hotspot2","_textpanel","_textpanel2","_hover","_hover2","_scale","_scale2","_delegate","_delegate2","sceneLink","hotSpot","textPanel","hoverAnimation","levelScaleTo","delegateEvent","loaders","primitives","544","sceneLinkPrimitive","defaultComponents","geometry","primitive","radiusBottom","radiusTop","segmentsHeight","segmentsRadial","scale","x","y","z","animation","property","dir","dur","easing","from","loop","registerPrimitive","utils","extendDeep","getMeshMixin","545","hotSpotPrimitive","arc","radius","radiusTubular","segmentsTubular","material","shader","opacity","transparent","text","side","wrapCount","align","546","textPanelPrimitive","mappings","547","hoverAnimationComponent","schema","scaleFactor","opacityFactor","colorFactor","init","defaultScale","defaultOpacity","defaultColor","el","getAttribute","setAttribute","setColorAnimation","setOpacityAnimation","setScaleAnimation","originalScale","factoredScale","elasticity","startEvents","pauseEvents","originalOpacity","factoredOpacity","originalColor","registerComponent","548","levelScaleToComponent","scaleToLevel","currentScale","adjusted","549","_map","_map2","delegateEventComponent","elements","events","validateProperties","unbinders","bindAllEventsToElements","oldData","elementIndex","unbindAllEventsFromElement","eventName","eventNameIndex","unbind","delete","bindAllEventsTo","bindEventTo","boundDelegateFn","bind","addEventListener","unbindFn","removeEventListener","originalEv","emit","has","Error","570","_drilldown","_drilldown2","_search","_search2","_settings2","componentModule","571","_scene","_scene2","_sky","_sky2","_editor","_editor2","_entity","_entity2","aframeModule","572","_scene3","_scene4","sceneModule","573","sceneComponent","sky","sceneLinks","hotSpots","entities","574","575","SceneController","$element","$aframeScene","$aframeSky","_rightClick","_isMobile","_currentSceneId","$sceneEl","find","$assetsEl","$cameraEl","changes","isFirstChange","currentValue","screen","checkForDraft","setScene","576","578","SceneService","EDITOR_MESSAGES","toasts","toastConfig","prop","item","cb","confirm","response","splice","itemRemoved","$aframeEditor","publish","isObject","itemAdded","join","sceneData","panorama","lastPublished","579","_sky3","_sky4","skyModule","580","skyComponent","SceneCtrl","581","SkyController","compileSkyEl","callback","_skyElLoaded","_skyLoadedList","newData","skyUrl","setSky","assetIdFromSkyUrl","split","getPreloadList","toPreload","newAssetId","loadSkyAsset","warn","assetId","loadedSky","setSkyId","$skyEl","loadSkyEl","getSkyDomNode","imgNode","append","clone","582","COMPRESS_MAX","COMPRESS_FACTOR","SkyService","$tourApi","Preload","device","isMobile","lowRes","w","h","c","f","q","output","id","$promise","img","getSettings","on","version","public_id","583","scenelinkModule","584","scenelinkDirective","$analytics","SceneResource","LocationResource","gotoSceneHandler","eventTrack","code","errorHandler","elemClick","_editable","editItem","585","586","hotspotModule","587","hotspotDirective","$mapApi","FeatureResource","hotspotId","viewHotspot","properties","href","linked","result","588","589","_editor3","_editor4","_editor5","_editor6","_editorDialog","_editorDialog2","_editorDialog3","_editorDialog4","editorModule","$mdPanelProvider","definePreset","attachTo","panelClass","focusOnOpen","zIndex","draftLoaded","saveDraft","draftFound","discardDraft","revertToDraft","rotation","590","editorDirective","editable","openEditor","$parent","591","editorComponent","592","593","_assign","_assign2","EditorController","$mdPanel","DATA_MODELS","_unpublishedChanges","_schemas","notify","draft","loadDraft","draftContent","updateSceneData","draftList","drafts","foundDraftContent","ok","contextMenu","off","$onDestroy","ev","_this6","newItem","addItemTo","_panelRef","removeThis","_this7","_this8","removeItemFrom","offsetY","_this9","_ref$offsetX","offsetX","_ref$offsetY","clientY","newPanelPosition","absolute","center","bottom","newPanelAnimation","clientX","withAnimation","SCALE","onDomRemoved","602","_lodash","EditorService","DraftResource","_newData","pick","updatedAt","Date","createdAt","kind","original","lastDraft","query","sort","filter","remove","discardedDraft","605","606","EditorDialogController","$filter","BuildingResource","CategoryResource","CollectionResource","$applyAsync","initCurrentScene","initCurrentFeature","loadCategories","categories","hasOwnProperty","loadFeatures","features","initCurrentCategory","loadScenes","scenes","initCurrentBuilding","loadBuildings","buildings","initCurrentLocation","loadLocations","_this10","_this11","properties.category","607","_entityControls","entityModule","608","entityComponent","$ngModel","609","_stringify","_stringify2","EntityController","entityEl","$modelValue","lastType","$valid","compileTemplate","attr","parseAttrs","$destroy","cloneScope","after","newAttrs","_loop","JSON","parse","a","i","condensedProps","rule","612","_entityControls2","_entityControls3","_entityControls4","613","614","modelValue","$render","_$ngModel$$viewValue","$viewValue","$setViewValue","viewValue","$$hashKey","615","drilldownModule","Tour","children","nextLevel","currentLocation","$stateParams","currentBuilding","currentScene","616","_drilldown3","_drilldown4","drilldownComponent","617","618","selectItem","selected","deactivateItem","hidden","toggleItem","_defineProperty2","_defineProperty3","DrilldownController","toggle","$sc","$content","childScope","$new","620","622","_ngmap","_ngmap2","_uoitCampusMap","_uoitCampusMap2","_map3","_map4","mapModule","625","626","MapController","627","629","searchModule","typeFilters","modelFilters","tour","fieldFilters","630","_search3","_search4","searchComponent","filters","631","632","_toConsumableArray2","_toConsumableArray3","SearchController","SEARCH_FILTERS","searchResults","in","for","by","params","fields","results","overview","639","641","_angularCookies","_angularCookies2","_angularStorage","_angularStorage2","_settings3","_settings4","_connectionDetailsService","_connectionDetailsService2","settingsModule","646","settingsComponent","647","648","SettingsController","$animate","ConnectionDetails","isLoggedIn","connection","accordionReady","accordion","expandAll","loadUserAfterLogin","getUsageLevel","collapseAll","backdrop","createBackdrop","tabIndex","enter","leave","updateUsage","updateSettings","calculateUsageLevel","usageLevelTally","usageLevel","getLabelsFromTally","loading","detect","optimize","649","651","store","getNamespacedStore","652","SPEED_HI","SPEED_WF","SPEED_3G","ConnectionDetailsService","_connection$data","network","useragent","downloadSpeed","speeds","download","deviceType","tally","addToTally","values","v","setting","expression","inRange","isNumber","653","_app3","_app4","appComponent","654","655","AppController","BUTTONBAR_VIEWS","TITLEBAR_OPTS","WELCOME_MSG_DELAY","SETTINGS_MSG_DELAY","BLURRED_VIEWS","landscape","m","showSettingsMsg","autoconfig","showWelcomeMsg","settingsLoaded","userSettings","isUndefined","_UserSession$settings","titlebar","clickHandlers","toolbar","isCondensed","views","sidebar","hasState","view","hasBlur","some","656"],"mappings":"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","file":"app.bundle.js","sourcesContent":["webpackJsonp([0],{\n\n/***/ 0:\n/***/ function(module, exports, __webpack_require__) {\n\n\t__webpack_require__(1);\n\tmodule.exports = __webpack_require__(298);\n\n\n/***/ },\n\n/***/ 298:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _angular = __webpack_require__(299);\n\t\n\tvar _angular2 = _interopRequireDefault(_angular);\n\t\n\tvar _angularUiRouter = __webpack_require__(301);\n\t\n\tvar _angularUiRouter2 = _interopRequireDefault(_angularUiRouter);\n\t\n\tvar _angulartics = __webpack_require__(302);\n\t\n\tvar _angulartics2 = _interopRequireDefault(_angulartics);\n\t\n\tvar _angularticsGoogleAnalytics = __webpack_require__(304);\n\t\n\tvar _angularticsGoogleAnalytics2 = _interopRequireDefault(_angularticsGoogleAnalytics);\n\t\n\tvar _angularAnimate = __webpack_require__(306);\n\t\n\tvar _angularAnimate2 = _interopRequireDefault(_angularAnimate);\n\t\n\tvar _angularAria = __webpack_require__(308);\n\t\n\tvar _angularAria2 = _interopRequireDefault(_angularAria);\n\t\n\tvar _angularMaterial = __webpack_require__(310);\n\t\n\tvar _angularMaterial2 = _interopRequireDefault(_angularMaterial);\n\t\n\tvar _angularMaterialIcons = __webpack_require__(312);\n\t\n\tvar _angularMaterialIcons2 = _interopRequireDefault(_angularMaterialIcons);\n\t\n\tvar _angularLoadingBar = __webpack_require__(314);\n\t\n\tvar _angularLoadingBar2 = _interopRequireDefault(_angularLoadingBar);\n\t\n\tvar _vAccordion = __webpack_require__(316);\n\t\n\tvar _vAccordion2 = _interopRequireDefault(_vAccordion);\n\t\n\tvar _common = __webpack_require__(318);\n\t\n\tvar _common2 = _interopRequireDefault(_common);\n\t\n\tvar _components = __webpack_require__(570);\n\t\n\tvar _components2 = _interopRequireDefault(_components);\n\t\n\tvar _app = __webpack_require__(653);\n\t\n\tvar _app2 = _interopRequireDefault(_app);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t/**\n\t * Disables all `console.x()` calls for production by replacing\n\t * their methods with `angular.noop`.\n\t */\n\t// {\n\t// \tconst CONSOLE_METHODS = [\n\t// \t\t\t'assert', 'clear', 'count', 'debug', 'dir', 'dirxml', 'error',\n\t// \t\t\t'exception', 'group', 'groupCollapsed', 'groupEnd', 'info', 'log',\n\t// \t\t\t'markTimeline', 'profile', 'profileEnd', 'table', 'time', 'timeEnd',\n\t// \t\t\t'timeStamp', 'trace', 'warn'\n\t// \t\t],\n\t// \t\tCONSOLE_OBJ = (window.console = window.console || {});\n\t// \tlet method,\n\t// \t\t\tlength = CONSOLE_METHODS.length;\n\t// \twhile (length--) {\n\t// \t    method = CONSOLE_METHODS[length];\n\t// \t    CONSOLE_OBJ[method] = angular.noop;\n\t// \t}\n\t// }\n\t\n\t_angular2.default.module('app', [_angularUiRouter2.default, _angulartics2.default, _angularticsGoogleAnalytics2.default, _angularAnimate2.default, _angularAria2.default, _angularMaterial2.default, _angularMaterialIcons2.default, _angularLoadingBar2.default, _vAccordion2.default, _common2.default, _components2.default]).component('app', _app2.default).config([\"$provide\", \"$locationProvider\", \"$stateProvider\", \"$urlRouterProvider\", \"$mdGestureProvider\", \"$mdThemingProvider\", \"cfpLoadingBarProvider\", function ($provide, $locationProvider, $stateProvider, $urlRouterProvider, $mdGestureProvider, $mdThemingProvider, cfpLoadingBarProvider) {\n\t  //, $mdIconProvider\n\t  'ngInject';\n\t\n\t  // cfpLoadingBarProvider.includeSpinner = false;\n\t  // cfpLoadingBarProvider.latencyThreshold = 300;\n\t\n\t  cfpLoadingBarProvider.spinnerTemplate = '<div id=\"loading-spinner\" class=\"loading-spinner-container\" layout layout-fill layout-align=\"center center\">\\n  \\t<md-progress-circular md-mode=\"indeterminate\" class=\"md-primary\">\\n  \\t</md-progress-circular>\\n  </div>';\n\t\n\t  // THIS IS VERY IMPORTANT, ngMaterial's clickjacking behaviour\n\t  // tampers with the capture phase in a way that is incompatible\n\t  // with A-Frame's mobile click capturing. It must be disabled\n\t  // for in-scene clicks to work on mobile.\n\t  $mdGestureProvider.skipClickHijack();\n\t\n\t  $mdThemingProvider.definePalette('UOITprimary', {\n\t    '50': '0086FC',\n\t    '100': '45A1FA',\n\t    '200': '74B8FB',\n\t    '300': 'A2D0FD',\n\t    '400': '0077CA',\n\t    '500': '006BB8',\n\t    '600': '005FA6',\n\t    '700': '005495',\n\t    '800': '004883',\n\t    '900': '003C71',\n\t    'A100': 'ff8a80',\n\t    'A200': 'ff5252',\n\t    'A400': 'ff1744',\n\t    'A700': 'd50000',\n\t    'contrastDefaultColor': 'light', // whether, by default, text (contrast)\n\t    // on this palette should be dark or light\n\t    'contrastDarkColors': ['50', '100', //hues which contrast should be 'dark' by default\n\t    '200', 'A100'],\n\t    'contrastLightColors': null // could also specify this if default was 'dark'\n\t  });\n\t\n\t  $mdThemingProvider.theme('default').primaryPalette('UOITprimary', {\n\t    'default': '400',\n\t    'hue-1': '300',\n\t    'hue-2': '500',\n\t    'hue-3': '900'\n\t  }).accentPalette('grey');\n\t\n\t  $locationProvider.html5Mode(true);\n\t\n\t  $stateProvider.state('home', {\n\t    template: '<ui-view></ui-view>'\n\t  });\n\t\n\t  $urlRouterProvider.otherwise('/');\n\t\n\t  $provide.decorator('$exceptionHandler', [\"$log\", \"$delegate\", \"$injector\", function ($log, $delegate, $injector) {\n\t    'ngInject';\n\t\n\t    return function (exception, cause) {\n\t      var $rootScope = $injector.get('$rootScope');\n\t      if (!cause) cause = 'Application error';\n\t      $rootScope.$broadcast('handler:exception', { exception: exception, cause: cause });\n\t\n\t      // FOR \"SOFTER\" ERRORS:\n\t      // $log.debug(exception, cause);\n\t\n\t      $delegate(exception, cause);\n\t    };\n\t  }]);\n\t}]).run([\"$rootScope\", \"$state\", \"$compile\", \"$mdUtil\", \"$popupWindow\", \"UserAuth\", \"AUTH_EVENTS\", function ($rootScope, $state, $compile, $mdUtil, $popupWindow, UserAuth, AUTH_EVENTS) {\n\t  'ngInject';\n\t\n\t  $rootScope.$on('cfpLoadingBar:started', function (event) {\n\t    return $mdUtil.nextTick(function (tick) {\n\t      return $compile(_angular2.default.element(document.getElementById('loading-spinner')))($rootScope);\n\t    });\n\t  });\n\t  /**\n\t   * Report on exceptions. The `handler:exception` event is fired\n\t   * anywhere an exception is caught, and if uncaught, the AppConfig\n\t   * block also sends this event with special delegation.\n\t   * \n\t   * @function $rootScope.$on\n\t   * @memberof AppRun\n\t   * @param  {String}   event    The event name\n\t   * @param  {function} callback To execute on handler call\n\t   */\n\t  $rootScope.$on('handler:exception', function (event, error) {\n\t    var locals = {\n\t      type: error.cause,\n\t      message: error.exception.message,\n\t      suggest: [0, 2, 1]\n\t    };\n\t    return $popupWindow.warning({ locals: locals });\n\t  });\n\t\n\t  $rootScope.$on('$stateChangeStart', function (event, toState, toParams, fromState, fromParams, options) {\n\t    // console.log('STATE CHANGE START', toState, toParams, fromState, fromParams, options);\n\t    if (toState.data && toState.data.roles && !UserAuth.isAuthorized(toState.data.roles)) {\n\t      event.preventDefault();\n\t      if (UserAuth.isAuthenticated()) {\n\t        // user is not allowed\n\t        $rootScope.$broadcast(AUTH_EVENTS.notAuthorized);\n\t      } else {\n\t        // user is not logged in\n\t        $rootScope.$broadcast(AUTH_EVENTS.notAuthenticated);\n\t      }\n\t    }\n\t  });\n\t\n\t  // change page title based on state\n\t  $rootScope.$on('$stateChangeSuccess', function (event, toState, toParams, fromState, fromParams) {\n\t    $rootScope.pageTitle = 'UOIT Virtual Tour';\n\t    if (toState.label) {\n\t      $rootScope.pageTitle += ' | ';\n\t      $rootScope.pageTitle += toState.label;\n\t    }\n\t    // console.log('STATE CHANGE SUCCESS', toState, toParams, fromState, fromParams);\n\t  });\n\t\n\t  $rootScope.$on('$stateChangeError', function (event, toState, toParams, fromState, fromParams, error) {\n\t    console.log('STATE CHANGE ERROR: ', error, toState, toParams, fromState, fromParams);\n\t    var locals = {\n\t      type: 'Navigation issue!',\n\t      message: error.message || error.msg || 'The view you requested hit a snag while loading.',\n\t      suggest: [4, 3]\n\t    };\n\t    $popupWindow.error({ locals: locals });\n\t  });\n\t\n\t  $rootScope.$on('$stateNotFound', function (event, unfoundState, fromState, fromParams) {\n\t    var locals = {\n\t      type: 'Page not found!',\n\t      message: 'The page associated with (' + unfoundState.to + ' : ' + unfoundState.toParams + ') cannot be located.',\n\t      suggest: [3]\n\t    };\n\t    $popupWindow.error({ locals: locals });\n\t    console.log('STATE NOT FOUND', unfoundState, fromState, fromParams);\n\t  });\n\t\n\t  console.log('starting auth init...');\n\t  UserAuth.initAuth().then(function (user) {\n\t    $rootScope.$broadcast(AUTH_EVENTS.loginSuccess, user);\n\t    console.log('auth init complete!');\n\t  });\n\t}]);\n\n/***/ },\n\n/***/ 318:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _angular = __webpack_require__(299);\n\t\n\tvar _angular2 = _interopRequireDefault(_angular);\n\t\n\tvar _buttonbar = __webpack_require__(319);\n\t\n\tvar _buttonbar2 = _interopRequireDefault(_buttonbar);\n\t\n\tvar _popup = __webpack_require__(347);\n\t\n\tvar _popup2 = _interopRequireDefault(_popup);\n\t\n\tvar _titlebar = __webpack_require__(369);\n\t\n\tvar _titlebar2 = _interopRequireDefault(_titlebar);\n\t\n\tvar _user = __webpack_require__(376);\n\t\n\tvar _user2 = _interopRequireDefault(_user);\n\t\n\tvar _util = __webpack_require__(422);\n\t\n\tvar _util2 = _interopRequireDefault(_util);\n\t\n\tvar _aframe = __webpack_require__(433);\n\t\n\tvar _aframe2 = _interopRequireDefault(_aframe);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t_aframe2.default.registerAll();\n\t\n\tvar commonModule = _angular2.default.module('app.common', [_buttonbar2.default, _popup2.default, _titlebar2.default, _user2.default, _util2.default]).name;\n\t\n\texports.default = commonModule;\n\n/***/ },\n\n/***/ 319:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _angular = __webpack_require__(299);\n\t\n\tvar _angular2 = _interopRequireDefault(_angular);\n\t\n\tvar _angularUiRouter = __webpack_require__(301);\n\t\n\tvar _angularUiRouter2 = _interopRequireDefault(_angularUiRouter);\n\t\n\tvar _angularMaterial = __webpack_require__(310);\n\t\n\tvar _angularMaterial2 = _interopRequireDefault(_angularMaterial);\n\t\n\tvar _buttonbar = __webpack_require__(320);\n\t\n\tvar _buttonbar2 = _interopRequireDefault(_buttonbar);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar buttonBarModule = _angular2.default.module('buttonbar', [_angularUiRouter2.default, _angularMaterial2.default]).component('buttonBar', _buttonbar2.default).constant('BUTTONBAR_VIEWS', {\n\t  locations: {\n\t    label: 'By location',\n\t    icon: 'pin_drop',\n\t    desc: 'View a list of available tour locations'\n\t  },\n\t  map: {\n\t    label: 'By map',\n\t    icon: 'map',\n\t    desc: 'Explore locations from the UOIT Campus Map'\n\t  },\n\t  // guided: {\n\t  //   label: 'Guided tour',\n\t  //   icon: 'rotate_90_degrees_ccw',\n\t  //   desc: 'Take a preset trip with a video tour guide'\n\t  // },\n\t  search: {\n\t    label: 'Search',\n\t    icon: 'search',\n\t    desc: 'Find specific Virtual Tour highlights'\n\t  },\n\t  settings: {\n\t    label: 'Settings',\n\t    icon: 'tune',\n\t    desc: 'Adjust the Virtual Tour experience'\n\t  }\n\t}).name;\n\t\n\texports.default = buttonBarModule;\n\n/***/ },\n\n/***/ 320:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _buttonbar = __webpack_require__(321);\n\t\n\tvar _buttonbar2 = _interopRequireDefault(_buttonbar);\n\t\n\tvar _buttonbar3 = __webpack_require__(322);\n\t\n\tvar _buttonbar4 = _interopRequireDefault(_buttonbar3);\n\t\n\t__webpack_require__(343);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar buttonbarComponent = {\n\t  template: _buttonbar2.default,\n\t  controller: _buttonbar4.default,\n\t  bindings: {\n\t    items: '<',\n\t    open: '<?',\n\t    condensed: '<?',\n\t    mobile: '<?'\n\t  }\n\t};\n\t\n\texports.default = buttonbarComponent;\n\n/***/ },\n\n/***/ 321:\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<aside\\n\\tclass=\\\"button-bar\\\"\\n\\tng-class=\\\"{'collapsed': $ctrl.condensed || $ctrl.mobile.screen}\\\"\\n\\tng-if=\\\"$ctrl.open&&!($ctrl.mobile.landscape&&$ctrl.mobile.screen)\\\"\\n\\tmd-whiteframe=\\\"2\\\"\\n\\tlayout=\\\"row\\\"\\n\\tlayout-gt-sm=\\\"column\\\"\\n\\tlayout-align=\\\"start stretch\\\"\\n\\tlayout-align-gt-sm=\\\"end end\\\"\\n\\tflex=\\\"grow\\\">\\n\\t<div ng-repeat=\\\"(state, stateInfo) in ::$ctrl.items\\\"\\n\\t\\tclass=\\\"button-bar-btn\\\"\\n\\t\\tng-class=\\\"{ 'is-active': $ctrl.menuOpen && (state | isState)}\\\"\\n\\t\\tlayout=\\\"column\\\"\\n\\t\\tlayout-align=\\\"center center\\\"\\n\\t\\tflex=\\\"grow\\\"\\n  \\tng-click=\\\"$ctrl.select(state)\\\"\\n  \\tmd-ink-ripple=\\\"#0077CA\\\"\\n  \\tid=\\\"{{::v}}\\\">\\n  \\t<ng-md-icon icon=\\\"{{ :: stateInfo.icon }}\\\" style=\\\"fill: #ffffff;\\\"></ng-md-icon>\\n    <span ng-bind=\\\":: stateInfo.label\\\"></span>\\n    <md-tooltip md-direction=\\\"{{ $ctrl.mobile.screen ? 'top' : 'left' }}\\\" md-autohide md-delay=\\\"$ctrl.condensed ? 0 : 750\\\" ng-if=\\\"!$ctrl.mobile.device&&$ctrl.showHints()\\\" md-z-index=\\\"10000\\\">\\n      {{ $ctrl.condensed ?  stateInfo.label :  stateInfo.desc }}\\n    </md-tooltip>\\n  </div>\\n\\t<div\\n\\t\\tclass=\\\"button-bar-btn enter-vr\\\"\\n\\t\\tlayout=\\\"column\\\"\\n\\t\\tlayout-align=\\\"center center\\\"\\n\\t\\tflex=\\\"grow\\\"\\n\\t\\tflex-gt-sm=\\\"0\\\"\\n  \\tng-click=\\\"$ctrl.enterVR()\\\"\\n  \\tmd-ink-ripple=\\\"#0077CA\\\"\\n  \\tid=\\\"enter-vr\\\">\\n  \\t<svg viewBox=\\\"0 0 24 24\\\"><!-- {{ $ctrl.condensed }} -->\\n    \\t<path d=\\\"M20.74,6H3.2C2.55,6 2,6.57 2,7.27V17.73C2,18.43 2.55,19 3.23,19H8C8.54,19 9,18.68 9.16,18.21L10.55,14.74C10.79,14.16 11.35,13.75 12,13.75C12.65,13.75 13.21,14.16 13.45,14.74L14.84,18.21C15.03,18.68 15.46,19 15.95,19H20.74C21.45,19 22,18.43 22,17.73V7.27C22,6.57 21.45,6 20.74,6M7.22,14.58C6,14.58 5,13.55 5,12.29C5,11 6,10 7.22,10C8.44,10 9.43,11 9.43,12.29C9.43,13.55 8.44,14.58 7.22,14.58M16.78,14.58C15.56,14.58 14.57,13.55 14.57,12.29C14.57,11.03 15.56,10 16.78,10C18,10 19,11.03 19,12.29C19,13.55 18,14.58 16.78,14.58Z\\\" />\\n\\t\\t</svg>\\n    <md-tooltip md-direction=\\\"{{ $ctrl.mobile.screen ? 'top' : 'left' }}\\\" md-autohide ng-if=\\\"!$ctrl.mobile.device&&$ctrl.showHints()\\\">\\n    \\tSwitch to VR (fullscreen on desktop)\\n    </md-tooltip>\\n  </div>\\n</aside>\"\n\n/***/ },\n\n/***/ 322:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _classCallCheck2 = __webpack_require__(323);\n\t\n\tvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\t\n\tvar _createClass2 = __webpack_require__(324);\n\t\n\tvar _createClass3 = _interopRequireDefault(_createClass2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t/**\n\t * The buttonbar controller is responsible for managing when the sidebar\n\t * menu is open and which state is active. A single button needs to perform\n\t * different actions with a single click depending on the current state of\n\t * the sidebar  those actions (the ones defined in this controller) are\n\t * _distinct and separate from the actions performed by the buttons themselves_,\n\t * which are defined in the parent controller.\n\t *\n\t * The exception is the \"Enter VR\" button, which is always present at the bottom of\n\t * the buttonbar and has its method stored on this controller.\n\t */\n\tvar ButtonbarController = function () {\n\t\tButtonbarController.$inject = [\"$scope\", \"$document\", \"$state\", \"$mdSidenav\", \"UserSession\"];\n\t\tfunction ButtonbarController($scope, $document, $state, $mdSidenav, UserSession) {\n\t\t\t'ngInject';\n\t\n\t\t\t(0, _classCallCheck3.default)(this, ButtonbarController);\n\t\t\tthis._$scope = $scope;\n\t\t\tthis._$document = $document;\n\t\t\tthis._$state = $state;\n\t\t\tthis._$mdSidenav = $mdSidenav;\n\t\t\t/**\n\t   * Getter property for whether user settings permit hint tooltips.\n\t   * @return {Boolean} Tooltips on (true) or off (false)\n\t   */\n\t\t\tthis.showHints = function () {\n\t\t\t\treturn UserSession.settings.showHints.val;\n\t\t\t};\n\t\t}\n\t\n\t\t/**\n\t  * Activate the state associated with a button.\n\t  *\n\t  * In the context of this controller, the buttons are only responsible for\n\t  * handling one of three scenarios:\n\t  *\n\t  * - If the **sidebar is closed**, clicking a button should **open the sidebar\n\t  * and go to the button's associated state** no matter what.\n\t  * - If the **sidebar is open** and the **button clicked is for the active state**,\n\t  * the **sidebar should close and return to the \"home\" state**.\n\t  * - If the **sidebar is open** and the **clicked button's state is different from the\n\t  * active state**, the **sidebar should remain open and transition to the new state**.\n\t  * \n\t  * @param  {String} state Name of the state to transition to\n\t  * @return {Promise}      Represents the state of the transition\n\t  */\n\t\n\t\n\t\t(0, _createClass3.default)(ButtonbarController, [{\n\t\t\tkey: 'select',\n\t\t\tvalue: function select(state) {\n\t\t\t\tvar _this = this;\n\t\n\t\t\t\tif (this.menuOpen && this._$state.includes(state)) {\n\t\t\t\t\treturn this._$mdSidenav('right').close().then(function () {\n\t\t\t\t\t\treturn _this._$state.transitionTo('home');\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\treturn this._$state.transitionTo(state).then(function () {\n\t\t\t\t\t\t_this._$mdSidenav('right').open();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'enterVR',\n\t\t\tvalue: function enterVR() {\n\t\t\t\tthis._$document[0].getElementById('aframe-scene').enterVR();\n\t\t\t}\n\t\t}, {\n\t\t\tkey: '$onInit',\n\t\t\tvalue: function $onInit() {\n\t\t\t\tvar _this2 = this;\n\t\n\t\t\t\tthis._$scope.$watch(function () {\n\t\t\t\t\treturn _this2._$mdSidenav('right').isOpen();\n\t\t\t\t}, function (newVal) {\n\t\t\t\t\t_this2.menuOpen = newVal;\n\t\t\t\t});\n\t\t\t}\n\t\t}]);\n\t\treturn ButtonbarController;\n\t}();\n\t\n\texports.default = ButtonbarController;\n\n/***/ },\n\n/***/ 343:\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ },\n\n/***/ 347:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\t\tvalue: true\n\t});\n\t\n\tvar _angular = __webpack_require__(299);\n\t\n\tvar _angular2 = _interopRequireDefault(_angular);\n\t\n\tvar _angularMaterial = __webpack_require__(310);\n\t\n\tvar _angularMaterial2 = _interopRequireDefault(_angularMaterial);\n\t\n\tvar _error = __webpack_require__(348);\n\t\n\tvar _error2 = _interopRequireDefault(_error);\n\t\n\tvar _info = __webpack_require__(355);\n\t\n\tvar _info2 = _interopRequireDefault(_info);\n\t\n\tvar _login = __webpack_require__(358);\n\t\n\tvar _login2 = _interopRequireDefault(_login);\n\t\n\tvar _welcome = __webpack_require__(363);\n\t\n\tvar _welcome2 = _interopRequireDefault(_welcome);\n\t\n\tvar _popup = __webpack_require__(368);\n\t\n\tvar _popup2 = _interopRequireDefault(_popup);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar popupModule = _angular2.default.module('popup', [_angularMaterial2.default, _error2.default, _info2.default, _login2.default, _welcome2.default]).service('$popupWindow', _popup2.default).name;\n\t\n\texports.default = popupModule;\n\n/***/ },\n\n/***/ 348:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _angular = __webpack_require__(299);\n\t\n\tvar _angular2 = _interopRequireDefault(_angular);\n\t\n\tvar _angularUiRouter = __webpack_require__(301);\n\t\n\tvar _angularUiRouter2 = _interopRequireDefault(_angularUiRouter);\n\t\n\tvar _angularSanitize = __webpack_require__(349);\n\t\n\tvar _angularSanitize2 = _interopRequireDefault(_angularSanitize);\n\t\n\tvar _angularMaterial = __webpack_require__(310);\n\t\n\tvar _angularMaterial2 = _interopRequireDefault(_angularMaterial);\n\t\n\tvar _error = __webpack_require__(351);\n\t\n\tvar _error2 = _interopRequireDefault(_error);\n\t\n\tvar _error3 = __webpack_require__(352);\n\t\n\tvar _error4 = _interopRequireDefault(_error3);\n\t\n\t__webpack_require__(353);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar errorModule = _angular2.default.module('popup.error', [_angularUiRouter2.default, _angularSanitize2.default, _angularMaterial2.default]).config([\"$mdDialogProvider\", function ($mdDialogProvider) {\n\t\t'ngInject';\n\t\n\t\t$mdDialogProvider.addPreset('error', {\n\t\t\toptions: function options() {\n\t\t\t\treturn {\n\t\t\t\t\ttemplate: _error2.default,\n\t\t\t\t\tcontroller: _error4.default,\n\t\t\t\t\tcontrollerAs: '$ctrl',\n\t\t\t\t\tbindToController: true,\n\t\t\t\t\tclickOutsideToClose: true,\n\t\t\t\t\tescapeToClose: true,\n\t\t\t\t\tparent: _angular2.default.element(document.body)\n\t\t\t\t};\n\t\t\t}\n\t\t});\n\t}]).constant('ERROR_SUGGESTIONS', [{\n\t\ttitle: 'Clear your <md-select \\n\\t\\tstyle=\"display:inline-block;min-width:130px;\"\\n\\t\\tng-model=\"item.params\"\\n\\t\\tplaceholder=\"browser\"\\n\\t\\tclass=\"md-no-underline\">\\n\\t  <md-option value=\"gc\">Google Chrome</md-option>\\n\\t  <md-option value=\"ie\">Internet Explorer</md-option>\\n\\t  <md-option value=\"ff\">Firefox</md-option>\\n\\t  <md-option value=\"sa\">Safari</md-option>\\n\\t  <md-option value=\"op\">Opera</md-option>\\n\\t  <md-option value=\"other\">Other browser</md-option>\\n\\t</md-select> cache',\n\t\tdesc: 'Clearing your browser cache is a non-invasive troubleshooting step that resolves many simple web issues.',\n\t\ticon: 'delete_forever',\n\t\taction: function action(browser) {\n\t\t\tvar url = 'http://www.refreshyourcache.com';\n\t\t\tswitch (browser) {\n\t\t\t\tcase 'gc':\n\t\t\t\t\turl = 'https://support.google.com/accounts/answer/32050';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'ie':\n\t\t\t\t\turl = 'https://support.microsoft.com/en-us/kb/260897';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'ff':\n\t\t\t\t\turl = 'https://support.mozilla.org/en-US/kb/how-clear-firefox-cache';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'sa':\n\t\t\t\t\turl = 'https://support.apple.com/en-us/HT204098';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'op':\n\t\t\t\t\turl = 'http://help.opera.com/opera/Windows/2256/en/private.html#deleteData';\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\twindow.open(url, '_blank');\n\t\t}\n\t}, {\n\t\ttitle: 'Wait a little while and try again',\n\t\tdesc: 'If the server is busy or not responding, it usually resolves itself after a short amount of time.',\n\t\ticon: 'hourglass_empty'\n\t}, {\n\t\ttitle: 'Adjust the tour data usage settings',\n\t\tdesc: 'If the tour is taking too long to load, you can customize its loading behaviour to better suit your situation.',\n\t\ticon: 'data_usage',\n\t\tgoToSettings: true\n\t}, {\n\t\ttitle: 'Double check the URL',\n\t\tdesc: 'Is the address of the page what you expected it to be? Ensure it starts with https:// and free of spelling errors.',\n\t\ticon: 'hourglass_empty'\n\t}, {\n\t\ttitle: 'Refresh the page',\n\t\tdesc: 'If the page has encountered a minor issue but cannot proceed past it, refreshing the browser will often solve the issue.',\n\t\ticon: 'hourglass_empty'\n\t}]).name;\n\t\n\texports.default = errorModule;\n\n/***/ },\n\n/***/ 351:\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<md-dialog class=\\\"error-message\\\">\\n\\t<md-dialog-content>\\n\\n\\t\\t<md-tabs class=\\\"md-primary\\\" md-selected=\\\"$ctrl.sendReport\\\" md-align-tabs=\\\"{{data.bottom ? 'bottom' : 'top'}}\\\" md-dynamic-height md-border-bottom>\\n\\n      <md-tab id=\\\"message\\\" label=\\\"error\\\">\\n\\n\\t\\t\\t\\t<md-content layout-padding>\\n\\t\\t\\t\\t\\t<h2 class=\\\"md-display-1\\\">{{ $ctrl.type || 'Whoops!' }}</h2>\\n\\t\\t\\t\\t\\t<p>{{ $ctrl.message || 'An unknown error occurred.' }}</p>\\n\\n\\t\\t\\t\\t\\t<span class=\\\"md-caption\\\"><strong>Maybe try:</strong></span>\\n\\t\\t\\t\\t</md-content>\\n\\t\\t\\t\\t<md-list>\\n\\t\\t\\t\\t\\t<md-divider></md-divider>\\n\\n\\t\\t\\t\\t\\t<md-list-item class=\\\"md-2-line md-long-text\\\" ng-if=\\\"$ctrl.suggestions.length > 0\\\" ng-repeat=\\\"item in ::$ctrl.suggestions\\\">\\n\\t\\t        <ng-md-icon icon=\\\"{{ ::item.icon }}\\\" size=\\\"24\\\" style=\\\"fill: #0077CA;\\\"></ng-md-icon>\\n\\t\\t        <div class=\\\"md-list-item-text\\\" layout=\\\"column\\\">\\n\\t\\t          <h3 bind-html-compile compile=\\\"::item.title\\\"></h3>\\n\\t\\t          <p>{{ ::item.desc }}</p>\\n\\t\\t        </div>\\n\\t\\t        <md-button class=\\\"md-secondary md-primary\\\" ng-if=\\\"::item.action||item.goToSettings\\\" ng-click=\\\"::item.goToSettings ? $ctrl.goToSettings() : item.action(item.params)\\\">Show me how</md-button>\\n\\t\\t\\t\\t\\t</md-list-item>\\n\\n\\t\\t\\t\\t\\t<md-list-item class=\\\"md-2-line md-long-text\\\" ng-click=\\\"$ctrl.sendReport = 1\\\" md-autofocus>\\n\\t\\t        <ng-md-icon icon=\\\"error\\\" size=\\\"24\\\" style=\\\"fill: #0077CA;\\\"></ng-md-icon>\\n\\t\\t        <div class=\\\"md-list-item-text\\\" layout=\\\"column\\\">\\n\\t\\t          <h3>Send an error report</h3>\\n\\t\\t          <p>Help us help you by reporting this error to the UOIT Webteam.</p>\\n\\t\\t        </div>\\n\\t\\t\\t\\t\\t</md-list-item>\\n\\t\\t\\t\\t</md-list>\\n\\n      </md-tab>\\n\\n      <md-tab id=\\\"report\\\" label=\\\"send report\\\" layout-padding>\\n\\n      </md-tab>\\n\\n    </md-tabs>\\n\\n\\t</md-dialog-content>\\n\\t<md-dialog-actions>\\n\\n\\t\\t<md-button ng-click=\\\"$ctrl.refreshApp()\\\" class=\\\"md-primary md-raised\\\">\\n\\t\\t\\tRefresh page\\n\\t\\t</md-button>\\n\\n\\t\\t<md-button ng-click=\\\"$ctrl.closeDialog()\\\" class=\\\"md-primary\\\">\\n\\t\\t\\tClose and try again\\n\\t\\t</md-button>\\n\\n\\t</md-dialog-actions>\\n</md-dialog>\"\n\n/***/ },\n\n/***/ 352:\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tErrorController.$inject = [\"$state\", \"$sce\", \"$window\", \"$mdSidenav\", \"$mdDialog\", \"ERROR_SUGGESTIONS\"];\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\tfunction ErrorController($state, $sce, $window, $mdSidenav, $mdDialog, ERROR_SUGGESTIONS) {\n\t\t'ngInject';\n\t\n\t\tvar _this = this;\n\t\n\t\tthis.suggestions = [];\n\t\n\t\tif (this.suggest && this.suggest.length) {\n\t\t\tthis.suggest.forEach(function (index) {\n\t\t\t\t_this.suggestions.push(ERROR_SUGGESTIONS[index]);\n\t\t\t});\n\t\t}\n\t\n\t\tthis.closeDialog = function () {\n\t\t\t$state.reload();\n\t\t\t$mdDialog.hide();\n\t\t};\n\t\n\t\tthis.goToSettings = function () {\n\t\t\t$mdDialog.hide();\n\t\t\t$state.go('settings');\n\t\t\t$mdSidenav('right').open();\n\t\t};\n\t\n\t\tthis.refreshApp = function () {\n\t\t\t$window.location.reload();\n\t\t};\n\t\n\t\tthis.stopProp = function ($event) {\n\t\t\t$event.stopPropagation();\n\t\t};\n\t}\n\t\n\texports.default = ErrorController;\n\n/***/ },\n\n/***/ 353:\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ },\n\n/***/ 355:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\t\tvalue: true\n\t});\n\t\n\tvar _angular = __webpack_require__(299);\n\t\n\tvar _angular2 = _interopRequireDefault(_angular);\n\t\n\tvar _angularUiRouter = __webpack_require__(301);\n\t\n\tvar _angularUiRouter2 = _interopRequireDefault(_angularUiRouter);\n\t\n\tvar _angularSanitize = __webpack_require__(349);\n\t\n\tvar _angularSanitize2 = _interopRequireDefault(_angularSanitize);\n\t\n\tvar _angularMaterial = __webpack_require__(310);\n\t\n\tvar _angularMaterial2 = _interopRequireDefault(_angularMaterial);\n\t\n\tvar _info = __webpack_require__(356);\n\t\n\tvar _info2 = _interopRequireDefault(_info);\n\t\n\tvar _info3 = __webpack_require__(357);\n\t\n\tvar _info4 = _interopRequireDefault(_info3);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar infoModule = _angular2.default.module('popup.info', [_angularUiRouter2.default, _angularSanitize2.default, _angularMaterial2.default]).config([\"$mdDialogProvider\", function ($mdDialogProvider) {\n\t\t\t'ngInject';\n\t\n\t\t\t$mdDialogProvider.addPreset('info', {\n\t\t\t\t\toptions: function options() {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\ttemplate: _info2.default,\n\t\t\t\t\t\t\t\t\tcontroller: _info4.default,\n\t\t\t\t\t\t\t\t\tparent: _angular2.default.element(document.body),\n\t\t\t\t\t\t\t\t\tcontrollerAs: '$ctrl',\n\t\t\t\t\t\t\t\t\tbindToController: true,\n\t\t\t\t\t\t\t\t\tclickOutsideToClose: true,\n\t\t\t\t\t\t\t\t\tescapeToClose: true\n\t\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t});\n\t}]).name;\n\t\n\texports.default = infoModule;\n\n/***/ },\n\n/***/ 356:\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<md-dialog class=\\\"login-message\\\">\\n\\t<md-dialog-content>\\n\\t\\t<md-content layout-padding>\\n\\t\\t\\t<h2 class=\\\"md-display-1\\\" ng-if=\\\"$ctrl.name\\\">{{ ::$ctrl.name }}</h2>\\n\\t\\t\\t<h2 class=\\\"md-subhead\\\" ng-if=\\\"$ctrl.href\\\"><a ng-href=\\\"{{ ::$ctrl.href }}\\\">Learn more at {{ ::$ctrl.href }} &raquo;</a></h2>\\n\\t\\t\\t<div ng-bind-html=\\\"$ctrl.desc\\\" ng-if=\\\"$ctrl.desc\\\">\\n\\t\\t\\t</div>\\n\\t\\t</md-content>\\n\\t</md-dialog-content>\\n\\t<md-dialog-actions>\\n\\t\\t<md-button ng-click=\\\"$ctrl.viewInTour()\\\" class=\\\"md-primary md-raised\\\" ng-if=\\\"$ctrl.type === 'feature'\\\">\\n\\t\\t\\tView in Virtual Tour\\n\\t\\t</md-button>\\n\\t\\t<md-button ng-click=\\\"$ctrl.viewOnMap()\\\" class=\\\"md-primary md-raised\\\" ng-if=\\\"$ctrl.type === 'hotspot'\\\">\\n\\t\\t\\tView on Campus Map\\n\\t\\t</md-button>\\n\\t\\t<md-button ng-click=\\\"$ctrl.closeDialog()\\\" class=\\\"md-primary\\\">\\n\\t\\t\\tClose\\n\\t\\t</md-button>\\n\\t</md-dialog-actions>\\n</md-dialog>\"\n\n/***/ },\n\n/***/ 357:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _classCallCheck2 = __webpack_require__(323);\n\t\n\tvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\t\n\tvar _createClass2 = __webpack_require__(324);\n\t\n\tvar _createClass3 = _interopRequireDefault(_createClass2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar InfoController = function () {\n\t\tInfoController.$inject = [\"$state\", \"$sce\", \"$mdSidenav\", \"$mdDialog\"];\n\t\tfunction InfoController($state, $sce, $mdSidenav, $mdDialog) {\n\t\t\t'ngInject';\n\t\n\t\t\t(0, _classCallCheck3.default)(this, InfoController);\n\t\t\tthis.$state = $state;\n\t\t\tthis.$sce = $sce;\n\t\t\tthis.$mdSidenav = $mdSidenav;\n\t\t\tthis.$mdDialog = $mdDialog;\n\t\t}\n\t\n\t\t(0, _createClass3.default)(InfoController, [{\n\t\t\tkey: 'closeDialog',\n\t\t\tvalue: function closeDialog() {\n\t\t\t\tthis.$mdDialog.hide();\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'viewOnMap',\n\t\t\tvalue: function viewOnMap() {\n\t\t\t\tthis.$mdDialog.hide();\n\t\t\t\tthis.$state.go('map');\n\t\t\t\tthis.$mdSidenav('right').open();\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'viewInTour',\n\t\t\tvalue: function viewInTour() {\n\t\t\t\tthis.$mdDialog.hide();\n\t\t\t\tthis.$state.go('building');\n\t\t\t\tthis.$mdSidenav('right').close();\n\t\t\t}\n\t\t}]);\n\t\treturn InfoController;\n\t}();\n\t\n\texports.default = InfoController;\n\n/***/ },\n\n/***/ 358:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\t\tvalue: true\n\t});\n\t\n\tvar _angular = __webpack_require__(299);\n\t\n\tvar _angular2 = _interopRequireDefault(_angular);\n\t\n\tvar _angularMaterial = __webpack_require__(310);\n\t\n\tvar _angularMaterial2 = _interopRequireDefault(_angularMaterial);\n\t\n\tvar _login = __webpack_require__(359);\n\t\n\tvar _login2 = _interopRequireDefault(_login);\n\t\n\tvar _login3 = __webpack_require__(360);\n\t\n\tvar _login4 = _interopRequireDefault(_login3);\n\t\n\t__webpack_require__(361);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar loginModule = _angular2.default.module('popup.login', [_angularMaterial2.default]).config([\"$mdDialogProvider\", function ($mdDialogProvider) {\n\t\t\t'ngInject';\n\t\n\t\t\t$mdDialogProvider.addPreset('login', {\n\t\t\t\t\toptions: function options() {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\ttemplate: _login2.default,\n\t\t\t\t\t\t\t\t\tcontroller: _login4.default,\n\t\t\t\t\t\t\t\t\tparent: _angular2.default.element(document.body),\n\t\t\t\t\t\t\t\t\tcontrollerAs: '$ctrl',\n\t\t\t\t\t\t\t\t\tbindToController: true,\n\t\t\t\t\t\t\t\t\tclickOutsideToClose: true,\n\t\t\t\t\t\t\t\t\tescapeToClose: true\n\t\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t});\n\t}]).name;\n\t\n\texports.default = loginModule;\n\n/***/ },\n\n/***/ 359:\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<md-dialog class=\\\"login-message\\\">\\n\\t<md-dialog-content>\\n\\t\\t<div layout=\\\"column\\\" layout-padding>\\n\\t\\t  <div layout=\\\"column\\\" layout-align=\\\"center center\\\" ng-if=\\\"!$ctrl.state.attempt\\\">\\n\\t\\t  \\t<h2>Please sign in</h2>\\n\\t\\t    <md-input-container class=\\\"md-icon-float md-icon-left md-block\\\">\\n\\t\\t      <label>User name</label>\\n\\t\\t      <ng-md-icon icon=\\\"person_outline\\\"></ng-md-icon>\\n\\t\\t      <input ng-model=\\\"$ctrl.username\\\"/>\\n\\t\\t    </md-input-container>\\n\\n\\t\\t    <md-input-container class=\\\"md-icon-float md-icon-left md-block\\\">\\n\\t\\t      <label>Password</label>\\n\\t\\t      <ng-md-icon icon=\\\"lock_outline\\\"></ng-md-icon>\\n\\t\\t      <input ng-model=\\\"$ctrl.password\\\" type=\\\"password\\\">\\n\\t\\t    </md-input-container>\\n\\t\\t    \\n\\t\\t    <md-button class=\\\"md-raised md-primary\\\" ng-click=\\\"$ctrl.login()\\\">Sign in</md-button>\\n\\t\\t  </div>\\n\\n\\t\\t  <div layout=\\\"column\\\" layout-align=\\\"center center\\\" ng-if=\\\"$ctrl.state.attempt && !($ctrl.state.success || $ctrl.state.failed)\\\">\\n\\t\\t\\t  <md-progress-circular md-mode=\\\"indeterminate\\\" md-diameter=\\\"56\\\" style=\\\"margin: 10% auto\\\"></md-progress-circular>\\n\\t\\t  \\t<h2>Logging in, please wait...</h2>\\n\\t\\t  </div>\\n\\t\\t  <div layout=\\\"column\\\" layout-align=\\\"center center\\\" ng-if=\\\"$ctrl.state.attempt && $ctrl.state.success\\\">\\n\\t\\t  \\t<svg class=\\\"checkmark\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 52 52\\\">\\n\\t\\t  \\t\\t<circle class=\\\"checkmark__circle\\\" cx=\\\"26\\\" cy=\\\"26\\\" r=\\\"25\\\" fill=\\\"none\\\"/>\\n\\t\\t  \\t\\t<path class=\\\"checkmark__check\\\" fill=\\\"none\\\" d=\\\"M14.1 27.2l7.1 7.2 16.7-16.8\\\"/>\\n\\t\\t  \\t</svg>\\n\\t\\t  \\t<h2>Logged in successfully!</h2>\\n\\t\\t  </div>\\n\\t\\t  <div layout=\\\"column\\\" layout-align=\\\"center center\\\" ng-if=\\\"$ctrl.state.attempt && $ctrl.state.failed\\\">\\n\\t\\t  \\t<h2>Login failure! Please try again.</h2>\\n\\t\\t  </div>\\n\\t\\t</div>\\n\\t</md-dialog-content>\\n<!-- \\t<md-dialog-actions>\\n\\t\\t<md-button ng-click=\\\"refreshApp()\\\" class=\\\"md-primary md-raised\\\">\\n\\t\\t\\tRefresh page\\n\\t\\t</md-button>\\n\\t\\t<md-button ng-click=\\\"closeDialog()\\\" class=\\\"md-primary\\\">\\n\\t\\t\\tClose and try again\\n\\t\\t</md-button>\\n\\t</md-dialog-actions> -->\\n</md-dialog>\"\n\n/***/ },\n\n/***/ 360:\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tLoginController.$inject = [\"$rootScope\", \"$timeout\", \"$window\", \"$mdDialog\", \"UserAuth\", \"AUTH_EVENTS\"];\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\tfunction LoginController($rootScope, $timeout, $window, $mdDialog, UserAuth, AUTH_EVENTS) {\n\t\t'ngInject';\n\t\n\t\tvar _this = this;\n\t\n\t\tthis.state = {\n\t\t\tattempt: false,\n\t\t\tsuccess: false,\n\t\t\tfailed: false\n\t\t};\n\t\tthis.login = function () {\n\t\t\tif (!_this.state.attempt) {\n\t\t\t\tvar username = _this.username,\n\t\t\t\t    password = _this.password;\n\t\n\t\t\t\tif (!username || !password) return;\n\t\t\t\t_this.state.attempt = true;\n\t\n\t\t\t\tUserAuth.login({ username: username, password: password }).then(function (user) {\n\t\t\t\t\t$rootScope.$broadcast(AUTH_EVENTS.loginSuccess, user);\n\t\t\t\t\t_this.state.success = true;\n\t\t\t\t\t$timeout(function () {\n\t\t\t\t\t\t$mdDialog.hide();\n\t\t\t\t\t}, 2000);\n\t\t\t\t}, function () {\n\t\t\t\t\t$rootScope.$broadcast(AUTH_EVENTS.loginFailed);\n\t\t\t\t\t_this.state.failed = true;\n\t\t\t\t\t$timeout(function () {\n\t\t\t\t\t\t_this.state.attempt = false;\n\t\t\t\t\t}, 2000);\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t\n\t\tthis.logout = function () {\n\t\t\tUserAuth.logout();\n\t\t};\n\t}\n\t\n\texports.default = LoginController;\n\n/***/ },\n\n/***/ 361:\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ },\n\n/***/ 363:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _angular = __webpack_require__(299);\n\t\n\tvar _angular2 = _interopRequireDefault(_angular);\n\t\n\tvar _angularMaterial = __webpack_require__(310);\n\t\n\tvar _angularMaterial2 = _interopRequireDefault(_angularMaterial);\n\t\n\tvar _welcome = __webpack_require__(364);\n\t\n\tvar _welcome2 = _interopRequireDefault(_welcome);\n\t\n\tvar _welcome3 = __webpack_require__(365);\n\t\n\tvar _welcome4 = _interopRequireDefault(_welcome3);\n\t\n\t__webpack_require__(366);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar welcomeModule = _angular2.default.module('popup.welcome', [_angularMaterial2.default]).config([\"$mdDialogProvider\", function ($mdDialogProvider) {\n\t\t'ngInject';\n\t\n\t\t$mdDialogProvider.addPreset('welcome', {\n\t\t\toptions: function options() {\n\t\t\t\treturn {\n\t\t\t\t\ttemplate: _welcome2.default,\n\t\t\t\t\tcontroller: _welcome4.default,\n\t\t\t\t\tparent: _angular2.default.element(document.body),\n\t\t\t\t\tcontrollerAs: '$ctrl',\n\t\t\t\t\tbindToController: true,\n\t\t\t\t\t// targetEvent: ev,\n\t\t\t\t\tclickOutsideToClose: true,\n\t\t\t\t\topenFrom: {\n\t\t\t\t\t\ttop: 18,\n\t\t\t\t\t\tleft: 18,\n\t\t\t\t\t\twidth: 36,\n\t\t\t\t\t\theight: 60\n\t\t\t\t\t},\n\t\t\t\t\tcloseTo: {\n\t\t\t\t\t\ttop: 18,\n\t\t\t\t\t\tleft: 18,\n\t\t\t\t\t\twidth: 36,\n\t\t\t\t\t\theight: 60\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\t\t});\n\t}]).constant('TOUR_STEPS', {\n\t\tconfig: {\n\t\t\tmask: {\n\t\t\t\tvisible: true,\n\t\t\t\tclickThrough: false,\n\t\t\t\tclickExit: true,\n\t\t\t\tscrollThrough: false,\n\t\t\t\tcolor: 'rgba(0,60,113,.7)'\n\t\t\t},\n\t\t\tcontainer: 'body',\n\t\t\tscrollBox: 'body',\n\t\t\tpreviousText: 'Previous',\n\t\t\tnextText: 'Next',\n\t\t\tfinishText: 'Finish',\n\t\t\tanimationDuration: 400,\n\t\t\tdark: true\n\t\t},\n\t\tsteps: [{\n\t\t\ttarget: '#locations',\n\t\t\tplacementPriority: ['top', 'left', 'bottom', 'right'],\n\t\t\tcontent: '<h3>This is the location menu.</h3>UOIT locations can be explored manually using an expanding location menu. <strong>Click this button to open it!</strong>'\n\t\t}, {\n\t\t\ttarget: '#map',\n\t\t\tplacementPriority: ['left', 'top', 'bottom', 'right'],\n\t\t\tcontent: '<h3>Explore locations on the campus map!</h3>The same locations featured above are layed out on an <strong>interactive map, available in this menu</strong>.'\n\t\t}, {\n\t\t\ttarget: '#search',\n\t\t\tplacementPriority: ['left', 'top', 'bottom', 'right'],\n\t\t\tcontent: '<h3>Not sure where to start?</h3>If you have an idea of something you\\'re looking for, <strong>try searching for it</strong>.'\n\t\t}, {\n\t\t\ttarget: '#toolbar-controls',\n\t\t\tplacementPriority: ['bottom', 'left', 'right', 'top'],\n\t\t\tcontent: 'The button toolbar below and to the right can be <strong>expanded, condensed, or hidden entirely</strong> with the buttons to the right-hand side here.<br/><br/>Don\\' forget to <strong>register your user account</strong> for future visits or <strong>book a real tour</strong> at the university!'\n\t\t}, {\n\t\t\ttarget: '#settings',\n\t\t\tplacementPriority: ['left', 'top', 'bottom', 'right'],\n\t\t\tcontent: 'If you want your preferences saved for future visits, you can <strong>configure your own personal settings</strong> for the Virtual Tour experience here!'\n\t\t}, {\n\t\t\t// target: '#aframe-scene',\n\t\t\tplacementPriority: ['bottom', 'top', 'left', 'right'],\n\t\t\tcontent: 'Would you like to learn how to navigate through <strong>scenes</strong>?<br/><div class=\"text-center\" layout-margin><md-button class=\"md-raised md-primary\">Show me how</md-button><md-button>No thanks</md-button></div>'\n\t\t}]\n\t}).constant('WELCOME_TIPS', {\n\t\tnavigation: {\n\t\t\ttitle: ['Learn how to', 'Navigate the Tour!'],\n\t\t\ttips: [{\n\t\t\t\tlabel: 'Scene links',\n\t\t\t\timage: 'images/tip-scene_link.gif',\n\t\t\t\tcontent: '<p class=\"md-body-1\">Around the Tour, you will find many <strong>blue arrows</strong> <ng-md-icon icon=\"near_me\" size=\"14\" style=\"fill:#0077CA\"></ng-md-icon>\\n\\t\\t\\t\\tpointing to different areas. They are called <strong>scene links</strong>; use them to travel.\\n\\t\\t\\t\\t<p class=\"md-body-1\">Move your cursor over a scene link to highlight it, and click it to travel in the\\n\\t\\t\\t\\tdirection it\\'s pointing.'\n\t\t\t}, {\n\t\t\t\tlabel: 'Location menu',\n\t\t\t\timage: 'images/tip-location_menu.gif',\n\t\t\t\tcontent: '<p class=\"md-body-1\">The <ng-md-icon icon=\"pin_drop\" size=\"14\" style=\"fill:#666\"></ng-md-icon> button \\n\\t\\t\\t\\ton the far-right bar opens the <strong>location menu</strong>.</p>\\n\\t\\t\\t\\t<p class=\"md-body-1\">Navigate by picking a location; choose a building to list scenes\\n\\t\\t\\t\\tfrom; click a scene to view it.</p>\\n\\t\\t\\t\\t<p class=\"md-body-1\">Use this menu to jump to a scene or between far-away scenes. Close\\n\\t\\t\\t\\tthe menu by clicking the <ng-md-icon icon=\"pin_drop\" size=\"14\" style=\"fill:#666\"></ng-md-icon> button again.</p>'\n\t\t\t}, {\n\t\t\t\tlabel: 'Campus map',\n\t\t\t\timage: 'images/tip-campus_map.gif',\n\t\t\t\tcontent: '<p class=\"md-body-1\">The Tour\\'s built-in <strong>Campus Map</strong> can be used to navigate the Tour.</p>\\n\\t\\t\\t\\t<p class=\"md-body-1\">The <ng-md-icon icon=\"map\" size=\"14\" style=\"fill:#666\"></ng-md-icon> button \\n\\t\\t\\t\\ton the far-right bar opens the Map.\\n\\t\\t\\t\\t<p class=\"md-body-1\">Choose a building on the map by clicking it; click the <strong>Take a tour \\xBB</strong> button\\n\\t\\t\\t\\tin the building info to go to that building\\'s first scene.'\n\t\t\t}]\n\t\t},\n\t\tpoi: {\n\t\t\ttitle: ''\n\t\t}\n\t}).constant('WELCOME_TIP_LIST', [[{\n\t\ttitle: 'Tour navigation',\n\t\ticon: 'my_location',\n\t\tlink: 'navigation',\n\t\tdesc: 'Learn how to use warp arrows, map view and the location menu to move from scene to scene.'\n\t}, {\n\t\ttitle: 'Points of interest',\n\t\ticon: 'place',\n\t\tlink: '',\n\t\tdesc: 'See which tour elements offer interactivity and how to use them.'\n\t}], [{\n\t\ttitle: 'Virtual reality',\n\t\ticon: '3d_rotation',\n\t\tlink: '',\n\t\tdesc: 'Experience the UOIT virtual tour immersively with an Oculus Rift.'\n\t}, {\n\t\ttitle: 'Mobile VR',\n\t\ticon: 'screen_rotation',\n\t\tlink: '',\n\t\tdesc: 'Turn your smartphone into a portal to UOIT with a mobile VR peripheral like HTC Vive, Samsung Gear or Google Cardboard.'\n\t}, {\n\t\ttitle: 'Customization',\n\t\ticon: 'settings',\n\t\tlink: '',\n\t\tdesc: 'Learn about the options available for fine-tuning the virtual tour interface.'\n\t}]]).name;\n\t// import nzTour from 'nz-tour';\n\t\n\texports.default = welcomeModule;\n\n/***/ },\n\n/***/ 364:\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<md-dialog aria-label=\\\"Welcome to the UOIT Virtual Tour\\\" class=\\\"welcome-dialog\\\">\\n\\t<form>\\n\\t\\t<!-- TOOLBAR / TITLE / CLOSE BUTTON -->\\n\\t\\t<md-toolbar>\\n\\t\\t\\t<div class=\\\"md-toolbar-tools\\\">\\n\\t\\t\\t\\t<h2>UOIT Virtual Tour</h2>\\n\\t\\t\\t\\t<span flex></span>\\n\\t\\t\\t\\t<md-button ng-if=\\\"!$ctrl.currentTips\\\" class=\\\"md-icon-button\\\" ng-click=\\\"$ctrl.cancel()\\\" aria-label=\\\"Close this window\\\">\\n\\t\\t\\t\\t\\t<ng-md-icon\\n\\t\\t\\t\\t\\t\\ticon=\\\"close\\\"\\n\\t\\t\\t\\t\\t\\tstyle=\\\"fill: white;\\\">\\n\\t\\t\\t\\t\\t</ng-md-icon>\\n\\t\\t\\t\\t</md-button>\\n\\t\\t\\t</div>\\n\\t\\t</md-toolbar>\\n\\n\\t\\t<!-- STANDARD: WELCOME TABS DISPLAY -->\\n\\t\\t<md-dialog-content ng-if=\\\"!$ctrl.currentTips\\\">\\n\\t\\t\\t<md-tabs\\n\\t\\t\\t\\tmd-dynamic-height\\n\\t\\t\\t\\tmd-border-bottom\\n\\t\\t\\t\\tmd-center-tabs>\\n\\t\\t\\t\\t<!-- WELCOME -->\\n\\t\\t\\t\\t<md-tab label=\\\"Welcome\\\">\\n\\t\\t\\t\\t\\t<md-content class=\\\"md-padding\\\" layout=\\\"column\\\" layout-align=\\\"start center\\\">\\n<!-- \\t\\t\\t\\t\\t\\t<ng-md-icon\\n\\t\\t\\t\\t\\t\\t\\tclass=\\\"dialog-icon compass-icon\\\"\\n\\t\\t\\t\\t\\t\\t\\ticon=\\\"explore\\\"\\n\\t\\t\\t\\t\\t\\t\\tsize=\\\"90\\\"\\n\\t\\t\\t\\t\\t\\t\\tstyle=\\\"fill: #0077CA;\\\">\\n\\t\\t\\t\\t\\t\\t</ng-md-icon> -->\\n\\t\\t\\t\\t\\t\\t<div class=\\\"dialog-icon compass-icon\\\">\\n\\t\\t\\t\\t\\t\\t\\t<!-- <img src=\\\"images/uoit-shield.svg\\\"> -->\\n\\t\\t\\t\\t\\t\\t\\t<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 68 84.86\\\">\\n\\t\\t\\t\\t\\t\\t\\t  <path d=\\\"M43.82,82.91c-17.6,0-25.67-15.73-25.67-31.62s8.07-31.62,25.67-31.62c13.27,0,21.11,8.93,24.18,20.15L67.94,0H0L0,51C.71,70.93,15.27,84.86,34,84.86a28.57,28.57,0,0,0,10-2Z\\\" style=\\\"fill: #0077ca\\\"/>\\n\\t\\t\\t\\t\\t\\t\\t  <path d=\\\"M43.89,22.17c-14.13,0-15.16,19.16-15.16,29.2s1,29.21,15.16,29.21S59,61.42,59,51.37,58,22.17,43.89,22.17Z\\\" style=\\\"fill: #0077ca\\\"/>\\n\\t\\t\\t\\t\\t\\t\\t</svg>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t<h2 class=\\\"md-display-2\\\">Welcome to the Virtual Tour!</h2>\\n\\t\\t\\t\\t\\t\\t<p class=\\\"md-headline\\\">Experience an immersive 3D visit to the University of Ontario Institute of Technology.</p>\\n\\t\\t\\t\\t\\t\\t<p class=\\\"md-headline\\\">Use the tabs above to learn more about how to use the Virtual Tour, or just dive in!<br/>You'll learn quickly.</p>\\n\\t\\t\\t\\t\\t</md-content>\\n\\t\\t\\t\\t</md-tab>\\n\\t\\t\\t\\t<!-- USAGE TIPS -->\\n\\t\\t\\t\\t<md-tab label=\\\"Usage tips\\\">\\n\\t\\t\\t\\t\\t<md-content class=\\\"md-padding\\\" layout=\\\"column\\\">\\n\\t\\t\\t\\t\\t\\t<div>\\n\\t\\t\\t\\t\\t\\t\\t<ng-md-icon\\n\\t\\t\\t\\t\\t\\t\\t\\tclass=\\\"dialog-icon tips-icon\\\"\\n\\t\\t\\t\\t\\t\\t\\t\\ticon=\\\"live_help\\\"\\n\\t\\t\\t\\t\\t\\t\\t\\tsize=\\\"90\\\"\\n\\t\\t\\t\\t\\t\\t\\t\\tstyle=\\\"fill: #0077CA;\\\">\\n\\t\\t\\t\\t\\t\\t\\t</ng-md-icon>\\n\\t\\t\\t\\t\\t\\t\\t<h2><span class=\\\"md-display-2\\\">Tips</span><br/><span class=\\\"md-headline\\\">for better usage</span></h2>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t<div layout=\\\"row\\\">\\n\\t\\t\\t\\t\\t\\t\\t<md-list flex>\\n\\t\\t\\t\\t\\t\\t\\t\\t<md-subheader class=\\\"md-no-sticky\\\">First steps</md-subheader>\\n\\t\\t\\t\\t\\t\\t\\t\\t<md-divider ></md-divider>\\n\\t\\t\\t\\t\\t\\t\\t\\t<md-list-item class=\\\"md-2-line md-long-text\\\" ng-repeat=\\\"tips in ::$ctrl.welcomeTipsList[0]\\\" ng-click=\\\"$ctrl.viewTip(tips.link)\\\" layout=\\\"row\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<ng-md-icon icon=\\\"{{ ::tips.icon }}\\\" size=\\\"24\\\" style=\\\"fill: #0077CA;\\\"></ng-md-icon>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"md-list-item-text\\\" layout=\\\"column\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<h3>{{ ::tips.title }}</h3>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<p>{{ ::tips.desc }}</p>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t\\t\\t</md-list-item>\\n\\t\\t\\t\\t\\t\\t\\t</md-list>\\n\\t\\t\\t\\t\\t\\t\\t<md-list flex>\\n\\t\\t\\t\\t\\t\\t\\t\\t<md-subheader class=\\\"md-no-sticky\\\">Digging deeper</md-subheader>\\n\\t\\t\\t\\t\\t\\t\\t\\t<md-divider ></md-divider>\\n\\t\\t\\t\\t\\t\\t\\t\\t<md-list-item class=\\\"md-2-line md-long-text\\\" ng-repeat=\\\"tips in ::$ctrl.welcomeTipsList[1]\\\" ng-click=\\\"$ctrl.viewTip(tips.link)\\\" layout=\\\"row\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<ng-md-icon icon=\\\"{{ ::tips.icon }}\\\" size=\\\"24\\\" style=\\\"fill: #0077CA;\\\"></ng-md-icon>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"md-list-item-text\\\" layout=\\\"column\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<h3>{{ ::tips.title }}</h3>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<p>{{ ::tips.desc }}</p>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t\\t\\t</md-list-item>\\n\\t\\t\\t\\t\\t\\t\\t</md-list>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</md-content>\\n\\t\\t\\t\\t</md-tab>\\n\\t\\t\\t\\t<!-- ACCESSIBILITY -->\\n\\t\\t\\t\\t<md-tab label=\\\"Accessibility\\\">\\n\\t\\t\\t\\t\\t<md-content class=\\\"md-padding\\\" layout=\\\"column\\\">\\n\\t\\t\\t\\t\\t\\t<div>\\n\\t\\t\\t\\t\\t\\t\\t<ng-md-icon\\n\\t\\t\\t\\t\\t\\t\\t\\tclass=\\\"dialog-icon access-icon\\\"\\n\\t\\t\\t\\t\\t\\t\\t\\ticon=\\\"accessibility\\\"\\n\\t\\t\\t\\t\\t\\t\\t\\tsize=\\\"90\\\"\\n\\t\\t\\t\\t\\t\\t\\t\\tstyle=\\\"fill: #0077CA;\\\">\\n\\t\\t\\t\\t\\t\\t\\t</ng-md-icon>\\n\\t\\t\\t\\t\\t\\t\\t<h2><span class=\\\"md-display-2\\\">Accessibility</span><br/><span class=\\\"md-headline\\\">information</span></h2>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</md-content>\\n\\t\\t\\t\\t</md-tab>\\n\\t\\t\\t</md-tabs>\\n\\t\\t</md-dialog-content>\\n\\n\\t\\t<!-- INCLUDE: ACTIVE TIP DISPLAY -->\\n\\t\\t<md-dialog-content ng-if=\\\"$ctrl.currentTips\\\">\\n\\t\\t\\t<div layout layout-align=\\\"center center\\\">\\n\\t\\t\\t\\t<md-button class=\\\"md-primary\\\" ng-click=\\\"$ctrl.currentTips = false\\\"> Go back</md-button>\\n\\t\\t\\t</div>\\n\\t\\t\\t<div>\\n\\t\\t\\t\\t<h2 layout-padding>\\n\\t\\t\\t\\t\\t<span class=\\\"md-headline\\\">{{ ::$ctrl.currentTips.title[0] }}</span><br/>\\n\\t\\t\\t\\t\\t<span class=\\\"md-display-2\\\">{{ ::$ctrl.currentTips.title[1] }}</span>\\n\\t\\t\\t\\t</h2>\\n\\t\\t\\t</div>\\n\\t\\t\\t<md-tabs\\n\\t\\t\\t\\tmd-dynamic-height\\n\\t\\t\\t\\tmd-border-bottom\\n\\t\\t\\t\\tmd-center-tabs\\n\\t\\t\\t\\tmd-selected=\\\"$ctrl.activeTip\\\">\\n\\t\\t\\t\\t<!-- md-stretch-tabs=\\\"always\\\" -->\\n\\n\\t\\t\\t  <md-tab ng-repeat=\\\"tip in ::$ctrl.currentTips.tips\\\" label=\\\"{{ ::tip.label }}\\\">\\n\\t\\t\\t    <md-content layout=\\\"column\\\"> \\n\\t\\t\\t\\t    <div layout=\\\"row\\\" layout-padding> \\n\\t\\t\\t\\t\\t  \\t<div bind-html-compile compile=\\\"::tip.content\\\" layout=\\\"column\\\" layout-align=\\\"center center\\\" flex>\\n\\t\\t\\t\\t\\t  \\t</div>\\n\\t\\t\\t\\t\\t  \\t<img ng-src=\\\"{{ ::tip.image }}\\\" flex>\\n\\t\\t\\t\\t  \\t</div>\\n\\t\\t\\t    </md-content>\\n\\t\\t\\t  </md-tab>\\n\\t\\t\\t</md-tabs>\\n\\t\\t</md-dialog-content>\\n\\n\\t\\t<!-- TIP DISPLAY PREV/NEXT BUTTONS -->\\n\\t\\t<md-dialog-actions ng-if=\\\"$ctrl.currentTips\\\" layout layout-align=\\\"space-between center\\\">\\n\\t\\t\\t<md-button class=\\\"md-primary\\\" ng-click=\\\"$ctrl.prevTip()\\\"> Previous</md-button>\\n\\t\\t\\t<md-button class=\\\"md-primary\\\" ng-click=\\\"$ctrl.nextTip()\\\">Next </md-button>\\n\\t\\t</md-dialog-actions>\\n\\t\\t\\n\\t\\t<!-- WELCOME TOUR/DISMISSAL -->\\n\\t\\t<md-dialog-actions layout=\\\"row\\\" class=\\\"footer-pane\\\" ng-if=\\\"!$ctrl.currentTips\\\">\\n\\t\\t\\t<md-checkbox class=\\\"md-primary\\\" aria-label=\\\"Permanently dismiss this dialog\\\" md-autofocus ng-model=\\\"$ctrl.showWelcome\\\" ng-true-value=\\\"false\\\" ng-false-value=\\\"true\\\" ng-change=\\\"$ctrl.syncSettings()\\\">\\n\\t\\t\\t\\t<strong>Don't show me this again</strong>\\n\\t\\t\\t</md-checkbox>\\n\\t\\t\\t<span flex></span>\\n\\t\\t\\t<md-button class=\\\"md-raised md-primary\\\" ng-click=\\\"$ctrl.startTour()\\\">\\n\\t\\t\\t\\tTake an interactive tour\\n\\t\\t\\t</md-button>\\n\\t\\t\\t<md-button class=\\\"md-primary\\\" ng-click=\\\"$ctrl.hide()\\\" style=\\\"margin-right:20px;\\\" >\\n\\t\\t\\t\\tNo thanks\\n\\t\\t\\t</md-button>\\n\\t\\t</md-dialog-actions>\\n\\t</form>\\n</md-dialog>\"\n\n/***/ },\n\n/***/ 365:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _classCallCheck2 = __webpack_require__(323);\n\t\n\tvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\t\n\tvar _createClass2 = __webpack_require__(324);\n\t\n\tvar _createClass3 = _interopRequireDefault(_createClass2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t/**\n\t * This controller manages a welcome dialog created by the `$mdDialog`\n\t * service, which the user is presented with when the application first\n\t * launches (if their preferences include the welcome window).\n\t *\n\t * It contains wrapper methods for `$mdDialog`'s injected utility methods\n\t * (hide/cancel), as well as methods for initializing the onboard tutorial\n\t * and syncing user settings (e.g. when user dismisses welcome dialog).\n\t *\n\t * @param  {object} $mdDialog   ng-material's dialog service\n\t * @param  {object} UserSession The current user session/settings\n\t * @param  {object} nzTour      Onboard tour service\n\t * @param  {object} TOUR_STEPS  Configuration of onboard tour\n\t */\n\tvar WelcomeController = function () {\n\t  /**\n\t   * Initializes dialog's dependencies.\n\t   */\n\t  WelcomeController.$inject = [\"$mdDialog\", \"UserSession\", \"TOUR_STEPS\", \"WELCOME_TIP_LIST\", \"WELCOME_TIPS\"];\n\t  function WelcomeController($mdDialog, UserSession, TOUR_STEPS, WELCOME_TIP_LIST, WELCOME_TIPS) {\n\t    //nzTour, \n\t    'ngInject';\n\t\n\t    (0, _classCallCheck3.default)(this, WelcomeController);\n\t    this.$mdDialog = $mdDialog;\n\t    this.UserSession = UserSession;\n\t    this.OnboardTour = function () {\n\t      return alert('fix me!');\n\t    }; //nzTour\n\t    this.TOUR_STEPS = TOUR_STEPS;\n\t    this.WELCOME_TIPS = WELCOME_TIPS;\n\t\n\t    this.welcomeTipsList = WELCOME_TIP_LIST;\n\t    this.currentTips = false;\n\t  }\n\t\n\t  /**\n\t   * Hides the dialog; fulfills promise.\n\t   * @return {Promise} Promise that will be fulfilled on hide\n\t   */\n\t\n\t\n\t  (0, _createClass3.default)(WelcomeController, [{\n\t    key: 'hide',\n\t    value: function hide() {\n\t      return this.$mdDialog.hide();\n\t    }\n\t\n\t    /**\n\t     * Cancels the dialog; rejects promise.\n\t     * @return {Promise} Promise that will be rejected on cancel\n\t     */\n\t\n\t  }, {\n\t    key: 'cancel',\n\t    value: function cancel() {\n\t      return this.$mdDialog.cancel();\n\t    }\n\t\n\t    /**\n\t     * Hides the dialog, providing an answer to resolve its promise with.\n\t     * @param  {string} answer The result of the dialog upon hide\n\t     * @return {Promise}       Promise containing the resolved answer\n\t     */\n\t\n\t  }, {\n\t    key: 'answer',\n\t    value: function answer(_answer) {\n\t      return this.$mdDialog.hide(_answer);\n\t    }\n\t\n\t    /**\n\t     * Changes the active view of the dialog, e.g. \"user tips\" detail panels. \n\t     * @param  {string} view The view to transition to\n\t     */\n\t\n\t  }, {\n\t    key: 'viewTip',\n\t    value: function viewTip(tip) {\n\t      console.log(this.WELCOME_TIPS[tip]);\n\t      this.currentTips = this.WELCOME_TIPS[tip];\n\t    }\n\t  }, {\n\t    key: 'nextTip',\n\t    value: function nextTip() {\n\t      this.activeTip = this.activeTip === this.currentTips.tips.length - 1 ? 0 : this.activeTip + 1;\n\t    }\n\t  }, {\n\t    key: 'prevTip',\n\t    value: function prevTip() {\n\t      this.activeTip = this.activeTip === 0 ? this.currentTips.tips.length - 1 : this.activeTip - 1;\n\t    }\n\t\n\t    /**\n\t     * Hides the dialog with the answer `'tour'` and begins the onboard tour\n\t     * using the `TOUR_STEPS` as a config object.\n\t     * @return {Promise} Promise representing tour completion\n\t     */\n\t\n\t  }, {\n\t    key: 'startTour',\n\t    value: function startTour() {\n\t      this.$mdDialog.hide('tour');\n\t      return this.OnboardTour.start(this.TOUR_STEPS);\n\t    }\n\t\n\t    /**\n\t     * Performs a fromtofrom assignment of user settings to force a sync\n\t     * with the setter. Ensures that the dialog's 'Do not show this message again'\n\t     * checkbox affects the user's settings.\n\t     */\n\t\n\t  }, {\n\t    key: 'syncSettings',\n\t    value: function syncSettings() {\n\t      var currentSettings = this.UserSession.settings;\n\t      currentSettings.showWelcome.val = this.showWelcome;\n\t      this.UserSession.settings = currentSettings;\n\t    }\n\t  }]);\n\t  return WelcomeController;\n\t}();\n\t\n\texports.default = WelcomeController;\n\n/***/ },\n\n/***/ 366:\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ },\n\n/***/ 368:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _classCallCheck2 = __webpack_require__(323);\n\t\n\tvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\t\n\tvar _createClass2 = __webpack_require__(324);\n\t\n\tvar _createClass3 = _interopRequireDefault(_createClass2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar PopupService = function () {\n\t\tPopupService.$inject = [\"$mdDialog\", \"$mdToast\", \"$mdMedia\"];\n\t\tfunction PopupService($mdDialog, $mdToast, $mdMedia) {\n\t\t\t'ngInject';\n\t\n\t\t\t(0, _classCallCheck3.default)(this, PopupService);\n\t\t\tthis.$mdDialog = $mdDialog;\n\t\t\tthis.$mdToast = $mdToast;\n\t\t\tthis.$mdMedia = $mdMedia;\n\t\t\tthis.standardToast = $mdToast.simple().action('Dismiss').hideDelay(5000).highlightAction(true).highlightClass('md-warn').position('bottom left');\n\t\t}\n\t\n\t\t(0, _createClass3.default)(PopupService, [{\n\t\t\tkey: 'welcome',\n\t\t\tvalue: function welcome() {\n\t\t\t\treturn this.$mdDialog.show(this.$mdDialog.welcome());\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'login',\n\t\t\tvalue: function login() {\n\t\t\t\treturn this.$mdDialog.show(this.$mdDialog.login());\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'info',\n\t\t\tvalue: function info() {\n\t\t\t\tvar _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n\t\t\t\t    _ref$locals = _ref.locals,\n\t\t\t\t    locals = _ref$locals === undefined ? null : _ref$locals;\n\t\n\t\t\t\treturn this.$mdDialog.show(this.$mdDialog.info({ locals: locals }));\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'toast',\n\t\t\tvalue: function toast() {\n\t\t\t\tvar type = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'primary';\n\t\t\t\tvar _ref2 = arguments[1];\n\t\t\t\tvar message = _ref2.message,\n\t\t\t\t    _ref2$action = _ref2.action,\n\t\t\t\t    action = _ref2$action === undefined ? 'Dismiss' : _ref2$action;\n\t\n\t\t\t\tvar toast = this.standardToast.textContent(message).action(action).highlightClass('md-' + type);\n\t\t\t\treturn this.$mdToast.show(toast);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'error',\n\t\t\tvalue: function error() {\n\t\t\t\tvar _ref3 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n\t\t\t\t    _ref3$locals = _ref3.locals,\n\t\t\t\t    locals = _ref3$locals === undefined ? null : _ref3$locals;\n\t\n\t\t\t\treturn this.$mdDialog.show(this.$mdDialog.error({ locals: locals }));\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'warning',\n\t\t\tvalue: function warning() {\n\t\t\t\tvar _ref4 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n\t\t\t\t    _ref4$locals = _ref4.locals,\n\t\t\t\t    locals = _ref4$locals === undefined ? { message: 'An unknown error occurred!', action: 'Dismiss' } : _ref4$locals;\n\t\n\t\t\t\tvar toast = this.standardToast.textContent(locals.message || 'An unknown error occurred!').action(locals.action || 'Dismiss').position('bottom right');\n\t\t\t\treturn this.$mdToast.show(toast);\n\t\t\t}\n\t\t}]);\n\t\treturn PopupService;\n\t}();\n\t\n\texports.default = PopupService;\n\n/***/ },\n\n/***/ 369:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _angular = __webpack_require__(299);\n\t\n\tvar _angular2 = _interopRequireDefault(_angular);\n\t\n\tvar _angularMaterial = __webpack_require__(310);\n\t\n\tvar _angularMaterial2 = _interopRequireDefault(_angularMaterial);\n\t\n\tvar _titlebar = __webpack_require__(370);\n\t\n\tvar _titlebar2 = _interopRequireDefault(_titlebar);\n\t\n\tvar _titlebarButton = __webpack_require__(374);\n\t\n\tvar _titlebarButton2 = _interopRequireDefault(_titlebarButton);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar titleBarModule = _angular2.default.module('titlebar', [_angularMaterial2.default]).component('titleBar', _titlebar2.default).directive('titleBarButton', _titlebarButton2.default).constant('TITLEBAR_OPTS', {\n\t\tregister: {\n\t\t\tactive: true,\n\t\t\tlabel: 'Register now',\n\t\t\ttooltip: false,\n\t\t\ticon: ['person_outline', 'person_outline'],\n\t\t\tclass: 'cta-button bg-pink'\n\t\t},\n\t\tschedule: {\n\t\t\tactive: true,\n\t\t\tlabel: 'Schedule visit',\n\t\t\ttooltip: false,\n\t\t\ticon: ['add_alarm', 'add_alarm'],\n\t\t\tclass: 'cta-button bg-green'\n\t\t},\n\t\tapply: {\n\t\t\tactive: true,\n\t\t\tlabel: 'Apply online',\n\t\t\ttooltip: false,\n\t\t\ticon: ['bookmark_outline', 'bookmark_outline'],\n\t\t\tclass: 'cta-button bg-orange'\n\t\t},\n\t\tcondense: {\n\t\t\tactive: true,\n\t\t\tlabel: 'Toolbar size',\n\t\t\ttooltip: ['Expand toolbar', 'Condense toolbar'],\n\t\t\ticon: ['flip_to_front', 'flip_to_back']\n\t\t},\n\t\tright: {\n\t\t\tactive: true,\n\t\t\tlabel: 'Toolbar visibility',\n\t\t\ttooltip: ['Hide toolbar', 'Show toolbar'],\n\t\t\ticon: ['last_page', 'first_page']\n\t\t}\n\t}).name;\n\t\n\texports.default = titleBarModule;\n\n/***/ },\n\n/***/ 370:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _titlebar = __webpack_require__(371);\n\t\n\tvar _titlebar2 = _interopRequireDefault(_titlebar);\n\t\n\t__webpack_require__(372);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar titleBarComponent = {\n\t  template: _titlebar2.default,\n\t  transclude: true,\n\t  bindings: {\n\t    title: '@',\n\t    mobile: '<'\n\t  }\n\t};\n\t\n\texports.default = titleBarComponent;\n\n/***/ },\n\n/***/ 371:\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<md-toolbar class=\\\"md-accent md-hue-1 title-bar\\\" layout=\\\"row\\\" ng-class=\\\"{'is-mobile' : $ctrl.mobile.screen}\\\">\\n\\n  <md-toolbar-filler flex=\\\"nogrow\\\" layout layout-align=\\\"start center\\\" layout-align-gt-sm=\\\"center center\\\">\\n<!--     <img ui-sref=\\\"home\\\" src=\\\"images/uoit-shield.svg\\\" alt=\\\"University of Ontario Institute of Technology\\\" class=\\\"logo-shield\\\" id=\\\"uoit_logo\\\"> -->\\n    <svg ui-sref=\\\"home\\\" alt=\\\"University of Ontario Institute of Technology\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 68 84.86\\\" class=\\\"logo-shield\\\" id=\\\"uoit_logo\\\" preserveAspectRatio=\\\"xMaxYMax meet\\\">\\n\\t\\t  <path d=\\\"M43.82,82.91c-17.6,0-25.67-15.73-25.67-31.62s8.07-31.62,25.67-31.62c13.27,0,21.11,8.93,24.18,20.15L67.94,0H0L0,51C.71,70.93,15.27,84.86,34,84.86a28.57,28.57,0,0,0,10-2Z\\\"/>\\n\\t\\t  <path d=\\\"M43.89,22.17c-14.13,0-15.16,19.16-15.16,29.2s1,29.21,15.16,29.21S59,61.42,59,51.37,58,22.17,43.89,22.17Z\\\"/>\\n\\t\\t</svg>\\n  </md-toolbar-filler>\\n\\n  <div class=\\\"md-toolbar-tools\\\" ng-if=\\\"!$ctrl.mobile.screen\\\">\\n    <h1 ui-sref=\\\"locations\\\">{{::$ctrl.title}} <small class=\\\"beta-label\\\">BETA</small></h1>\\n    <span flex></span>\\n    <ng-transclude id=\\\"toolbar-controls\\\" layout layout-align=\\\"center center\\\"></ng-transclude>\\n  </div>\\n\\n</md-toolbar>\"\n\n/***/ },\n\n/***/ 372:\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ },\n\n/***/ 374:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\ttitleBarButtonDirective.$inject = [\"$log\"];\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _titlebarButton = __webpack_require__(375);\n\t\n\tvar _titlebarButton2 = _interopRequireDefault(_titlebarButton);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction titleBarButtonDirective($log) {\n\t  'ngInject';\n\t\n\t  return {\n\t    template: _titlebarButton2.default,\n\t    require: '^titleBar',\n\t    scope: {\n\t      onClick: '&',\n\t      label: '@',\n\t      class: '@',\n\t      active: '<',\n\t      tooltip: '<',\n\t      icon: '<'\n\t    }\n\t  };\n\t}\n\t\n\texports.default = titleBarButtonDirective;\n\n/***/ },\n\n/***/ 375:\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<md-button\\n\\tclass=\\\"icon-button {{ ::class }}\\\"\\n\\tng-click=\\\"onClick()\\\"\\n\\tng-class=\\\"{ 'active': active }\\\"\\n\\taria-label=\\\"{{ ::label }}\\\">\\n  <ng-md-icon\\n  \\ticon=\\\"{{ active ? icon[0] || icon : icon[1] || icon }}\\\"\\n  \\tstyle=\\\"fill: currentColor;\\\">\\n  </ng-md-icon>\\n  <md-tooltip md-direction=\\\"bottom\\\" md-autohide ng-if=\\\"tooltip && !(mc.mobile||!$ctrl.settings.showHints.val)\\\">\\n    {{ active ? (tooltip[0] || tooltip) : (tooltip[1] || tooltip) }}\\n  </md-tooltip>\\n\\t<span ng-if=\\\"::(!tooltip)\\\">{{ ::label }}</span>\\n</md-button>\"\n\n/***/ },\n\n/***/ 376:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _angular = __webpack_require__(299);\n\t\n\tvar _angular2 = _interopRequireDefault(_angular);\n\t\n\tvar _angularUiRouter = __webpack_require__(301);\n\t\n\tvar _angularUiRouter2 = _interopRequireDefault(_angularUiRouter);\n\t\n\tvar _userAuth = __webpack_require__(377);\n\t\n\tvar _userAuth2 = _interopRequireDefault(_userAuth);\n\t\n\tvar _userResolver = __webpack_require__(416);\n\t\n\tvar _userResolver2 = _interopRequireDefault(_userResolver);\n\t\n\tvar _userSession = __webpack_require__(417);\n\t\n\tvar _userSession2 = _interopRequireDefault(_userSession);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar userModule = _angular2.default.module('user', [_angularUiRouter2.default]).factory('UserAuth', _userAuth2.default).factory('UserResolver', _userResolver2.default).service('UserSession', _userSession2.default).constant('USER_DEFAULTS', {\n\t  settings: {\n\t    toolbarOpen: {\n\t      val: true,\n\t      label: 'Toolbar open by default',\n\t      icon: 'last_page'\n\t    },\n\t    toolbarCondensed: {\n\t      val: false,\n\t      label: 'Toolbar condensed by default',\n\t      icon: 'flip_to_back'\n\t    },\n\t    showHints: {\n\t      val: true,\n\t      label: 'Show hint messages',\n\t      icon: 'announcement'\n\t    },\n\t    showWelcome: {\n\t      val: true,\n\t      label: 'Always show welcome',\n\t      icon: 'live_tv'\n\t    }\n\t  },\n\t  usage: {\n\t    auto: {\n\t      val: true\n\t    },\n\t    compression: {\n\t      val: 1,\n\t      min: 1,\n\t      max: 5,\n\t      step: 1,\n\t      label: 'Compression level',\n\t      labels: ['Less', 'More'],\n\t      levels: {\n\t        // [imageQual, loadTime, dataUse] / 0=low, 10=high\n\t        '<= 2': [10, 5, 10],\n\t        '== 3': [5, 5, 5],\n\t        '>= 4': [0, 10, 0]\n\t      }\n\t    },\n\t    preloading: {\n\t      val: 0,\n\t      min: 0,\n\t      max: 2,\n\t      step: 1,\n\t      label: 'Preloading strategy',\n\t      labels: ['None', 'Proactive'],\n\t      levels: {\n\t        // [imageQual, loadTime, dataUse] / 0=low, 10=high\n\t        '== 0': [5, 10, 0], //no preload\n\t        '== 1': [5, 5, 5], //preload\n\t        '== 2': [5, 0, 5] //preload & keep last\n\t      }\n\t    },\n\t    // cache: {\n\t    // \tval: 0,\n\t    // \tmin: 0,\n\t    // \tmax: 250,\n\t    // \tstep: 25,\n\t    // \tlabel: 'Cache control',\n\t    // \tlabels: ['No cache', '250MB'],\n\t    // \tlevels: [\n\t    // \t]\n\t    // },\n\t    resolution: {\n\t      val: 1,\n\t      min: 0,\n\t      max: 1,\n\t      step: 1,\n\t      label: 'Image resolution',\n\t      labels: ['Low', 'High'],\n\t      levels: {\n\t        // [imageQual, loadTime, dataUse] / 0=low, 10=high\n\t        '== 0': [0, 0, 0], //low-res\n\t        '== 1': [10, 5, 10] }\n\t    }\n\t  },\n\t  profiles: {\n\t    conserve: {\n\t      auto: { val: true },\n\t      compression: { val: 5 },\n\t      preloading: { val: 0 },\n\t      resolution: { val: 0 }\n\t    },\n\t    balanced: {\n\t      auto: { val: true },\n\t      compression: { val: 3 },\n\t      preloading: { val: 1 },\n\t      resolution: { val: 1 }\n\t    },\n\t    mobile3g: {\n\t      auto: { val: true },\n\t      compression: { val: 4 },\n\t      preloading: { val: 1 },\n\t      resolution: { val: 0 }\n\t    },\n\t    mobileWifi: {\n\t      auto: { val: true },\n\t      compression: { val: 2 },\n\t      preloading: { val: 1 },\n\t      resolution: { val: 0 }\n\t    },\n\t    desktopSlow: {\n\t      auto: { val: true },\n\t      compression: { val: 5 },\n\t      preloading: { val: 2 },\n\t      resolution: { val: 1 }\n\t    },\n\t    desktopFast: {\n\t      auto: { val: true },\n\t      compression: { val: 1 },\n\t      preloading: { val: 2 },\n\t      resolution: { val: 1 }\n\t    }\n\t  }\n\t}).constant('USER_ROLES', {\n\t  admin: 'admin',\n\t  editor: 'editor',\n\t  contributor: 'contributor'\n\t}).constant('AUTH_EVENTS', {\n\t  loginSuccess: 'auth-login-success',\n\t  loginFailed: 'auth-login-failed',\n\t  logoutSuccess: 'auth-logout-success',\n\t  sessionTimeout: 'auth-session-timeout',\n\t  notAuthenticated: 'auth-not-authenticated',\n\t  notAuthorized: 'auth-not-authorized'\n\t}).name;\n\t\n\texports.default = userModule;\n\n/***/ },\n\n/***/ 377:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tUserAuthFactory.$inject = [\"$http\", \"UserSession\"];\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _getIterator2 = __webpack_require__(378);\n\t\n\tvar _getIterator3 = _interopRequireDefault(_getIterator2);\n\t\n\tvar _angular = __webpack_require__(299);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t/**\n\t * Factory constructor function to provide authentication\n\t * details to app on runtime.\n\t *\n\t * Contains methods for login/logout, as well as a check\n\t * at initialization to determine if the server already\n\t * has an active user session. It also has utility methods\n\t * for determining the status of authorization.\n\t * \n\t * @param {object} $http       Angular's $http service\n\t * @param {object} UserSession The user session object/factory\n\t */\n\tfunction UserAuthFactory($http, UserSession) {\n\t  'ngInject';\n\t\n\t  /**\n\t   * Wrapper function for the `UserSession.create()`.\n\t   * \n\t   * @param  {object} user User object from db\n\t   * @return {object}      User stored into session\n\t   */\n\t\n\t  var _this = this;\n\t\n\t  this.createSession = function (user) {\n\t    console.log('starting session creation...');\n\t    return UserSession.create(user);\n\t  };\n\t\n\t  /**\n\t   * Sends a small check to the server with `$http.get()` to\n\t   * determine if there is already an active user session.\n\t   *\n\t   * Creates a session with the returned user; creates a blank\n\t   * session by calling `createSesstion(false)` if no user (403)\n\t   * is returned.\n\t   * \n\t   * @return {Promise} Promise that will resolve to a user session\n\t   */\n\t  this.initAuth = function () {\n\t    console.log('checking for user...');\n\t    return $http.get('/user/me').then(function (res) {\n\t      console.log('user found');\n\t      return _this.createSession(res.data.user);\n\t    }).catch(function (err) {\n\t      console.log('user not found');\n\t      return _this.createSession(false);\n\t    });\n\t  };\n\t  // TODO: RETURN A BETTER VERSION OF THIS PROMISE? PROMISE FROM CREATESESSION?\n\t\n\t  /**\n\t   * Logs a user in with a username and password.\n\t   * @param  {string} $0.username The user's email\n\t   * @param  {string} $0.password User's keystone password\n\t   * @return {Promise}            Promise that will resolve to a user session\n\t   */\n\t  this.login = function (_ref) {\n\t    var username = _ref.username,\n\t        password = _ref.password;\n\t\n\t    return $http.post('/user/signin', { username: username, password: password }).then(function (res) {\n\t      return _this.createSession(res.data.user);\n\t    });\n\t  };\n\t  // TODO: REJECTION HANDLING\n\t\n\t  /**\n\t   * Logs a user out.\n\t   * \n\t   * @return {Promise} Promise that destroys session when resolved\n\t   */\n\t  this.logout = function () {\n\t    return $http.post('/user/signout').then(function (res) {\n\t      UserSession.destroy();\n\t      console.log('user logged out');\n\t    }, function (error) {\n\t      console.log('error, user not logged out');\n\t    });\n\t  };\n\t  // TODO: REJECTION HANDLING\n\t\n\t  /**\n\t   * Utility method to tell whether a user is authenticated\n\t   * with a username and password (only authenticated sessions)\n\t   * have a userId.\n\t   * \n\t   * @return {string} User _id field\n\t   */\n\t  this.isAuthenticated = function () {\n\t    return !!UserSession.userId;\n\t  };\n\t\n\t  /**\n\t   * Utility method to check the current authorized user's\n\t   * roles in the the application.\n\t   *\n\t   * If there are no `authorizedRoles` speficied for the context,\n\t   * it is public/allowed and the method can return true. If there\n\t   * are roles specified, they are forced into an array (if not\n\t   * already) and checked against the array of roles attached to\n\t   * the current user session.\n\t   *\n\t   * If the user's roles contain a role that is in the `authorizedRoles`\n\t   * list, a flag that the user is authorized is set. If the user is\n\t   * still authenticated and is also authorized, the method can\n\t   * return true.\n\t   * \n\t   * @param  {[Array<String>]|[String]} authorizedRoles A list of roles allowed\n\t   * @return {Boolean}                 \t\t\t\t\t\t\t\t\tWhether user is allowed\n\t   */\n\t  this.isAuthorized = function (authorizedRoles) {\n\t    if (!authorizedRoles || authorizedRoles.length === 0) return true;\n\t\n\t    if (!(0, _angular.isArray)(authorizedRoles)) {\n\t      authorizedRoles = [authorizedRoles];\n\t    }\n\t\n\t    var isAuthorized = false;\n\t    var _iteratorNormalCompletion = true;\n\t    var _didIteratorError = false;\n\t    var _iteratorError = undefined;\n\t\n\t    try {\n\t      for (var _iterator = (0, _getIterator3.default)(UserSession.roles), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t        var role = _step.value;\n\t\n\t        if (authorizedRoles.indexOf(role) !== -1) {\n\t          isAuthorized = true;\n\t        }\n\t      }\n\t    } catch (err) {\n\t      _didIteratorError = true;\n\t      _iteratorError = err;\n\t    } finally {\n\t      try {\n\t        if (!_iteratorNormalCompletion && _iterator.return) {\n\t          _iterator.return();\n\t        }\n\t      } finally {\n\t        if (_didIteratorError) {\n\t          throw _iteratorError;\n\t        }\n\t      }\n\t    }\n\t\n\t    return _this.isAuthenticated() && isAuthorized;\n\t  };\n\t\n\t  return this;\n\t}\n\t\n\texports.default = UserAuthFactory;\n\n/***/ },\n\n/***/ 416:\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\tfunction UserResolverFactory($q, $rootScope, $state, UserSession) {\n\t  return {\n\t    resolve: function resolve() {\n\t      var deferred = $q.defer();\n\t      var unwatch = $rootScope.$watch(function () {\n\t        return UserSession.user;\n\t      }, function (currentUser) {\n\t        if (angular.isDefined(currentUser)) {\n\t          if (currentUser) {\n\t            deferred.resolve(currentUser);\n\t          } else {\n\t            deferred.reject();\n\t            $state.go('login');\n\t          }\n\t          unwatch();\n\t        }\n\t      });\n\t      return deferred.promise;\n\t    }\n\t  };\n\t}\n\t\n\texports.default = UserResolverFactory;\n\n/***/ },\n\n/***/ 417:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _keys = __webpack_require__(418);\n\t\n\tvar _keys2 = _interopRequireDefault(_keys);\n\t\n\tvar _classCallCheck2 = __webpack_require__(323);\n\t\n\tvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\t\n\tvar _createClass2 = __webpack_require__(324);\n\t\n\tvar _createClass3 = _interopRequireDefault(_createClass2);\n\t\n\tvar _angular = __webpack_require__(299);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t/**\n\t * User session management service.\n\t */\n\tvar UserSessionService = function () {\n\t\tUserSessionService.$inject = [\"$http\", \"$popupWindow\", \"SettingsFactory\", \"USER_ROLES\", \"USER_DEFAULTS\"];\n\t\tfunction UserSessionService($http, $popupWindow, SettingsFactory, USER_ROLES, USER_DEFAULTS) {\n\t\t\t'ngInject';\n\t\n\t\t\t(0, _classCallCheck3.default)(this, UserSessionService);\n\t\t\tthis.$http = $http;\n\t\t\tthis.$popupWindow = $popupWindow;\n\t\t\tthis.SettingsFactory = SettingsFactory;\n\t\n\t\t\tthis._roles = USER_ROLES;\n\t\t\tthis._settings = USER_DEFAULTS.settings;\n\t\t\tthis._usage = USER_DEFAULTS.usage;\n\t\n\t\t\tthis.user = {};\n\t\t}\n\t\t/**\n\t  * This function creates a new user session, which is\n\t  * necessary to store application settings regardless of\n\t  * whether there is a \"real\" user logged in. If there is\n\t  * a user, the UserSession service will:\n\t  * \n\t  * - set the `userId` property to indicate an active user\n\t  * - read user roles based on their boolean values on user\n\t  * - push role strings into a `roles` property on UserSession\n\t  * \n\t  * If not, the service checks for local settings and inits\n\t  * a \"blank\" user with those settings (or the app defaults).\n\t  * \n\t  * @param  {Object} user DB user object to use for session\n\t  * @return {Object}      Fully-formed user object after settings\n\t  */\n\t\n\t\n\t\t(0, _createClass3.default)(UserSessionService, [{\n\t\t\tkey: 'create',\n\t\t\tvalue: function create(user) {\n\t\t\t\tthis.roles = [];\n\t\t\t\tif (user) {\n\t\t\t\t\tthis.userId = user._id;\n\t\t\t\t\tthis.user = user;\n\t\n\t\t\t\t\tvar isAdmin = user.isAdmin,\n\t\t\t\t\t    isEditor = user.isEditor,\n\t\t\t\t\t    isContributor = user.isContributor;\n\t\n\t\t\t\t\tisAdmin && this.roles.push(this._roles.admin);\n\t\t\t\t\tisEditor && this.roles.push(this._roles.editor);\n\t\t\t\t\tisContributor && this.roles.push(this._roles.Contributor);\n\t\n\t\t\t\t\tconsole.log('created session from user');\n\t\t\t\t} else {\n\t\t\t\t\t/**\n\t     * Looks inside SettingsFactory for user data matching the pattern\n\t     * defined in USER_DEFAULTS; store in temporary vars.\n\t     *\n\t     * @alias _settings/_usage\n\t     * @memberof UserSession\n\t     */\n\t\t\t\t\tvar _settings = this.SettingsFactory.get('settings'),\n\t\t\t\t\t    _usage = this.SettingsFactory.get('usage');\n\t\n\t\t\t\t\t/**\n\t     * Init a 'blank' user with the required settings properties to\n\t     * avoid assignment errors (i.e. `this.user.settings[key] = ...`)\n\t     * \n\t     * @memberof UserSession\n\t     * @type {Object}\n\t     * @prop {Object} settings The user's unparsed settings\n\t     * @prop {Object} usage \t The user's unparsed usage prefs\n\t     */\n\t\t\t\t\tthis.user = {\n\t\t\t\t\t\tsettings: {},\n\t\t\t\t\t\tusage: {}\n\t\t\t\t\t};\n\t\n\t\t\t\t\t// Use the UserSession's getter/setters to merge the found setting\n\t\t\t\t\t// values into USER_DEFAULTS via the user model.\n\t\t\t\t\tthis.settings = _settings && !(0, _angular.equals)(_settings, {}) ? _settings : this._settings;\n\t\t\t\t\tthis.usage = _usage && !(0, _angular.equals)(_usage, {}) ? _usage : this._usage;\n\t\n\t\t\t\t\tconsole.log('created session from local defaults', _settings);\n\t\t\t\t}\n\t\t\t\treturn this.user;\n\t\t\t}\n\t\t\t/**\n\t   * Checks the `userId` property to verify whether settings should\n\t   * save to a logged in user; if not, saves them to localStorage using\n\t   * the `SettingsFactory`.\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: 'save',\n\t\t\tvalue: function save() {\n\t\t\t\tvar _this = this;\n\t\n\t\t\t\tconsole.log('saving settings to user...');\n\t\t\t\tif (this.userId) {\n\t\t\t\t\tthis.$http.post('/user/save', this.user).then(function (user) {\n\t\t\t\t\t\t_this.$popupWindow.toast('primary', {\n\t\t\t\t\t\t\tmessage: 'User settings updated!',\n\t\t\t\t\t\t\taction: 'Dismiss'\n\t\t\t\t\t\t});\n\t\t\t\t\t\tconsole.log('saved settings to user!');\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tthis.SettingsFactory.set('settings', this.settings);\n\t\t\t\t\tthis.SettingsFactory.set('usage', this.usage);\n\t\n\t\t\t\t\tconsole.log('saved settings to local!', this.user);\n\t\t\t\t}\n\t\t\t}\n\t\t\t/**\n\t   * Removes user session data and nulls out roles/ID.\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: 'destroy',\n\t\t\tvalue: function destroy() {\n\t\t\t\tthis.user = {\n\t\t\t\t\tsettings: {},\n\t\t\t\t\tusage: {}\n\t\t\t\t};\n\t\t\t\tthis.roles = null;\n\t\t\t\tthis.userId = null;\n\t\n\t\t\t\tconsole.log('user session destroyed');\n\t\t\t}\n\t\t\t/**\n\t   * Getter/setter pairs for merging user setting objects from\n\t   * the DB the form of:\n\t   * \n\t   * `{ toolbarOpen: false }`\n\t   * \n\t   * into fully-qualified app-level settings objects that look like:\n\t   * \n\t   * ```\n\t   * {\n\t   *   toolbarOpen: {\n\t   *     val: false,\n\t   *     label: 'Toolbar open',\n\t   *     ...\n\t   *   }\n\t   * }\n\t   * ```\n\t   *\n\t   * or vice-versa for setting the user object based on app prefs.\n\t   *\n\t   * @alias settings/usage\n\t   * @param  {Object} [settings/usage] Incoming app settings to merge into user\n\t   * @return {Object} \t\t\t\t\t\t\t\t Merged app settings built from user\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: 'settings',\n\t\t\tget: function get() {\n\t\t\t\tvar _this2 = this;\n\t\n\t\t\t\tif (this.user.settings) {\n\t\t\t\t\t(0, _keys2.default)(this.user.settings).map(function (key) {\n\t\t\t\t\t\tif (_this2._settings[key]) _this2._settings[key].val = _this2.user.settings[key];\n\t\t\t\t\t});\n\t\t\t\t\treturn this._settings;\n\t\t\t\t}\n\t\t\t},\n\t\t\tset: function set(settings) {\n\t\t\t\tvar _this3 = this;\n\t\n\t\t\t\tif ((0, _angular.isDefined)(settings)) {\n\t\t\t\t\t(0, _keys2.default)(settings).map(function (key) {\n\t\t\t\t\t\tif (_this3._settings[key]) _this3.user.settings[key] = settings[key].val;\n\t\t\t\t\t});\n\t\t\t\t\tthis.save();\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'usage',\n\t\t\tget: function get() {\n\t\t\t\tvar _this4 = this;\n\t\n\t\t\t\tif (this.user.usage) {\n\t\t\t\t\t(0, _keys2.default)(this.user.usage).map(function (key) {\n\t\t\t\t\t\tif (_this4._usage[key]) _this4._usage[key].val = _this4.user.usage[key];\n\t\t\t\t\t});\n\t\t\t\t\treturn this._usage;\n\t\t\t\t}\n\t\t\t},\n\t\t\tset: function set(usage) {\n\t\t\t\tvar _this5 = this;\n\t\n\t\t\t\tif ((0, _angular.isDefined)(usage)) {\n\t\t\t\t\t(0, _keys2.default)(usage).map(function (key) {\n\t\t\t\t\t\tif (_this5._usage[key]) _this5.user.usage[key] = usage[key].val;\n\t\t\t\t\t});\n\t\t\t\t\tthis.save();\n\t\t\t\t}\n\t\t\t}\n\t\t}]);\n\t\treturn UserSessionService;\n\t}();\n\t\n\texports.default = UserSessionService;\n\n/***/ },\n\n/***/ 422:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _angular = __webpack_require__(299);\n\t\n\tvar _angular2 = _interopRequireDefault(_angular);\n\t\n\tvar _dom = __webpack_require__(423);\n\t\n\tvar _dom2 = _interopRequireDefault(_dom);\n\t\n\tvar _model = __webpack_require__(425);\n\t\n\tvar _model2 = _interopRequireDefault(_model);\n\t\n\tvar _resource = __webpack_require__(427);\n\t\n\tvar _resource2 = _interopRequireDefault(_resource);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar utilModule = _angular2.default.module('util', [_dom2.default, _model2.default, _resource2.default]).name;\n\t\n\texports.default = utilModule;\n\n/***/ },\n\n/***/ 423:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _angular = __webpack_require__(299);\n\t\n\tvar _angular2 = _interopRequireDefault(_angular);\n\t\n\tvar _bindCompile = __webpack_require__(424);\n\t\n\tvar _bindCompile2 = _interopRequireDefault(_bindCompile);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar domModule = _angular2.default.module('util.dom', []).directive('bindHtmlCompile', _bindCompile2.default).name;\n\t\n\texports.default = domModule;\n\n/***/ },\n\n/***/ 424:\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tbindCompileDirective.$inject = [\"$compile\"];\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\tfunction bindCompileDirective($compile) {\n\t  'ngInject';\n\t\n\t  return function (scope, element, attrs) {\n\t    var ensureCompileRunsOnce = scope.$watch(function (scope) {\n\t      return scope.$eval(attrs.compile);\n\t    }, function (value) {\n\t      element.html(value);\n\t      $compile(element.contents())(scope);\n\t      ensureCompileRunsOnce();\n\t    });\n\t  };\n\t}\n\t\n\texports.default = bindCompileDirective;\n\n/***/ },\n\n/***/ 425:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _angular = __webpack_require__(299);\n\t\n\tvar _angular2 = _interopRequireDefault(_angular);\n\t\n\tvar _toNumber = __webpack_require__(426);\n\t\n\tvar _toNumber2 = _interopRequireDefault(_toNumber);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar modelModule = _angular2.default.module('util.model', []).directive('toNumber', _toNumber2.default).name;\n\t\n\texports.default = modelModule;\n\n/***/ },\n\n/***/ 426:\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\tfunction toNumberDirective() {\n\t  return {\n\t    restrict: 'A',\n\t    require: 'ngModel',\n\t    link: function link(scope, elem, attrs, ngModel) {\n\t      ngModel.$parsers.push(function (value) {\n\t        return '' + value;\n\t      });\n\t      ngModel.$formatters.push(function (value) {\n\t        return parseFloat(value);\n\t      });\n\t    }\n\t  };\n\t}\n\t\n\texports.default = toNumberDirective;\n\n/***/ },\n\n/***/ 427:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _angular = __webpack_require__(299);\n\t\n\tvar _angular2 = _interopRequireDefault(_angular);\n\t\n\tvar _angularResource = __webpack_require__(428);\n\t\n\tvar _angularResource2 = _interopRequireDefault(_angularResource);\n\t\n\tvar _draftResource = __webpack_require__(430);\n\t\n\tvar _draftResource2 = _interopRequireDefault(_draftResource);\n\t\n\tvar _mapResource = __webpack_require__(431);\n\t\n\tvar _mapResource2 = _interopRequireDefault(_mapResource);\n\t\n\tvar _tourResource = __webpack_require__(432);\n\t\n\tvar _tourResource2 = _interopRequireDefault(_tourResource);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar resourceModule = _angular2.default.module('util.resource', [_angularResource2.default]).factory('DraftResource', _draftResource2.default).factory('$mapApi', _mapResource2.default).factory('$tourApi', _tourResource2.default).constant('GLOBAL_SETTINGS', {\n\t  apiUrl: '/api/v1',\n\t  imageApiUrl: '//res.cloudinary.com/uoit-virtual-tour/image/upload'\n\t  // KEYSTONE HEROKU\n\t  // https://virtualtour-cms.herokuapp.com\n\t  // \n\t  // VTS HEROKU\n\t  // https://virtualtour-server.herokuapp.com\n\t  // \n\t  // KEYSTONE LOCAL\n\t  // http://localhost:3000/api/v1\n\t  // \n\t  // VTS LOCAL\n\t  // http://localhost:8080/api\\\n\t}).name;\n\t\n\texports.default = resourceModule;\n\n/***/ },\n\n/***/ 430:\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tDraftResourceFactory.$inject = [\"$resource\", \"GLOBAL_SETTINGS\"];\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\tfunction DraftResourceFactory($resource, GLOBAL_SETTINGS) {\n\t  'ngInject';\n\t\n\t  return $resource(GLOBAL_SETTINGS.apiUrl + '/drafts/:id', null, {\n\t    'update': { method: 'PATCH' }\n\t  });\n\t}\n\t\n\texports.default = DraftResourceFactory;\n\n/***/ },\n\n/***/ 431:\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tMapResourceFactory.$inject = [\"$resource\", \"GLOBAL_SETTINGS\"];\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\tfunction MapResourceFactory($resource, GLOBAL_SETTINGS) {\n\t  'ngInject';\n\t\n\t  return {\n\t    category: $resource(GLOBAL_SETTINGS.apiUrl + '/categories/:id'),\n\t    feature: $resource(GLOBAL_SETTINGS.apiUrl + '/features/:id'),\n\t    collection: $resource(GLOBAL_SETTINGS.apiUrl + '/feature-collections/:id')\n\t  };\n\t}\n\t\n\texports.default = MapResourceFactory;\n\n/***/ },\n\n/***/ 432:\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tTourResourceFactory.$inject = [\"$resource\", \"GLOBAL_SETTINGS\"];\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\tfunction TourResourceFactory($resource, GLOBAL_SETTINGS) {\n\t  'ngInject';\n\t\n\t  return {\n\t    location: $resource(GLOBAL_SETTINGS.apiUrl + '/locations/:id'),\n\t    building: $resource(GLOBAL_SETTINGS.apiUrl + '/buildings/:id'),\n\t    scene: $resource(GLOBAL_SETTINGS.apiUrl + '/scenes/:id', null, {\n\t      'update': { method: 'PATCH' }\n\t    }),\n\t    preload: $resource(GLOBAL_SETTINGS.apiUrl + '/scenes/:id/preload', null, {\n\t      'get': { method: 'GET', isArray: true }\n\t    }),\n\t    entity: $resource(GLOBAL_SETTINGS.apiUrl + '/entities/:id')\n\t  };\n\t}\n\t\n\texports.default = TourResourceFactory;\n\n/***/ },\n\n/***/ 433:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\t__webpack_require__(434);\n\t\n\t__webpack_require__(435);\n\t\n\t__webpack_require__(437);\n\t\n\t__webpack_require__(438);\n\t\n\tvar _aframeExtras = __webpack_require__(439);\n\t\n\tvar _scenelink = __webpack_require__(544);\n\t\n\tvar _scenelink2 = _interopRequireDefault(_scenelink);\n\t\n\tvar _hotspot = __webpack_require__(545);\n\t\n\tvar _hotspot2 = _interopRequireDefault(_hotspot);\n\t\n\tvar _textpanel = __webpack_require__(546);\n\t\n\tvar _textpanel2 = _interopRequireDefault(_textpanel);\n\t\n\tvar _hover = __webpack_require__(547);\n\t\n\tvar _hover2 = _interopRequireDefault(_hover);\n\t\n\tvar _scale = __webpack_require__(548);\n\t\n\tvar _scale2 = _interopRequireDefault(_scale);\n\t\n\tvar _delegate = __webpack_require__(549);\n\t\n\tvar _delegate2 = _interopRequireDefault(_delegate);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\texports.default = {\n\t\tsceneLink: _scenelink2.default,\n\t\thotSpot: _hotspot2.default,\n\t\ttextPanel: _textpanel2.default,\n\t\thoverAnimation: _hover2.default,\n\t\tlevelScaleTo: _scale2.default,\n\t\tdelegateEvent: _delegate2.default,\n\t\tregisterAll: function registerAll() {\n\t\t\t_aframeExtras.loaders.registerAll();\n\t\t\t_aframeExtras.primitives.registerAll();\n\t\n\t\t\t_delegate2.default.register();\n\t\t\t_scale2.default.register();\n\t\t\t_hover2.default.register();\n\t\t\t_textpanel2.default.register();\n\t\t\t_hotspot2.default.register();\n\t\t\t_scenelink2.default.register();\n\t\t}\n\t};\n\n/***/ },\n\n/***/ 544:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _aframe = __webpack_require__(434);\n\t\n\tvar sceneLinkPrimitive = {\n\t\tconfig: {\n\t\t\tdefaultComponents: {\n\t\t\t\tgeometry: {\n\t\t\t\t\tprimitive: 'cone',\n\t\t\t\t\theight: 0.5,\n\t\t\t\t\tradiusBottom: 0.5,\n\t\t\t\t\tradiusTop: 0,\n\t\t\t\t\tsegmentsHeight: 1,\n\t\t\t\t\tsegmentsRadial: 4\n\t\t\t\t},\n\t\t\t\tscale: {\n\t\t\t\t\tx: 0.1,\n\t\t\t\t\ty: 1,\n\t\t\t\t\tz: 1\n\t\t\t\t},\n\t\t\t\tanimation: {\n\t\t\t\t\tproperty: 'position',\n\t\t\t\t\tdir: 'alternate',\n\t\t\t\t\tdur: 1200,\n\t\t\t\t\teasing: 'easeInOutSine',\n\t\t\t\t\tfrom: '0 0 0',\n\t\t\t\t\tto: '0 -0.1 0',\n\t\t\t\t\tloop: true\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tregister: function register() {\n\t\t\t(0, _aframe.registerPrimitive)('scene-link', _aframe.utils.extendDeep(_aframe.primitives.getMeshMixin(), this.config));\n\t\t}\n\t};\n\t\n\texports.default = sceneLinkPrimitive;\n\n/***/ },\n\n/***/ 545:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _aframe = __webpack_require__(434);\n\t\n\tvar hotSpotPrimitive = {\n\t\tconfig: {\n\t\t\tdefaultComponents: {\n\t\t\t\tgeometry: {\n\t\t\t\t\tarc: 360,\n\t\t\t\t\tprimitive: 'torus',\n\t\t\t\t\tradius: 0.25,\n\t\t\t\t\tradiusTubular: 0.015,\n\t\t\t\t\tsegmentsTubular: 32\n\t\t\t\t},\n\t\t\t\tmaterial: {\n\t\t\t\t\tcolor: '#0077CA',\n\t\t\t\t\tshader: 'flat',\n\t\t\t\t\topacity: 0.6,\n\t\t\t\t\ttransparent: true\n\t\t\t\t},\n\t\t\t\ttext: {\n\t\t\t\t\tvalue: 'i',\n\t\t\t\t\theight: 5,\n\t\t\t\t\tside: 'double',\n\t\t\t\t\twrapCount: 4,\n\t\t\t\t\talign: 'center',\n\t\t\t\t\tcolor: '#0077CA'\n\t\t\t\t},\n\t\t\t\tanimation: {\n\t\t\t\t\tproperty: 'rotation',\n\t\t\t\t\teasing: 'easeInOutSine',\n\t\t\t\t\tdur: 2000,\n\t\t\t\t\tfrom: '0 0 0',\n\t\t\t\t\tto: '0 360 0',\n\t\t\t\t\tloop: true\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tregister: function register() {\n\t\t\t(0, _aframe.registerPrimitive)('hot-spot', _aframe.utils.extendDeep(_aframe.primitives.getMeshMixin(), this.config));\n\t\t}\n\t};\n\t\n\texports.default = hotSpotPrimitive;\n\n/***/ },\n\n/***/ 546:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _aframe = __webpack_require__(434);\n\t\n\tvar textPanelPrimitive = {\n\t\tconfig: {\n\t\t\tdefaultComponents: {\n\t\t\t\tgeometry: {\n\t\t\t\t\tprimitive: 'plane',\n\t\t\t\t\theight: 0.75,\n\t\t\t\t\twidth: 2\n\t\t\t\t},\n\t\t\t\tmaterial: {\n\t\t\t\t\tcolor: '#000000',\n\t\t\t\t\topacity: 0.6,\n\t\t\t\t\ttransparent: true\n\t\t\t\t},\n\t\t\t\ttext: {\n\t\t\t\t\tvalue: 'Insert text here\\nSecond line\\nThird, somewhat longer line',\n\t\t\t\t\talign: 'center',\n\t\t\t\t\twrapCount: 25\n\t\t\t\t}\n\t\t\t},\n\t\t\tmappings: {\n\t\t\t\tcontent: 'text.value'\n\t\t\t}\n\t\t},\n\t\tregister: function register() {\n\t\t\t(0, _aframe.registerPrimitive)('text-panel', _aframe.utils.extendDeep(_aframe.primitives.getMeshMixin(), this.config));\n\t\t}\n\t};\n\t\n\texports.default = textPanelPrimitive;\n\n/***/ },\n\n/***/ 547:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _aframe = __webpack_require__(434);\n\t\n\tvar hoverAnimationComponent = {\n\t\tconfig: {\n\t\t\tschema: {\n\t\t\t\tscaleFactor: {\n\t\t\t\t\tdefault: 1.1\n\t\t\t\t},\n\t\t\t\topacityFactor: {\n\t\t\t\t\tdefault: 0.9\n\t\t\t\t},\n\t\t\t\tcolorFactor: {\n\t\t\t\t\ttype: 'color',\n\t\t\t\t\tdefault: '#FFFFFF'\n\t\t\t\t}\n\t\t\t},\n\t\n\t\t\tinit: function init() {\n\t\t\t\tthis.defaultScale = { x: 1, y: 1, z: 1 };\n\t\t\t\tthis.defaultOpacity = 1;\n\t\t\t\tthis.defaultColor = '#FFF';\n\t\n\t\t\t\tif (!this.el.getAttribute('tabindex')) {\n\t\t\t\t\tthis.el.setAttribute('tabindex', 0);\n\t\t\t\t}\n\t\n\t\t\t\tthis.setColorAnimation();\n\t\t\t\tthis.setOpacityAnimation();\n\t\t\t\tthis.setScaleAnimation();\n\t\t\t},\n\t\t\tsetScaleAnimation: function setScaleAnimation() {\n\t\t\t\tvar originalScale = this.el.getAttribute('scale') || this.defaultScale,\n\t\t\t\t    factoredScale = {\n\t\t\t\t\tx: originalScale.x * this.data.scaleFactor,\n\t\t\t\t\ty: originalScale.y * this.data.scaleFactor,\n\t\t\t\t\tz: originalScale.z * this.data.scaleFactor\n\t\t\t\t};\n\t\t\t\tthis.el.setAttribute('animation__scale-mouseenter', {\n\t\t\t\t\tproperty: 'scale',\n\t\t\t\t\tfrom: originalScale,\n\t\t\t\t\tto: factoredScale,\n\t\t\t\t\tdur: 600,\n\t\t\t\t\teasing: 'easeOutElastic',\n\t\t\t\t\telasticity: 600,\n\t\t\t\t\tstartEvents: 'mouseenter,focus',\n\t\t\t\t\tpauseEvents: 'mouseleave,blur'\n\t\t\t\t});\n\t\t\t\tthis.el.setAttribute('animation__scale-mouseleave', {\n\t\t\t\t\tproperty: 'scale',\n\t\t\t\t\tfrom: factoredScale,\n\t\t\t\t\tto: originalScale,\n\t\t\t\t\tdur: 600,\n\t\t\t\t\teasing: 'easeOutElastic',\n\t\t\t\t\telasticity: 600,\n\t\t\t\t\tstartEvents: 'mouseleave,blur',\n\t\t\t\t\tpauseEvents: 'mouseenter,focus'\n\t\t\t\t});\n\t\t\t},\n\t\t\tsetOpacityAnimation: function setOpacityAnimation() {\n\t\t\t\tvar originalOpacity = this.el.getAttribute('material').opacity || this.defaultOpacity,\n\t\t\t\t    factoredOpacity = originalOpacity * this.data.opacityFactor;\n\t\t\t\tthis.el.setAttribute('animation__opacity-mouseenter', {\n\t\t\t\t\tproperty: 'opacity',\n\t\t\t\t\tfrom: originalOpacity,\n\t\t\t\t\tto: factoredOpacity,\n\t\t\t\t\tdur: 300,\n\t\t\t\t\teasing: 'linear',\n\t\t\t\t\tstartEvents: 'mouseenter,focus',\n\t\t\t\t\tpauseEvents: 'mouseleave,blur'\n\t\t\t\t});\n\t\t\t\tthis.el.setAttribute('animation__opacity-mouseleave', {\n\t\t\t\t\tproperty: 'opacity',\n\t\t\t\t\tfrom: factoredOpacity,\n\t\t\t\t\tto: originalOpacity,\n\t\t\t\t\tdur: 300,\n\t\t\t\t\teasing: 'linear',\n\t\t\t\t\tstartEvents: 'mouseleave,blur',\n\t\t\t\t\tpauseEvents: 'mouseenter,focus'\n\t\t\t\t});\n\t\t\t},\n\t\t\tsetColorAnimation: function setColorAnimation() {\n\t\t\t\tvar originalColor = this.el.getAttribute('material').color || this.defaultColor;\n\t\t\t\tthis.el.setAttribute('animation__color-mouseenter', {\n\t\t\t\t\tproperty: 'color',\n\t\t\t\t\tfrom: originalColor,\n\t\t\t\t\tto: this.data.colorFactor,\n\t\t\t\t\tdur: 100,\n\t\t\t\t\teasing: 'linear',\n\t\t\t\t\tstartEvents: 'mouseenter,focus',\n\t\t\t\t\tpauseEvents: 'mouseleave,blur'\n\t\t\t\t});\n\t\t\t\tthis.el.setAttribute('animation__color-mouseleave', {\n\t\t\t\t\tproperty: 'color',\n\t\t\t\t\tfrom: this.data.colorFactor,\n\t\t\t\t\tto: originalColor,\n\t\t\t\t\tdur: 100,\n\t\t\t\t\teasing: 'linear',\n\t\t\t\t\tstartEvents: 'mouseleave,blur',\n\t\t\t\t\tpauseEvents: 'mouseenter,focus'\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tregister: function register() {\n\t\t\t(0, _aframe.registerComponent)('hover-animation', this.config);\n\t\t}\n\t};\n\t\n\texports.default = hoverAnimationComponent;\n\n/***/ },\n\n/***/ 548:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _aframe = __webpack_require__(434);\n\t\n\tvar levelScaleToComponent = {\n\t\tconfig: {\n\t\t\tschema: {\n\t\t\t\ttype: 'selector'\n\t\t\t},\n\t\t\tinit: function init() {\n\t\t\t\tvar scaleToLevel = this.data.getAttribute('scale'),\n\t\t\t\t    currentScale = this.el.getAttribute('scale'),\n\t\t\t\t    adjusted = {\n\t\t\t\t\tx: currentScale.x / scaleToLevel.x,\n\t\t\t\t\ty: currentScale.y / scaleToLevel.y,\n\t\t\t\t\tz: currentScale.z / scaleToLevel.z\n\t\t\t\t};\n\t\t\t\tthis.el.setAttribute('scale', adjusted);\n\t\t\t}\n\t\t},\n\t\tregister: function register() {\n\t\t\t(0, _aframe.registerComponent)('level-scale-to', this.config);\n\t\t}\n\t};\n\t\n\texports.default = levelScaleToComponent;\n\n/***/ },\n\n/***/ 549:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _map = __webpack_require__(550);\n\t\n\tvar _map2 = _interopRequireDefault(_map);\n\t\n\tvar _keys = __webpack_require__(418);\n\t\n\tvar _keys2 = _interopRequireDefault(_keys);\n\t\n\tvar _aframe = __webpack_require__(434);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar delegateEventComponent = {\n\t\tconfig: {\n\t\t\tschema: {\n\t\t\t\telements: {\n\t\t\t\t\ttype: 'selectorAll'\n\t\t\t\t},\n\t\t\t\tevents: {\n\t\t\t\t\ttype: 'array'\n\t\t\t\t}\n\t\t\t},\n\t\n\t\t\tinit: function init() {\n\t\t\t\tthis.validateProperties();\n\t\n\t\t\t\tthis.unbinders = {};\n\t\n\t\t\t\tthis.bindAllEventsToElements();\n\t\t\t},\n\t\t\tupdate: function update(oldData) {\n\t\t\t\tvar _this = this;\n\t\n\t\t\t\tif ((0, _keys2.default)(oldData).length === 0) return;\n\t\n\t\t\t\tthis.validateProperties();\n\t\n\t\t\t\tthis.oldData.elements.forEach(function (element) {\n\t\t\t\t\tvar elementIndex = _this.data.elements.indexOf(element);\n\t\t\t\t\tif (elementIndex === -1) {\n\t\t\t\t\t\t_this.unbindAllEventsFromElement(element);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\n\t\t\t\tthis.oldData.events.forEach(function (eventName) {\n\t\t\t\t\tvar eventNameIndex = _this.data.events.indexOf(eventName);\n\t\t\t\t\tif (eventNameIndex === -1) {\n\t\t\t\t\t\t_this.unbinders[eventName].forEach(function (unbind) {\n\t\t\t\t\t\t\treturn unbind();\n\t\t\t\t\t\t});\n\t\t\t\t\t\t_this.unbinders.delete(eventName);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\tbindAllEventsToElements: function bindAllEventsToElements() {\n\t\t\t\tvar _this2 = this;\n\t\n\t\t\t\tthis.data.elements.forEach(function (element) {\n\t\t\t\t\treturn _this2.bindAllEventsTo(element);\n\t\t\t\t});\n\t\t\t},\n\t\t\tbindAllEventsTo: function bindAllEventsTo(element) {\n\t\t\t\tvar _this3 = this;\n\t\n\t\t\t\tthis.data.events.forEach(function (eventName) {\n\t\t\t\t\treturn _this3.bindEventTo(eventName, element);\n\t\t\t\t});\n\t\t\t},\n\t\t\tbindEventTo: function bindEventTo(eventName, element) {\n\t\t\t\tvar _this4 = this;\n\t\n\t\t\t\tvar boundDelegateFn = this.delegateEvent.bind(element);\n\t\t\t\tthis.el.addEventListener(eventName, boundDelegateFn);\n\t\n\t\t\t\tvar unbindFn = function unbindFn() {\n\t\t\t\t\treturn _this4.el.removeEventListener(eventName, boundDelegateFn);\n\t\t\t\t};\n\t\n\t\t\t\tthis.unbinders[eventName] = new _map2.default();\n\t\t\t\tthis.unbinders[eventName].set(element, unbindFn);\n\t\t\t},\n\t\t\tdelegateEvent: function delegateEvent(originalEv) {\n\t\t\t\tthis.emit(originalEv.type, { originalEv: originalEv }, false);\n\t\t\t},\n\t\t\tunbindAllEventsFromElement: function unbindAllEventsFromElement(element) {\n\t\t\t\tvar _this5 = this;\n\t\n\t\t\t\t(0, _keys2.default)(this.unbinders).forEach(function (eventName) {\n\t\t\t\t\tif (_this5.unbinders[eventName].has(element)) {\n\t\t\t\t\t\tvar unbind = _this5.unbinders[eventName].get(element);\n\t\t\t\t\t\tunbind();\n\t\t\t\t\t\t_this5.unbinders[eventName].delete(element);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\tvalidateProperties: function validateProperties() {\n\t\t\t\tif (!this.data.elements) {\n\t\t\t\t\tthrow new Error('delegateEvent: Please provide an element selector to delegate events to!');\n\t\t\t\t}\n\t\t\t\tif (!this.data.events || !this.data.events.length) {\n\t\t\t\t\tthrow new Error('delegateEvent: Please provide at least one event to delegate!');\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tregister: function register() {\n\t\t\t(0, _aframe.registerComponent)('delegate-event', this.config);\n\t\t}\n\t};\n\t\n\texports.default = delegateEventComponent;\n\n/***/ },\n\n/***/ 570:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _angular = __webpack_require__(299);\n\t\n\tvar _angular2 = _interopRequireDefault(_angular);\n\t\n\tvar _aframe = __webpack_require__(571);\n\t\n\tvar _aframe2 = _interopRequireDefault(_aframe);\n\t\n\tvar _drilldown = __webpack_require__(615);\n\t\n\tvar _drilldown2 = _interopRequireDefault(_drilldown);\n\t\n\tvar _map = __webpack_require__(622);\n\t\n\tvar _map2 = _interopRequireDefault(_map);\n\t\n\tvar _search = __webpack_require__(629);\n\t\n\tvar _search2 = _interopRequireDefault(_search);\n\t\n\tvar _settings = __webpack_require__(641);\n\t\n\tvar _settings2 = _interopRequireDefault(_settings);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar componentModule = _angular2.default.module('app.components', [_aframe2.default, _drilldown2.default, _map2.default, _search2.default, _settings2.default]).name;\n\t\n\texports.default = componentModule;\n\n/***/ },\n\n/***/ 571:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\t\tvalue: true\n\t});\n\t\n\tvar _angular = __webpack_require__(299);\n\t\n\tvar _angular2 = _interopRequireDefault(_angular);\n\t\n\tvar _scene = __webpack_require__(572);\n\t\n\tvar _scene2 = _interopRequireDefault(_scene);\n\t\n\tvar _sky = __webpack_require__(579);\n\t\n\tvar _sky2 = _interopRequireDefault(_sky);\n\t\n\tvar _scenelink = __webpack_require__(583);\n\t\n\tvar _scenelink2 = _interopRequireDefault(_scenelink);\n\t\n\tvar _hotspot = __webpack_require__(586);\n\t\n\tvar _hotspot2 = _interopRequireDefault(_hotspot);\n\t\n\tvar _editor = __webpack_require__(589);\n\t\n\tvar _editor2 = _interopRequireDefault(_editor);\n\t\n\tvar _entity = __webpack_require__(607);\n\t\n\tvar _entity2 = _interopRequireDefault(_entity);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar aframeModule = _angular2.default.module('aframe', [_scene2.default, _sky2.default, _scenelink2.default, _hotspot2.default, _editor2.default, _entity2.default]).name;\n\t\n\texports.default = aframeModule;\n\n/***/ },\n\n/***/ 572:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _angular = __webpack_require__(299);\n\t\n\tvar _angular2 = _interopRequireDefault(_angular);\n\t\n\tvar _scene = __webpack_require__(573);\n\t\n\tvar _scene2 = _interopRequireDefault(_scene);\n\t\n\tvar _scene3 = __webpack_require__(578);\n\t\n\tvar _scene4 = _interopRequireDefault(_scene3);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar sceneModule = _angular2.default.module('aframe.scene', []).component('aframeScene', _scene2.default).service('$aframeScene', _scene4.default).name;\n\t\n\texports.default = sceneModule;\n\n/***/ },\n\n/***/ 573:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _scene = __webpack_require__(574);\n\t\n\tvar _scene2 = _interopRequireDefault(_scene);\n\t\n\tvar _scene3 = __webpack_require__(575);\n\t\n\tvar _scene4 = _interopRequireDefault(_scene3);\n\t\n\t__webpack_require__(576);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t/**\n\t * The aframeScene component definition initializes\n\t * the scene's bindings for its child components as\n\t * well as a transclusion point for the server-rendered\n\t * scene editor.\n\t *\n\t * @example\n\t * <aframe-scene\n\t *   sky=\"{{ $ctrl.scene.sky }}\"\n\t *   scene-links=\"$ctrl.scene.sceneLinks\"\n\t *   hot-spots=\"$ctrl.scene.hotSpots\"\n\t *   mobile=\"$ctrl.mobile\">\n\t * </aframe-scene>\n\t * \n\t * @prop {String} sky \t\t\t\tInterpolated sky url\n\t * @prop {Array}  sceneLinks  Array of scenelink objects\n\t * @prop {Array}  hotSpots\t\tArray of hotspot object\n\t * @prop {Object} mobile \t\t\tObject with device info\n\t */\n\tvar sceneComponent = {\n\t  controller: _scene4.default,\n\t  template: _scene2.default,\n\t  bindings: {\n\t    sky: '@',\n\t    sceneLinks: '<?',\n\t    hotSpots: '<?',\n\t    entities: '<?',\n\t    mobile: '<?'\n\t  },\n\t  transclude: {\n\t    'editor': '?sceneEditor'\n\t  }\n\t};\n\t\n\texports.default = sceneComponent;\n\n/***/ },\n\n/***/ 574:\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<ng-transclude ng-transclude-slot=\\\"editor\\\"></ng-transclude>\\n\\n<a-scene id=\\\"aframe-scene\\\" ng-transclude-slot=\\\"sky\\\"> <!-- stats -->\\n\\t\\n\\t<!-- ASSET CACHE -->\\n\\t<a-assets>\\n\\t\\t<a-mixin id=\\\"mixin-blue\\\" material=\\\"color: #0077CA;opacity: 0.85; transparent: true;\\\"></a-mixin>\\n\\t\\t<a-mixin id=\\\"mixin-glow\\\" material=\\\"color:white;shader:flat;opacity:0.1;transparent: true;\\\"></a-mixin>\\n\\t\\t<img src=\\\"assets/images/plnsk_bg_default.jpg\\\" id=\\\"default_sky_bg\\\" />\\n\\t</a-assets>\\n\\n\\t<!-- SKY -->\\n\\t<aframe-sky sky=\\\"$ctrl.sky\\\"></aframe-sky>\\n\\t<a-sky src=\\\"#default_sky_bg\\\" ng-if=\\\"!$ctrl.sky\\\" animation__sky-rotate=\\\"property: rotation; dur: 90000; easing: linear; to: 0 360 0; loop: true;\\\"></a-sky>\\n\\n\\t<!-- LIGHT -->\\n\\t<a-light type=\\\"ambient\\\" color=\\\"#BBB\\\"\\\"></a-light>\\n\\t<a-light type=\\\"directional\\\" color=\\\"#FFF\\\" intensity=\\\"0.6\\\" position=\\\"-0.5 1 1\\\"></a-light>\\n\\n\\t<!-- CAMERA ENTITY -->\\n\\t<!-- <a-entity position=\\\"0 1.8 0\\\"> -->\\n\\t\\t<a-camera\\n\\t\\t\\tid=\\\"aframe-camera\\\"\\n\\t\\t\\tmouse-cursor\\n\\t\\t\\twasd-controls=\\\"enabled: false;\\\"\\n\\t\\t\\tlook-controls=\\\"reverseMouseDrag: true;\\\">\\n\\t\\t\\t<!-- VR CURSOR -->\\n\\t\\t  <a-entity ng-if=\\\"$ctrl.mobile.device && $ctrl.mobile.landscape\\\"\\n\\t\\t  \\t\\t\\t\\t\\tcursor=\\\"fuse: true; fuseTimeout: 2000\\\"\\n\\t\\t            position=\\\"0 0 -1\\\"\\n\\t\\t            geometry=\\\"primitive: ring; radiusInner: 0.007; radiusOuter: 0.01; thetaLength: 360;\\\"\\n\\t\\t            material=\\\"color: white; opacity: 0.8; shader: flat\\\"\\n\\t\\t            animation__cursor-mouseenter-outer=\\\"property: geometry.radiusOuter; dur: 600; easing: easeOutBounce; elasticity: 500; to: 0.025; startEvents: mouseenter;\\\"\\n\\t\\t            animation__cursor-mouseenter-inner=\\\"property: geometry.radiusInner; dur: 600; easing: easeOutBounce; elasticity: 500; to: 0.02; startEvents: mouseenter;\\\"\\n\\t\\t            animation__cursor-mouseleave-outer=\\\"property: geometry.radiusOuter; dur: 600; to: 0.01; startEvents: mouseleave;\\\"\\n\\t\\t            animation__cursor-mouseleave-inner=\\\"property: geometry.radiusInner; dur: 600; to: 0.007; startEvents: mouseleave;\\\">\\n\\t\\t            <!-- animation__cursor-fusing=\\\"property: geometry.thetaLength; dur: 2000; delay: 1000; easing: easeInQuart; elasticity: 600; to: 0; startEvents: fusing;\\\" -->\\n  \\t\\t\\t<a-animation begin=\\\"cursor-fusing\\\" dur=\\\"1600\\\" delay=\\\"400\\\" easing=\\\"ease-in\\\" attribute=\\\"geometry.thetaLength\\\" fill=\\\"both\\\" from=\\\"360\\\" to=\\\"0\\\"></a-animation>\\n  \\t\\t\\t<a-animation begin=\\\"mouseleave\\\" dur=\\\"600\\\" attribute=\\\"geometry.thetaLength\\\" to=\\\"360\\\"></a-animation>\\n\\t\\t  </a-entity>\\n\\t\\t</a-camera>\\n\\t<!-- </a-entity> -->\\n\\t\\n\\t<!-- GENERIC ENTITIES -->\\n\\t<aframe-entity ng-model=\\\"entity\\\" ng-repeat=\\\"entity in $ctrl.entities track by entity._id\\\"></aframe-entity>\\n\\n\\t<!-- SCENE LINKS -->\\n\\t<a-entity ng-repeat=\\\"sceneLink in $ctrl.sceneLinks track by sceneLink._id\\\"\\n\\t\\t\\t\\t\\t\\tng-attr-position=\\\"{{ sceneLink.position.join(' ') }}\\\"\\n\\t\\t\\t\\t\\t\\tng-attr-rotation=\\\"{{ sceneLink.rotation.join(' ') }}\\\"\\n\\t\\t\\t\\t\\t\\teditable=\\\"sceneLink\\\">\\n\\t\\t<scene-link ng-attr-id=\\\"link_{{ ::sceneLink._id }}\\\"\\n\\t\\t\\t\\t\\t\\t\\t\\tng-attr-delegate-event=\\\"events: mouseenter,focus,mouseleave,blur; elements: #link_{{ ::sceneLink._id }} .text-panel;\\\"\\n\\t\\t\\t\\t\\t\\t\\t\\tui-sref=\\\"scene({ location: sceneLink.scene.parent.parent.code, building: sceneLink.scene.parent.code, scene: sceneLink.scene.code })\\\"\\n\\t\\t\\t\\t\\t\\t\\t\\thover-animation=\\\"scaleFactor:1.1;colorFactor:#c71566;opacityFactor:0.7;\\\"\\n\\t\\t\\t\\t\\t\\t\\t\\tcolor=\\\"#0077CA\\\">\\n\\t\\t\\t<a-animation begin=\\\"click\\\" dur=\\\"600\\\" easing=\\\"ease-out\\\" attribute=\\\"scale\\\" fill=\\\"backwards\\\" to=\\\"0 0 0\\\"></a-animation>\\n\\t\\t\\t<text-panel ng-if=\\\"sceneLink.scene.parent._id !== $ctrl.parent._id\\\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\thover-animation=\\\"scaleFactor:1000;colorFactor:#000000;opacityFactor:1;\\\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tcontent=\\\"GO TO:\\\\n\\\\n{{sceneLink.scene.parent.name}}\\\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\trotation=\\\"90 90 0\\\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tposition=\\\"5.25 0 0\\\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tscale=\\\"0.001 0.01 0.001\\\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tclass=\\\"text-panel\\\">\\n\\t\\t\\t</text-panel>\\n\\t\\t</scene-link>\\n\\t</a-entity>\\n\\n\\t<!-- HOTSPOTS -->\\n<!-- \\t<a-entity\\n\\t\\tng-repeat=\\\"hotSpot in $ctrl.hotSpots track by hotSpot._id\\\"\\n\\t\\tclass=\\\"hot-spot\\\"\\n\\t\\thot-spot=\\\"hotSpot\\\">\\n\\t</a-entity> -->\\n\\n\\t<a-entity ng-repeat=\\\"hotSpot in $ctrl.hotSpots track by hotSpot._id\\\"\\n\\t\\t\\t\\t\\t\\tng-attr-position=\\\"{{ hotSpot.position.join(' ') }}\\\"\\n\\t\\t\\t\\t\\t\\tng-attr-id=\\\"hotSpot_{{ ::hotSpot._id }}\\\"\\n\\t\\t\\t\\t\\t\\tlook-at=\\\"[camera]\\\" editable=\\\"hotSpot\\\">\\n\\t\\t<hot-spot hover-animation=\\\"scaleFactor:1;colorFactor:#c71566;opacityFactor:0.7;\\\"\\n\\t\\t\\t\\t\\t\\t\\tng-attr-delegate-event=\\\"events: mouseenter,focus,mouseleave,blur,click; elements: #hotSpot_{{ ::hotSpot._id }} .text-panel;\\\"></hot-spot>\\n\\t\\t<text-panel content=\\\"{{ ['More about ', hotSpot.name.toUpperCase(), '\\\\n\\\\n', hotSpot.desc].join('') }}\\\"\\n\\t\\tanimation=\\\"property: scale; from: 0 0 0; to: 1 1 1; dur: 600; easing: easeOutElastic; elasticity: 600; startEvents: click\\\"\\n\\t\\t\\t\\t\\t\\t\\t\\tscale=\\\"0.001 0.001 0.001\\\"\\n\\t\\t\\t\\t\\t\\t\\t\\tposition=\\\"0 0 1\\\"\\n\\t\\t\\t\\t\\t\\t\\t\\trotation=\\\"0 0 0\\\"\\n\\t\\t\\t\\t\\t\\t\\t\\tclass=\\\"text-panel\\\">\\n\\t\\t</text-panel>\\n\\t</a-entity>\\n\\n</a-scene>\"\n\n/***/ },\n\n/***/ 575:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _classCallCheck2 = __webpack_require__(323);\n\t\n\tvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\t\n\tvar _createClass2 = __webpack_require__(324);\n\t\n\tvar _createClass3 = _interopRequireDefault(_createClass2);\n\t\n\tvar _angular = __webpack_require__(299);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t/**\n\t * The scene controller manages all top-level functionality\n\t * of the scene component; it is responsible for initializing\n\t * the DOM elements of the scene and updating them when the\n\t * $aframeScene service changes.\n\t */\n\tvar SceneController = function () {\n\t\t/**\n\t  * Initializes the SceneCtrl's dependencies\n\t  * @param  {object} $scope       The current scope\n\t  * @param  {jqlite} $element     The component's <aframe-scene> element\n\t  * @param  {object} $aframeScene The scene service\n\t  * @param  {object} $aframeSky   The sky service\n\t  */\n\t\tSceneController.$inject = [\"$scope\", \"$element\", \"$aframeScene\", \"$aframeSky\"];\n\t\tfunction SceneController($scope, $element, $aframeScene, $aframeSky) {\n\t\t\t'ngInject';\n\t\n\t\t\t(0, _classCallCheck3.default)(this, SceneController);\n\t\t\tthis.$scope = $scope;\n\t\t\tthis.$element = $element;\n\t\t\tthis.$aframeScene = $aframeScene;\n\t\t\tthis.$aframeSky = $aframeSky;\n\t\t}\n\t\n\t\t/**\n\t  * Lifecycle hook to initialize component properties; sets\n\t  * a boolean to hold the rightclick-active flag (for when a\n\t  * user mouseups the scene with right button) and a string\n\t  * for the current active scene's ID.\n\t  * \n\t * Also stores JQLite-wrapped <a-scene> and <a-assets> for\n\t * appending child elements into the scene from inner components.\n\t  */\n\t\n\t\n\t\t(0, _createClass3.default)(SceneController, [{\n\t\t\tkey: '$onInit',\n\t\t\tvalue: function $onInit() {\n\t\t\t\tthis._rightClick = false;\n\t\t\t\tthis._isMobile = false;\n\t\t\t\tthis._currentSceneId = '';\n\t\n\t\t\t\tthis.$sceneEl = this.$element.find('a-scene');\n\t\t\t\tthis.$assetsEl = this.$sceneEl.find('a-assets');\n\t\t\t\tthis.$cameraEl = (0, _angular.element)(document.getElementById('aframe-camera'));\n\t\t\t}\n\t\t}, {\n\t\t\tkey: '$onChanges',\n\t\t\tvalue: function $onChanges(changes) {\n\t\t\t\tconsole.log(changes);\n\t\t\t\tif (changes.mobile.isFirstChange()) return;\n\t\t\t\tif (!this._isMobile && changes.mobile.currentValue.screen) {\n\t\t\t\t\t// this.$cursorEl = element(document.createElement('a-cursor'));\n\t\t\t\t\t// this.$cursorEl.attr({\n\t\t\t\t\t// \tfuse: true,\n\t\t\t\t\t// \tfuseTimeout: 1000,\n\t\t\t\t\t// \tmaxDistance: 100,\n\t\t\t\t\t// \tmaterial: 'color:white;'\n\t\t\t\t\t// });\n\t\t\t\t\t// this.$cameraEl\n\t\t\t\t\t// \t.attr({ 'look-controls': 'enabled: true;', 'reverse-look-controls': 'enabled: false;' });\n\t\t\t\t\t// this.$cameraEl.append(this.$cursorEl);\n\t\t\t\t\tthis._isMobile = true;\n\t\t\t\t\t// console.log('mobile detected; scene adapted', this.$cameraEl, this.$cursorEl)\n\t\t\t\t}\n\t\t\t\tif (this._isMobile && !changes.mobile.currentValue.screen) {\n\t\t\t\t\t// this.$cursorEl.remove();\n\t\t\t\t\t// this.$cameraEl\n\t\t\t\t\t// \t.attr({\n\t\t\t\t\t// \t\t'look-controls': 'enabled: false;',\n\t\t\t\t\t// \t\t'reverse-look-controls': 'enabled: true;'\n\t\t\t\t\t// \t});\n\t\t\t\t\tthis._isMobile = false;\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Extracts an incoming scene object's relevant data (`id`, `sceneLinks`,\n\t   * and `hotSpots`) and assigns them to the controller for rendering\n\t   * on the component.\n\t   *\n\t   * If the server-side editor component is attached (i.e. admin user is\n\t   * logged in), it will have mounted a `checkForDraft()` method on the\n\t   * controller, which is called here to announce if a newly-navigated-to\n\t   * scene has saved drafts.\n\t   * \n\t   * @param {object} scene A scene object from API/database\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: 'setScene',\n\t\t\tvalue: function setScene(scene) {\n\t\t\t\tvar sceneLinks = scene.sceneLinks,\n\t\t\t\t    hotSpots = scene.hotSpots,\n\t\t\t\t    entities = scene.entities,\n\t\t\t\t    parent = scene.parent,\n\t\t\t\t    _id = scene._id;\n\t\n\t\n\t\t\t\tthis.sceneLinks = sceneLinks;\n\t\t\t\tthis.hotSpots = hotSpots;\n\t\t\t\tthis.entities = entities;\n\t\t\t\tthis.parent = parent;\n\t\t\t\tthis._currentSceneId = _id;\n\t\n\t\t\t\tthis.checkForDraft && this.checkForDraft();\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Lifecycle hook to run a check on every digest loop cycle.\n\t   * \n\t   * Checks $aframeScene's current scene object; proceeds if\n\t   * scene is defined and calls `setScene()` on the incoming data.\n\t   *\n\t   * Checks if there is a sky active on $aframeSky, and if so, if\n\t   * it is different from the current active sky. Sets the conroller's\n\t   * sky if they differ or if the controller has no sky.\n\t   * \n\t   */\n\t\n\t\t}, {\n\t\t\tkey: '$doCheck',\n\t\t\tvalue: function $doCheck() {\n\t\t\t\tif ((0, _angular.isDefined)(this.$aframeScene.scene)) {\n\t\t\t\t\tif (this.$aframeScene.scene._id && this.$aframeScene.scene._id !== this._currentSceneId) {\n\t\t\t\t\t\t// if (!this.sky || this.$aframeScene.sky !== this.sky) {\n\t\t\t\t\t\t// this.sky = this.$aframeScene.sky;\n\t\t\t\t\t\tthis.setScene(this.$aframeScene.scene);\n\t\t\t\t\t}\n\t\t\t\t} else return;\n\t\t\t\tif (this.$aframeSky.sky) {\n\t\t\t\t\tif (!this.sky || this.$aframeSky.sky !== this.sky) {\n\t\t\t\t\t\tthis.sky = this.$aframeSky.sky;\n\t\t\t\t\t\tconsole.log('scene controller detects change in sky service', this.sky);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}]);\n\t\treturn SceneController;\n\t}();\n\t\n\texports.default = SceneController;\n\n/***/ },\n\n/***/ 576:\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ },\n\n/***/ 578:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _keys = __webpack_require__(418);\n\t\n\tvar _keys2 = _interopRequireDefault(_keys);\n\t\n\tvar _classCallCheck2 = __webpack_require__(323);\n\t\n\tvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\t\n\tvar _createClass2 = __webpack_require__(324);\n\t\n\tvar _createClass3 = _interopRequireDefault(_createClass2);\n\t\n\tvar _angular = __webpack_require__(299);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t/**\n\t * The scene service class is the lead orchestrator of the `<aframe-scene/>`\n\t * component's business logic. It is the application and component's main\n\t * interface to the current scene data.\n\t *\n\t * Scene manipulation is accomplished using the `$aframeScene.scene` getter\n\t * and setter property; internally, the scene data is stored in the service\n\t * \"raw\" under the property `sceneData`. The getter and setter are\n\t * responsible for transliterating changes into the \"raw\" data object and\n\t * back again. The setter also sets the `$aframeSky.sky` property, thus kicking\n\t * off a sky change from its respective service.\n\t *\n\t * @param {object} $mdToast        ng-material's toast service\n\t * @param {object} $aframeSky\t\t\t The sky service\n\t * @param {object} EDITOR_MESSAGES Constant to define toast configs\n\t */\n\tvar SceneService = function () {\n\t\tSceneService.$inject = [\"$mdToast\", \"$aframeSky\", \"EDITOR_MESSAGES\"];\n\t\tfunction SceneService($mdToast, $aframeSky, EDITOR_MESSAGES) {\n\t\t\t'ngInject';\n\t\n\t\t\tvar _this = this;\n\t\n\t\t\t(0, _classCallCheck3.default)(this, SceneService);\n\t\t\tthis.$mdToast = $mdToast;\n\t\t\tthis.$aframeSky = $aframeSky;\n\t\n\t\t\tthis.toasts = {};\n\t\t\t(0, _keys2.default)(EDITOR_MESSAGES).forEach(function (type) {\n\t\t\t\tvar toast = $mdToast.simple();\n\t\t\t\tvar toastConfig = EDITOR_MESSAGES[type];\n\t\t\t\t(0, _keys2.default)(toastConfig).forEach(function (prop) {\n\t\t\t\t\ttoast[prop](toastConfig[prop]);\n\t\t\t\t});\n\t\t\t\t_this.toasts[type] = toast;\n\t\t\t});\n\t\t}\n\t\t/**\n\t  * Getter and setter pair for internal scene data.\n\t  * \n\t  * @param  {[Object]} sceneData Incoming scene data to set\n\t  * @return {[Object]}\t\t\t\t\t\tThe scene's current data\n\t  * @example\n\t  * {\n\t  *   _id: '583f17cfd2cd0c0400072d9c',\n\t  *   parent: '57a8e38b12ad99fe889c95f3',\n\t  *   code: '2b',\n\t  *   name: 'Atrium 2B',\n\t  *   hotSpots: [ ... ],\n\t  *   sceneLinks: [ ... ],\n\t  *   panorama: { ... }\n\t  * }\n\t  */\n\t\n\t\n\t\t(0, _createClass3.default)(SceneService, [{\n\t\t\tkey: 'removeItemFrom',\n\t\n\t\n\t\t\t/**\n\t   * Method for `Array.splice()`ing items out of scene elements (`sceneLinks`,\n\t   * `hotSpots`) for removal from the active scene (what is being viewed, not\n\t   * necessarily what is saved on the server).\n\t   *\n\t   * Confirms with the user before deleting, saves a draft after, and\n\t   * offers to publish once removed (which will commit the changes).\n\t   *\n\t   * @example\n\t   * $aframeScene.removeItemFrom(\n\t   *   { name: 'thing' },\n\t   *   [{ name: 'thing' }, { name: 'thung' }, { name: 'thong' }],\n\t   *   () => this.updateView()\n\t   * );\n\t   * // ...results in:\n\t   * // >> [{ name: 'thung' }, { name: 'thong' }]\n\t   * \n\t   * @param  {object}   \t\t item       The item being removed\n\t   * @param  {Array<Object>} collection The array it will be removed from\n\t   * @param  {Function} \t\t cb         Callback to run when item removed\n\t   * @return {Promise}\t\t\t\t\t\t\t\t\tPromise resolves to result of toast\n\t   */\n\t\t\tvalue: function removeItemFrom(item, collection, cb) {\n\t\t\t\tvar _this2 = this;\n\t\n\t\t\t\tthis.$mdToast.show(this.toasts.confirm).then(function (response) {\n\t\t\t\t\tif (response == 'ok') {\n\t\t\t\t\t\tvar index = collection.indexOf(item);\n\t\t\t\t\t\tif (index !== -1) {\n\t\t\t\t\t\t\tcollection.splice(index, 1);\n\t\t\t\t\t\t\tcb && cb();\n\t\t\t\t\t\t\treturn _this2.$mdToast.show(_this2.toasts.itemRemoved);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}).then(function (response) {\n\t\t\t\t\tif (response == 'ok') {\n\t\t\t\t\t\t_this2.$aframeEditor.publish();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Method for `Array.push()`ing items onto the list of current scene\n\t   * elements (`sceneLinks`, `hotSpots`) for display in the scene.\n\t   *\n\t   * Checks validity of collection and item; adds item and informs user\n\t   * of the newly added item's default position. Offers to publish changes.\n\t   * \n\t   * @param {Object}   \t\t\titem       The item being added\n\t   * @param {Array<Object>} collection The array it will be added to\n\t   * @param {Function}\t\t\tcb         Callback to run when item added\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: 'addItemTo',\n\t\t\tvalue: function addItemTo(item, collection, cb) {\n\t\t\t\tvar _this3 = this;\n\t\n\t\t\t\tif ((0, _angular.isObject)(item) && (0, _angular.isArray)(collection)) {\n\t\t\t\t\tcollection.push(item);\n\t\t\t\t\tcb && cb(collection);\n\t\t\t\t\tif (item.position && item.position.length) {\n\t\t\t\t\t\tthis.toasts.itemAdded.textContent('Item added at ' + item.position.join(', ') + '!');\n\t\t\t\t\t}\n\t\t\t\t\tthis.$mdToast.show(this.toasts.itemAdded).then(function (response) {\n\t\t\t\t\t\tif (response == 'ok') {\n\t\t\t\t\t\t\t_this3.$aframeEditor.publish();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'scene',\n\t\t\tget: function get() {\n\t\t\t\tif (this.sceneData) {\n\t\t\t\t\treturn this.sceneData;\n\t\t\t\t}\n\t\t\t},\n\t\t\tset: function set(sceneData) {\n\t\t\t\tthis.$aframeSky.sky = sceneData.panorama;\n\t\t\t\tthis.sceneData = this.lastPublished = sceneData; // { _id, sceneLinks, hotSpots, sky };\n\t\t\t}\n\t\t}]);\n\t\treturn SceneService;\n\t}();\n\t\n\texports.default = SceneService;\n\n/***/ },\n\n/***/ 579:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _angular = __webpack_require__(299);\n\t\n\tvar _angular2 = _interopRequireDefault(_angular);\n\t\n\tvar _sky = __webpack_require__(580);\n\t\n\tvar _sky2 = _interopRequireDefault(_sky);\n\t\n\tvar _sky3 = __webpack_require__(582);\n\t\n\tvar _sky4 = _interopRequireDefault(_sky3);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar skyModule = _angular2.default.module('aframe.sky', []).component('aframeSky', _sky2.default).service('$aframeSky', _sky4.default).name;\n\t\n\texports.default = skyModule;\n\n/***/ },\n\n/***/ 580:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _sky = __webpack_require__(581);\n\t\n\tvar _sky2 = _interopRequireDefault(_sky);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar skyComponent = {\n\t  controller: _sky2.default,\n\t  bindings: {\n\t    sky: '<',\n\t    preload: '<?'\n\t  },\n\t  require: {\n\t    SceneCtrl: '^aframeScene'\n\t  }\n\t};\n\t\n\texports.default = skyComponent;\n\n/***/ },\n\n/***/ 581:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _classCallCheck2 = __webpack_require__(323);\n\t\n\tvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\t\n\tvar _createClass2 = __webpack_require__(324);\n\t\n\tvar _createClass3 = _interopRequireDefault(_createClass2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t/**\n\t * The `SkyCtrl` class is largely responsible for\n\t * orchestrating the translation of URLs into IDs\n\t * and then into DOM elements for attaching to the scene.\n\t *\n\t * It attaches a single `<a-sky/>` the first time a sky is\n\t * loaded, and attaches `<img/>`s to the scenes assets\n\t * preload bucket based on the `$aframeSky` service's instructions.\n\t * \n\t * @memberOf app.components.aframe.sky\n\t */\n\tvar SkyController = function () {\n\t\t/**\n\t  * Initializes the controller's dependencies:\n\t  * - Binds a special one-off $compile function for when\n\t  * \t the scene's `<a-sky />` needs to be compiled\n\t  * - Attaches the $aframeSky service directly\n\t  * \n\t  * @param  {object} $scope     The SkyCtrl's scope\n\t  * @param  {object} $compile   Angular's compile service\n\t  * @param  {object} $aframeSky The sky component's biz logic\n\t  */\n\t\tSkyController.$inject = [\"$scope\", \"$compile\", \"$aframeSky\"];\n\t\tfunction SkyController($scope, $compile, $aframeSky) {\n\t\t\t'ngInject';\n\t\n\t\t\t(0, _classCallCheck3.default)(this, SkyController);\n\t\t\tthis.compileSkyEl = function (callback) {\n\t\t\t\treturn $compile('<a-sky ng-src=\"{{ \\'#\\' + $ctrl.loadedSky }}\" />')($scope, callback);\n\t\t\t};\n\t\t\tthis.$aframeSky = $aframeSky;\n\t\t}\n\t\n\t\t/**\n\t * Store JQLite-wrapped `<a-scene>` and `<a-assets>`;\n\t * init internal check for right click event.\n\t  * \n\t  * @return {void}\t\tNo return\n\t  */\n\t\n\t\n\t\t(0, _createClass3.default)(SkyController, [{\n\t\t\tkey: '$onInit',\n\t\t\tvalue: function $onInit() {\n\t\t\t\t/**\n\t    * Cache vars to store JQLite <img> and <a-sky>\n\t    * Flag for init sky load and array of loaded skies\n\t    * \n\t    * @type {null}\n\t    * @type {null}\n\t    * @type {boolean}\n\t    * @type {Array}\n\t    */\n\t\t\t\tthis.$sceneEl = this.SceneCtrl.$sceneEl;\n\t\t\t\tthis.$assetsEl = this.SceneCtrl.$assetsEl;\n\t\t\t\tthis._skyElLoaded = false;\n\t\t\t\tthis._skyLoadedList = []; //this.$aframeSky.CircularBuffer(10);\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Lifecycle hook that is invoked every time `SkyCtrl.sky`\n\t   * changes value. The first change is discarded since it will\n\t   * always return `null` or `undefined`.\n\t   * \n\t   * @param  {object} newData Incoming change object\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: '$onChanges',\n\t\t\tvalue: function $onChanges(newData) {\n\t\t\t\tif (newData.sky.isFirstChange()) return;\n\t\t\t\tvar skyUrl = newData.sky.currentValue;\n\t\t\t\tif (skyUrl) this.setSky(skyUrl, this.assetIdFromSkyUrl(skyUrl));\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Utility function for stripping the `public_id`\n\t   * property out of a URL segment in the form of\n\t   * `[version]/[path/to/image]/[public_id]`.\n\t   * \n\t   * @param  {string} skyUrl Panorama URL segment\n\t   * @return {string}        Panorama's public_id\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: 'assetIdFromSkyUrl',\n\t\t\tvalue: function assetIdFromSkyUrl(skyUrl) {\n\t\t\t\treturn skyUrl.split('scenes/panorama/')[1].split('.')[0];\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Uses the $aframeSky service to fetch a server-generated\n\t   * list of `skyUrl`s for asset preloading. It grabs the `_id`\n\t   * of the current active scene from `SceneCtrl` and sends it\n\t   * through `$aframeSky.getPreloadList()` to generate the list\n\t   * based on scenelinks in the current active scene.\n\t   *\n\t   * `assetIdFromSkyUrl()` turns each `skyUrl` into an `assetId`,\n\t   * which is checked against the list of preloaded assets.\n\t   * If the asset hasn't been loaded and stored already, 'loadSkyAsset()'\n\t   * queues it up for loading into the scene's `<a-assets></a-assets>`.\n\t   * \n\t   * @return {Promise} Promise that holds an array of skyUrls from server\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: 'preload',\n\t\t\tvalue: function preload() {\n\t\t\t\tvar _this = this;\n\t\n\t\t\t\tthis.$aframeSky.getPreloadList(this.SceneCtrl._currentSceneId).then(function (toPreload) {\n\t\t\t\t\ttoPreload.forEach(function (skyUrl) {\n\t\t\t\t\t\tvar newAssetId = _this.assetIdFromSkyUrl(skyUrl);\n\t\t\t\t\t\tif (!_this._skyLoadedList.includes(newAssetId)) {\n\t\t\t\t\t\t\t_this.loadSkyAsset(skyUrl, newAssetId);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}).catch(function (err) {\n\t\t\t\t\tconsole.warn(err);\n\t\t\t\t});\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Sets the current active sky to an `assetId`. This updates the\n\t   * binding in the scene's `<a-sky ng-src=\"{{ $ctrl.loadedSky }}\" />`\n\t   * to the provided `assetId`, which should match the `id=\"\"` of a\n\t   * asset that has already been fully loaded since this represents\n\t   * the largest and final change a user perceives when switching scenes.\n\t   *\n\t   * If this function is being called, it is safe to assume all\n\t   * requisite loading steps for scene transition have completed, so\n\t   * it is safe to `preload()` the next wave of assets.\n\t   * \n\t   * @param {string} assetId public_id of panorama that is done loading\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: 'setSkyId',\n\t\t\tvalue: function setSkyId(assetId) {\n\t\t\t\tthis.loadedSky = assetId;\n\t\t\t\tthis.preload();\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Acts as a buffer function to `setSkyId()` by checking if the\n\t   * incoming assetId is already in the list of loaded skies \n\t   * if the list includes the ID, `setSkyId()` is called on the ID\n\t   * directly. If the ID is missing from the list, `loadSkyAsset()`\n\t   * is initiated.\n\t   * \n\t   * `setSkyId()` is called after the promise is resolved inside its\n\t   * `then()` method, where a check is also performed whether the\n\t   * scene needs an `<a-sky />` element.\n\t   * \n\t   * @param {string} skyUrl  Panorama URL segment\n\t   * @param {string} assetId Panorama's public_id\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: 'setSky',\n\t\t\tvalue: function setSky(skyUrl, assetId) {\n\t\t\t\tvar _this2 = this;\n\t\n\t\t\t\treturn this._skyLoadedList.includes(assetId) ? this.setSkyId(assetId) : this.loadSkyAsset(skyUrl, assetId).then(function (assetId) {\n\t\t\t\t\tif (!_this2._skyElLoaded) {\n\t\t\t\t\t\t_this2.$skyEl = _this2.loadSkyEl();\n\t\t\t\t\t}\n\t\t\t\t\t_this2.setSkyId(assetId);\n\t\t\t\t});\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Compiles a new image asset with requested URL and ID;\n\t   * adds element to assets and ID to list to prevent reload.\n\t   * \n\t   * @param {string} skyUrl  Panorama URL segment\n\t   * @param {string} assetId Panorama's public_id\n\t   * @return {string}        The original assetId\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: 'loadSkyAsset',\n\t\t\tvalue: function loadSkyAsset(skyUrl, assetId) {\n\t\t\t\tvar _this3 = this;\n\t\n\t\t\t\treturn this.$aframeSky.getSkyDomNode(skyUrl, assetId).then(function (imgNode) {\n\t\t\t\t\t_this3.$assetsEl.append(imgNode);\n\t\t\t\t\t_this3._skyLoadedList.push(assetId);\n\t\t\t\t\tconsole.log('sky asset preloaded: ', skyUrl);\n\t\t\t\t\treturn assetId;\n\t\t\t\t});\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Runs the `compileSkyEl()` method from the constructor\n\t   * to build the sky element; attaches it to the scene\n\t   * and marks the element as loaded.\n\t   * \n\t   * @param  {string} sky ID for asset reference\n\t   * @return {Element}    JQLite-wrapped <a-sky> element\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: 'loadSkyEl',\n\t\t\tvalue: function loadSkyEl() {\n\t\t\t\tvar _this4 = this;\n\t\n\t\t\t\treturn this.compileSkyEl(function (clone) {\n\t\t\t\t\t_this4.$sceneEl.append(clone);\n\t\t\t\t\t_this4._skyElLoaded = true;\n\t\t\t\t\treturn clone;\n\t\t\t\t});\n\t\t\t}\n\t\t}]);\n\t\treturn SkyController;\n\t}();\n\t\n\texports.default = SkyController;\n\n/***/ },\n\n/***/ 582:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _keys = __webpack_require__(418);\n\t\n\tvar _keys2 = _interopRequireDefault(_keys);\n\t\n\tvar _classCallCheck2 = __webpack_require__(323);\n\t\n\tvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\t\n\tvar _createClass2 = __webpack_require__(324);\n\t\n\tvar _createClass3 = _interopRequireDefault(_createClass2);\n\t\n\tvar _aframe = __webpack_require__(434);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar COMPRESS_MAX = 100,\n\t    COMPRESS_FACTOR = 12;\n\t\n\t/**\n\t * The $aframeSky class is a service responsible for\n\t * the business logic of the aframeSky component.\n\t *\n\t * The SceneCtrl controller uses the `$aframeSky.sky`\n\t * getter/setter to detect changes to the active scene's\n\t * sky; the SkyCtrl controller uses the `getSkyDomNode()`\n\t * method to produce a fully loaded `<img>` for appending\n\t * the SceneCtrl.$assetsEl (`<a-assets>`).\n\t * \n\t * @memberOf app.components.aframe.sky\n\t */\n\t\n\tvar SkyService = function () {\n\t\tSkyService.$inject = [\"$q\", \"$tourApi\", \"UserSession\", \"GLOBAL_SETTINGS\"];\n\t\tfunction SkyService($q, $tourApi, UserSession, GLOBAL_SETTINGS) {\n\t\t\t'ngInject';\n\t\n\t\t\t(0, _classCallCheck3.default)(this, SkyService);\n\t\t\tthis.$q = $q;\n\t\t\tthis.Preload = $tourApi.preload;\n\t\t\tthis.UserSession = UserSession;\n\t\n\t\t\tthis.imageApiUrl = GLOBAL_SETTINGS.imageApiUrl;\n\t\t}\n\t\t/**\n\t  * Getter/setter for formatting sky URL from sceneData.\n\t  * \n\t  * @type {string}\n\t  * @example\n\t  * 'http://res.cloudinary.com/uoit-virtual-tour/image/upload/v1480529929/scenes/panorama/k23dnerigdctblxgq5vm.jpg'\n\t  */\n\t\n\t\n\t\t(0, _createClass3.default)(SkyService, [{\n\t\t\tkey: 'getSettings',\n\t\n\t\n\t\t\t/**\n\t   * Utility function for reading and parsing user settings\n\t   * based on aframe's isMobile() method and the UserSession\n\t   * service's usage settings; parses into an object that\n\t   * eventually becomes a Cloudinary URL component string.\n\t   * \n\t   * If the device is mobile, limit image resolution to 2048x1024\n\t   * due to rendering limit.\n\t   * \n\t   * @return {string} Formatted Cloudinary setting string (`c_scale,f_auto,etc`)\n\t   */\n\t\t\tvalue: function getSettings() {\n\t\t\t\tvar mobile = _aframe.utils.device.isMobile(),\n\t\t\t\t    lowRes = !this.UserSession.usage.resolution.val;\n\t\t\t\tvar settings = {\n\t\t\t\t\tw: mobile || lowRes ? 2048 : 4096,\n\t\t\t\t\th: mobile || lowRes ? 1024 : 2048,\n\t\t\t\t\tc: 'scale',\n\t\t\t\t\tf: 'auto',\n\t\t\t\t\tq: COMPRESS_MAX - COMPRESS_FACTOR * this.UserSession.usage.compression.val\n\t\t\t\t};\n\t\t\t\tvar output = [];\n\t\t\t\t(0, _keys2.default)(settings).forEach(function (key) {\n\t\t\t\t\toutput.push(key + '_' + settings[key]);\n\t\t\t\t});\n\t\t\t\treturn output.join(',');\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Fetches an efficiently-generated list of `skyUrl`s\n\t   * from the server, which uses a scene `_id` to read\n\t   * potential candidates for preloading from the scene's\n\t   * scenelinks.\n\t   *\n\t   * If the `UserSession` service's preloading settings are\n\t   * set to 1 or 2, it returns the full list for further\n\t   * manipulation; otherwise, it returns an empty array\n\t   * (0/no preload).\n\t   * \n\t   * @param  {string} id The _id of a scene to preload links for\n\t   * @return {Promise}   A promise that will fulfill the preload list\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: 'getPreloadList',\n\t\t\tvalue: function getPreloadList(id) {\n\t\t\t\tvar _this = this;\n\t\n\t\t\t\treturn this.$q(function (resolve, reject) {\n\t\t\t\t\tswitch (_this.UserSession.usage.preloading.val) {\n\t\t\t\t\t\tcase 0:\n\t\t\t\t\t\t\tresolve([]);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 1:\n\t\t\t\t\t\tcase 2:\n\t\t\t\t\t\t\t_this.Preload.get({ id: id }).$promise.then(function (data) {\n\t\t\t\t\t\t\t\treturn resolve(data);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\treject('Can\\'t determine preload settings');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Converts a skyUrl and an assetId into a fully\n\t   * compiled DOM element; returns a promise representing\n\t   * a sky asset that will eventually be fully loaded.\n\t   *\n\t   * Uses `getSettings()` to parse userSession settings\n\t   * into a Cloudinary setting string.\n\t   * \n\t   * @param  {string} url Partial URL, e.g. `this.sky` getter/setter\n\t   * @param  {string} id  An asset ID, e.g. the panorama's `public_id`\n\t   * @return {Promise}    A promise that will resolve to the loaded `<img>`\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: 'getSkyDomNode',\n\t\t\tvalue: function getSkyDomNode(url, id) {\n\t\t\t\tvar _this2 = this;\n\t\n\t\t\t\treturn this.$q(function (resolve, reject) {\n\t\t\t\t\tvar img = angular.element('<img src=\"' + _this2.imageApiUrl + '/' + _this2.getSettings() + '/v' + url + '\" id=\"' + id + '\" crossOrigin=\"anonymous\" />');\n\t\t\t\t\timg.on('load', function () {\n\t\t\t\t\t\treturn resolve(img);\n\t\t\t\t\t});\n\t\t\t\t\timg.on('error', function () {\n\t\t\t\t\t\treturn reject('Image load error');\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'sky',\n\t\t\tget: function get() {\n\t\t\t\treturn this.panorama ? [this.panorama.version, this.panorama.public_id].join('/') : null;\n\t\t\t},\n\t\t\tset: function set(panorama) {\n\t\t\t\tconsole.log('sky service set to:', panorama);\n\t\t\t\tthis.panorama = panorama;\n\t\t\t}\n\t\t}]);\n\t\treturn SkyService;\n\t}();\n\t\n\texports.default = SkyService;\n\n/***/ },\n\n/***/ 583:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _angular = __webpack_require__(299);\n\t\n\tvar _angular2 = _interopRequireDefault(_angular);\n\t\n\tvar _angularUiRouter = __webpack_require__(301);\n\t\n\tvar _angularUiRouter2 = _interopRequireDefault(_angularUiRouter);\n\t\n\tvar _angulartics = __webpack_require__(302);\n\t\n\tvar _angulartics2 = _interopRequireDefault(_angulartics);\n\t\n\tvar _angularticsGoogleAnalytics = __webpack_require__(304);\n\t\n\tvar _angularticsGoogleAnalytics2 = _interopRequireDefault(_angularticsGoogleAnalytics);\n\t\n\tvar _scenelink = __webpack_require__(584);\n\t\n\tvar _scenelink2 = _interopRequireDefault(_scenelink);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar scenelinkModule = _angular2.default.module('aframe.scenelink', [_angularUiRouter2.default, _angulartics2.default, _angularticsGoogleAnalytics2.default]).directive('sceneLink', _scenelink2.default).name;\n\t\n\texports.default = scenelinkModule;\n\n/***/ },\n\n/***/ 584:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tscenelinkDirective.$inject = [\"$state\", \"$popupWindow\", \"$tourApi\", \"$analytics\"];\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _scenelink = __webpack_require__(585);\n\t\n\tvar _scenelink2 = _interopRequireDefault(_scenelink);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction scenelinkDirective($state, $popupWindow, $tourApi, $analytics) {\n\t\t'ngInject';\n\t\n\t\treturn {\n\t\t\ttemplate: _scenelink2.default,\n\t\t\trestrict: 'A',\n\t\t\tscope: {\n\t\t\t\tsceneLink: '='\n\t\t\t},\n\t\t\trequire: '^aframeScene',\n\t\t\tlink: function link(scope, elem, attrs, SceneCtrl) {\n\t\t\t\tvar SceneResource = $tourApi.scene,\n\t\t\t\t    LocationResource = $tourApi.location;\n\t\t\t\t//  and handlers: success...\n\t\t\t\tvar gotoSceneHandler = function gotoSceneHandler(data) {\n\t\t\t\t\t$analytics.eventTrack('click', { category: 'scenelink', label: [data.scene.parent.code, data.scene.code].join('_') });\n\t\t\t\t\t$state.transitionTo('scene', { location: data.location.code, building: data.scene.parent.code, scene: data.scene.code });\n\t\t\t\t\t// $state.go('scene', { building: data.parent.code, scene: data.code });\n\t\t\t\t};\n\t\t\t\t// ...and error\n\t\t\t\tvar errorHandler = function errorHandler(error) {\n\t\t\t\t\tvar locals = {\n\t\t\t\t\t\ttype: 'Scene load error!',\n\t\t\t\t\t\tmessage: 'Looks like this scene link is broken  darn.'\n\t\t\t\t\t};\n\t\t\t\t\t$popupWindow.error({ locals: locals });\n\t\t\t\t};\n\t\t\t\t//\n\t\t\t\t// Listen for clicks on scene link element\n\t\t\t\tscope.elemClick = function () {\n\t\t\t\t\t// If there's a right click active...\n\t\t\t\t\tif (SceneCtrl._rightClick && SceneCtrl._editable) {\n\t\t\t\t\t\t// ...open the scene link editor:\n\t\t\t\t\t\tSceneCtrl.editItem(SceneCtrl._rightClick, scope.sceneLink, SceneCtrl.sceneLinks);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t(function () {\n\t\t\t\t\t\t\t// ...otherwise just use the default scene link behavior\n\t\t\t\t\t\t\tdocument.getElementById('link_' + scope.sceneLink._id).emit('goto');\n\t\t\t\t\t\t\tvar scene = void 0;\n\t\t\t\t\t\t\tSceneResource.get({ id: scope.sceneLink.scene._id }).$promise.then(function (data) {\n\t\t\t\t\t\t\t\tscene = data;\n\t\t\t\t\t\t\t\treturn LocationResource.get({ id: scene.parent.parent }).$promise;\n\t\t\t\t\t\t\t}) //**\n\t\t\t\t\t\t\t.then(function (location) {\n\t\t\t\t\t\t\t\treturn { location: location, scene: scene };\n\t\t\t\t\t\t\t}) //**\n\t\t\t\t\t\t\t.then(gotoSceneHandler, errorHandler);\n\t\t\t\t\t\t})();\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\t// elem.on('click', elemClick);\n\t\t\t}\n\t\t};\n\t}\n\t\n\texports.default = scenelinkDirective;\n\n/***/ },\n\n/***/ 585:\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<a-entity ng-attr-position=\\\"{{ sceneLink.position.join(' ') }}\\\"\\n\\t\\t\\t\\t\\tng-attr-rotation=\\\"{{ sceneLink.rotation.join(' ') }}\\\">\\n  <scene-link ng-attr-id=\\\"{{ ::sceneLink._id }}\\\"\\n              color=\\\"#0077CA\\\"\\n              opacity=\\\"0.85\\\"\\n              hover-animation=\\\"scaleFactor:1.1;colorFactor:#c71566;opacityFactor:0.7\\\"\\n              ui-sref=\\\"scene({ location: sceneLink.scene.parent.parent.code, building: sceneLink.scene.parent.code, scene: sceneLink.scene.code })\\\">\\n\\t  <!-- <a-animation attribute=\\\"rotation\\\" begin=\\\"goto\\\" dur=\\\"500\\\" to=\\\"360 0 90\\\"></a-animation> -->\\n  </scene-link>\\n\\t<a-animation attribute=\\\"scale\\\" begin=\\\"goto\\\" dur=\\\"100\\\" to=\\\"0 0 0\\\"></a-animation>\\n</a-entity>\"\n\n/***/ },\n\n/***/ 586:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _angular = __webpack_require__(299);\n\t\n\tvar _angular2 = _interopRequireDefault(_angular);\n\t\n\tvar _angularUiRouter = __webpack_require__(301);\n\t\n\tvar _angularUiRouter2 = _interopRequireDefault(_angularUiRouter);\n\t\n\tvar _angulartics = __webpack_require__(302);\n\t\n\tvar _angulartics2 = _interopRequireDefault(_angulartics);\n\t\n\tvar _angularticsGoogleAnalytics = __webpack_require__(304);\n\t\n\tvar _angularticsGoogleAnalytics2 = _interopRequireDefault(_angularticsGoogleAnalytics);\n\t\n\tvar _hotspot = __webpack_require__(587);\n\t\n\tvar _hotspot2 = _interopRequireDefault(_hotspot);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar hotspotModule = _angular2.default.module('aframe.hotspot', [_angularUiRouter2.default, _angulartics2.default, _angularticsGoogleAnalytics2.default]).directive('hotSpot', _hotspot2.default).name;\n\t\n\texports.default = hotspotModule;\n\n/***/ },\n\n/***/ 587:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\thotspotDirective.$inject = [\"$state\", \"$mapApi\", \"$popupWindow\", \"$analytics\"];\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _hotspot = __webpack_require__(588);\n\t\n\tvar _hotspot2 = _interopRequireDefault(_hotspot);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction hotspotDirective($state, $mapApi, $popupWindow, $analytics) {\n\t\t'ngInject';\n\t\n\t\treturn {\n\t\t\ttemplate: _hotspot2.default,\n\t\t\trestrict: 'A',\n\t\t\tscope: {\n\t\t\t\thotSpot: '='\n\t\t\t},\n\t\t\trequire: '^aframeScene',\n\t\t\tlink: function link(scope, elem, attrs, SceneCtrl) {\n\t\t\t\tvar FeatureResource = $mapApi.feature;\n\t\t\t\tvar hotspotId = scope.hotSpot._id;\n\t\n\t\t\t\t//  and handlers: success...\n\t\t\t\tvar viewHotspot = function viewHotspot(data) {\n\t\t\t\t\tvar _ref = data.properties || data,\n\t\t\t\t\t    category = _ref.category,\n\t\t\t\t\t    desc = _ref.desc,\n\t\t\t\t\t    href = _ref.href,\n\t\t\t\t\t    name = _ref.name,\n\t\t\t\t\t    locals = { type: 'hotspot', category: category, desc: desc, href: href, name: name };\n\t\n\t\t\t\t\t$analytics.eventTrack('click', { category: 'hotspot', label: hotspotId });\n\t\t\t\t\treturn $popupWindow.info({ locals: locals });\n\t\t\t\t};\n\t\t\t\t// ...and error\n\t\t\t\tvar errorHandler = function errorHandler(error) {\n\t\t\t\t\tvar locals = {\n\t\t\t\t\t\ttype: 'Hotspot load error!',\n\t\t\t\t\t\tmessage: 'Looks like this hotspot is broken  darn.'\n\t\t\t\t\t};\n\t\t\t\t\t$popupWindow.error({ locals: locals });\n\t\t\t\t};\n\t\n\t\t\t\t// Listen for clicks on scene link element\n\t\t\t\tscope.elemClick = function () {\n\t\t\t\t\t// If there's a right click active...\n\t\t\t\t\tif (SceneCtrl._rightClick && SceneCtrl._editable) {\n\t\t\t\t\t\t// ...open the scene link editor:\n\t\t\t\t\t\tSceneCtrl.editItem(SceneCtrl._rightClick, scope.hotSpot, SceneCtrl.hotSpots);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdocument.getElementById('hotSpot_' + hotspotId).emit('goto');\n\t\t\t\t\t\tif (scope.hotSpot.linked && scope.hotSpot.feature) {\n\t\t\t\t\t\t\tFeatureResource.get({\n\t\t\t\t\t\t\t\tid: scope.hotSpot.feature\n\t\t\t\t\t\t\t}).$promise.then(function (data) {\n\t\t\t\t\t\t\t\treturn viewHotspot(data);\n\t\t\t\t\t\t\t}, errorHandler).then(function (result) {\n\t\t\t\t\t\t\t\t// ...\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tviewHotspot(scope.hotSpot).then(function (result) {\n\t\t\t\t\t\t\t\t// ...\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\t// elem.on('click', elemClick);\n\t\t\t}\n\t\t\t//\n\t\n\t\t};\n\t}\n\t\n\texports.default = hotspotDirective;\n\n/***/ },\n\n/***/ 588:\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<a-entity\\n\\tng-attr-position=\\\"{{ hotSpot.position.join(' ') }}\\\" look-at=\\\"[camera]\\\">\\n\\t<a-entity>\\n\\t\\t<a-torus \\n\\t\\t\\tarc=\\\"360\\\"\\n\\t\\t\\tradius=\\\"0.25\\\"\\n\\t\\t\\tradius-tubular=\\\"0.015\\\"\\n\\t\\t\\tsegments-tubular=\\\"32\\\"\\n\\t\\t\\trotation=\\\"0 0 0\\\"\\n\\t\\t\\tmixin=\\\"mixin-blue\\\"\\n\\t\\t\\tshader=\\\"flat\\\"\\n\\t\\t\\tng-click=\\\"elemClick()\\\"\\n\\t\\t\\tevent-set__1=\\\"_event: mouseenter; material.opacity: 0.6; material.color: #C71566;\\\"\\n\\t\\t\\tevent-set__2=\\\"_event: mouseleave; material.opacity: 0.85; material.color: #0077CA;\\\"\\n\\t\\t\\tevent-set__3=\\\"_event: focus; material.opacity: 0.6; material.color: #C71566;\\\"\\n\\t\\t\\tevent-set__4=\\\"_event: blur; material.opacity: 0.85; material.color: #0077CA;\\\">\\n\\t\\t\\t<a-animation\\n\\t\\t\\t\\tbegin=\\\"goto\\\"\\n\\t\\t\\t\\tattribute=\\\"rotation\\\"\\n\\t\\t\\t\\tfrom=\\\"0 0 0\\\"\\n\\t\\t\\t\\tto=\\\"0 720 0\\\"\\n\\t\\t\\t\\tdur=\\\"500\\\">\\n\\t\\t\\t</a-animation>\\n\\t\\t\\t<a-entity\\n\\t\\t\\t\\tposition=\\\"-0.025 -0.165 -0.01\\\"\\n\\t\\t\\t\\tscale=\\\"0.6 0.6 0.6\\\"\\n\\t\\t\\t\\ttext=\\\"text:i\\\"\\n\\t\\t\\t\\tmaterial=\\\"shader: flat;color:#0077CA;\\\"\\n\\t\\t\\t\\tevent-set__1=\\\"_event: mouseenter; material.opacity: 0.6; material.color: #C71566;\\\"\\n\\t\\t\\t\\tevent-set__2=\\\"_event: mouseleave; material.opacity: 0.85; material.color: #0077CA;\\\"\\n\\t\\t\\t\\tevent-set__3=\\\"_event: focus; material.opacity: 0.6; material.color: #C71566;\\\"\\n\\t\\t\\t\\tevent-set__4=\\\"_event: blur; material.opacity: 0.85; material.color: #0077CA;\\\">\\n\\t\\t\\t</a-entity>\\n\\t\\t\\t<a-entity \\n\\t\\t\\t\\tng-attr-id=\\\"hotSpot_{{ ::hotSpot._id }}\\\"\\n\\t\\t\\t\\tscale=\\\"0.5 0.5 0.5\\\"\\n\\t\\t\\t\\tvisible=\\\"false\\\"\\n\\t\\t\\t\\tevent-set__1=\\\"_event: mouseenter; visible: true;\\\"\\n\\t\\t\\t\\tevent-set__2=\\\"_event: mouseleave; visible: false;\\\">\\n\\t\\t\\t\\t<a-sphere radius=\\\"0.6\\\"  mixin=\\\"mixin-glow\\\">\\n\\t\\t\\t\\t\\t<a-animation\\n\\t\\t\\t\\t\\t\\tattribute=\\\"scale\\\"\\n\\t\\t\\t\\t\\t\\tfrom=\\\"0.9 0.9 0.9\\\"\\n\\t\\t\\t\\t\\t\\tto=\\\"1.25 1.25 1.25\\\"\\n\\t\\t\\t\\t\\t\\trepeat=\\\"indefinite\\\"\\n\\t\\t\\t\\t\\t\\tdirection=\\\"alternate\\\"\\n\\t\\t\\t\\t\\t\\tdur=\\\"1500\\\">\\n\\t\\t\\t\\t\\t</a-animation>\\n\\t\\t\\t\\t</a-sphere>\\n\\t\\t\\t\\t<a-sphere radius=\\\"0.6\\\" mixin=\\\"mixin-glow\\\">\\n\\t\\t\\t\\t\\t<a-animation\\n\\t\\t\\t\\t\\t\\tattribute=\\\"scale\\\"\\n\\t\\t\\t\\t\\t\\tfrom=\\\"1 1 1\\\"\\n\\t\\t\\t\\t\\t\\tto=\\\"1.5 1.5 1.5\\\"\\n\\t\\t\\t\\t\\t\\trepeat=\\\"indefinite\\\"\\n\\t\\t\\t\\t\\t\\tdirection=\\\"alternate\\\"\\n\\t\\t\\t\\t\\t\\tdur=\\\"1500\\\">\\n\\t\\t\\t\\t\\t</a-animation>\\n\\t\\t\\t\\t</a-sphere>\\n\\t\\t\\t</a-entity>\\n\\t\\t</a-torus>\\n\\t\\t<a-animation\\n\\t\\t\\tattribute=\\\"rotation\\\"\\n\\t\\t\\tfrom=\\\"0 0 0\\\"\\n\\t\\t\\tto=\\\"0 360 0\\\"\\n\\t\\t\\trepeat=\\\"indefinite\\\"\\n\\t\\t\\tdirection=\\\"alternate\\\"\\n\\t\\t\\tdur=\\\"2000\\\">\\n\\t\\t</a-animation>\\n\\t</a-entity>\\n</a-entity>\"\n\n/***/ },\n\n/***/ 589:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _angular = __webpack_require__(299);\n\t\n\tvar _angular2 = _interopRequireDefault(_angular);\n\t\n\tvar _angularMaterial = __webpack_require__(310);\n\t\n\tvar _angularMaterial2 = _interopRequireDefault(_angularMaterial);\n\t\n\tvar _editor = __webpack_require__(590);\n\t\n\tvar _editor2 = _interopRequireDefault(_editor);\n\t\n\tvar _editor3 = __webpack_require__(591);\n\t\n\tvar _editor4 = _interopRequireDefault(_editor3);\n\t\n\tvar _editor5 = __webpack_require__(602);\n\t\n\tvar _editor6 = _interopRequireDefault(_editor5);\n\t\n\tvar _editorDialog = __webpack_require__(605);\n\t\n\tvar _editorDialog2 = _interopRequireDefault(_editorDialog);\n\t\n\tvar _editorDialog3 = __webpack_require__(606);\n\t\n\tvar _editorDialog4 = _interopRequireDefault(_editorDialog3);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar editorModule = _angular2.default.module('aframe.editor', [_angularMaterial2.default]).directive('editable', _editor2.default).component('sceneEditor', _editor4.default).service('$aframeEditor', _editor6.default).config([\"$mdPanelProvider\", function ($mdPanelProvider) {\n\t\t'ngInject';\n\t\n\t\t$mdPanelProvider.definePreset('editorDialog', {\n\t\t\ttemplate: _editorDialog2.default,\n\t\t\tcontroller: _editorDialog4.default,\n\t\t\tattachTo: _angular2.default.element(document.body),\n\t\t\tcontrollerAs: '$ctrl',\n\t\t\tbindToController: true,\n\t\t\tpanelClass: 'editor-dialog',\n\t\t\tclickOutsideToClose: true,\n\t\t\tescapeToClose: true,\n\t\t\tfocusOnOpen: true,\n\t\t\tzIndex: 85\n\t\t});\n\t}]).constant('EDITOR_MESSAGES', {\n\t\tconfirm: {\n\t\t\ttextContent: 'Are you sure?',\n\t\t\taction: 'Confirm',\n\t\t\thighlightAction: true,\n\t\t\thighlightClass: 'md-warn',\n\t\t\tposition: 'bottom left',\n\t\t\thideDelay: 0\n\t\t},\n\t\titemRemoved: {\n\t\t\ttextContent: 'Item removed!',\n\t\t\taction: 'Publish changes',\n\t\t\thighlightAction: true,\n\t\t\thighlightClass: 'md-primary',\n\t\t\tposition: 'bottom left',\n\t\t\thideDelay: 5000\n\t\t},\n\t\titemAdded: {\n\t\t\ttextContent: 'Item added!',\n\t\t\taction: 'Publish changes',\n\t\t\thighlightAction: true,\n\t\t\thighlightClass: 'md-primary',\n\t\t\tposition: 'bottom left',\n\t\t\thideDelay: 5000\n\t\t},\n\t\tdraftLoaded: {\n\t\t\ttextContent: 'Draft loaded!',\n\t\t\taction: 'Publish changes',\n\t\t\thighlightAction: true,\n\t\t\thighlightClass: 'md-primary',\n\t\t\tposition: 'bottom left',\n\t\t\thideDelay: 5000\n\t\t},\n\t\tsaveDraft: {\n\t\t\ttextContent: 'Draft saved!',\n\t\t\taction: 'Publish changes',\n\t\t\thighlightAction: true,\n\t\t\thighlightClass: 'md-primary',\n\t\t\tposition: 'bottom left',\n\t\t\thideDelay: 5000\n\t\t},\n\t\tdraftFound: {\n\t\t\ttextContent: 'Saved drafts found!',\n\t\t\taction: 'Load most recent',\n\t\t\thighlightAction: true,\n\t\t\thighlightClass: 'md-primary',\n\t\t\tposition: 'bottom left',\n\t\t\thideDelay: 5000\n\t\t},\n\t\tpublish: {\n\t\t\ttextContent: 'Changes published!',\n\t\t\taction: 'Dismiss',\n\t\t\tposition: 'bottom left',\n\t\t\thideDelay: 5000\n\t\t},\n\t\tdiscardDraft: {\n\t\t\ttextContent: 'Draft discarded!',\n\t\t\taction: 'Dismiss',\n\t\t\tposition: 'bottom left',\n\t\t\thideDelay: 1000\n\t\t},\n\t\trevertToDraft: {\n\t\t\ttextContent: 'Reverted to last draft!',\n\t\t\taction: 'Dismiss',\n\t\t\tposition: 'bottom left',\n\t\t\thideDelay: 2000\n\t\t}\n\t}).constant('DATA_MODELS', {\n\t\tscene: {\n\t\t\tname: '',\n\t\t\tcode: '',\n\t\t\t// state: ''\n\t\t\tparent: '',\n\t\t\tpanorama: '' //{}\n\t\t\t// sceneLinks: []\n\t\t\t// hotSpots: []\n\t\t\t// assets: []\n\t\t\t// entities: []\n\t\t\t// script: ''\n\t\t},\n\t\tsceneLinks: {\n\t\t\tscene: '',\n\t\t\tposition: [0, 0, 0],\n\t\t\trotation: [0, 0, 70]\n\t\t},\n\t\thotSpots: {\n\t\t\tlinked: false,\n\t\t\tname: '',\n\t\t\tdesc: '',\n\t\t\tfeature: '',\n\t\t\tposition: [0, 0, 0]\n\t\t}\n\t}).name;\n\t\n\texports.default = editorModule;\n\n/***/ },\n\n/***/ 590:\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\teditorDirective.$inject = [\"$analytics\"];\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\tfunction editorDirective($analytics) {\n\t\t'ngInject';\n\t\n\t\treturn {\n\t\t\trestrict: 'A',\n\t\t\tscope: {\n\t\t\t\teditable: '@'\n\t\t\t},\n\t\t\trequire: '^aframeScene',\n\t\t\tlink: function link(scope, elem, attrs, SceneCtrl) {\n\t\t\t\tvar openEditor = function openEditor(event) {\n\t\t\t\t\t// If there's a right click active...\n\t\t\t\t\tconsole.log(scope.$parent);\n\t\t\t\t\tif (SceneCtrl._rightClick && SceneCtrl._editable) {\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t// ...open the scene link editor:\n\t\t\t\t\t\tSceneCtrl.editItem(SceneCtrl._rightClick, scope.$parent[scope.editable], SceneCtrl[scope.editable + 's']);\n\t\t\t\t\t\t$analytics.eventTrack('click', {\n\t\t\t\t\t\t\tcategory: 'edit:scene',\n\t\t\t\t\t\t\tlabel: scope.$parent[scope.editable]._id\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\telem.on('click', openEditor);\n\t\t\t}\n\t\t};\n\t}\n\t\n\texports.default = editorDirective;\n\n/***/ },\n\n/***/ 591:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _editor = __webpack_require__(592);\n\t\n\tvar _editor2 = _interopRequireDefault(_editor);\n\t\n\tvar _editor3 = __webpack_require__(593);\n\t\n\tvar _editor4 = _interopRequireDefault(_editor3);\n\t\n\t__webpack_require__(600);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t/**\n\t * The scene editor is an attachment for the scene\n\t * component that allows in-scene editing of scene elements.\n\t * It should only be rendered directly by the server, when\n\t * an admin user is logged in.\n\t * @example\n\t * <aframe-scene> <!-- required -->\n\t *   <scene-editor></scene-editor>\n\t * </aframe-scene>\n\t */\n\tvar editorComponent = {\n\t  template: _editor2.default,\n\t  controller: _editor4.default,\n\t  require: {\n\t    SceneCtrl: '^aframeScene'\n\t  }\n\t};\n\t\n\texports.default = editorComponent;\n\n/***/ },\n\n/***/ 592:\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<md-fab-toolbar md-open=\\\"demo.isOpen\\\" count=\\\"demo.count\\\" md-direction=\\\"left\\\">\\n  <md-fab-trigger class=\\\"align-with-text\\\">\\n    <md-button aria-label=\\\"Open scene editor menu\\\" class=\\\"md-fab md-primary\\\">\\n\\t\\t  <md-tooltip md-direction=\\\"left\\\" md-autohide ng-if=\\\"!$root.appSettings.settings.showHints.val\\\">\\n\\t\\t    Open scene editor menu\\n\\t\\t  </md-tooltip>\\n      <ng-md-icon icon=\\\"edit\\\"></ng-md-icon>\\n    </md-button>\\n  </md-fab-trigger>\\n\\n  <md-toolbar>\\n    <md-fab-actions class=\\\"md-toolbar-tools\\\" ng-mouseleave=\\\"$ctrl.tooltipMsg = false\\\">\\n      <md-button aria-label=\\\"New scene\\\" class=\\\"md-icon-button\\\" ng-mouseenter=\\\"$ctrl.tooltipMsg = 'New scene'\\\" ng-click=\\\"$ctrl.newScene($event)\\\">\\n        <ng-md-icon icon=\\\"insert_drive_file\\\"></ng-md-icon>\\n      </md-button>\\n      <span class=\\\"fab-divider\\\"></span>\\n      <md-button aria-label=\\\"New scene link\\\" class=\\\"md-icon-button\\\" ng-mouseenter=\\\"$ctrl.tooltipMsg = 'New scene link'\\\" ng-click=\\\"$ctrl.addItem($event, 'sceneLinks')\\\">\\n        <ng-md-icon icon=\\\"add_location\\\"></ng-md-icon>\\n      </md-button>\\n      <md-button aria-label=\\\"photo\\\" class=\\\"md-icon-button\\\" ng-mouseenter=\\\"$ctrl.tooltipMsg = 'New hotspot'\\\" ng-click=\\\"$ctrl.addItem($event, 'hotSpots')\\\">\\n        <ng-md-icon icon=\\\"info_outline\\\"></ng-md-icon>\\n      </md-button>\\n      <span class=\\\"fab-divider\\\"></span>\\n      <md-button aria-label=\\\"Save draft\\\" class=\\\"md-icon-button\\\" ng-mouseenter=\\\"$ctrl.tooltipMsg = 'Save draft'\\\" ng-click=\\\"$ctrl.saveDraft()\\\">\\n        <ng-md-icon icon=\\\"save\\\"></ng-md-icon>\\n      </md-button>\\n\\n      <md-menu md-offset=\\\"0 -7\\\">\\n        <md-button aria-label=\\\"Load draft\\\" class=\\\"md-icon-button\\\" ng-mouseenter=\\\"$ctrl.tooltipMsg = 'Load draft'\\\" ng-click=\\\"$ctrl.checkForDraft(false);$mdOpenMenu($event)\\\">\\n\\t        <ng-md-icon icon=\\\"folder_open\\\"></ng-md-icon>\\n\\t      </md-button>\\n        <md-menu-content width=\\\"6\\\" ng-switch=\\\"$ctrl.draftList.length\\\">\\n          <md-menu-item ng-repeat=\\\"draft in $ctrl.draftList\\\">\\n            <md-button ng-click=\\\"$ctrl.loadDraft(draft)\\\" ng-attr-id=\\\"draft_{{ ::draft.updatedAt }}\\\">{{ draft.updatedAt | date:'medium' }}</md-button>\\n            <md-button ng-click=\\\"$ctrl.discardDraft(draft)\\\" class=\\\"md-icon-button md-raised md-warn\\\" aria-label=\\\"Discard this draft\\\" aria-labelledby=\\\"draft_{{ ::draft.updatedAt }}\\\">\\n\\t\\t\\t        <ng-md-icon icon=\\\"delete\\\" size=\\\"22\\\"></ng-md-icon>\\n\\t\\t\\t      </md-button>\\n          </md-menu-item>\\n          <md-menu-item ng-hide=\\\"$ctrl.draftList.length\\\">\\n          \\t<span>No drafts available</span>\\n          </md-menu-item>\\n        </md-menu-content>\\n      </md-menu>\\n\\n      <md-button aria-label=\\\"Publish changes\\\" class=\\\"md-icon-button\\\" ng-mouseenter=\\\"$ctrl.tooltipMsg = 'Publish changes'\\\" ng-click=\\\"$ctrl.publish()\\\">\\n        <ng-md-icon icon=\\\"publish\\\"></ng-md-icon>\\n      </md-button>\\n      <md-button ng-show=\\\"$ctrl.tooltipMsg\\\">{{ $ctrl.tooltipMsg }}</md-button>\\n    </md-fab-actions>\\n  </md-toolbar>\\n</md-fab-toolbar>\"\n\n/***/ },\n\n/***/ 593:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _assign = __webpack_require__(594);\n\t\n\tvar _assign2 = _interopRequireDefault(_assign);\n\t\n\tvar _classCallCheck2 = __webpack_require__(323);\n\t\n\tvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\t\n\tvar _createClass2 = __webpack_require__(324);\n\t\n\tvar _createClass3 = _interopRequireDefault(_createClass2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t/**\n\t * This controller is only instantiated with the server-rendered\n\t * editor component. It works by mounting a number of its\n\t * behaviours onto the scene component's `SceneCtrl` directly\n\t * and by proxying the `$aframeScene` service.\n\t * \n\t * @param {Object} $mdPanel      ng-material's panel service\n\t * @param {Object} $mdDialog     ng-material's dialog service\n\t * @param {Object} $aframeScene  The scene service\n\t * @param {Object} $aframeEditor The editor service\n\t * @param {Object} DATA_MODELS\t Database schema representations\n\t */\n\tvar EditorController = function () {\n\t\tEditorController.$inject = [\"$timeout\", \"$mdPanel\", \"$mdDialog\", \"$aframeScene\", \"$aframeEditor\", \"DATA_MODELS\"];\n\t\tfunction EditorController($timeout, $mdPanel, $mdDialog, $aframeScene, $aframeEditor, DATA_MODELS) {\n\t\t\t'ngInject';\n\t\n\t\t\t(0, _classCallCheck3.default)(this, EditorController);\n\t\t\tthis.$timeout = $timeout;\n\t\t\tthis.$mdPanel = $mdPanel;\n\t\t\tthis.$mdDialog = $mdDialog;\n\t\t\tthis.$aframeScene = $aframeScene;\n\t\t\tthis.$aframeEditor = $aframeEditor;\n\t\t\t/**\n\t   * Property to store the state of the current scene with regard to\n\t   * whether there are unsaved changes.\n\t   * \n\t   * @memberof EditorCtrl\n\t   * @type {Boolean}\n\t   */\n\t\t\tthis._unpublishedChanges = false;\n\t\t\t/**\n\t   * Editor's reference to what the database's data schema's should look like.\n\t   * \n\t   * @memberof EditorCtrl\n\t   * @type {Object}\n\t   */\n\t\t\tthis._schemas = DATA_MODELS;\n\t\t}\n\t\n\t\t/**\n\t  * Utility method for keeping controller's model of scene data in\n\t  * sync with `$aframeScene`'s.\n\t  * \n\t  * @param  {Object} data Scene data to update with\n\t  */\n\t\n\t\n\t\t(0, _createClass3.default)(EditorController, [{\n\t\t\tkey: 'updateSceneData',\n\t\t\tvalue: function updateSceneData(data) {\n\t\t\t\t(0, _assign2.default)(this.SceneCtrl, data);\n\t\t\t\tthis.$aframeScene.scene = data;\n\t\t\t\tconsole.info('updated scene with data from editor:', data);\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Proxy method for `$aframeEditor.saveDraft()`.\n\t   * \n\t   * @param  {Boolean}\tnotify\tWhether to inform user of success.\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: 'saveDraft',\n\t\t\tvalue: function saveDraft() {\n\t\t\t\tvar notify = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\t\n\t\t\t\tthis.$aframeEditor.saveDraft(notify);\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Proxy method for `$aframeEditor.loadDraft()`.\n\t   * \n\t   * @param  {Object}   draft   Chosen draft from draftList\n\t   * @param  {Boolean}\tnotify\tWhether to inform user of success.\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: 'loadDraft',\n\t\t\tvalue: function loadDraft(draft) {\n\t\t\t\tvar _this = this;\n\t\n\t\t\t\tvar notify = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\t\n\t\t\t\tthis.$aframeEditor.loadDraft(draft._id, notify).then(function (draftContent) {\n\t\t\t\t\treturn _this.updateSceneData(draftContent);\n\t\t\t\t});\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Calls `$aframeEditor.checkForDraft()` and sets the controller's\n\t   * `draftList` property to an array of drafts resolved from promise.\n\t   *\n\t   * If drafts are found, notifies the user; offers to load the latest draft.\n\t   * Loads draft if user confirms and updates the scene data accordingly.\n\t   * \n\t   * @param {Boolean}\tnotify\tWhether to inform the user with toast\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: 'checkForDraft',\n\t\t\tvalue: function checkForDraft() {\n\t\t\t\tvar _this2 = this;\n\t\n\t\t\t\tvar notify = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\t\n\t\t\t\tthis.draftList = null;\n\t\t\t\tthis.$aframeEditor.checkForDraft(notify).then(function (drafts) {\n\t\t\t\t\t_this2.draftList = drafts;\n\t\t\t\t\treturn drafts.length && notify && _this2.$aframeEditor.draftFound(drafts);\n\t\t\t\t}).then(function (foundDraftContent) {\n\t\t\t\t\treturn foundDraftContent && _this2.updateSceneData(foundDraftContent);\n\t\t\t\t});\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Confirms with user that they would like to discard the draft\n\t   * in question; calls `$aframeEditor.discardDraft()` if user confirms.\n\t   * \n\t   * @param {Object}  draft   The draft to discard\n\t   * @param {Boolean}\tnotify\tWhether to inform user with toast\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: 'discardDraft',\n\t\t\tvalue: function discardDraft(draft) {\n\t\t\t\tvar _this3 = this;\n\t\n\t\t\t\tvar notify = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\t\n\t\t\t\tvar confirm = this.$mdDialog.confirm().title('Are you sure?').textContent('This action cannot be undone.').ok('Confirm').cancel('Cancel');\n\t\t\t\tthis.$mdDialog.show(confirm).then(function () {\n\t\t\t\t\t_this3.$aframeEditor.discardDraft(draft._id, notify);\n\t\t\t\t});\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Calls `$aframeEditor.publish()` directly (proxy method); updates\n\t   * scene data immediately afterward to keep app and server in sync.\n\t   * \n\t   * @param  {Object|Boolean}  newData Data to publish or false\n\t   * @param  {Boolean}         notify  Whether to inform user with toast\n\t   * @return {Promise} \t\t\t\t\t\t\t\t Resolves to updated scene data\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: 'publish',\n\t\t\tvalue: function publish(newData) {\n\t\t\t\tvar _this4 = this;\n\t\n\t\t\t\tvar notify = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\t\n\t\t\t\treturn this.$aframeEditor.publish(newData, notify).then(function (sceneData) {\n\t\t\t\t\treturn _this4.updateSceneData(sceneData);\n\t\t\t\t});\n\t\t\t}\n\t\n\t\t\t/**\n\t   * The editor controller's `$onInit` hook takes care of attaching a few\n\t   * editor methods and properties directly on the scene controller  it's\n\t   * strategy is to define and intialize all editor behaviour _separate_ from\n\t   * the scene, so that non-admin users do not have any of its behaviours\n\t   * attached (or included).\n\t   *\n\t   * The things it attaches are:\n\t   * - A contextmenu listener: since a number of components have different actions\n\t   * based on right clicks, a general \"flag\" needs to be set on the scene\n\t   * controller (`_rightclick`) so components can just check for the flag on any scene click.\n\t   *   - Also attaches `$onDestroy` for cleanup\n\t   * - The editor's `checkForDraft()` and `openEditor()` methods\n\t   * - An `_editable` flag that allows the scene controller to display the UI\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: '$onInit',\n\t\t\tvalue: function $onInit() {\n\t\t\t\tvar _this5 = this;\n\t\n\t\t\t\tvar contextMenu = function contextMenu(event) {\n\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\tif (!_this5.SceneCtrl._rightClick) {\n\t\t\t\t\t\t_this5.SceneCtrl._rightClick = event;\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t_this5.SceneCtrl.$sceneEl.on('mouseup', function () {\n\t\t\t\t\t\t\t_this5.SceneCtrl.$sceneEl.off('mouseup');\n\t\t\t\t\t\t\t_this5.$timeout(function () {\n\t\t\t\t\t\t\t\t_this5.SceneCtrl._rightClick = false;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tthis.SceneCtrl.$sceneEl.on('contextmenu', contextMenu);\n\t\t\t\tthis.SceneCtrl.$onDestroy = function () {\n\t\t\t\t\t_this5.$sceneEl.off('contextmenu', contextMenu);\n\t\t\t\t};\n\t\n\t\t\t\tthis.SceneCtrl.checkForDraft = function () {\n\t\t\t\t\treturn _this5.checkForDraft();\n\t\t\t\t};\n\t\t\t\tthis.SceneCtrl.editItem = function (ev, item, collection) {\n\t\t\t\t\treturn _this5.editItem(ev, item, collection);\n\t\t\t\t};\n\t\n\t\t\t\tthis.SceneCtrl._editable = true;\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Queues up a new item (hotSpot/sceneLink/entity/etc) for addition to the current\n\t   * scene. Only collections that have their model explicitly defined in `DATA_MODELS`\n\t   * **and** as an option in the editor 'add item' selection (`_editor.html`) will be\n\t   * available for use.\n\t   * \n\t   * @param  {Event}   ev         The mouseEvent that called the method\n\t   * @param  {Array}   collection Collection of scene elements to add item to\n\t   * @return {Promise} \t\t\t\t\t\tPromise representing dialog reference\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: 'addItem',\n\t\t\tvalue: function addItem(ev, collection) {\n\t\t\t\tvar _this6 = this;\n\t\n\t\t\t\tvar locals = { item: this._schemas[collection] };\n\t\n\t\t\t\tlocals.newItem = true;\n\t\t\t\tlocals.publish = function () {\n\t\t\t\t\treturn _this6.$aframeScene.addItemTo(locals.item, _this6.SceneCtrl[collection], function (newData) {\n\t\t\t\t\t\t_this6.$aframeScene.scene[collection] = newData;\n\t\t\t\t\t\t_this6._panelRef && _this6._panelRef.close();\n\t\t\t\t\t});\n\t\t\t\t};\n\t\t\t\tlocals.saveDraft = function () {\n\t\t\t\t\treturn _this6.$aframeScene.addItemTo(locals.item, _this6.SceneCtrl[collection], function (newData) {\n\t\t\t\t\t\t_this6.$aframeScene.scene[collection] = newData;\n\t\t\t\t\t\t_this6.saveDraft();\n\t\t\t\t\t});\n\t\t\t\t};\n\t\t\t\tlocals.removeThis = function () {\n\t\t\t\t\treturn _this6._panelRef && _this6._panelRef.close();\n\t\t\t\t};\n\t\t\t\tlocals.closeDialog = locals.removeThis;\n\t\n\t\t\t\treturn this.openEditor(ev, locals);\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Queues up a new scene for creation/publishing. WIP.\n\t   *\n\t   * @todo Panorama upload\n\t   * @todo Go to scene after created\n\t   * \n\t   * @param  {Event} ev The mouseEvent that called the method\n\t   * @return {Promise}  Promise representing dialog reference\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: 'newScene',\n\t\t\tvalue: function newScene(ev) {\n\t\t\t\tvar _this7 = this;\n\t\n\t\t\t\tvar locals = { item: this._schemas.scene };\n\t\n\t\t\t\tlocals.newItem = true;\n\t\t\t\tlocals.publish = function () {\n\t\t\t\t\t_this7.$aframeEditor.publish(locals.item);\n\t\t\t\t\t_this7._panelRef && _this7._panelRef.close();\n\t\t\t\t};\n\t\t\t\tlocals.saveDraft = function () {\n\t\t\t\t\tlocals.item.state = 'draft';\n\t\t\t\t\tlocals.publish();\n\t\t\t\t};\n\t\t\t\tlocals.removeThis = function () {\n\t\t\t\t\treturn _this7._panelRef && _this7._panelRef.close();\n\t\t\t\t};\n\t\t\t\tlocals.closeDialog = locals.removeThis;\n\t\n\t\t\t\treturn this.openEditor(ev, locals);\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Opens a generic context menu 'edit' dialog for scene elements. Mostly\n\t   * proxies this controller's method's directly inside the editor dialog.\n\t   * Includes a horizontal offset that approximates the width of most average\n\t   * scene elements to center the dialog's origin.\n\t   * \t\n\t   * @param  {Event} ev         \t\t\t\tThe mouseEvent that called the method\n\t   * @param  {Object} item       \t\t\t\tThe item to edit\n\t   * @param  {Array<Object>} collection The item's collection in the scene\n\t   * @return {Promise}  \t\t\t\t\t\t\t\tPromise representing dialog reference\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: 'editItem',\n\t\t\tvalue: function editItem(ev, item, collection) {\n\t\t\t\tvar _this8 = this;\n\t\n\t\t\t\tvar locals = { item: item };\n\t\t\t\tlocals.publish = function () {\n\t\t\t\t\treturn _this8.publish();\n\t\t\t\t};\n\t\t\t\tlocals.saveDraft = function () {\n\t\t\t\t\treturn _this8.saveDraft();\n\t\t\t\t};\n\t\t\t\tlocals.removeThis = function () {\n\t\t\t\t\treturn _this8.$aframeScene.removeItemFrom(item, collection, function () {\n\t\t\t\t\t\t_this8._panelRef && _this8._panelRef.close();\n\t\t\t\t\t});\n\t\t\t\t};\n\t\t\t\tlocals.closeDialog = function () {\n\t\t\t\t\treturn _this8._panelRef && _this8._panelRef.close();\n\t\t\t\t};\n\t\n\t\t\t\treturn this.openEditor(ev, locals, { offsetY: -250 });\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Base method for layering other dialog types into. This method\n\t   * handles the actual initialization of the editor dialog component\n\t   * using the ng-material panel service's `$mdPanel.open()` method on\n\t   * a panel preset built in `editor_config.js`.\n\t   *\n\t   * If the item loaded into the editor is considered \"new\", the dialog\n\t   * is readied for the center of the screen; otherwise, it is placed\n\t   * in the bottom-left. The animate-to-and-from is calculated using\n\t   * the original MouseEvent that opened the dialog.\n\t   *\n\t   * An `onDomRemoved()` method is added to clean up the dialog scope\n\t   * when its elements are removed; the scope is provided by a promise\n\t   * returned by this method.\n\t   * \n\t   * @param  {Event} ev              \tThe mouseEvent that called the method\n\t   * @param  {Object} locals          Local values to pass into dialog\n\t   * @param  {Number} $2.offsetX \t\t\tPixels to shift dialog along X\n\t   * @param  {Number} $2.offsetY \t\t\tPixels to shift dialog along Y\n\t   * @return {Promise}  \t\t\t\t\t\t\tPromise representing dialog scope\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: 'openEditor',\n\t\t\tvalue: function openEditor(ev, locals) {\n\t\t\t\tvar _this9 = this;\n\t\n\t\t\t\tvar _ref = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n\t\t\t\t    _ref$offsetX = _ref.offsetX,\n\t\t\t\t    offsetX = _ref$offsetX === undefined ? 0 : _ref$offsetX,\n\t\t\t\t    _ref$offsetY = _ref.offsetY,\n\t\t\t\t    offsetY = _ref$offsetY === undefined ? 0 : _ref$offsetY;\n\t\n\t\t\t\tconsole.log(ev.clientY + offsetY);\n\t\t\t\tvar position = this.$mdPanel.newPanelPosition();\n\t\t\t\tif (locals.newItem) {\n\t\t\t\t\tposition.absolute().center();\n\t\t\t\t} else {\n\t\t\t\t\tposition.absolute().bottom(0).left(0);\n\t\t\t\t}\n\t\t\t\tvar animation = this.$mdPanel.newPanelAnimation().openFrom({ top: ev.clientY + offsetY, left: ev.clientX + offsetX }).withAnimation(this.$mdPanel.animation.SCALE).closeTo({ top: ev.clientY + offsetY, left: ev.clientX + offsetX });\n\t\t\t\tvar onDomRemoved = function onDomRemoved() {\n\t\t\t\t\t_this9._panelRef && _this9._panelRef.destroy();\n\t\t\t\t};\n\t\n\t\t\t\treturn this.$mdPanel.open('editorDialog', {\n\t\t\t\t\tposition: position, animation: animation, onDomRemoved: onDomRemoved, locals: locals\n\t\t\t\t}).then(function (scope) {\n\t\t\t\t\t_this9._panelRef = scope;\n\t\t\t\t});\n\t\t\t}\n\t\t}]);\n\t\treturn EditorController;\n\t}();\n\t\n\texports.default = EditorController;\n\n/***/ },\n\n/***/ 600:\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ },\n\n/***/ 602:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _keys = __webpack_require__(418);\n\t\n\tvar _keys2 = _interopRequireDefault(_keys);\n\t\n\tvar _classCallCheck2 = __webpack_require__(323);\n\t\n\tvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\t\n\tvar _createClass2 = __webpack_require__(324);\n\t\n\tvar _createClass3 = _interopRequireDefault(_createClass2);\n\t\n\tvar _lodash = __webpack_require__(603);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t/**\n\t * Service for handling all CRUD operations pertaining to scenes.\n\t *\n\t * Contains methods for drafting and publishing; interfaces directly\n\t * with the `$aframeScene` service for a reference to the current\n\t * scene object. Uses:\n\t * \n\t * - ng-material's `$mdToast` service to display UI messages to user\n\t * - the `$tourApi`'s scene resource and the `DraftResource` for CRUD ops\n\t * - the 'EDITOR_MESSAGES' constant to provide prebuilt dialogs and toasts\n\t * \n\t * @param  {object} $mdToast        ng-material's toast service\n\t * @param  {object} $tourApi        Tour $resource factory service\n\t * @param  {object} DraftResource   Draft $resource factory\n\t * @param  {object} EDITOR_MESSAGES Constant to define toast configs\n\t */\n\tvar EditorService = function () {\n\t\tEditorService.$inject = [\"$mdToast\", \"$aframeScene\", \"$tourApi\", \"DraftResource\", \"EDITOR_MESSAGES\"];\n\t\tfunction EditorService($mdToast, $aframeScene, $tourApi, DraftResource, EDITOR_MESSAGES) {\n\t\t\t'ngInject';\n\t\n\t\t\tvar _this = this;\n\t\n\t\t\t(0, _classCallCheck3.default)(this, EditorService);\n\t\t\tthis.$mdToast = $mdToast;\n\t\t\tthis.$aframeScene = $aframeScene;\n\t\t\tthis.DraftResource = DraftResource;\n\t\t\tthis.SceneResource = $tourApi.scene;\n\t\t\t/**\n\t   * Property to hold an array of fully initialized toast config objects; loops\n\t   * through `EDITOR_MESSAGES` and sets properties using the methods provided\n\t   * by `$mdToast.simple()`'s return.\n\t   *\n\t   * @memberof EditorService\n\t   * @type {Object}\n\t   */\n\t\t\tthis.toasts = {};\n\t\t\t(0, _keys2.default)(EDITOR_MESSAGES).forEach(function (type) {\n\t\t\t\tvar toast = $mdToast.simple();\n\t\t\t\tvar toastConfig = EDITOR_MESSAGES[type];\n\t\t\t\t(0, _keys2.default)(toastConfig).forEach(function (prop) {\n\t\t\t\t\ttoast[prop](toastConfig[prop]);\n\t\t\t\t});\n\t\t\t\t_this.toasts[type] = toast;\n\t\t\t});\n\t\t}\n\t\n\t\t/**\n\t  * Sends an HTTP `POST` or `PATCH` request via the `$tourApi`'s\n\t  * scene resource to publish (save) the current scene.\n\t  *\n\t  * If the scene is new, the first parameter of this method can be\n\t  * passed the new scene data, which makes it implicity truthy and\n\t  * tells the method to send the request as a new scene creation. If\n\t  * left to default, it will stay false and the method will assume\n\t  * the scene already exists and is being updated.\n\t  * \n\t  * In the case of an update, Lodash's `pick()` method is used to grab\n\t  * applicable properties from the current `$aframeScene.scene` _without_\n\t  * creating ones that don't exist. A new `updatedAt` property is assigned\n\t  * a date for every action; if the data was new, the same date is given\n\t  * to a `createdAt` property.\n\t  * \n\t  * @param  {Boolean}  _newData\tWhether incoming data should be treated as new\n\t  * @param  {Boolean}  notify \t\tWhether to notify the user (toast)\n\t  * @return {Promise} \t\t\t\t\t\tResolves to latest scene data\n\t  */\n\t\n\t\n\t\t(0, _createClass3.default)(EditorService, [{\n\t\t\tkey: 'publish',\n\t\t\tvalue: function publish() {\n\t\t\t\tvar _this2 = this;\n\t\n\t\t\t\tvar _newData = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\t\n\t\t\t\tvar notify = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\t\n\t\t\t\tvar action = 'update';\n\t\t\t\tvar newData = _newData || (0, _lodash.pick)(this.$aframeScene.scene, ['_id', 'code', 'name', 'assets', 'entities', 'hotSpots', 'sceneLinks', 'panorama', 'parent', 'script']);\n\t\t\t\tnewData.updatedAt = new Date();\n\t\t\t\tif (_newData) {\n\t\t\t\t\tnewData.createdAt = newData.updatedAt;\n\t\t\t\t\taction = 'save';\n\t\t\t\t}\n\t\n\t\t\t\treturn this.SceneResource[action](_newData ? null : {\n\t\t\t\t\tid: newData._id\n\t\t\t\t}, newData).$promise.then(function (scene) {\n\t\t\t\t\t_this2.lastPublished = _this2.$aframeScene.scene || scene;\n\t\t\t\t\tnotify && _this2.$mdToast.show(_this2.toasts.publish);\n\t\t\t\t\treturn scene;\n\t\t\t\t});\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Sends an HTTP `POST` request to save a draft of the current scene.\n\t   * Offers to publish the scene when the draft is done saving; calls\n\t   * `publish()` if the user confirms.\n\t   * \n\t   * @param  {Boolean} notify \tWhether to notify the user (toast)\n\t   * @return {Promise} \t\t\t\t\tResolves to saved draft\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: 'saveDraft',\n\t\t\tvalue: function saveDraft() {\n\t\t\t\tvar _this3 = this;\n\t\n\t\t\t\tvar notify = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\t\n\t\t\t\treturn this.DraftResource.save({\n\t\t\t\t\tcontent: this.$aframeScene.scene,\n\t\t\t\t\tkind: 'Scene',\n\t\t\t\t\toriginal: this.$aframeScene.scene._id\n\t\t\t\t}).$promise.then(function (draft) {\n\t\t\t\t\t_this3.lastDraft = draft.content;\n\t\t\t\t\tnotify && _this3.$mdToast.show(_this3.toasts.saveDraft).then(function (response) {\n\t\t\t\t\t\tif (response == 'ok') {\n\t\t\t\t\t\t\t_this3.publish();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\treturn draft;\n\t\t\t\t});\n\t\t\t}\n\t\n\t\t\t/**\n\t   * If there is scene data available, queries the database by the current\n\t   * scene ID via the `DraftResource` factory to check for active drafts\n\t   * held by the current logged in user.\n\t   * \n\t   * @param  {Boolean}  notify \t\tWhether to notify the user (toast)\n\t   * @return {Promise}            Promise that will resolve to draft list\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: 'checkForDraft',\n\t\t\tvalue: function checkForDraft() {\n\t\t\t\tvar notify = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\t\n\t\t\t\treturn this.$aframeScene.scene && this.DraftResource.query({\n\t\t\t\t\tsort: '-updatedAt',\n\t\t\t\t\tfilter: {\n\t\t\t\t\t\toriginal: this.$aframeScene.scene._id\n\t\t\t\t\t}\n\t\t\t\t}).$promise;\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Informs a user that draft[s] have been found for the scene\n\t   * they are viewing and offers to load the most recent draft; calls\n\t   * `loadDraft()` if the user confirms and supplies it the `_id` of\n\t   * the first draft in the found draft list.\n\t   * \n\t   * @param  {Array}   drafts A list of available drafts\n\t   * @return {Promise}      \tResolves to toast result  loadDraft promise\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: 'draftFound',\n\t\t\tvalue: function draftFound(drafts) {\n\t\t\t\tvar _this4 = this;\n\t\n\t\t\t\treturn this.$mdToast.show(this.toasts.draftFound).then(function (response) {\n\t\t\t\t\treturn response === 'ok' && _this4.loadDraft(drafts[0]._id);\n\t\t\t\t});\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Gets a single stored draft by its database `_id` and passes\n\t   * the result to a callback; notifies user that draft was loaded and\n\t   * offers to publish.\n\t   * \n\t   * @param  {string}   id        The id of the draft to fetch\n\t   * @param  {Boolean}  notify \t\tWhether to notify the user (toast)\n\t   * @return {Promise} \t\t\t\t\t  Resolves to content of the loaded draft\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: 'loadDraft',\n\t\t\tvalue: function loadDraft(id) {\n\t\t\t\tvar _this5 = this;\n\t\n\t\t\t\tvar notify = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\t\n\t\t\t\treturn this.DraftResource.get({ id: id }).$promise.then(function (draft) {\n\t\t\t\t\t_this5.lastDraft = draft.content;\n\t\t\t\t\tnotify && _this5.$mdToast.show(_this5.toasts.draftLoaded).then(function (response) {\n\t\t\t\t\t\treturn response === 'ok' && _this5.publish();\n\t\t\t\t\t});\n\t\t\t\t\treturn draft.content;\n\t\t\t\t});\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Immediately load last saved draft of current scene.\n\t   * @param  {Boolean}  notify \t\tWhether to notify the user (toast)\n\t   * @return {Promise} \t\t\t\t\t  Resolves to state of confirm toast\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: 'revertToDraft',\n\t\t\tvalue: function revertToDraft() {\n\t\t\t\tvar _this6 = this;\n\t\n\t\t\t\tvar notify = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\t\n\t\t\t\treturn this.checkForDraft(false).then(function (drafts) {\n\t\t\t\t\treturn _this6.loadDraft(drafts[0]._id, false);\n\t\t\t\t}).then(function (draftContent) {\n\t\t\t\t\treturn notify && _this6.$mdToast.show(_this6.toasts.revertToDraft);\n\t\t\t\t});\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Sends an HTTP `DELETE` request to remove a stored draft by\n\t   * its database `_id`; notifies user if successful.\n\t   * \n\t   * @param  {string}   id        The id of the draft to delete\n\t   * @param  {Boolean}  notify \t\tWhether to notify the user (toast)\n\t   * @return {Promise} \t\t\t\t\t  Resolves to state of confirm toast\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: 'discardDraft',\n\t\t\tvalue: function discardDraft(id) {\n\t\t\t\tvar _this7 = this;\n\t\n\t\t\t\tvar notify = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\t\n\t\t\t\treturn this.DraftResource.remove({ id: id }).$promise.then(function (discardedDraft) {\n\t\t\t\t\treturn notify && _this7.$mdToast.show(_this7.toasts.discardDraft);\n\t\t\t\t});\n\t\t\t}\n\t\t}]);\n\t\treturn EditorService;\n\t}();\n\t\n\texports.default = EditorService;\n\n/***/ },\n\n/***/ 605:\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class=\\\"md-whiteframe-16dp\\\" layout=\\\"column\\\">\\n\\n  <div class=\\\"md-toolbar-tools\\\">\\n    <span class=\\\"md-title\\\">{{ ::($ctrl.newItem ? 'New' : 'Edit') }} {{ ::($ctrl.item.hasOwnProperty('scene') ? 'scene link': '') }}{{ ::($ctrl.item.hasOwnProperty('parent') ? 'scene': '') }}{{ ::($ctrl.item.hasOwnProperty('content') || $ctrl.item.hasOwnProperty('feature') ? 'hotspot' : '') }}{{ ::($ctrl.item.hasOwnProperty('attrs') ? 'entity' : '') }}</span>\\n    <span flex></span>\\n    <md-button class=\\\"md-icon-button md-primary\\\" aria-label=\\\"Cancel\\\" ng-click=\\\"$ctrl.closeDialog()\\\">\\n      <ng-md-icon icon=\\\"close\\\" size=\\\"24\\\"></ng-md-icon>\\n    </md-button>\\n  </div>\\n\\t<v-accordion class=\\\"vAccordion--default\\\" multiple flex>\\n\\t  <!-- add expanded attribute to open the section -->\\n\\t  <v-pane ng-if=\\\"::($ctrl.item.hasOwnProperty('name') || $ctrl.item.hasOwnProperty('label') || $ctrl.item.hasOwnProperty('code') || $ctrl.item.hasOwnProperty('desc') || $ctrl.item.hasOwnProperty('feature'))\\\">\\n\\t    <v-pane-header>\\n\\t\\t\\t\\tMetadata\\n\\t    </v-pane-header>\\n\\t    <v-pane-content>\\n\\t\\t\\t  <div layout=\\\"row\\\" layout-padding ng-if=\\\"::$ctrl.item.hasOwnProperty('name')\\\">\\n\\t\\t\\t    <md-input-container flex style=\\\"margin-bottom:0;padding-bottom:0;\\\">\\n\\t\\t\\t    \\t<label>Name</label>\\n\\t\\t\\t      <input type=\\\"text\\\" flex ng-model=\\\"$ctrl.item.name\\\" aria-label=\\\"name\\\">\\n\\t\\t\\t    </md-input-container>\\n\\t\\t\\t  </div>\\n\\t\\t\\t  <div layout=\\\"row\\\" layout-padding ng-if=\\\"::$ctrl.item.hasOwnProperty('label')\\\">\\n\\t\\t\\t    <md-input-container flex style=\\\"margin-bottom:0;padding-bottom:0;\\\">\\n\\t\\t\\t    \\t<label>Label</label>\\n\\t\\t\\t      <input type=\\\"text\\\" flex ng-model=\\\"$ctrl.item.label\\\" aria-label=\\\"label\\\">\\n\\t\\t\\t    </md-input-container>\\n\\t\\t\\t  </div>\\n\\t\\t\\t  <div layout=\\\"row\\\" layout-padding ng-if=\\\"::$ctrl.item.hasOwnProperty('code')\\\">\\n\\t\\t\\t    <md-input-container flex style=\\\"margin-bottom:0;padding-bottom:0;\\\">\\n\\t\\t\\t    \\t<label>Code</label>\\n\\t\\t\\t      <input type=\\\"text\\\" flex ng-model=\\\"$ctrl.item.code\\\" aria-label=\\\"code\\\">\\n\\t\\t\\t    </md-input-container>\\n\\t\\t\\t  </div>\\n\\t\\t\\t  <div layout=\\\"column\\\" layout-padding ng-if=\\\"::($ctrl.item.hasOwnProperty('desc') || $ctrl.item.hasOwnProperty('feature'))\\\">\\n\\t\\t    \\t<div><md-checkbox\\n              ng-model=\\\"$ctrl.item.linked\\\"\\n              aria-label=\\\"Link to campus map feature\\\"\\n              class=\\\"md-primary\\\">\\n            Link to campus map feature?\\t\\n          </md-checkbox></div>\\n\\t\\t\\t\\t\\t<div ng-if=\\\"$ctrl.item.linked\\\">\\n\\t\\t\\t\\t    <md-select placeholder=\\\"Select category\\\" ng-model=\\\"$ctrl.category\\\" md-on-open=\\\"$ctrl.loadCategories()\\\" ng-model-options=\\\"{trackBy: '$value._id'}\\\" ng-change=\\\"$ctrl.onChangeCategory()\\\">\\n\\t\\t\\t\\t      <md-option ng-value=\\\"category\\\" ng-repeat=\\\"category in $ctrl.categories track by category._id\\\">{{::category.name}}</md-option>\\n\\t\\t\\t\\t    </md-select>\\n\\t\\t\\t\\t    <md-select placeholder=\\\"Select feature\\\" ng-model=\\\"$ctrl.feature\\\" md-on-open=\\\"$ctrl.loadFeatures()\\\" ng-model-options=\\\"{trackBy: '$value._id'}\\\" ng-change=\\\"$ctrl.onChangeFeature()\\\">\\n\\t\\t\\t\\t      <md-option ng-value=\\\"feature\\\" ng-repeat=\\\"feature in $ctrl.features track by feature._id\\\">{{::feature.properties.name}}</md-option>\\n\\t\\t\\t\\t    </md-select>\\n\\t\\t\\t\\t  </div>\\n\\t        <md-input-container ng-if=\\\"!$ctrl.item.linked\\\">\\n\\t          <label>Content</label>\\n\\t          <!-- <textarea ng-model=\\\"$ctrl.item.desc\\\" md-maxlength=\\\"250\\\" rows=\\\"4\\\" md-select-on-focus></textarea> -->\\n\\t          <ng-wig ng-model=\\\"$ctrl.item.desc\\\"></ng-wig>\\n\\t        </md-input-container>\\n        </div>\\n\\t    </v-pane-content>\\n\\t  </v-pane>\\n\\t  <v-pane ng-if=\\\"::$ctrl.item.position.length\\\">\\n\\t    <v-pane-header>\\n\\t\\t\\t\\tPosition\\n\\t    </v-pane-header>\\n\\t    <v-pane-content>\\n\\t\\t\\t  <div layout=\\\"row\\\" layout-padding>\\n\\t\\t\\t    <md-input-container flex ng-repeat=\\\"val in ::[{label:'x',path:'M21,9L17,5V8H10V10H17V13M7,11L3,15L7,19V16H14V14H7V11Z'},{label:'z',path:'M9,3L5,7H8V14H10V7H13M16,17V10H14V17H11L15,21L19,17H16Z'},{label:'y',path:'M14.83,13.41L13.42,14.82L16.55,17.95L14.5,20H20V14.5L17.96,16.54L14.83,13.41M14.5,4L16.54,6.04L4,18.59L5.41,20L17.96,7.46L20,9.5V4M10.59,9.17L5.41,4L4,5.41L9.17,10.58L10.59,9.17Z'}] track by $index\\\" style=\\\"margin-bottom:0;padding-bottom:0;margin-top:36px;\\\">\\n\\t\\t\\t    \\t<label layout layout-align=\\\"space-between center\\\"><strong>{{ ::val.label }}</strong><svg style=\\\"width:24px;height:24px\\\" viewBox=\\\"0 0 24 24\\\"><path fill=\\\"#000000\\\" ng-attr-d=\\\"{{ ::val.path }}\\\" /></svg></label>\\n\\t\\t\\t      <input type=\\\"number\\\" min=\\\"-15\\\" max=\\\"15\\\" step=\\\"0.05\\\" flex ng-model=\\\"$ctrl.item.position[$index]\\\" to-number aria-label=\\\"position\\\" aria-controls=\\\"scenelink-position\\\">\\n\\t\\t\\t    </md-input-container>\\n\\t\\t\\t  </div>\\n\\t    </v-pane-content>\\n\\t  </v-pane>\\n\\n\\t  <v-pane ng-if=\\\"::$ctrl.item.rotation.length\\\">\\n\\t    <v-pane-header>\\n\\t\\t\\t\\tRotation\\n\\t    </v-pane-header>\\n\\t    <v-pane-content>\\n\\t\\t\\t  <div layout=\\\"row\\\" layout-padding>\\n\\t\\t\\t    <md-input-container flex ng-repeat=\\\"val in ::[{label:'roll',path:'M17,17H7V14L3,18L7,22V19H19V13H17M7,7H17V10L21,6L17,2V5H5V11H7V7Z'},{label:'yaw',path:'M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z'},{label:'pitch',path:'M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z'}] track by $index\\\" style=\\\"margin-bottom:0;padding-bottom:0;margin-top:36px;\\\">\\n\\t\\t\\t    \\t<label layout layout-align=\\\"space-between center\\\"><strong>{{ ::val.label }}</strong><svg style=\\\"width:24px;height:24px\\\" viewBox=\\\"0 0 24 24\\\"><path fill=\\\"#000000\\\" ng-attr-d=\\\"{{ ::val.path }}\\\" /></svg></label>\\n\\t\\t\\t      <input type=\\\"number\\\" min=\\\"-180\\\" max=\\\"180\\\" step=\\\"5\\\" flex ng-model=\\\"$ctrl.item.rotation[$index]\\\" to-number aria-label=\\\"rotation\\\" aria-controls=\\\"scenelink-rotation\\\">\\n\\t\\t\\t    </md-input-container>\\n\\t\\t\\t  </div>\\n\\t    </v-pane-content>\\n\\t  </v-pane>\\n\\n\\t  <v-pane ng-if=\\\"::($ctrl.item.hasOwnProperty('scene') || $ctrl.item.hasOwnProperty('parent') || $ctrl.item.hasOwnProperty('building'))\\\">\\n\\t    <v-pane-header>\\n\\t\\t\\t\\tLink\\n\\t    </v-pane-header>\\n\\t    <v-pane-content>\\n\\t\\t\\t  <div layout=\\\"row\\\" layout-padding>\\n\\t\\t\\t    <md-select placeholder=\\\"Select location\\\" ng-model=\\\"$ctrl.location\\\" md-on-open=\\\"$ctrl.loadLocations()\\\" ng-model-options=\\\"{trackBy: '$value._id'}\\\" ng-change=\\\"$ctrl.onChangeLocation()\\\">\\n\\t\\t\\t      <md-option ng-value=\\\"location\\\" ng-repeat=\\\"location in $ctrl.locations track by location._id\\\">{{::location.label}}</md-option>\\n\\t\\t\\t    </md-select>\\n\\t\\t\\t    <md-select placeholder=\\\"Select building\\\" ng-model=\\\"$ctrl.building\\\" md-on-open=\\\"$ctrl.loadBuildings()\\\" ng-model-options=\\\"{trackBy: '$value._id'}\\\" ng-change=\\\"$ctrl.onChangeBuilding()\\\">\\n\\t\\t\\t      <md-option ng-value=\\\"building\\\" ng-repeat=\\\"building in $ctrl.buildings track by building._id\\\">{{::building.label}}</md-option>\\n\\t\\t\\t    </md-select>\\n\\t\\t\\t    <md-select ng-if=\\\"$ctrl.item.hasOwnProperty('scene')\\\" placeholder=\\\"Select scene\\\" ng-model=\\\"$ctrl.scene\\\" md-on-open=\\\"$ctrl.loadScenes()\\\" ng-model-options=\\\"{trackBy: '$value._id'}\\\" ng-change=\\\"$ctrl.onChangeScene()\\\">\\n\\t\\t\\t      <md-option ng-value=\\\"scene\\\" ng-repeat=\\\"scene in $ctrl.scenes track by scene._id\\\">{{::scene.name}}</md-option>\\n\\t\\t\\t    </md-select>\\n\\t\\t\\t  </div>\\n\\t    </v-pane-content>\\n\\t  </v-pane>\\n\\n\\t  <v-pane ng-if=\\\"::($ctrl.item.hasOwnProperty('attrs'))\\\">\\n\\t    <v-pane-header>\\n\\t\\t\\t\\tAttributes\\n\\t    </v-pane-header>\\n\\t    <v-pane-content>\\n\\t\\t\\t  <div layout=\\\"row\\\" layout-padding>\\n\\t\\t\\t  \\t<entity-controls ng-model=\\\"$ctrl.item\\\"></entity-controls>\\n\\t\\t\\t  </div>\\n\\t    </v-pane-content>\\n\\t  </v-pane>\\n\\t</v-accordion>\\n\\n  <div class=\\\"md-toolbar-tools\\\">\\n    <md-button class=\\\"md-warn\\\" aria-label=\\\"Go Back\\\" ng-click=\\\"$ctrl.removeThis()\\\">\\n      {{ ::($ctrl.newItem ? 'Cancel' : 'Delete') }}\\n    </md-button>\\n    <span flex></span>\\n    <md-button class=\\\"md-primary\\\" aria-label=\\\"Save draft\\\" ng-click=\\\"$ctrl.saveDraft()\\\">\\n      Save draft\\n    </md-button>\\n    <md-button class=\\\"md-raised md-primary\\\" aria-label=\\\"Publish\\\" ng-click=\\\"$ctrl.publish()\\\">\\n      {{ ::($ctrl.newItem ? 'Add' : 'Publish') }}\\n    </md-button>\\n  </div>\\n\\n</div>\"\n\n/***/ },\n\n/***/ 606:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _classCallCheck2 = __webpack_require__(323);\n\t\n\tvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\t\n\tvar _createClass2 = __webpack_require__(324);\n\t\n\tvar _createClass3 = _interopRequireDefault(_createClass2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar EditorDialogController = function () {\n\t\tEditorDialogController.$inject = [\"$scope\", \"$filter\", \"$tourApi\", \"$mapApi\"];\n\t\tfunction EditorDialogController($scope, $filter, $tourApi, $mapApi) {\n\t\t\t'ngInject';\n\t\n\t\t\tvar _this = this;\n\t\n\t\t\t(0, _classCallCheck3.default)(this, EditorDialogController);\n\t\t\tthis.$filter = $filter;\n\t\t\tthis.LocationResource = $tourApi.location;\n\t\t\tthis.BuildingResource = $tourApi.building;\n\t\t\tthis.SceneResource = $tourApi.scene;\n\t\t\tthis.CategoryResource = $mapApi.category;\n\t\t\tthis.FeatureResource = $mapApi.feature;\n\t\t\tthis.CollectionResource = $mapApi.collection;\n\t\t\tif (this.item.scene) {\n\t\t\t\t$scope.$applyAsync(function () {\n\t\t\t\t\t_this.initCurrentScene();\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (this.item.feature) {\n\t\t\t\t$scope.$applyAsync(function () {\n\t\t\t\t\t_this.initCurrentFeature();\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\n\t\t(0, _createClass3.default)(EditorDialogController, [{\n\t\t\tkey: 'initCurrentCategory',\n\t\t\tvalue: function initCurrentCategory() {\n\t\t\t\tvar _this2 = this;\n\t\n\t\t\t\tvar _id = void 0;\n\t\t\t\tthis.loadCategories(function (categories) {\n\t\t\t\t\t_id = _this2.feature.properties.category && _this2.feature.properties.category.hasOwnProperty('_id') ? _this2.feature.properties.category._id : _this2.feature.properties.category;\n\t\t\t\t\t_this2.category = _this2.$filter('filter')(categories, { _id: _id }, true)[0];\n\t\t\t\t});\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'initCurrentFeature',\n\t\t\tvalue: function initCurrentFeature() {\n\t\t\t\tvar _this3 = this;\n\t\n\t\t\t\tvar _id = void 0;\n\t\t\t\tthis.loadFeatures(function (features) {\n\t\t\t\t\t_id = _this3.item.feature && _this3.item.feature.hasOwnProperty('_id') ? _this3.item.feature._id : _this3.item.feature;\n\t\t\t\t\t_this3.feature = _this3.$filter('filter')(features, { _id: _id }, true)[0];\n\t\t\t\t\t_this3.initCurrentCategory();\n\t\t\t\t});\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'initCurrentScene',\n\t\t\tvalue: function initCurrentScene() {\n\t\t\t\tvar _this4 = this;\n\t\n\t\t\t\tvar _id = void 0;\n\t\t\t\tthis.loadScenes(function (scenes) {\n\t\t\t\t\t_id = _this4.item.scene.hasOwnProperty('_id') ? _this4.item.scene._id : _this4.item.scene;\n\t\t\t\t\t_this4.scene = _this4.$filter('filter')(scenes, { _id: _id }, true)[0];\n\t\t\t\t\t_this4.initCurrentBuilding();\n\t\t\t\t});\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'initCurrentBuilding',\n\t\t\tvalue: function initCurrentBuilding() {\n\t\t\t\tvar _this5 = this;\n\t\n\t\t\t\tvar _id = void 0;\n\t\t\t\tthis.loadBuildings(function (buildings) {\n\t\t\t\t\t_id = _this5.scene.parent.hasOwnProperty('_id') ? _this5.scene.parent._id : _this5.scene.parent;\n\t\t\t\t\t_this5.building = _this5.$filter('filter')(buildings, { _id: _id }, true)[0];\n\t\t\t\t\t_this5.initCurrentLocation();\n\t\t\t\t});\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'initCurrentLocation',\n\t\t\tvalue: function initCurrentLocation() {\n\t\t\t\tvar _this6 = this;\n\t\n\t\t\t\tvar _id = void 0;\n\t\t\t\tthis.loadLocations(function (locations) {\n\t\t\t\t\t_id = _this6.building.parent.hasOwnProperty('_id') ? _this6.building.parent._id : _this6.building.parent;\n\t\t\t\t\t_this6.location = _this6.$filter('filter')(locations, { _id: _id }, true)[0];\n\t\t\t\t});\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'loadLocations',\n\t\t\tvalue: function loadLocations(cb) {\n\t\t\t\tvar _this7 = this;\n\t\n\t\t\t\treturn this.LocationResource.query().$promise.then(function (locations) {\n\t\t\t\t\t_this7.locations = locations;\n\t\t\t\t\tcb && cb(locations);\n\t\t\t\t});\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'loadBuildings',\n\t\t\tvalue: function loadBuildings(cb) {\n\t\t\t\tvar _this8 = this;\n\t\n\t\t\t\treturn this.BuildingResource.query(this.location ? {\n\t\t\t\t\tfilter: {\n\t\t\t\t\t\tparent: this.location._id\n\t\t\t\t\t}\n\t\t\t\t} : null).$promise.then(function (buildings) {\n\t\t\t\t\t_this8.buildings = buildings;\n\t\t\t\t\tcb && cb(buildings);\n\t\t\t\t});\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'loadScenes',\n\t\t\tvalue: function loadScenes(cb) {\n\t\t\t\tvar _this9 = this;\n\t\n\t\t\t\treturn this.SceneResource.query(this.building ? {\n\t\t\t\t\tfilter: {\n\t\t\t\t\t\tparent: this.building._id\n\t\t\t\t\t}\n\t\t\t\t} : null).$promise.then(function (scenes) {\n\t\t\t\t\t_this9.scenes = scenes;\n\t\t\t\t\tcb && cb(scenes);\n\t\t\t\t});\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'loadCategories',\n\t\t\tvalue: function loadCategories(cb) {\n\t\t\t\tvar _this10 = this;\n\t\n\t\t\t\treturn this.CategoryResource.query().$promise.then(function (categories) {\n\t\t\t\t\t_this10.categories = categories;\n\t\t\t\t\tcb && cb(categories);\n\t\t\t\t});\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'loadFeatures',\n\t\t\tvalue: function loadFeatures(cb) {\n\t\t\t\tvar _this11 = this;\n\t\n\t\t\t\treturn this.FeatureResource.query(this.category ? {\n\t\t\t\t\tfilter: {\n\t\t\t\t\t\t\"properties.category\": this.category._id\n\t\t\t\t\t}\n\t\t\t\t} : null).$promise.then(function (features) {\n\t\t\t\t\t_this11.features = features;\n\t\t\t\t\tcb && cb(features);\n\t\t\t\t});\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'onChangeCategory',\n\t\t\tvalue: function onChangeCategory() {\n\t\t\t\tthis.feature = null;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'onChangeFeature',\n\t\t\tvalue: function onChangeFeature() {\n\t\t\t\tthis.item.feature = this.feature;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'onChangeScene',\n\t\t\tvalue: function onChangeScene() {\n\t\t\t\tthis.item.scene = this.scene._id;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'onChangeBuilding',\n\t\t\tvalue: function onChangeBuilding() {\n\t\t\t\tthis.item.building = this.building._id;\n\t\t\t\tthis.scene = null;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'onChangeLocation',\n\t\t\tvalue: function onChangeLocation() {\n\t\t\t\tthis.item.location = this.location._id;\n\t\t\t\tthis.building = null;\n\t\t\t\tthis.scene = null;\n\t\t\t}\n\t\t\t//\n\t\n\t\t}]);\n\t\treturn EditorDialogController;\n\t}();\n\t\n\texports.default = EditorDialogController;\n\n/***/ },\n\n/***/ 607:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _angular = __webpack_require__(299);\n\t\n\tvar _angular2 = _interopRequireDefault(_angular);\n\t\n\tvar _entity = __webpack_require__(608);\n\t\n\tvar _entity2 = _interopRequireDefault(_entity);\n\t\n\tvar _entityControls = __webpack_require__(612);\n\t\n\tvar _entityControls2 = _interopRequireDefault(_entityControls);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar entityModule = _angular2.default.module('aframe.entity', []).component('aframeEntity', _entity2.default).component('entityControls', _entity2.default).name;\n\t\n\texports.default = entityModule;\n\n/***/ },\n\n/***/ 608:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _entity = __webpack_require__(609);\n\t\n\tvar _entity2 = _interopRequireDefault(_entity);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar entityComponent = {\n\t  controller: _entity2.default,\n\t  require: {\n\t    $ngModel: 'ngModel',\n\t    SceneCtrl: '^aframeScene'\n\t  }\n\t};\n\t\n\texports.default = entityComponent;\n\n/***/ },\n\n/***/ 609:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _stringify = __webpack_require__(610);\n\t\n\tvar _stringify2 = _interopRequireDefault(_stringify);\n\t\n\tvar _getIterator2 = __webpack_require__(378);\n\t\n\tvar _getIterator3 = _interopRequireDefault(_getIterator2);\n\t\n\tvar _classCallCheck2 = __webpack_require__(323);\n\t\n\tvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\t\n\tvar _createClass2 = __webpack_require__(324);\n\t\n\tvar _createClass3 = _interopRequireDefault(_createClass2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t/**\n\t * The `EntityCtrl` acts as an observer of the `ngModel` directive (annotated\n\t * as `$ngModel` in this controller because it is injected); the entity's\n\t * model is controlled externally (e.g. by the `EditorCtrl`) though ng-model,\n\t * so the component has no bindings.\n\t *\n\t * The controller's main responsibility is setting up `$watch`es for\n\t * the relevant model properties and translating them into the\n\t * appropriaten DOM modifications.\n\t *\n\t * An entity's life cycle goes:\n\t * - Detect change to model\n\t * - If the model has a `type` property, `$compile()` a new `<a-[type]>`\n\t * - If the model has an `attrs` property, `parseAttrs()` into a hash object\n\t * - Apply the attribute hash to the compiled element with `attr()`\n\t * - Remove element and `$destroy` scope when parent (`ng-repeat`ed) scope is destroyed\n\t * \n\t * @param {object}  $scope    Current scope; parent scope is ngRepeat\n\t * @param {element} $element  Component wrapper element\n\t * @param {object}  $compile  Angular's compile service\n\t * @param {object}  SceneCtrl The parent controller\n\t */\n\tvar EntityController = function () {\n\t  EntityController.$inject = [\"$scope\", \"$element\", \"$compile\"];\n\t  function EntityController($scope, $element, $compile) {\n\t    'ngInject';\n\t\n\t    (0, _classCallCheck3.default)(this, EntityController);\n\t    this.$scope = $scope;\n\t    this.$element = $element;\n\t    this.$compile = $compile;\n\t    /**\n\t     * Property to hold the `<a-></a->` element after it has been\n\t     * compiled by `compileTemplate()`. Remains false until loaded\n\t     * so attributes are not set before element has initialized.\n\t     *\n\t     * @memberof EntityCtrl\n\t     * @type {Boolean|element}\n\t     */\n\t    this.entityEl = false;\n\t  }\n\t  /**\n\t   * Sets up `$watch` statements and scope cleanup. The model properties `type`\n\t   * and `attrs` each receive a watch because `type` only needs top-level\n\t   * evaluation, while `attrs` needs deep-watching.\n\t   *\n\t   * TODO: REMOVE DEEP-WATCH FOR PERFORMANCE\n\t   */\n\t\n\t\n\t  (0, _createClass3.default)(EntityController, [{\n\t    key: '$onInit',\n\t    value: function $onInit() {\n\t      var _this = this;\n\t\n\t      this.$scope.$watch(function () {\n\t        return _this.$ngModel.$modelValue.type;\n\t      }, function (type, lastType) {\n\t        if (type && _this.$ngModel.$valid) {\n\t          console.info('entity type $watch', type);\n\t          _this.entityEl = _this.compileTemplate(type);\n\t          console.log(_this.entityEl);\n\t          _this.entityEl.attr(_this.parseAttrs(_this.$ngModel.$modelValue.attrs));\n\t          _this.entityEl.on('click', function () {\n\t            // If there's a right click active...\n\t            if (_this.SceneCtrl._rightClick && _this.SceneCtrl._editable) {\n\t              // ...open the scene link editor:\n\t              _this.SceneCtrl.editItem(_this.SceneCtrl._rightClick, _this.$ngModel.$modelValue, _this.SceneCtrl.entities);\n\t            }\n\t          });\n\t        }\n\t      });\n\t\n\t      this.$scope.$watch(function () {\n\t        return _this.$ngModel.$modelValue.attrs;\n\t      }, function (attrs) {\n\t        if (_this.entityEl && attrs && angular.isArray(attrs) && _this.$ngModel.$valid) {\n\t          console.info('entity attrs $watch', attrs);\n\t          _this.entityEl.attr(_this.parseAttrs(attrs));\n\t        }\n\t      }, true);\n\t\n\t      this.$scope.$parent.$on('$destroy', function () {\n\t        _this.entityEl.remove();\n\t        _this.$scope.$destroy();\n\t      });\n\t    }\n\t\n\t    /**\n\t     * Compiles a new basic A-Frame element using Angular's `$compile`\n\t     * service; replaces the component's wrapper with the new element.\n\t     * @param  {string} type The element type to compile\n\t     * @return {element}     The compiled element\n\t     */\n\t\n\t  }, {\n\t    key: 'compileTemplate',\n\t    value: function compileTemplate(type) {\n\t      var _this2 = this;\n\t\n\t      return this.$compile('<a-' + type + '></a-' + type + '>')(this, function (clone, cloneScope) {\n\t        _this2.$element.after(clone);\n\t        _this2.$element.remove();\n\t        console.info('entity recompiled', clone);\n\t        return clone;\n\t      });\n\t    }\n\t    /**\n\t     * Formats an array of attribute objects into a attribute hash object\n\t     * that can be applied to a jqLite element in a single `attr()` call.\n\t     *\n\t     * Contains validation helpers to check for array and object values,\n\t     * which are mapped to special (A-Frame specific) attribute syntax.\n\t     *\n\t     * @example\n\t     * // An array with objects like...\n\t     * [{\n\t     *   prop: 'scale'\n\t     *   val: 0.8\n\t     * },{\n\t     *   prop: 'position',\n\t     *   val: [ 0, 0, 10 ]\n\t     * },{\n\t     *   prop: 'material',\n\t     *   val: {\n\t     *     color: '#0077CA'\n\t     *   }\n\t     * }]\n\t     * \n\t     * // ...becomes an object like:\n\t     * {\n\t     *   scale: '0.8',\n\t     *   position: '0 0 10',\n\t     *   material: 'color:#0077CA;'\n\t     * }\n\t     * \n\t     * @param  {Array} attrs An array of prop/val attrs\n\t     * @return {Object}      An a-frame ready attribute hash\n\t     */\n\t\n\t  }, {\n\t    key: 'parseAttrs',\n\t    value: function parseAttrs(attrs) {\n\t      var newAttrs = {};\n\t      var _iteratorNormalCompletion = true;\n\t      var _didIteratorError = false;\n\t      var _iteratorError = undefined;\n\t\n\t      try {\n\t        var _loop = function _loop() {\n\t          var _ref = _step.value;\n\t          var prop = _ref.prop,\n\t              val = _ref.val;\n\t\n\t          if (prop) {\n\t            // this feels dirty, but seems\n\t            // to maintain integrity of arrays from user input\n\t            val = JSON.parse((0, _stringify2.default)(val));\n\t            // check if the value is an array\n\t            // format into space-separated if so\n\t            if (angular.isArray(val)) {\n\t              val = val.map(function (a, i) {\n\t                return val[i];\n\t              }).join(' ');\n\t            }\n\t            // check if the value is an object\n\t            // format into a css-style prop declaration\n\t            // e.g. width:400px;color:white;etc..\n\t            if (angular.isObject(val)) {\n\t              (function () {\n\t                var condensedProps = [];\n\t                angular.forEach(val, function (value, rule) {\n\t                  condensedProps.push([rule, value].join(': '));\n\t                });\n\t                val = condensedProps.join('; ');\n\t              })();\n\t            }\n\t            newAttrs[prop] = val;\n\t            console.info('attr added:%c ' + prop + ' = ' + val, 'color: blue;');\n\t          }\n\t        };\n\t\n\t        for (var _iterator = (0, _getIterator3.default)(attrs), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t          _loop();\n\t        }\n\t      } catch (err) {\n\t        _didIteratorError = true;\n\t        _iteratorError = err;\n\t      } finally {\n\t        try {\n\t          if (!_iteratorNormalCompletion && _iterator.return) {\n\t            _iterator.return();\n\t          }\n\t        } finally {\n\t          if (_didIteratorError) {\n\t            throw _iteratorError;\n\t          }\n\t        }\n\t      }\n\t\n\t      return newAttrs;\n\t    }\n\t  }]);\n\t  return EntityController;\n\t}();\n\t\n\texports.default = EntityController;\n\n/***/ },\n\n/***/ 612:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _entityControls = __webpack_require__(613);\n\t\n\tvar _entityControls2 = _interopRequireDefault(_entityControls);\n\t\n\tvar _entityControls3 = __webpack_require__(614);\n\t\n\tvar _entityControls4 = _interopRequireDefault(_entityControls3);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar entityComponent = {\n\t  template: _entityControls2.default,\n\t  controller: _entityControls4.default,\n\t  require: {\n\t    $ngModel: 'ngModel'\n\t  }\n\t};\n\t\n\texports.default = entityComponent;\n\n/***/ },\n\n/***/ 613:\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class=\\\"md-title\\\">\\n  Element:\\n</div>\\n<md-input-container>\\n  <label>\\n    Type:\\n  </label>\\n    <input ng-model=\\\"type\\\" />\\n</md-input-container>\\n<div class=\\\"md-title\\\">\\n  Attributes:\\n</div>\\n<md-list layout=\\\"column\\\">\\n  <md-list-item layout layout-wrap ng-repeat=\\\"attr in attrs\\\">\\n    <span class=\\\"md-subheader\\\" flex=\\\"100\\\">\\n      <strong>{{attr.prop}}=\\\"<em>{{attr.val}}</em></strong>\\\"\\n    </span><br/>\\n    <md-input-container>\\n      <label>\\n        Property\\n      </label>\\n      <input ng-model=\\\"attr.prop\\\" />\\n    </md-input-container>\\n    <md-input-container>\\n      <label>\\n        Value\\n      </label>\\n      <input ng-model=\\\"attr.val\\\" />\\n    </md-input-container>\\n    <md-button class=\\\"md-raised md-warn\\\" ng-click=\\\"$ctrl.removeAttr(attr)\\\">Remove</md-button>\\n  </md-list-item>\\n  <md-list-item>\\n    <md-button class=\\\"md-raised md-primary\\\" ng-click=\\\"$ctrl.addAttr()\\\">Add attribute</md-button>\\n  </md-list-item>\\n</md-list>\"\n\n/***/ },\n\n/***/ 614:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _classCallCheck2 = __webpack_require__(323);\n\t\n\tvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\t\n\tvar _createClass2 = __webpack_require__(324);\n\t\n\tvar _createClass3 = _interopRequireDefault(_createClass2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar EntityController = function () {\n\t  ///////\n\t  EntityController.$inject = [\"$scope\"];\n\t  function EntityController($scope) {\n\t    'ngInject';\n\t\n\t    (0, _classCallCheck3.default)(this, EntityController);\n\t    this.$scope = $scope;\n\t  }\n\t  ////////\n\t\n\t\n\t  (0, _createClass3.default)(EntityController, [{\n\t    key: '$onInit',\n\t    value: function $onInit() {\n\t      var _this = this;\n\t\n\t      this.$ngModel.$formatters.push(function (modelValue) {\n\t        var type = modelValue.type,\n\t            attrs = modelValue.attrs;\n\t\n\t        console.info('control $formatter', { type: type, attrs: attrs });\n\t        return {\n\t          type: type,\n\t          attrs: attrs\n\t        };\n\t      });\n\t      ////\n\t      this.$ngModel.$render = function () {\n\t        var _$ngModel$$viewValue = _this.$ngModel.$viewValue,\n\t            type = _$ngModel$$viewValue.type,\n\t            attrs = _$ngModel$$viewValue.attrs;\n\t\n\t        console.log('control $render', { type: type, attrs: attrs });\n\t        _this.$scope.type = type;\n\t        _this.$scope.attrs = attrs;\n\t      };\n\t      ////\n\t      this.$scope.$watch(function () {\n\t        return {\n\t          attrs: _this.$scope.attrs, type: _this.$scope.type\n\t        };\n\t      }, function (newVal) {\n\t        console.log('control $watch', newVal);\n\t        _this.$ngModel.$setViewValue({\n\t          type: _this.$scope.type,\n\t          attrs: _this.$scope.attrs\n\t        });\n\t      }, true);\n\t      ////\n\t      this.$ngModel.$parsers.push(function (viewValue) {\n\t        var type = viewValue.type,\n\t            attrs = viewValue.attrs;\n\t\n\t        console.log('control $parser', { type: type, attrs: attrs });\n\t        return { type: type, attrs: attrs };\n\t      });\n\t    }\n\t    ////////\n\t\n\t  }, {\n\t    key: 'addAttr',\n\t    value: function addAttr() {\n\t      console.log('attr added from control');\n\t      return this.$scope.attrs.push({ prop: '', val: '' });\n\t    }\n\t    ////////\n\t\n\t  }, {\n\t    key: 'removeAttr',\n\t    value: function removeAttr(attr) {\n\t      var _this2 = this;\n\t\n\t      angular.forEach(this.$scope.attrs, function (a, i) {\n\t        if (a.$$hashKey === attr.$$hashKey) {\n\t          console.log('attr removed from control', a);\n\t          return _this2.$scope.attrs.splice(i, 1);\n\t        };\n\t      });\n\t    }\n\t  }]);\n\t  return EntityController;\n\t}();\n\t\n\texports.default = EntityController;\n\n/***/ },\n\n/***/ 615:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _angular = __webpack_require__(299);\n\t\n\tvar _angular2 = _interopRequireDefault(_angular);\n\t\n\tvar _angularUiRouter = __webpack_require__(301);\n\t\n\tvar _angularUiRouter2 = _interopRequireDefault(_angularUiRouter);\n\t\n\tvar _angularMaterial = __webpack_require__(310);\n\t\n\tvar _angularMaterial2 = _interopRequireDefault(_angularMaterial);\n\t\n\tvar _angulartics = __webpack_require__(302);\n\t\n\tvar _angulartics2 = _interopRequireDefault(_angulartics);\n\t\n\tvar _angularticsGoogleAnalytics = __webpack_require__(304);\n\t\n\tvar _angularticsGoogleAnalytics2 = _interopRequireDefault(_angularticsGoogleAnalytics);\n\t\n\tvar _drilldown = __webpack_require__(616);\n\t\n\tvar _drilldown2 = _interopRequireDefault(_drilldown);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar drilldownModule = _angular2.default.module('drilldown', [_angularUiRouter2.default, _angularMaterial2.default, _angulartics2.default, _angularticsGoogleAnalytics2.default]).component('drilldownMenu', _drilldown2.default).config([\"$stateProvider\", function ($stateProvider) {\n\t  'ngInject';\n\t\n\t  function alphaGroupReducer(output, name) {\n\t    var lCase = name.name.toUpperCase();\n\t    if (output[lCase[0]]) //if lCase is a key\n\t      output[lCase[0]].push(name); //Add name to its list\n\t    else output[lCase[0]] = [name]; // Else add a key\n\t    return output;\n\t  }\n\t\n\t  $stateProvider.state('locations', {\n\t    parent: 'home',\n\t    url: '/',\n\t    component: 'drilldownMenu',\n\t    resolve: {\n\t      Tour: '$tourApi',\n\t      children: [\"Tour\", function children(Tour) {\n\t        return Tour.location.query({\n\t          sort: 'name'\n\t        }).$promise;\n\t      }],\n\t      nextLevel: function nextLevel() {\n\t        return 'location';\n\t      }\n\t    }\n\t  }).state('location', {\n\t    parent: 'locations',\n\t    url: ':location',\n\t    component: 'drilldownMenu',\n\t    resolve: {\n\t      currentLocation: [\"$stateParams\", \"Tour\", function currentLocation($stateParams, Tour) {\n\t        return Tour.location.query({\n\t          filter: {\n\t            code: $stateParams.location\n\t          }\n\t        }).$promise;\n\t      }],\n\t      sceneData: [\"currentLocation\", \"Tour\", function sceneData(currentLocation, Tour) {\n\t        if (currentLocation[0] && currentLocation[0].default) {\n\t          return Tour.scene.get({ id: currentLocation[0].default }).$promise;\n\t        }\n\t      }],\n\t      children: [\"$stateParams\", \"$aframeScene\", \"currentLocation\", \"sceneData\", \"Tour\", function children($stateParams, $aframeScene, currentLocation, sceneData, Tour) {\n\t        if (!$stateParams.building && !$stateParams.scene && sceneData) {\n\t          $aframeScene.scene = sceneData;\n\t        }\n\t        return Tour.building.query({\n\t          filter: {\n\t            parent: currentLocation[0]._id\n\t          },\n\t          sort: 'name'\n\t        }).$promise;\n\t      }],\n\t      nextLevel: [\"children\", function nextLevel(children) {\n\t        return 'building';\n\t      }]\n\t    }\n\t  }).state('building', {\n\t    parent: 'location',\n\t    url: '/:building',\n\t    component: 'drilldownMenu',\n\t    resolve: {\n\t      currentBuilding: [\"$stateParams\", \"Tour\", function currentBuilding($stateParams, Tour) {\n\t        return Tour.building.query({\n\t          filter: {\n\t            code: $stateParams.building\n\t          }\n\t        }).$promise;\n\t      }],\n\t      sceneData: [\"currentBuilding\", \"Tour\", function sceneData(currentBuilding, Tour) {\n\t        if (currentBuilding[0] && currentBuilding[0].default) {\n\t          return Tour.scene.get({ id: currentBuilding[0].default }).$promise;\n\t        }\n\t      }],\n\t      children: [\"$stateParams\", \"$aframeScene\", \"currentLocation\", \"currentBuilding\", \"sceneData\", \"Tour\", function children($stateParams, $aframeScene, currentLocation, currentBuilding, sceneData, Tour) {\n\t        if (!$stateParams.scene && sceneData) {\n\t          $aframeScene.scene = sceneData;\n\t        }\n\t        return Tour.scene.query({\n\t          filter: {\n\t            parent: currentBuilding[0]._id\n\t          },\n\t          sort: 'name'\n\t        }).$promise;\n\t      }],\n\t      nextLevel: function nextLevel() {\n\t        return 'scene';\n\t      }\n\t    }\n\t  }).state('scene', {\n\t    parent: 'building',\n\t    url: '/:scene',\n\t    resolve: {\n\t      currentScene: [\"$stateParams\", \"currentBuilding\", \"Tour\", function currentScene($stateParams, currentBuilding, Tour) {\n\t        return Tour.scene.query({\n\t          filter: {\n\t            code: $stateParams.scene,\n\t            parent: currentBuilding[0]._id\n\t          }\n\t        }).$promise;\n\t      }],\n\t      sceneData: [\"currentScene\", \"Tour\", function sceneData(currentScene, Tour) {\n\t        if (currentScene.length === 1 && currentScene[0]._id) {\n\t          return Tour.scene.get({ id: currentScene[0]._id }).$promise;\n\t        }\n\t      }],\n\t      item: [\"$aframeScene\", \"sceneData\", function item($aframeScene, sceneData) {\n\t        if (sceneData && sceneData.panorama) {\n\t          $aframeScene.scene = sceneData;\n\t        }\n\t        return sceneData;\n\t      }]\n\t    }\n\t  });\n\t}]).name;\n\t\n\texports.default = drilldownModule;\n\n/***/ },\n\n/***/ 616:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _drilldown = __webpack_require__(617);\n\t\n\tvar _drilldown2 = _interopRequireDefault(_drilldown);\n\t\n\tvar _drilldown3 = __webpack_require__(618);\n\t\n\tvar _drilldown4 = _interopRequireDefault(_drilldown3);\n\t\n\t__webpack_require__(620);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar drilldownComponent = {\n\t\ttemplate: _drilldown2.default,\n\t\tcontroller: _drilldown4.default,\n\t\tcontrollerAs: 'item',\n\t\tbindings: {\n\t\t\tnextLevel: '@',\n\t\t\tchildren: '<'\n\t\t}\n\t};\n\t\n\texports.default = drilldownComponent;\n\n/***/ },\n\n/***/ 617:\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<md-content\\n\\tclass=\\\"drilldown-menu\\\"\\n\\tng-init=\\\"children = item.children\\\">\\n\\t<div ng-if=\\\"!item.children.length\\\" style=\\\"padding-right: 30px;\\\" class=\\\"drilldown-content\\\">\\n\\t\\t<span class=\\\"md-title\\\">No {{ ::item.nextLevel }}s found!<br/>\\n\\t\\t<strong class=\\\"md-caption\\\">&laquo; Back</strong></span>\\n\\t</div>\\n</md-content>\"\n\n/***/ },\n\n/***/ 618:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _defineProperty2 = __webpack_require__(619);\n\t\n\tvar _defineProperty3 = _interopRequireDefault(_defineProperty2);\n\t\n\tvar _classCallCheck2 = __webpack_require__(323);\n\t\n\tvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\t\n\tvar _createClass2 = __webpack_require__(324);\n\t\n\tvar _createClass3 = _interopRequireDefault(_createClass2);\n\t\n\tvar _angular = __webpack_require__(299);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction selectItem(item) {\n\t\titem.selected = item === this;\n\t}\n\t\n\tfunction deactivateItem(item) {\n\t\t// make item inactive but unhide (default state)\n\t\titem.active = item.hidden = false;\n\t\n\t\t// if the item has children...\n\t\tif (item.children) {\n\t\t\t// recursively deactivate its children as well\n\t\t\t(0, _angular.forEach)(item.children, deactivateItem);\n\t\t}\n\t}\n\t\n\tfunction toggleItem(item) {\n\t\t// compare the current iterated item to 'this'\n\t\t// make the item active and unhide if same\n\t\t// make the item inactive and hide if not\n\t\titem.active = item === this;\n\t\titem.hidden = !(item === this);\n\t\n\t\t// if the item is NOW inactive and has children...\n\t\tif (!item.active && item.children) {\n\t\t\t// ...then deactivateItem() all its children\n\t\t\t(0, _angular.forEach)(item.children, deactivateItem);\n\t\t}\n\t}\n\t\n\tvar DrilldownController = function () {\n\t\tDrilldownController.$inject = [\"$scope\", \"$element\", \"$compile\", \"$state\", \"$analytics\"];\n\t\tfunction DrilldownController($scope, $element, $compile, $state, $analytics) {\n\t\t\t'ngInject';\n\t\t\t// save a reference to the $scope\n\t\n\t\t\t(0, _classCallCheck3.default)(this, DrilldownController);\n\t\t\tthis.$scope = $scope;\n\t\t\tthis.$state = $state;\n\t\t\tthis.$element = $element;\n\t\t\tthis.$compile = $compile;\n\t\t\tthis.$analytics = $analytics;\n\t\t}\n\t\n\t\t(0, _createClass3.default)(DrilldownController, [{\n\t\t\tkey: '$onInit',\n\t\t\tvalue: function $onInit() {\n\t\t\t\tvar _this = this;\n\t\n\t\t\t\t// this.$scope.toggle = ($event, code, nextLevel) => {\n\t\t\t\tthis.$scope.toggle = function ($event, $sc) {\n\t\t\t\t\t// prevent click from bubbling up\n\t\t\t\t\t$event.stopPropagation();\n\t\t\t\t\t// only open drilldown if final level not reached\n\t\t\t\t\tif (_this.nextLevel !== 'scene') {\n\t\t\t\t\t\t// if clicked item is inactive...\n\t\t\t\t\t\tif (!$sc.item.active) {\n\t\t\t\t\t\t\t// ...then go up a level, run toggleItem() on every item\n\t\t\t\t\t\t\t// ...using the clicked item as the context of 'this'\n\t\t\t\t\t\t\t(0, _angular.forEach)($sc.$parent.children, toggleItem, $sc.item);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// ...otherwise, go up a level and deactivateItem() all\n\t\t\t\t\t\t\t(0, _angular.forEach)($sc.$parent.children, deactivateItem);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t(0, _angular.forEach)($sc.$parent.children, selectItem, $sc.item);\n\t\t\t\t\t}\n\t\t\t\t\t// go to state based on nextLevel prop and item code\n\t\t\t\t\t_this.$analytics.eventTrack('click', { category: 'drilldown', label: [$sc.$parent.code, $sc.item.code].join('_') });\n\t\t\t\t\t_this.$state.go(_this.nextLevel, (0, _defineProperty3.default)({}, _this.nextLevel, $sc.item.code));\n\t\t\t\t};\n\t\n\t\t\t\tvar $content = this.$element.find('md-content')[0];\n\t\t\t\tthis.children.forEach(function (item, index) {\n\t\t\t\t\tvar childScope = _this.$scope.$new();\n\t\t\t\t\tchildScope.item = item;\n\t\t\t\t\t_this.$compile('<div\\n\\t\\t\\t\\tclass=\"drilldown-item\"\\n\\t\\t\\t\\tng-class=\"{ \\'is-active\\': item.active, \\'is-hidden\\': item.hidden }\"\\n\\t\\t\\t\\tmd-ink-ripple=\"{{ item.active ? false : \\'#003C71\\' }}\"\\n\\t\\t\\t\\tng-click=\"toggle($event, this)\"\\n\\t\\t\\t\\tmd-autofocus=\"' + (index === 0) + '\">\\n\\t\\t\\t\\t<div ng-if=\"!item.hidden\" style=\"padding-right: 30px;\" class=\"drilldown-content\" ng-class=\"{\\'md-caption\\': item.active, \\'md-title\\': !item.active, \\'selected\\': item.selected }\">\\n\\t\\t\\t\\t\\t<span>{{ ::item.name }}</span>\\n\\t\\t\\t\\t\\t<div class=\"open-indicator\"></div>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<ui-view ng-if=\"item.active\" />\\n\\t\\t\\t</div>')(childScope, function (clone, scope) {\n\t\t\t\t\t\t$content.append(clone[0]);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t}]);\n\t\treturn DrilldownController;\n\t}();\n\t\n\texports.default = DrilldownController;\n\n/***/ },\n\n/***/ 620:\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ },\n\n/***/ 622:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _angular = __webpack_require__(299);\n\t\n\tvar _angular2 = _interopRequireDefault(_angular);\n\t\n\tvar _angularUiRouter = __webpack_require__(301);\n\t\n\tvar _angularUiRouter2 = _interopRequireDefault(_angularUiRouter);\n\t\n\tvar _ngmap = __webpack_require__(623);\n\t\n\tvar _ngmap2 = _interopRequireDefault(_ngmap);\n\t\n\tvar _uoitCampusMap = __webpack_require__(624);\n\t\n\tvar _uoitCampusMap2 = _interopRequireDefault(_uoitCampusMap);\n\t\n\tvar _map = __webpack_require__(625);\n\t\n\tvar _map2 = _interopRequireDefault(_map);\n\t\n\tvar _map3 = __webpack_require__(626);\n\t\n\tvar _map4 = _interopRequireDefault(_map3);\n\t\n\t__webpack_require__(627);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar mapModule = _angular2.default.module('map', [_angularUiRouter2.default, _ngmap2.default, _uoitCampusMap2.default])\n\t\n\t// .component('uoitMap', mapComponent)\n\t\n\t.config([\"$stateProvider\", function ($stateProvider) {\n\t  'ngInject';\n\t\n\t  $stateProvider.state('map', {\n\t    parent: 'home',\n\t    // component: 'uoitMap'\n\t    template: _map2.default,\n\t    controller: _map4.default\n\t  });\n\t}]).name;\n\t\n\t// import mapComponent from './map.component';\n\texports.default = mapModule;\n\n/***/ },\n\n/***/ 625:\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<campus-map\\n\\tmap-data=\\\"$ctrl.mapData\\\"\\n\\ton-goto-bldg=\\\"$ctrl.onGotoBldg()\\\"\\n\\tlayout\\n\\tflex=\\\"grow\\\">\\n\\t<campus-map-controls ng-model=\\\"$ctrl.mapData\\\" layout=\\\"column\\\" flex=\\\"grow\\\"></campus-map-controls>\\n</campus-map>\"\n\n/***/ },\n\n/***/ 626:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _classCallCheck2 = __webpack_require__(323);\n\t\n\tvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\t\n\tvar _createClass2 = __webpack_require__(324);\n\t\n\tvar _createClass3 = _interopRequireDefault(_createClass2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar MapController = function () {\n\t\tMapController.$inject = [\"$state\"];\n\t\tfunction MapController($state) {\n\t\t\t'ngInject';\n\t\n\t\t\t(0, _classCallCheck3.default)(this, MapController);\n\t\t\tthis._$state = $state;\n\t\t}\n\t\n\t\t(0, _createClass3.default)(MapController, [{\n\t\t\tkey: 'onGotoBldg',\n\t\t\tvalue: function onGotoBldg() {\n\t\t\t\tvar _this = this;\n\t\n\t\t\t\treturn function (data) {\n\t\t\t\t\t_this._$state.go('building', data);\n\t\t\t\t};\n\t\t\t}\n\t\t}]);\n\t\treturn MapController;\n\t}();\n\t\n\texports.default = MapController;\n\n/***/ },\n\n/***/ 627:\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ },\n\n/***/ 629:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _angular = __webpack_require__(299);\n\t\n\tvar _angular2 = _interopRequireDefault(_angular);\n\t\n\tvar _angularUiRouter = __webpack_require__(301);\n\t\n\tvar _angularUiRouter2 = _interopRequireDefault(_angularUiRouter);\n\t\n\tvar _angularMaterial = __webpack_require__(310);\n\t\n\tvar _angularMaterial2 = _interopRequireDefault(_angularMaterial);\n\t\n\tvar _search = __webpack_require__(630);\n\t\n\tvar _search2 = _interopRequireDefault(_search);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar searchModule = _angular2.default.module('search', [_angularUiRouter2.default, _angularMaterial2.default]).component('searchMenu', _search2.default).config([\"$stateProvider\", function ($stateProvider) {\n\t\t'ngInject';\n\t\n\t\t$stateProvider.state('search', {\n\t\t\tparent: 'home',\n\t\t\turl: '/',\n\t\t\tcomponent: 'searchMenu'\n\t\t});\n\t}]).constant('SEARCH_FILTERS', {\n\t\ttypeFilters: [{\n\t\t\tlabel: 'Virtual Tour',\n\t\t\tvalue: 'tour'\n\t\t}, {\n\t\t\tlabel: 'Campus Map',\n\t\t\tvalue: 'map'\n\t\t}],\n\t\tmodelFilters: {\n\t\t\ttour: [{\n\t\t\t\tlabel: 'Buildings',\n\t\t\t\tvalue: 'buildings'\n\t\t\t}, {\n\t\t\t\tlabel: 'Tour scenes',\n\t\t\t\tvalue: 'scenes'\n\t\t\t}],\n\t\t\tmap: [{\n\t\t\t\tlabel: 'Map features',\n\t\t\t\tvalue: 'features'\n\t\t\t}, {\n\t\t\t\tlabel: 'Feature collections',\n\t\t\t\tvalue: 'collections'\n\t\t\t}]\n\t\t},\n\t\tfieldFilters: [{\n\t\t\tlabel: 'Name',\n\t\t\tvalue: 'name,label'\n\t\t}, {\n\t\t\tlabel: 'Description',\n\t\t\tvalue: 'desc'\n\t\t}, {\n\t\t\tlabel: 'Acronym',\n\t\t\tvalue: 'code'\n\t\t}]\n\t}).name;\n\t\n\texports.default = searchModule;\n\n/***/ },\n\n/***/ 630:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _search = __webpack_require__(631);\n\t\n\tvar _search2 = _interopRequireDefault(_search);\n\t\n\tvar _search3 = __webpack_require__(632);\n\t\n\tvar _search4 = _interopRequireDefault(_search3);\n\t\n\t__webpack_require__(639);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar searchComponent = {\n\t\ttemplate: _search2.default,\n\t\tcontroller: _search4.default,\n\t\tbindings: {\n\t\t\tquery: '@',\n\t\t\tfilters: '<'\n\t\t}\n\t};\n\t\n\texports.default = searchComponent;\n\n/***/ },\n\n/***/ 631:\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class=\\\"search-bar\\\" layout=\\\"column\\\" layout-fill>\\n\\n\\t<div layout=\\\"column\\\" layout-align=\\\"center center\\\" layout-margin layout-padding flex>\\n<!-- \\t  <md-input-container md-no-float class=\\\"md-block md-icon-left\\\">\\n\\t\\t\\t<ng-md-icon icon=\\\"search\\\" size=\\\"24\\\"></ng-md-icon>\\n\\t\\t\\t<input ng-model=\\\"$ctrl.query\\\" aria-label=\\\"Search the Virtual Tour\\\" id=\\\"search_q\\\">\\n\\t\\t</md-input-container> -->\\n\\t\\t<label for=\\\"search_q\\\">I'm looking for things with</label>\\n\\t\\t<div layout=\\\"row\\\" layout-align=\\\"space-between center\\\">\\n\\t\\t\\t<ng-md-icon class=\\\"search-icon\\\" icon=\\\"search\\\" size=\\\"24\\\" ng-class=\\\"{ 'active': searchActive }\\\"></ng-md-icon>\\n\\t\\t\\t<form ng-submit=\\\"$event.preventDefault()\\\" class=\\\"search-form\\\" flex=\\\"shrink\\\">\\n\\t\\t\\t\\t<md-autocomplete\\n\\t\\t\\t\\t\\t\\tmd-search-text=\\\"$ctrl.searchText\\\"\\n\\t\\t\\t\\t\\t\\tmd-search-text-change=\\\"$ctrl.searchTextChange($ctrl.searchText)\\\"\\n\\t\\t\\t\\t\\t\\tmd-items=\\\"item in $ctrl.querySearch($ctrl.searchText)\\\"\\n\\t\\t\\t\\t\\t\\tmd-item-text=\\\"item\\\"\\n\\t\\t\\t\\t\\t\\tmd-selected-item=\\\"$ctrl.selectedItem\\\"\\n\\t\\t\\t\\t\\t\\tmd-selected-item-change=\\\"$ctrl.selectedItemChange(item)\\\"\\n\\t\\t\\t\\t\\t\\tmd-min-length=\\\"2\\\"\\n\\t\\t\\t\\t\\t\\tmd-no-cache\\n\\t\\t\\t\\t\\t\\tplaceholder=\\\"charles st\\\"\\n\\t\\t\\t\\t\\t\\tmd-menu-class=\\\"search-results\\\"\\n\\t\\t\\t\\t\\t\\tmd-autofocus\\n\\t\\t\\t\\t\\t\\tng-focus=\\\"searchActive = true\\\"\\n\\t\\t\\t\\t\\t\\tng-blur=\\\"searchActive = false\\\"\\n\\t\\t\\t\\t\\t\\tflex>\\n\\t\\t\\t\\t\\t\\t<md-item-template>\\n\\t\\t\\t\\t\\t\\t\\t<span md-highlight-text=\\\"$ctrl.searchText\\\" md-highlight-flags=\\\"gi\\\">{{ item }}</span>\\n\\t\\t\\t\\t\\t\\t</md-item-template> \\n\\t\\t\\t\\t\\t<!-- <md-item-template>\\n\\t\\t\\t\\t\\t\\t<span class=\\\"md-headline\\\" md-highlight-text=\\\"$ctrl.searchText\\\" md-highlight-flags=\\\"gi\\\">{{ item.name }}</span><br/>\\n\\t\\t\\t\\t\\t\\t<span class=\\\"md-caption\\\">{{ item.parent.name }}</span><\\n\\t\\t\\t\\t\\t\\t<span class=\\\"md-subhead\\\" ng-bind-html=\\\"item.desc\\\" md-highlight-text=\\\"$ctrl.searchText\\\"></span>\\n\\t\\t\\t\\t\\t</md-item-template> -->\\n\\t\\t\\t\\t</md-autocomplete>\\n\\t\\t\\t</form>\\n\\t\\t</div>\\n\\t\\t<div layout=\\\"row\\\" layout-wrap class=\\\"search-filters\\\">\\n\\t\\t\\t<div layout=\\\"row\\\" layout-align=\\\"space-between center\\\">\\n\\t\\t\\t\\t<label flex=\\\"noshrink\\\">within the</label>\\n\\t\\t\\t\\t<md-input-container>\\n\\t\\t\\t\\t\\t<md-select ng-model=\\\"$ctrl.filters.in\\\"\\n\\t\\t\\t\\t\\t\\tid=\\\"search_filter\\\"\\n\\t\\t\\t\\t\\t\\taria-label=\\\"filter - search in\\\"\\n\\t\\t\\t\\t\\t\\tmultiple\\n\\t\\t\\t\\t\\t\\tflex=\\\"shrink\\\">\\n\\t\\t\\t\\t\\t\\t\\t<md-option ng-value=\\\"type.value\\\" ng-repeat=\\\"type in ::$ctrl.typeFilters\\\">{{type.label}}</md-option>\\n\\t\\t\\t\\t\\t</md-select>\\n\\t\\t\\t\\t</md-input-container>\\n\\t\\t\\t</div>\\n\\t\\t\\t<div layout=\\\"row\\\" layout-align=\\\"space-between center\\\">\\n\\t\\t\\t\\t<label flex=\\\"noshrink\\\">for all</label>\\n\\t\\t\\t\\t<md-input-container>\\n\\t\\t\\t\\t\\t<md-select ng-model=\\\"$ctrl.filters.for\\\"\\n\\t\\t\\t\\t\\t\\tid=\\\"search_filter\\\"\\n\\t\\t\\t\\t\\t\\taria-label=\\\"filter - search for\\\"\\n\\t\\t\\t\\t\\t\\tmultiple\\n\\t\\t\\t\\t\\t\\tflex=\\\"shrink\\\">\\n\\t\\t\\t\\t\\t\\t<md-optgroup label=\\\"Virtual Tour\\\" ng-show=\\\"!$ctrl.filters.in.length || $ctrl.filters.in.includes('tour')\\\">\\n\\t\\t\\t\\t\\t\\t\\t<md-option ng-value=\\\"type.value\\\" ng-repeat=\\\"type in ::$ctrl.modelFilters.tour\\\">{{type.label}}</md-option>\\n\\t\\t\\t\\t\\t\\t</md-optgroup>\\n\\t\\t\\t\\t\\t\\t<md-optgroup label=\\\"Campus Map\\\" ng-show=\\\"!$ctrl.filters.in.length || $ctrl.filters.in.includes('map')\\\">\\n\\t\\t\\t\\t\\t\\t\\t<md-option ng-value=\\\"type.value\\\" ng-repeat=\\\"type in ::$ctrl.modelFilters.map\\\">{{type.label}}</md-option>\\n\\t\\t\\t\\t\\t\\t</md-optgroup>\\n\\t\\t\\t\\t\\t</md-select>\\n\\t\\t\\t\\t</md-input-container>\\n\\t\\t\\t</div>\\n\\t\\t\\t<div layout=\\\"row\\\" layout-align=\\\"space-between center\\\">\\n\\t\\t\\t\\t<label flex=\\\"noshrink\\\">by their</label>\\n\\t\\t\\t\\t<md-input-container>\\n\\t\\t\\t\\t\\t\\t<md-select ng-model=\\\"$ctrl.filters.by\\\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t aria-label=\\\"filter - search by\\\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t multiple\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t flex=\\\"shrink\\\">\\n\\t\\t\\t\\t\\t\\t\\t<!-- <md-optgroup label=\\\"Virtual tour\\\" ng-repeat=\\\"type in ::$ctrl.typeFilters\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<md-option ng-value=\\\"::type.value\\\">{{::type.label}}</md-option>\\n\\t\\t\\t\\t\\t\\t\\t</md-optgroup> -->\\n\\t\\t\\t\\t\\t\\t\\t<!-- <md-optgroup label=\\\"Campus map\\\"> -->\\n\\t\\t\\t\\t\\t\\t\\t\\t<md-option ng-value=\\\"::field.value\\\" ng-repeat=\\\"field in ::$ctrl.fieldFilters\\\">{{::field.label}}</md-option>\\n\\t\\t\\t\\t\\t\\t\\t<!-- </md-optgroup> -->\\n\\t\\t\\t\\t\\t\\t</md-select>\\n\\t\\t\\t\\t</md-input-container>\\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\t</div>\\n\\t<md-content layout=\\\"column\\\" layout-align=\\\"start center\\\" layout-margin layout-padding class=\\\"search-results\\\" flex>\\n\\t\\t<span class=\\\"md-headline\\\" ng-show=\\\"!$ctrl.searchResults.length\\\">No results found<span ng-show=\\\"$ctrl.searchText\\\"> matching \\\"<em>{{ $ctrl.searchText }}</em>\\\"</span>!</span>\\n\\t\\t<md-list>\\n      <md-list-item class=\\\"md-3-line\\\" ng-repeat-start=\\\"item in $ctrl.searchResults\\\" ng-click=\\\"null\\\">\\n        <!-- <img ng-src=\\\"{{item.face}}?{{$index}}\\\" class=\\\"md-avatar\\\" alt=\\\"{{item.who}}\\\" /> -->\\n        <div class=\\\"md-list-item-text\\\" layout=\\\"column\\\">\\n          <h3><strong>{{ ::item.name }}</strong><span ng-if=\\\"::item.parent.parent.name\\\">, {{::item.parent.name}}</span></h3>\\n          <h4>{{ ::(item.parent.parent.name || item.parent.name) }}</h4>\\n          <span ng-bind-html=\\\"::item.desc | limitTo:150\\\" ng-class=\\\"{ 'truncated-text': (item.desc.length >= 100) }\\\"></span>\\n        </div>\\n      </md-list-item>\\n\\t\\t\\t<md-divider ng-repeat-end></md-divider>\\n\\t\\t</md-list>\\n\\t</md-content>\\n\\t\\n</div>\"\n\n/***/ },\n\n/***/ 632:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _stringify = __webpack_require__(610);\n\t\n\tvar _stringify2 = _interopRequireDefault(_stringify);\n\t\n\tvar _toConsumableArray2 = __webpack_require__(633);\n\t\n\tvar _toConsumableArray3 = _interopRequireDefault(_toConsumableArray2);\n\t\n\tvar _keys = __webpack_require__(418);\n\t\n\tvar _keys2 = _interopRequireDefault(_keys);\n\t\n\tvar _assign = __webpack_require__(594);\n\t\n\tvar _assign2 = _interopRequireDefault(_assign);\n\t\n\tvar _classCallCheck2 = __webpack_require__(323);\n\t\n\tvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\t\n\tvar _createClass2 = __webpack_require__(324);\n\t\n\tvar _createClass3 = _interopRequireDefault(_createClass2);\n\t\n\tvar _angular = __webpack_require__(299);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar SearchController = function () {\n\t\tSearchController.$inject = [\"$timeout\", \"$log\", \"$http\", \"SEARCH_FILTERS\"];\n\t\tfunction SearchController($timeout, $log, $http, SEARCH_FILTERS) {\n\t\t\t'ngInject';\n\t\n\t\t\t(0, _classCallCheck3.default)(this, SearchController);\n\t\t\tthis.$timeout = $timeout;\n\t\t\tthis.$log = $log;\n\t\t\tthis.$http = $http;\n\t\n\t\t\tvar typeFilters = SEARCH_FILTERS.typeFilters,\n\t\t\t    modelFilters = SEARCH_FILTERS.modelFilters,\n\t\t\t    fieldFilters = SEARCH_FILTERS.fieldFilters;\n\t\n\t\t\t(0, _assign2.default)(this, { typeFilters: typeFilters, modelFilters: modelFilters, fieldFilters: fieldFilters });\n\t\t}\n\t\n\t\t(0, _createClass3.default)(SearchController, [{\n\t\t\tkey: '$onInit',\n\t\t\tvalue: function $onInit() {\n\t\t\t\tthis.searchResults = [];\n\t\t\t\tthis.filters = {\n\t\t\t\t\tin: [],\n\t\t\t\t\tfor: [],\n\t\t\t\t\tby: []\n\t\t\t\t};\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'querySearch',\n\t\t\tvalue: function querySearch(q) {\n\t\t\t\tvar _this = this;\n\t\n\t\t\t\tif (!q) return [];\n\t\t\t\tvar params = { q: q };\n\t\t\t\tif (this.filters.for.length) params.filter = this.filters.for;\n\t\t\t\tif (this.filters.by.length) params.fields = this.filters.by;\n\t\t\t\tconsole.log(params);\n\t\t\t\treturn this.$http.get('/api/v1/search', { params: params }).then(function (result) {\n\t\t\t\t\tvar output = [];\n\t\t\t\t\t(0, _keys2.default)(result.data.results).forEach(function (type) {\n\t\t\t\t\t\treturn output.push.apply(output, (0, _toConsumableArray3.default)(result.data.results[type]));\n\t\t\t\t\t});\n\t\t\t\t\t_this.searchResults = output;\n\t\t\t\t\t// return output;\n\t\t\t\t\treturn result.data.overview;\n\t\t\t\t});\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'searchTextChange',\n\t\t\tvalue: function searchTextChange(text) {\n\t\t\t\tthis.$log.info('Text changed to ' + text);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'selectedItemChange',\n\t\t\tvalue: function selectedItemChange(item) {\n\t\t\t\tthis.$log.info('Item changed to ' + (0, _stringify2.default)(item));\n\t\t\t}\n\t\t}]);\n\t\treturn SearchController;\n\t}();\n\t\n\texports.default = SearchController;\n\n/***/ },\n\n/***/ 639:\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ },\n\n/***/ 641:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _angular = __webpack_require__(299);\n\t\n\tvar _angular2 = _interopRequireDefault(_angular);\n\t\n\tvar _angularUiRouter = __webpack_require__(301);\n\t\n\tvar _angularUiRouter2 = _interopRequireDefault(_angularUiRouter);\n\t\n\tvar _angularAnimate = __webpack_require__(306);\n\t\n\tvar _angularAnimate2 = _interopRequireDefault(_angularAnimate);\n\t\n\tvar _angularMaterial = __webpack_require__(310);\n\t\n\tvar _angularMaterial2 = _interopRequireDefault(_angularMaterial);\n\t\n\tvar _angularCookies = __webpack_require__(642);\n\t\n\tvar _angularCookies2 = _interopRequireDefault(_angularCookies);\n\t\n\tvar _angularStorage = __webpack_require__(644);\n\t\n\tvar _angularStorage2 = _interopRequireDefault(_angularStorage);\n\t\n\tvar _settings = __webpack_require__(646);\n\t\n\tvar _settings2 = _interopRequireDefault(_settings);\n\t\n\tvar _settings3 = __webpack_require__(651);\n\t\n\tvar _settings4 = _interopRequireDefault(_settings3);\n\t\n\tvar _connectionDetailsService = __webpack_require__(652);\n\t\n\tvar _connectionDetailsService2 = _interopRequireDefault(_connectionDetailsService);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar settingsModule = _angular2.default.module('settings', [_angularUiRouter2.default, _angularAnimate2.default, _angularMaterial2.default, _angularCookies2.default, _angularStorage2.default]).component('userSettings', _settings2.default).factory('SettingsFactory', _settings4.default).service('ConnectionDetails', _connectionDetailsService2.default).config([\"$stateProvider\", function ($stateProvider) {\n\t  'ngInject';\n\t\n\t  $stateProvider.state('settings', {\n\t    parent: 'home',\n\t    url: '/',\n\t    component: 'userSettings'\n\t  });\n\t}]).name;\n\t\n\texports.default = settingsModule;\n\n/***/ },\n\n/***/ 646:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _settings = __webpack_require__(647);\n\t\n\tvar _settings2 = _interopRequireDefault(_settings);\n\t\n\tvar _settings3 = __webpack_require__(648);\n\t\n\tvar _settings4 = _interopRequireDefault(_settings3);\n\t\n\t__webpack_require__(649);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar settingsComponent = {\n\t  restrict: 'E',\n\t  bindings: {},\n\t  template: _settings2.default,\n\t  controller: _settings4.default\n\t};\n\t\n\texports.default = settingsComponent;\n\n/***/ },\n\n/***/ 647:\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<md-content layout=\\\"column\\\" layout-align=\\\"start center\\\" class=\\\"user-dashboard\\\" layout-fill>\\n\\n\\t<md-card id=\\\"user_dashboard\\\" layout=\\\"column\\\" layout-align=\\\"center center\\\" flex=\\\"noshrink\\\" ng-if=\\\"!$ctrl.isLoggedIn()\\\">\\n\\t  <md-card-header layout-align=\\\"space-around center\\\" class=\\\"signin-msg\\\">\\n\\t    <md-card-content layout=\\\"column\\\">\\n\\t      <p class=\\\"md-headline\\\"><strong>Sign in or register</strong> to save your user preferences permanently!</p>\\n\\t      <p class=\\\"md-subtitle\\\">Preferences will still be saved without a user but will be limited to your browser session.</p>\\n\\t      <md-button ng-click=\\\"$ctrl.promptLogin()\\\" class=\\\"md-raised md-primary\\\" md-autofocus=\\\"!$ctrl.isLoggedIn()\\\">Sign in</md-button>\\n\\t      <md-button href=\\\"/keystone/signin\\\" target=\\\"_self\\\" class=\\\"md-primary\\\">Register</md-button>\\n\\t    </md-card-content>\\n\\t  </md-card-header>\\n\\t</md-card>\\n\\n\\t<md-card id=\\\"user_dashboard\\\" flex=\\\"none\\\" ng-if=\\\"$ctrl.isLoggedIn()\\\">\\n\\t\\t<img src=\\\"assets/images/north_bg.jpg\\\" alt=\\\"\\\" class=\\\"md-card-image\\\" />\\n\\t  <md-card-header layout-align=\\\"space-around center\\\">\\n\\t    <md-card-avatar><img ng-src=\\\"{{ $ctrl.user.avatar.secure_url }}\\\" class=\\\"md-user-avatar\\\"/></md-card-avatar>\\n\\t    <md-card-header-text><span class=\\\"md-headline\\\">{{ [$ctrl.user.name.first, $ctrl.user.name.last].join(' ') }}</span><span class=\\\"md-subhead\\\">{{ $ctrl.user.bannerId }}</span></md-card-header-text>\\n\\t  </md-card-header>\\n\\t  <md-card-actions layout=\\\"row\\\" layout-align=\\\"start center\\\">\\n      <md-button aria-label=\\\"go to admin\\\" class=\\\"md-primary md-raised\\\" ng-if=\\\"$ctrl.user.isAdmin || $ctrl.user.isEditor\\\" href='/keystone', target='_self'>\\n        Admin\\n      </md-button>\\n\\t    <md-button ng-click=\\\"$ctrl.logout()\\\" class=\\\"md-raised\\\">Sign out</md-button>\\n\\t    <md-card-icon-actions>\\n\\t      <md-button aria-label=\\\"edit profile\\\" class=\\\"md-icon-button md-primary\\\" md-autofocus=\\\"$ctrl.isLoggedIn()\\\">\\n\\t        <ng-md-icon icon=\\\"edit\\\"></ng-md-icon>\\n\\t      </md-button>\\n\\t    </md-card-icon-actions>\\n\\t  </md-card-actions>\\n\\t</md-card>\\n\\n\\t<md-card flex=\\\"nogrow\\\" id=\\\"user_settings\\\">\\n  \\t<v-accordion class=\\\"vAccordion--default\\\" multiple flex control=\\\"accordion\\\">\\n\\t\\t  <!-- add expanded attribute to open the section -->\\n\\t\\t  <v-pane>\\n\\t\\t    <v-pane-header>\\n  \\t\\t\\t\\tApp settings\\n\\t\\t    </v-pane-header>\\n\\t\\t    <v-pane-content>\\n\\t\\t\\t\\t\\t<md-list>\\n\\t\\t\\t\\t\\t  <md-list-item ng-repeat=\\\"(key, setting) in $ctrl.settings\\\">\\n\\t\\t\\t\\t\\t    <ng-md-icon icon=\\\"{{::setting.icon}}\\\" ng-attr-style=\\\"fill: {{ setting.val? '#003c71':'#cccccc'}}\\\" flex=\\\"nogrow\\\"></ng-md-icon>\\n\\t\\t\\t\\t\\t    <span flex>{{ ::setting.label }}</span>\\n\\t\\t\\t\\t\\t    <md-switch class=\\\"md-primary\\\" ng-model=\\\"$ctrl.settings[key].val\\\" ng-change=\\\"$ctrl.updateSettings()\\\" aria-label=\\\"{{ ::setting.label }}\\\"></md-switch>\\n\\t\\t\\t\\t\\t  </md-list-item>\\n\\t\\t\\t\\t\\t</md-list>\\n\\t\\t    </v-pane-content>\\n\\t\\t  </v-pane>\\n\\n\\t\\t  <v-pane>\\n\\t\\t    <v-pane-header>\\n\\t\\t      Data usage\\n\\t\\t    </v-pane-header>\\n\\n\\t\\t    <v-pane-content>\\n\\t\\t    \\t<div layout=\\\"column\\\" layout-padding>\\n\\t\\t\\t\\t\\t\\t<span class=\\\"md-subhead\\\">\\n\\t\\t\\t\\t\\t\\t\\t<strong>Current:</strong>\\n\\t\\t\\t\\t\\t\\t\\t<span class=\\\"md-caption\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<strong>{{ $ctrl.usageLevel[0] }} image quality</strong> with <strong>{{ $ctrl.usageLevel[1] }} load time</strong> and <strong>{{ $ctrl.usageLevel[2] }} data consumption</strong> \\n\\t\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t<md-divider></md-divider>\\n\\t\\t\\t\\t\\t\\t<label ng-repeat=\\\"(key, setting) in $ctrl.usage\\\" flex>\\n\\t\\t\\t\\t\\t    <md-checkbox ng-if=\\\"key === 'auto'\\\" class=\\\"md-primary\\\" ng-model=\\\"setting.val\\\" ng-change=\\\"$ctrl.detectConnection()\\\" aria-label=\\\"Auto-detect optimum settings\\\" ng-disabled=\\\"$ctrl.connection.loading\\\">\\n\\t\\t            <div layout=\\\"row\\\" layout-align=\\\"space-between stretch\\\">\\n\\t\\t            \\t<span flex=\\\"noshrink\\\">{{ $ctrl.connection.loading ? 'Detecting network...' : 'Auto-detect optimum settings'; }}</span>\\n\\t\\t            \\t<span flex=\\\"grow\\\"></span>\\n\\t\\t            \\t<md-progress-circular md-mode=\\\"indeterminate\\\" md-diameter=\\\"16\\\" ng-show=\\\"$ctrl.connection.loading\\\"></md-progress-circular>\\n\\t\\t            </div>\\n\\t\\t          </md-checkbox>\\n\\t\\t\\t\\t\\t\\t\\t{{ ::setting.label }}<br/>\\n\\t\\t\\t\\t    \\t<md-slider-container flex ng-if=\\\"key !== 'auto'\\\" ng-disabled=\\\"$ctrl.usage.auto.val\\\">\\n\\t\\t\\t\\t\\t      <h5>{{ ::setting.labels[0] }}</h5>\\n\\t\\t\\t\\t\\t      <md-slider ng-model=\\\"setting.val\\\" step=\\\"{{::setting.step}}\\\" min=\\\"{{::setting.min}}\\\" max=\\\"{{::setting.max}}\\\" aria-label=\\\"{{setting.label}}\\\" class=\\\"md-primary\\\" md-discrete ng-change=\\\"$ctrl.updateUsage()\\\"></md-slider>\\n\\t\\t\\t\\t\\t      <h5>{{ ::setting.labels[1] }}</h5>\\n\\t\\t\\t\\t\\t    </md-slider-container>\\n\\t\\t\\t\\t\\t\\t</label>\\n\\n\\t\\t\\t    </div>\\n\\n\\t\\t    </v-pane-content>\\n\\t\\t  </v-pane>\\n\\n\\t\\t</v-accordion>\\n\\t</md-card>\\n</md-content>\"\n\n/***/ },\n\n/***/ 648:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _classCallCheck2 = __webpack_require__(323);\n\t\n\tvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\t\n\tvar _createClass2 = __webpack_require__(324);\n\t\n\tvar _createClass3 = _interopRequireDefault(_createClass2);\n\t\n\tvar _angular = __webpack_require__(299);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t/**\n\t * The settings controller provides a high-level interface to\n\t * the app's user preferences and data usage settings, login/logout\n\t * functions, and a set of automatic usage detection functions.\n\t * \n\t * @param {object} $scope \t\t\t\t\t The current scope\n\t * @param {object} $animate          For animating backdrop only\n\t * @param {object} $mdUtil           Init backdrop utility\n\t * @param {object} $popupWindow      Supplies login window\n\t * @param {object} UserAuth          Authentication check\n\t * @param {object} UserSession       Holds all settings\n\t * @param {object} ConnectionDetails Detects network and device\n\t * @param {object} AUTH_EVENTS       Authorization event names\n\t */\n\tvar SettingsController = function () {\n\t\tSettingsController.$inject = [\"$scope\", \"$animate\", \"$mdUtil\", \"$popupWindow\", \"UserAuth\", \"UserSession\", \"ConnectionDetails\", \"AUTH_EVENTS\"];\n\t\tfunction SettingsController($scope, $animate, $mdUtil, $popupWindow, UserAuth, UserSession, ConnectionDetails, AUTH_EVENTS) {\n\t\t\t'ngInject';\n\t\n\t\t\t(0, _classCallCheck3.default)(this, SettingsController);\n\t\t\tthis.$scope = $scope;\n\t\t\tthis.$animate = $animate;\n\t\t\tthis.$mdUtil = $mdUtil;\n\t\t\tthis.$popupWindow = $popupWindow;\n\t\t\tthis.UserAuth = UserAuth;\n\t\t\tthis.UserSession = UserSession;\n\t\t\tthis.ConnectionDetails = ConnectionDetails;\n\t\t\tthis.AUTH_EVENTS = AUTH_EVENTS;\n\t\t}\n\t\t/**\n\t  * Lifecycle hook to initialize dependencies when component\n\t  * is mounted.\n\t  * \n\t  * Stores authentication and user preference detail objects,\n\t  * inits connection object to hold network info. Sets up\n\t  * one-time `$watch` binding to listen for accordion init\n\t  * since its contents load async before it can open.\n\t  *\n\t  * Sets up `$on('event')` listener for login success; passes\n\t  * user data from event into controller and syncs applicable\n\t  * view elements; opens accordion to expose settings to user.\n\t  */\n\t\n\t\n\t\t(0, _createClass3.default)(SettingsController, [{\n\t\t\tkey: '$onInit',\n\t\t\tvalue: function $onInit() {\n\t\t\t\tvar _this = this;\n\t\n\t\t\t\tthis.isLoggedIn = this.UserAuth.isAuthenticated;\n\t\t\t\tthis.user = this.UserSession.user;\n\t\t\t\tthis.settings = this.UserSession.settings;\n\t\t\t\tthis.usage = this.UserSession.usage;\n\t\n\t\t\t\t/**\n\t    * This property will hold the user's network and\n\t    * device information when it becomes available; it\n\t    * remains false until availability.\n\t    *\n\t    * @memberof SettingsCtrl\n\t    * @type {boolean|object}\n\t    * @example\n\t    * {\n\t    *   \"network\": {\n\t    *     \"speeds\": { ... },\n\t    *     ...\n\t    *   },\n\t    *   \"useragent\": {\n\t    *     \"device\": { ... },\n\t    *     ...\n\t    *   }\n\t    * }\n\t    */\n\t\t\t\tthis.connection = false;\n\t\n\t\t\t\t/**\n\t    * The accordion initializer watches for a valid\n\t    * instance and opens the accordion once it becomes\n\t    * available. Performed once then deregistered.\n\t    * \n\t    * @memberof SettingsCtrl\n\t    */\n\t\t\t\tvar accordionReady = this.$scope.$watch('accordion', function (accordion) {\n\t\t\t\t\tif (accordion) {\n\t\t\t\t\t\t_this.$scope.$applyAsync(function () {\n\t\t\t\t\t\t\t_this.isLoggedIn() && accordion.expandAll();\n\t\t\t\t\t\t});\n\t\t\t\t\t\taccordionReady();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\n\t\t\t\tthis.$scope.$on(this.AUTH_EVENTS.loginSuccess, this.loadUserAfterLogin.bind(this));\n\t\n\t\t\t\tthis.getUsageLevel();\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Expands all accordion sections.\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: 'expandAll',\n\t\t\tvalue: function expandAll() {\n\t\t\t\tthis.$scope.accordion.expandAll();\n\t\t\t}\n\t\t\t/**\n\t   * Collapses all accordion sections.\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: 'collapseAll',\n\t\t\tvalue: function collapseAll() {\n\t\t\t\tthis.$scope.accordion.collapseAll();\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Prompts user for login using `$popupWindow` service's `login()` dialog.\n\t   * @return {Promise} Status of popupWindow\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: 'promptLogin',\n\t\t\tvalue: function promptLogin() {\n\t\t\t\treturn this.$popupWindow.login();\n\t\t\t}\n\t\t\t/**\n\t   * Logs user out directly with `UserAuth.logout()`.\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: 'logout',\n\t\t\tvalue: function logout() {\n\t\t\t\tvar _this2 = this;\n\t\n\t\t\t\tvar backdrop = this.$mdUtil.createBackdrop(this.$scope, \"md-dialog-backdrop md-opaque\");\n\t\t\t\tbackdrop[0].tabIndex = -1;\n\t\t\t\tthis.$animate.enter(backdrop, (0, _angular.element)(document.body), null);\n\t\t\t\tthis.UserAuth.logout().then(function () {\n\t\t\t\t\t_this2.$animate.leave(backdrop);\n\t\t\t\t\t_this2.collapseAll();\n\t\t\t\t});\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Stores user info and opens accordion sections when login is detected.\n\t   * \n\t   * @param  {Event} event  The originating event object\n\t   * @param  {Object} user  The newly logged-in user\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: 'loadUserAfterLogin',\n\t\t\tvalue: function loadUserAfterLogin(event, user) {\n\t\t\t\tthis.user = this.UserSession.user;\n\t\t\t\tthis.settings = this.UserSession.settings;\n\t\t\t\tthis.usage = this.UserSession.usage;\n\t\t\t\tthis.updateUsage();\n\t\t\t\tthis.updateSettings();\n\t\t\t\tthis.expandAll();\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Updates the user's setting preferences.\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: 'updateSettings',\n\t\t\tvalue: function updateSettings() {\n\t\t\t\tthis.UserSession.settings = this.settings;\n\t\t\t}\n\t\t\t/**\n\t   * Updates the user's usage preferences and usage level description text.\n\t   * \n\t   * @param  {[object]} usage Optional data override\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: 'updateUsage',\n\t\t\tvalue: function updateUsage(usage) {\n\t\t\t\tthis.UserSession.usage = usage || this.usage;\n\t\t\t\tthis.getUsageLevel();\n\t\t\t}\n\t\t\t/**\n\t   * Uses the `ConnectionDetails` service to convert the current\n\t   * session's usage preferences into a user-friendly description\n\t   * of what the preferences' effects will be.\n\t   * - Grabs `UserSession.usage` details\n\t   * - Uses `ConnectionDetails.calculateUsageLevel()` to tally usage stats from details\n\t   * - Passes resulting tally to `ConnectionDetails.getLabelsFromTally()`\n\t   * - Assigns resulting descriptions to controller\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: 'getUsageLevel',\n\t\t\tvalue: function getUsageLevel() {\n\t\t\t\tvar _this3 = this;\n\t\n\t\t\t\tthis.ConnectionDetails.calculateUsageLevel(this.UserSession.usage).then(function (usageLevelTally) {\n\t\t\t\t\t_this3.usageLevel = _this3.ConnectionDetails.getLabelsFromTally(usageLevelTally);\n\t\t\t\t});\n\t\t\t}\n\t\n\t\t\t/**\n\t   * User-activated function for auto-optimizing usage\n\t   * level using the `ConnectionDetails` service.\n\t   * - Sets loading animation during detection\n\t   * - Fetches connection information with `detect()`\n\t   * - Stores returned connection information\n\t   * - Sets optimized usage settings with `optimize()`\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: 'detectConnection',\n\t\t\tvalue: function detectConnection() {\n\t\t\t\tvar _this4 = this;\n\t\n\t\t\t\tif (this.usage.auto.val) {\n\t\t\t\t\tthis.connection = { loading: true };\n\t\t\t\t\tthis.ConnectionDetails.detect().then(function (connection) {\n\t\t\t\t\t\t_this4.connection = connection;\n\t\t\t\t\t\t_this4.usage = _this4.ConnectionDetails.optimize(connection);\n\t\t\t\t\t\t_this4.updateUsage();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}]);\n\t\treturn SettingsController;\n\t}();\n\t\n\texports.default = SettingsController;\n\n/***/ },\n\n/***/ 649:\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ },\n\n/***/ 651:\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tSettingsFactory.$inject = [\"store\"];\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\tfunction SettingsFactory(store) {\n\t  'ngInject';\n\t\n\t  return store.getNamespacedStore('appSettings');\n\t}\n\t\n\texports.default = SettingsFactory;\n\n/***/ },\n\n/***/ 652:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _keys = __webpack_require__(418);\n\t\n\tvar _keys2 = _interopRequireDefault(_keys);\n\t\n\tvar _classCallCheck2 = __webpack_require__(323);\n\t\n\tvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\t\n\tvar _createClass2 = __webpack_require__(324);\n\t\n\tvar _createClass3 = _interopRequireDefault(_createClass2);\n\t\n\tvar _angular = __webpack_require__(299);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t/**\n\t * Upper limit of \"high-speed\" connection rating (in Mbps).\n\t * @memberof ConnectionDetails\n\t * @type {Number}\n\t */\n\tvar SPEED_HI = 50;\n\t\n\t/**\n\t * Upper limit of \"wi-fi\" connection rating (in Mbps).\n\t * @memberof ConnectionDetails\n\t * @type {Number}\n\t */\n\tvar SPEED_WF = 8;\n\t\n\t/**\n\t * Upper limit of \"mobile/3G\" connection rating (in Mbps).\n\t * @memberof ConnectionDetails\n\t * @type {Number}\n\t */\n\tvar SPEED_3G = 2;\n\t\n\t/**\n\t * This service is responsible for translating user network and device\n\t * details into a usable format for application settings.\n\t *\n\t * It contains methods for detecting details, optimizing settings based\n\t * on details, calculating general reports of setting levels, and\n\t * providing human-readable versions of those reports.\n\t * \n\t * @param  {Object} $rootScope    The root of the app scopes\n\t * @param  {Object} $http         Angular's http service\n\t * @param  {Object} $q            Angular's promise builder\n\t * @param  {Object} USER_DEFAULTS Constant for default settings\n\t */\n\t\n\tvar ConnectionDetailsService = function () {\n\t\t/**\n\t  * Initializes the service's dependencies. Extracts usage profiles\n\t  * from the `USER_DEFAULTS.profiles` constant and discards other settings.\n\t  */\n\t\tConnectionDetailsService.$inject = [\"$rootScope\", \"$http\", \"$q\", \"USER_DEFAULTS\"];\n\t\tfunction ConnectionDetailsService($rootScope, $http, $q, USER_DEFAULTS) {\n\t\t\t'ngInject';\n\t\n\t\t\t(0, _classCallCheck3.default)(this, ConnectionDetailsService);\n\t\t\tthis.$rootScope = $rootScope;\n\t\t\tthis.$http = $http;\n\t\t\tthis.$q = $q;\n\t\n\t\t\tthis.profiles = USER_DEFAULTS.profiles;\n\t\t}\n\t\n\t\t/**\n\t  * Uses Angular's `$http` service to send a request to the server\n\t  * for a connection test. Internally, the server API measures\n\t  * connection speed in the background, and supplies this info back\n\t  * to the app along with device details when it becomes available.\n\t  * \n\t  * @return {Promise} Promise that will resolve to connection details\n\t  */\n\t\n\t\n\t\t(0, _createClass3.default)(ConnectionDetailsService, [{\n\t\t\tkey: 'detect',\n\t\t\tvalue: function detect() {\n\t\t\t\tvar _this = this;\n\t\n\t\t\t\treturn this.$http.get('/user/connection').then(function (connection) {\n\t\t\t\t\t_this.connection = connection;\n\t\t\t\t\treturn connection;\n\t\t\t\t});\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Determines the best usage profile (from `USER_DEFAULTS.profiles`)\n\t   * to select based on a connection details object (e.g. the result of\n\t   * calling `detect()`).\n\t   * @param  {Object} connection Incoming connection details object\n\t   * @return {Object}            The chosen optimal settings profile\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: 'optimize',\n\t\t\tvalue: function optimize(connection) {\n\t\t\t\tvar _connection$data = connection.data,\n\t\t\t\t    network = _connection$data.network,\n\t\t\t\t    useragent = _connection$data.useragent,\n\t\t\t\t    downloadSpeed = network.speeds.download,\n\t\t\t\t    deviceType = useragent.device.type;\n\t\n\t\n\t\t\t\tif (downloadSpeed >= SPEED_HI && !deviceType) return this.profiles.desktopFast;\n\t\t\t\tif (downloadSpeed >= SPEED_WF && downloadSpeed < SPEED_HI && !deviceType) return this.profiles.desktopSlow;\n\t\t\t\tif (downloadSpeed < SPEED_WF && !deviceType) return this.profiles.balanced;\n\t\t\t\tif (downloadSpeed >= SPEED_WF && deviceType === 'mobile') return this.profiles.mobileWifi;\n\t\t\t\tif (downloadSpeed >= SPEED_3G && deviceType === 'mobile') return this.profiles.mobile3g;\n\t\t\t\tif (downloadSpeed < SPEED_3G) return this.profiles.conserve;\n\t\t\t\t// default return\n\t\t\t\treturn this.profiles.balanced;\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Tallies up values of usage settings asynchronously\n\t   * by using `$scope.$eval()` to match applicable usage\n\t   * level values against their keys (which are keyed by\n\t   * \"condition\").\n\t   * @example\n\t   * {\n\t   *   '<= 15': [0, 0, 5],\n\t   *   '== 0': [...]\n\t   * }\n\t   * @param\t {Object}\tusage Incoming usage preference object\n\t   * @return {Promise}\t\t\tPromise representing final levels\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: 'calculateUsageLevel',\n\t\t\tvalue: function calculateUsageLevel(usage) {\n\t\t\t\tvar _this2 = this;\n\t\n\t\t\t\tvar tally = [0, 0, 0],\n\t\t\t\t    // [imageQual, loadTime, dataUse] / 0=low, 10=high\n\t\t\t\tdeferred = this.$q.defer(),\n\t\t\t\t    addToTally = function addToTally(values) {\n\t\t\t\t\ttally.forEach(function (v, index) {\n\t\t\t\t\t\ttally[index] += values[index];\n\t\t\t\t\t});\n\t\t\t\t};\n\t\t\t\tthis.$rootScope.$applyAsync(function () {\n\t\t\t\t\t(0, _keys2.default)(usage).forEach(function (setting) {\n\t\t\t\t\t\tif (setting !== 'auto') {\n\t\t\t\t\t\t\t(0, _keys2.default)(usage[setting].levels).forEach(function (expression) {\n\t\t\t\t\t\t\t\tvar inRange = _this2.$rootScope.$eval('(' + usage[setting].val + ' ' + expression + ')');\n\t\t\t\t\t\t\t\tif (inRange) addToTally(usage[setting].levels[expression]);\n\t\t\t\t\t\t\t\tif ((0, _angular.isNumber)(inRange)) deferred.reject('Usage calculation error');\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tdeferred.resolve(tally);\n\t\t\t\t});\n\t\t\t\treturn deferred.promise;\n\t\t\t}\n\t\t\t// TODO(PERF): CLEAN UP THIS FUNCTION; TOO MANY NESTED CLOSURES\n\t\n\t\t\t/**\n\t   * Maps a tally array of numbers into a label\n\t   * array of human-readable usage level strings.\n\t   * @param  {Array<Number>}  tally Array of tallied usage values\n\t   * @return {Array<String>}       \tUsage descriptions\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: 'getLabelsFromTally',\n\t\t\tvalue: function getLabelsFromTally(tally) {\n\t\t\t\treturn tally.map(function (value) {\n\t\t\t\t\tif (value <= 5) return 'very low';\n\t\t\t\t\tif (value > 5 && value <= 10) return 'low';\n\t\t\t\t\tif (value > 10 && value <= 15) return 'moderate';\n\t\t\t\t\tif (value > 15 && value <= 20) return 'high';\n\t\t\t\t\tif (value > 20) return 'very high';\n\t\t\t\t});\n\t\t\t}\n\t\t}]);\n\t\treturn ConnectionDetailsService;\n\t}();\n\t\n\texports.default = ConnectionDetailsService;\n\n/***/ },\n\n/***/ 653:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _app = __webpack_require__(654);\n\t\n\tvar _app2 = _interopRequireDefault(_app);\n\t\n\tvar _app3 = __webpack_require__(655);\n\t\n\tvar _app4 = _interopRequireDefault(_app3);\n\t\n\t__webpack_require__(656);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar appComponent = {\n\t  template: _app2.default,\n\t  controller: _app4.default,\n\t  controllerAs: 'mc',\n\t  restrict: 'E'\n\t};\n\t\n\texports.default = appComponent;\n\n/***/ },\n\n/***/ 654:\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<svg version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" style=\\\"display:none;\\\">\\n  <filter id=\\\"blur\\\">\\n    <fegaussianblur stddeviation=\\\"10\\\"></fegaussianblur>\\n  </filter>\\n</svg>\\n\\n<div flex=\\\"\\\" layout=\\\"column\\\" layout-fill=\\\"\\\">\\n  <title-bar title=\\\"Virtual Tour\\\" mobile=\\\"mc.mobile\\\" flex=\\\"nogrow\\\">\\n    <title-bar-button ng-repeat=\\\"(o, option) in mc.titlebar.options\\\" on-click=\\\"mc.titlebar.clickHandlers[o]()\\\" label=\\\"{{ ::option.label }}\\\" active=\\\"option.active\\\" icon=\\\"option.icon\\\" tooltip=\\\"option.tooltip\\\" class=\\\"{{ ::option.class }}\\\">\\n    </title-bar-button>\\n  </title-bar>\\n\\n  <div layout=\\\"column\\\"\\n  \\t\\t layout-gt-sm=\\\"row\\\"\\n  \\t\\t layout-align=\\\"end stretch\\\"\\n  \\t\\t layout-align-gt-sm=\\\"end start\\\"\\n  \\t\\t flex\\n  \\t\\t class=\\\"scene-container\\\"\\n  \\t\\t ng-class=\\\"{ 'toolbar-open' : mc.toolbar.isOpen&amp;&amp;!mc.mobile.landscape, 'toolbar-condensed': mc.toolbar.isCondensed }\\\">\\n    <section id=\\\"scene-view\\\"\\n\\t\\t\\t\\t     flex=\\\"grow\\\"\\n\\t\\t\\t\\t     layout=\\\"column\\\"\\n\\t\\t\\t\\t     layout-fill=\\\"\\\"\\n\\t\\t\\t\\t     ng-class=\\\"{ 'blur-active' : mc.sidebar.hasBlur() }\\\"\\n\\t\\t\\t\\t     class=\\\"scene-view\\\">\\n      <aframe-scene mobile=\\\"mc.mobile\\\">\\n\\t      <scene-editor ng-if=\\\"!(mc.mobile.device &amp;&amp; mc.mobile.landscape)\\\"></scene-editor>\\n      </aframe-scene>\\n    </section>\\n\\n    <button-bar layout=\\\"row\\\"\\n    \\t\\t\\t\\t\\t\\tlayout-gt-sm=\\\"column\\\"\\n    \\t\\t\\t\\t\\t\\tflex=\\\"nogrow\\\"\\n    \\t\\t\\t\\t\\t\\titems=\\\"mc.toolbar.views\\\"\\n    \\t\\t\\t\\t\\t\\topen=\\\"mc.toolbar.isOpen\\\"\\n    \\t\\t\\t\\t\\t\\tcondensed=\\\"mc.toolbar.isCondensed\\\"\\n    \\t\\t\\t\\t\\t\\tmobile=\\\"mc.mobile\\\">\\n    </button-bar>\\n  </div>\\n</div>\\n\\n<div ng-class=\\\"{ 'toolbar-open' : mc.toolbar.isOpen&amp;&amp;!landscapeMobile, 'toolbar-condensed': mc.toolbar.isCondensed }\\\" layout=\\\"row\\\" flex=\\\"\\\">\\n  <md-sidenav ng-class=\\\"{ 'blur-active' : mc.sidebar.hasBlur(), 'is-mobile': mc.mobile.screen, 'is-landscape': mc.mobile.landscape }\\\" md-component-id=\\\"right\\\" md-disable-backdrop=\\\"\\\" md-whiteframe=\\\"4\\\" flex=\\\"\\\" class=\\\"md-sidenav-right main-menu\\\">\\n    <ui-view flex=\\\"\\\" layout=\\\"column\\\" layout-fill=\\\"\\\" resizable=\\\"\\\" r-directions=\\\"[&quot;left&quot;]\\\" ng-style=\\\"{ maxWidth: ('map' | isState) ? 'none' : '600px' }\\\"></ui-view>\\n  </md-sidenav>\\n</div>\"\n\n/***/ },\n\n/***/ 655:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tAppController.$inject = [\"$scope\", \"$state\", \"$timeout\", \"$mdSidenav\", \"$mdMedia\", \"$popupWindow\", \"UserSession\", \"BUTTONBAR_VIEWS\", \"TITLEBAR_OPTS\"];\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _aframe = __webpack_require__(434);\n\t\n\tvar _angular = __webpack_require__(299);\n\t\n\tfunction AppController($scope, $state, $timeout, // ng deps\n\t$mdSidenav, $mdMedia, // md deps\n\t$popupWindow, UserSession, // my libs\n\tBUTTONBAR_VIEWS, TITLEBAR_OPTS // consts\n\t) {\n\t\t'ngInject';\n\t\n\t\tvar _this = this;\n\t\n\t\tvar WELCOME_MSG_DELAY = 500; //ms\n\t\tvar SETTINGS_MSG_DELAY = 1000; //ms\n\t\tvar BLURRED_VIEWS = ['search', 'map'];\n\t\t// check for mobile/landscape on every digest\n\t\tthis.mobile = {};\n\t\t$scope.$watch(function () {\n\t\t\treturn {\n\t\t\t\tscreen: !$mdMedia('gt-sm'),\n\t\t\t\tlandscape: $mdMedia('landscape'),\n\t\t\t\tdevice: _aframe.utils.device.isMobile()\n\t\t\t};\n\t\t}, function (m) {\n\t\t\t_this.mobile = m; //console.log(m);\n\t\t}, true);\n\t\n\t\tvar goToSettings = function goToSettings(response) {\n\t\t\tswitch (response) {\n\t\t\t\tcase 'ok':\n\t\t\t\t\t$state.go('settings');\n\t\t\t\t\t$mdSidenav('right').open();\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t};\n\t\n\t\tvar showSettingsMsg = function showSettingsMsg() {\n\t\t\tvar autoconfig = UserSession.usage.auto;\n\t\t\tif (autoconfig && autoconfig.val) {\n\t\t\t\t$popupWindow.toast('primary', {\n\t\t\t\t\tmessage: 'Data usage settings auto-configured to your device!',\n\t\t\t\t\taction: 'Change settings'\n\t\t\t\t}).then(function (response) {\n\t\t\t\t\tgoToSettings(response);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t$popupWindow.toast('warn', {\n\t\t\t\t\tmessage: 'Automatic data usage is currently disabled, but can be enabled in Settings.',\n\t\t\t\t\taction: 'Show me how'\n\t\t\t\t}).then(function (response) {\n\t\t\t\t\tgoToSettings(response);\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t\n\t\tvar showWelcomeMsg = function showWelcomeMsg() {\n\t\t\t$popupWindow.welcome().then(function (answer) {\n\t\t\t\treturn answer != 'tour' && showSettingsMsg();\n\t\t\t}).catch(function () {\n\t\t\t\treturn showSettingsMsg();\n\t\t\t});\n\t\t};\n\t\n\t\tvar settingsLoaded = $scope.$watch(function () {\n\t\t\treturn UserSession.settings;\n\t\t}, function (userSettings) {\n\t\t\tif (!(0, _angular.isUndefined)(userSettings)) {\n\t\t\t\tconsole.log('main controller applying settings');\n\t\t\t\tvar _UserSession$settings = UserSession.settings,\n\t\t\t\t    showWelcome = _UserSession$settings.showWelcome,\n\t\t\t\t    toolbarOpen = _UserSession$settings.toolbarOpen,\n\t\t\t\t    toolbarCondensed = _UserSession$settings.toolbarCondensed;\n\t\n\t\n\t\t\t\tif (showWelcome.val) {\n\t\t\t\t\t$timeout(showWelcomeMsg, WELCOME_MSG_DELAY);\n\t\t\t\t} else {\n\t\t\t\t\t$timeout(showSettingsMsg, SETTINGS_MSG_DELAY);\n\t\t\t\t}\n\t\n\t\t\t\t_this.titlebar = {\n\t\t\t\t\toptions: TITLEBAR_OPTS,\n\t\t\t\t\tclickHandlers: {\n\t\t\t\t\t\tconfig: function config() {\n\t\t\t\t\t\t\t$mdSidenav('config').toggle();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tright: function right() {\n\t\t\t\t\t\t\t_this.toolbar.toggle();\n\t\t\t\t\t\t\t_this.titlebar.options.right.active = _this.toolbar.isOpen;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcondense: function condense() {\n\t\t\t\t\t\t\t_this.toolbar.condense();\n\t\t\t\t\t\t\t_this.titlebar.options.condense.active = _this.toolbar.isCondensed;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\t\n\t\t\t\t_this.toolbar = {\n\t\t\t\t\tviews: BUTTONBAR_VIEWS,\n\t\t\t\t\tisOpen: toolbarOpen.val,\n\t\t\t\t\tisCondensed: toolbarCondensed.val,\n\t\t\t\t\ttoggle: function toggle() {\n\t\t\t\t\t\tthis.isOpen = !this.isOpen;\n\t\t\t\t\t\tthis.isOpen && $mdSidenav('right').close();\n\t\t\t\t\t},\n\t\t\t\t\tcondense: function condense() {\n\t\t\t\t\t\t!this.isOpen && this.toggle();\n\t\t\t\t\t\tthis.isCondensed = !this.isCondensed;\n\t\t\t\t\t\treturn this.isCondensed;\n\t\t\t\t\t}\n\t\t\t\t};\n\t\n\t\t\t\t_this.sidebar = {\n\t\t\t\t\thasState: function hasState(view) {\n\t\t\t\t\t\treturn $state.includes(view);\n\t\t\t\t\t},\n\t\t\t\t\thasBlur: function hasBlur() {\n\t\t\t\t\t\treturn BLURRED_VIEWS.some(this.hasState);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\n\t\t\t\tsettingsLoaded();\n\t\t\t}\n\t\t});\n\t}\n\t\n\texports.default = AppController;\n\n/***/ },\n\n/***/ 656:\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ }\n\n});\n\n\n// WEBPACK FOOTER //\n// app.bundle.js","import angular from 'angular';\nimport uiRouter from 'angular-ui-router';\nimport angulartics from 'angulartics';\nimport angularticsGa from 'angulartics-google-analytics';\nimport ngAnimate from 'angular-animate';\nimport ngAria from 'angular-aria';\nimport ngMaterial from 'angular-material';\nimport ngMdIcons from 'angular-material-icons';\nimport cfpLoadingBar from 'angular-loading-bar';\nimport vAccordion from 'v-accordion';\n\nimport Common from './common/common';\nimport Components from './components/components';\n\nimport AppComponent from './app.component';\n\n/**\n * Disables all `console.x()` calls for production by replacing\n * their methods with `angular.noop`.\n */\n// {\n// \tconst CONSOLE_METHODS = [\n// \t\t\t'assert', 'clear', 'count', 'debug', 'dir', 'dirxml', 'error',\n// \t\t\t'exception', 'group', 'groupCollapsed', 'groupEnd', 'info', 'log',\n// \t\t\t'markTimeline', 'profile', 'profileEnd', 'table', 'time', 'timeEnd',\n// \t\t\t'timeStamp', 'trace', 'warn'\n// \t\t],\n// \t\tCONSOLE_OBJ = (window.console = window.console || {});\n// \tlet method,\n// \t\t\tlength = CONSOLE_METHODS.length;\n// \twhile (length--) {\n// \t    method = CONSOLE_METHODS[length];\n// \t    CONSOLE_OBJ[method] = angular.noop;\n// \t}\n// }\n\nangular.module('app', [\n  uiRouter,\n  angulartics,\n\tangularticsGa,\n  ngAnimate,\n\tngAria,\n  ngMaterial,\n  ngMdIcons,\n  cfpLoadingBar,\n  vAccordion,\n  Common,\n  Components\n])\n\n.component('app', AppComponent)\n\n.config(($provide, $locationProvider, $stateProvider, $urlRouterProvider, $mdGestureProvider, $mdThemingProvider, cfpLoadingBarProvider) => { //, $mdIconProvider\n  'ngInject';\n  \n  // cfpLoadingBarProvider.includeSpinner = false;\n  // cfpLoadingBarProvider.latencyThreshold = 300;\n  cfpLoadingBarProvider.spinnerTemplate = `<div id=\"loading-spinner\" class=\"loading-spinner-container\" layout layout-fill layout-align=\"center center\">\n  \t<md-progress-circular md-mode=\"indeterminate\" class=\"md-primary\">\n  \t</md-progress-circular>\n  </div>`;\n\n  // THIS IS VERY IMPORTANT, ngMaterial's clickjacking behaviour\n  // tampers with the capture phase in a way that is incompatible\n  // with A-Frame's mobile click capturing. It must be disabled\n  // for in-scene clicks to work on mobile.\n  $mdGestureProvider.skipClickHijack();\n\n  $mdThemingProvider.definePalette('UOITprimary', {\n    '50': '0086FC',\n    '100': '45A1FA',\n    '200': '74B8FB',\n    '300': 'A2D0FD',\n    '400': '0077CA',\n    '500': '006BB8',\n    '600': '005FA6',\n    '700': '005495',\n    '800': '004883',\n    '900': '003C71',\n    'A100': 'ff8a80',\n    'A200': 'ff5252',\n    'A400': 'ff1744',\n    'A700': 'd50000',\n    'contrastDefaultColor': 'light',    // whether, by default, text (contrast)\n                                        // on this palette should be dark or light\n    'contrastDarkColors': ['50', '100', //hues which contrast should be 'dark' by default\n     '200', 'A100'],\n    'contrastLightColors': null    // could also specify this if default was 'dark'\n  });\n\n  $mdThemingProvider.theme('default')\n    .primaryPalette('UOITprimary', {\n      'default': '400',\n      'hue-1': '300',\n      'hue-2': '500',\n      'hue-3': '900'\n    })\n    .accentPalette('grey');\n\n  $locationProvider.html5Mode(true);\n\n  $stateProvider\n    .state('home', {\n      template: '<ui-view></ui-view>'\n    });\n\n  $urlRouterProvider.otherwise('/');\n\n\t$provide.decorator('$exceptionHandler', ($log, $delegate, $injector) => {\n\t\t'ngInject';\n    return (exception, cause) => {\n\t    const $rootScope = $injector.get('$rootScope');\n\t    if (!cause) cause = 'Application error';\n\t    $rootScope.$broadcast('handler:exception', { exception, cause });\n\n\t    // FOR \"SOFTER\" ERRORS:\n      // $log.debug(exception, cause);\n      \n  \t\t$delegate(exception, cause);\n    };\n  });\n})\n\n.run(($rootScope, $state, $compile, $mdUtil, $popupWindow, UserAuth, AUTH_EVENTS) => {\n  'ngInject';\n\n  $rootScope.$on('cfpLoadingBar:started', event => $mdUtil.nextTick( tick => $compile(\n    angular.element(document.getElementById('loading-spinner'))\n  )($rootScope)));\n  /**\n   * Report on exceptions. The `handler:exception` event is fired\n   * anywhere an exception is caught, and if uncaught, the AppConfig\n   * block also sends this event with special delegation.\n   * \n   * @function $rootScope.$on\n   * @memberof AppRun\n   * @param  {String}   event    The event name\n   * @param  {function} callback To execute on handler call\n   */\n  $rootScope.$on('handler:exception', (event, error) => {\n    const locals = {\n      type: error.cause,\n      message: error.exception.message,\n      suggest: [0, 2, 1]\n    }\n    return $popupWindow.warning({locals});\n  });\n\n  $rootScope.$on('$stateChangeStart', (event, toState, toParams, fromState, fromParams, options) => { \n    // console.log('STATE CHANGE START', toState, toParams, fromState, fromParams, options);\n    if (toState.data && toState.data.roles && !UserAuth.isAuthorized(toState.data.roles)) {\n      event.preventDefault();\n      if (UserAuth.isAuthenticated()) {\n        // user is not allowed\n        $rootScope.$broadcast(AUTH_EVENTS.notAuthorized);\n      } else {\n        // user is not logged in\n        $rootScope.$broadcast(AUTH_EVENTS.notAuthenticated);\n      }\n    }\n  });\n\n  // change page title based on state\n  $rootScope.$on('$stateChangeSuccess', (event, toState, toParams, fromState, fromParams) => {\n    $rootScope.pageTitle = 'UOIT Virtual Tour';\n    if ( toState.label ) {\n      $rootScope.pageTitle += ' | ';\n      $rootScope.pageTitle += toState.label;\n    }\n    // console.log('STATE CHANGE SUCCESS', toState, toParams, fromState, fromParams);\n  });\n\n  $rootScope.$on('$stateChangeError', (event, toState, toParams, fromState, fromParams, error) => {\n    console.log('STATE CHANGE ERROR: ', error, toState, toParams, fromState, fromParams);\n    const locals = {\n      type: 'Navigation issue!',\n      message: error.message || error.msg || 'The view you requested hit a snag while loading.',\n      suggest: [4, 3]\n    }\n    $popupWindow.error({locals});\n  });\n\n  $rootScope.$on('$stateNotFound', (event, unfoundState, fromState, fromParams) => { \n    const locals = {\n      type: 'Page not found!',\n      message: `The page associated with (${unfoundState.to} : ${unfoundState.toParams}) cannot be located.`,\n      suggest: [3]\n    }\n    $popupWindow.error({locals});\n    console.log('STATE NOT FOUND', unfoundState, fromState, fromParams);\n  });\n\n  console.log('starting auth init...')\n  UserAuth.initAuth().then(user => {\n    $rootScope.$broadcast(AUTH_EVENTS.loginSuccess, user);\n    console.log('auth init complete!')\n  });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/app.js","import angular from 'angular';\n\nimport ButtonBar from './buttonbar/buttonbar';\nimport Popup from './popup/popup';\nimport TitleBar from './titlebar/titlebar';\nimport User from './user/user';\nimport Util from './util/util';\n\nimport AframeModule from './aframe/aframe';\nAframeModule.registerAll();\n\nlet commonModule = angular.module('app.common', [\n  ButtonBar,\n  Popup,\n  TitleBar,\n  User,\n  Util\n])\n  \n.name;\n\nexport default commonModule;\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/common/common.js","import angular from 'angular';\nimport uiRouter from 'angular-ui-router';\nimport ngMaterial from 'angular-material';\n\nimport buttonbarComponent from './buttonbar.component';\n\nconst buttonBarModule = angular.module('buttonbar', [\n  uiRouter,\n  ngMaterial\n])\n\n.component('buttonBar', buttonbarComponent)\n\n.constant('BUTTONBAR_VIEWS', {\n  locations: {\n    label: 'By location',\n    icon: 'pin_drop',\n    desc: 'View a list of available tour locations'\n  },\n  map: {\n    label: 'By map',\n    icon: 'map',\n    desc: 'Explore locations from the UOIT Campus Map'\n  },\n  // guided: {\n  //   label: 'Guided tour',\n  //   icon: 'rotate_90_degrees_ccw',\n  //   desc: 'Take a preset trip with a video tour guide'\n  // },\n  search: {\n    label: 'Search',\n    icon: 'search',\n    desc: 'Find specific Virtual Tour highlights'\n  },\n  settings: {\n    label: 'Settings',\n    icon: 'tune',\n    desc: 'Adjust the Virtual Tour experience'\n  }\n})\n\n.name;\n\nexport default buttonBarModule;\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/common/buttonbar/buttonbar.js","import template from './buttonbar.html';\nimport controller from './buttonbar.controller';\nimport './buttonbar.scss';\n\nconst buttonbarComponent = {\n  template,\n  controller,\n  bindings: {\n  \titems: '<',\n  \topen: '<?',\n  \tcondensed: '<?',\n  \tmobile: '<?'\n  }\n}\n\nexport default buttonbarComponent;\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/common/buttonbar/buttonbar.component.js","module.exports = \"<aside\\n\\tclass=\\\"button-bar\\\"\\n\\tng-class=\\\"{'collapsed': $ctrl.condensed || $ctrl.mobile.screen}\\\"\\n\\tng-if=\\\"$ctrl.open&&!($ctrl.mobile.landscape&&$ctrl.mobile.screen)\\\"\\n\\tmd-whiteframe=\\\"2\\\"\\n\\tlayout=\\\"row\\\"\\n\\tlayout-gt-sm=\\\"column\\\"\\n\\tlayout-align=\\\"start stretch\\\"\\n\\tlayout-align-gt-sm=\\\"end end\\\"\\n\\tflex=\\\"grow\\\">\\n\\t<div ng-repeat=\\\"(state, stateInfo) in ::$ctrl.items\\\"\\n\\t\\tclass=\\\"button-bar-btn\\\"\\n\\t\\tng-class=\\\"{ 'is-active': $ctrl.menuOpen && (state | isState)}\\\"\\n\\t\\tlayout=\\\"column\\\"\\n\\t\\tlayout-align=\\\"center center\\\"\\n\\t\\tflex=\\\"grow\\\"\\n  \\tng-click=\\\"$ctrl.select(state)\\\"\\n  \\tmd-ink-ripple=\\\"#0077CA\\\"\\n  \\tid=\\\"{{::v}}\\\">\\n  \\t<ng-md-icon icon=\\\"{{ :: stateInfo.icon }}\\\" style=\\\"fill: #ffffff;\\\"></ng-md-icon>\\n    <span ng-bind=\\\":: stateInfo.label\\\"></span>\\n    <md-tooltip md-direction=\\\"{{ $ctrl.mobile.screen ? 'top' : 'left' }}\\\" md-autohide md-delay=\\\"$ctrl.condensed ? 0 : 750\\\" ng-if=\\\"!$ctrl.mobile.device&&$ctrl.showHints()\\\" md-z-index=\\\"10000\\\">\\n      {{ $ctrl.condensed ?  stateInfo.label :  stateInfo.desc }}\\n    </md-tooltip>\\n  </div>\\n\\t<div\\n\\t\\tclass=\\\"button-bar-btn enter-vr\\\"\\n\\t\\tlayout=\\\"column\\\"\\n\\t\\tlayout-align=\\\"center center\\\"\\n\\t\\tflex=\\\"grow\\\"\\n\\t\\tflex-gt-sm=\\\"0\\\"\\n  \\tng-click=\\\"$ctrl.enterVR()\\\"\\n  \\tmd-ink-ripple=\\\"#0077CA\\\"\\n  \\tid=\\\"enter-vr\\\">\\n  \\t<svg viewBox=\\\"0 0 24 24\\\"><!-- {{ $ctrl.condensed }} -->\\n    \\t<path d=\\\"M20.74,6H3.2C2.55,6 2,6.57 2,7.27V17.73C2,18.43 2.55,19 3.23,19H8C8.54,19 9,18.68 9.16,18.21L10.55,14.74C10.79,14.16 11.35,13.75 12,13.75C12.65,13.75 13.21,14.16 13.45,14.74L14.84,18.21C15.03,18.68 15.46,19 15.95,19H20.74C21.45,19 22,18.43 22,17.73V7.27C22,6.57 21.45,6 20.74,6M7.22,14.58C6,14.58 5,13.55 5,12.29C5,11 6,10 7.22,10C8.44,10 9.43,11 9.43,12.29C9.43,13.55 8.44,14.58 7.22,14.58M16.78,14.58C15.56,14.58 14.57,13.55 14.57,12.29C14.57,11.03 15.56,10 16.78,10C18,10 19,11.03 19,12.29C19,13.55 18,14.58 16.78,14.58Z\\\" />\\n\\t\\t</svg>\\n    <md-tooltip md-direction=\\\"{{ $ctrl.mobile.screen ? 'top' : 'left' }}\\\" md-autohide ng-if=\\\"!$ctrl.mobile.device&&$ctrl.showHints()\\\">\\n    \\tSwitch to VR (fullscreen on desktop)\\n    </md-tooltip>\\n  </div>\\n</aside>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/common/buttonbar/buttonbar.html\n// module id = 321\n// module chunks = 0","/**\n * The buttonbar controller is responsible for managing when the sidebar\n * menu is open and which state is active. A single button needs to perform\n * different actions with a single click depending on the current state of\n * the sidebar  those actions (the ones defined in this controller) are\n * _distinct and separate from the actions performed by the buttons themselves_,\n * which are defined in the parent controller.\n *\n * The exception is the \"Enter VR\" button, which is always present at the bottom of\n * the buttonbar and has its method stored on this controller.\n */\nclass ButtonbarController {\n\tconstructor($scope, $document, $state, $mdSidenav, UserSession) {\n\t\t'ngInject';\n\t\tthis._$scope = $scope;\n\t\tthis._$document = $document;\n\t\tthis._$state = $state;\n\t\tthis._$mdSidenav = $mdSidenav;\n\t\t/**\n\t\t * Getter property for whether user settings permit hint tooltips.\n\t\t * @return {Boolean} Tooltips on (true) or off (false)\n\t\t */\n  \tthis.showHints = () => UserSession.settings.showHints.val;\n\t}\n\n\t/**\n\t * Activate the state associated with a button.\n\t *\n\t * In the context of this controller, the buttons are only responsible for\n\t * handling one of three scenarios:\n\t *\n\t * - If the **sidebar is closed**, clicking a button should **open the sidebar\n\t * and go to the button's associated state** no matter what.\n\t * - If the **sidebar is open** and the **button clicked is for the active state**,\n\t * the **sidebar should close and return to the \"home\" state**.\n\t * - If the **sidebar is open** and the **clicked button's state is different from the\n\t * active state**, the **sidebar should remain open and transition to the new state**.\n\t * \n\t * @param  {String} state Name of the state to transition to\n\t * @return {Promise}      Represents the state of the transition\n\t */\n  select(state) {\n    if (this.menuOpen && this._$state.includes(state)) {\n      return this._$mdSidenav('right').close().then(() => {\n\t      return this._$state.transitionTo('home');\n      });\n    } else { \n\t  \treturn this._$state.transitionTo(state).then(() => {\n\t      this._$mdSidenav('right').open();\n      });\n    }\n  }\n\n  enterVR() {\n  \tthis._$document[0].getElementById('aframe-scene').enterVR();\n  }\n\n  $onInit() {\n\t\tthis._$scope.$watch(\n\t\t\t() => this._$mdSidenav('right').isOpen(),\n\t\t\t(newVal) => {\n\t\t\t\tthis.menuOpen = newVal;\n\t\t\t}\n\t\t);\n  }\n\n}\n\nexport default ButtonbarController;\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/common/buttonbar/buttonbar.controller.js","import angular from 'angular';\nimport ngMaterial from 'angular-material';\n\nimport PopupError from './error/error';\nimport PopupInfo from './info/info';\nimport PopupLogin from './login/login';\nimport PopupWelcome from './welcome/welcome';\n\nimport popupService from './popup.service';\n\nlet popupModule = angular.module('popup', [\n  ngMaterial,\n  PopupError,\n\tPopupInfo,\n\tPopupLogin,\n\tPopupWelcome\n])\n\n.service('$popupWindow', popupService)\n\n.name;\n\nexport default popupModule;\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/common/popup/popup.js","import angular from 'angular';\nimport uiRouter from 'angular-ui-router';\nimport ngSanitize from 'angular-sanitize';\nimport ngMaterial from 'angular-material';\n\nimport template from './error.html';\nimport controller from './error.controller';\nimport './error.scss';\n\nconst errorModule = angular.module('popup.error', [\n  uiRouter,\n  ngSanitize,\n  ngMaterial\n])\n\n.config(($mdDialogProvider) => {\n  'ngInject';\n\n\t$mdDialogProvider.addPreset('error', {\n\t  options() {\n\t    return {\n\t    \ttemplate,\n\t    \tcontroller,\n\t      controllerAs: '$ctrl',\n\t      bindToController: true,\n\t      clickOutsideToClose: true,\n\t      escapeToClose: true,\n\t    \tparent: angular.element(document.body)\n\t    };\n\t  }\n\t})\n})\n\n.constant('ERROR_SUGGESTIONS', [{\n\ttitle: `Clear your <md-select \n\t\tstyle=\"display:inline-block;min-width:130px;\"\n\t\tng-model=\"item.params\"\n\t\tplaceholder=\"browser\"\n\t\tclass=\"md-no-underline\">\n\t  <md-option value=\"gc\">Google Chrome</md-option>\n\t  <md-option value=\"ie\">Internet Explorer</md-option>\n\t  <md-option value=\"ff\">Firefox</md-option>\n\t  <md-option value=\"sa\">Safari</md-option>\n\t  <md-option value=\"op\">Opera</md-option>\n\t  <md-option value=\"other\">Other browser</md-option>\n\t</md-select> cache`,\n\tdesc: 'Clearing your browser cache is a non-invasive troubleshooting step that resolves many simple web issues.',\n\ticon: 'delete_forever',\n\taction(browser) {\n\t\tlet url = 'http://www.refreshyourcache.com';\n\t\tswitch (browser) {\n\t\t\tcase 'gc':\n\t\t\t\turl = 'https://support.google.com/accounts/answer/32050';\n\t\t\t\tbreak;\n\t\t\tcase 'ie':\n\t\t\t\turl = 'https://support.microsoft.com/en-us/kb/260897';\n\t\t\t\tbreak;\n\t\t\tcase 'ff':\n\t\t\t\turl = 'https://support.mozilla.org/en-US/kb/how-clear-firefox-cache';\n\t\t\t\tbreak;\n\t\t\tcase 'sa':\n\t\t\t\turl = 'https://support.apple.com/en-us/HT204098';\n\t\t\t\tbreak;\n\t\t\tcase 'op':\n\t\t\t\turl = 'http://help.opera.com/opera/Windows/2256/en/private.html#deleteData';\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t\twindow.open(url,'_blank');\n\t}\n},{\n\ttitle: 'Wait a little while and try again',\n\tdesc: 'If the server is busy or not responding, it usually resolves itself after a short amount of time.',\n\ticon: 'hourglass_empty'\n},{\n\ttitle: 'Adjust the tour data usage settings',\n\tdesc: 'If the tour is taking too long to load, you can customize its loading behaviour to better suit your situation.',\n\ticon: 'data_usage',\n\tgoToSettings: true\n},{\n\ttitle: 'Double check the URL',\n\tdesc: 'Is the address of the page what you expected it to be? Ensure it starts with https:// and free of spelling errors.',\n\ticon: 'hourglass_empty'\n},{\n\ttitle: 'Refresh the page',\n\tdesc: 'If the page has encountered a minor issue but cannot proceed past it, refreshing the browser will often solve the issue.',\n\ticon: 'hourglass_empty'\n}])\n\n.name;\n\nexport default errorModule;\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/common/popup/error/error.js","module.exports = \"<md-dialog class=\\\"error-message\\\">\\n\\t<md-dialog-content>\\n\\n\\t\\t<md-tabs class=\\\"md-primary\\\" md-selected=\\\"$ctrl.sendReport\\\" md-align-tabs=\\\"{{data.bottom ? 'bottom' : 'top'}}\\\" md-dynamic-height md-border-bottom>\\n\\n      <md-tab id=\\\"message\\\" label=\\\"error\\\">\\n\\n\\t\\t\\t\\t<md-content layout-padding>\\n\\t\\t\\t\\t\\t<h2 class=\\\"md-display-1\\\">{{ $ctrl.type || 'Whoops!' }}</h2>\\n\\t\\t\\t\\t\\t<p>{{ $ctrl.message || 'An unknown error occurred.' }}</p>\\n\\n\\t\\t\\t\\t\\t<span class=\\\"md-caption\\\"><strong>Maybe try:</strong></span>\\n\\t\\t\\t\\t</md-content>\\n\\t\\t\\t\\t<md-list>\\n\\t\\t\\t\\t\\t<md-divider></md-divider>\\n\\n\\t\\t\\t\\t\\t<md-list-item class=\\\"md-2-line md-long-text\\\" ng-if=\\\"$ctrl.suggestions.length > 0\\\" ng-repeat=\\\"item in ::$ctrl.suggestions\\\">\\n\\t\\t        <ng-md-icon icon=\\\"{{ ::item.icon }}\\\" size=\\\"24\\\" style=\\\"fill: #0077CA;\\\"></ng-md-icon>\\n\\t\\t        <div class=\\\"md-list-item-text\\\" layout=\\\"column\\\">\\n\\t\\t          <h3 bind-html-compile compile=\\\"::item.title\\\"></h3>\\n\\t\\t          <p>{{ ::item.desc }}</p>\\n\\t\\t        </div>\\n\\t\\t        <md-button class=\\\"md-secondary md-primary\\\" ng-if=\\\"::item.action||item.goToSettings\\\" ng-click=\\\"::item.goToSettings ? $ctrl.goToSettings() : item.action(item.params)\\\">Show me how</md-button>\\n\\t\\t\\t\\t\\t</md-list-item>\\n\\n\\t\\t\\t\\t\\t<md-list-item class=\\\"md-2-line md-long-text\\\" ng-click=\\\"$ctrl.sendReport = 1\\\" md-autofocus>\\n\\t\\t        <ng-md-icon icon=\\\"error\\\" size=\\\"24\\\" style=\\\"fill: #0077CA;\\\"></ng-md-icon>\\n\\t\\t        <div class=\\\"md-list-item-text\\\" layout=\\\"column\\\">\\n\\t\\t          <h3>Send an error report</h3>\\n\\t\\t          <p>Help us help you by reporting this error to the UOIT Webteam.</p>\\n\\t\\t        </div>\\n\\t\\t\\t\\t\\t</md-list-item>\\n\\t\\t\\t\\t</md-list>\\n\\n      </md-tab>\\n\\n      <md-tab id=\\\"report\\\" label=\\\"send report\\\" layout-padding>\\n\\n      </md-tab>\\n\\n    </md-tabs>\\n\\n\\t</md-dialog-content>\\n\\t<md-dialog-actions>\\n\\n\\t\\t<md-button ng-click=\\\"$ctrl.refreshApp()\\\" class=\\\"md-primary md-raised\\\">\\n\\t\\t\\tRefresh page\\n\\t\\t</md-button>\\n\\n\\t\\t<md-button ng-click=\\\"$ctrl.closeDialog()\\\" class=\\\"md-primary\\\">\\n\\t\\t\\tClose and try again\\n\\t\\t</md-button>\\n\\n\\t</md-dialog-actions>\\n</md-dialog>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/common/popup/error/error.html\n// module id = 351\n// module chunks = 0","function ErrorController($state, $sce, $window, $mdSidenav, $mdDialog, ERROR_SUGGESTIONS) {\n\t'ngInject';\n\n\tthis.suggestions = [];\n\n\tif (this.suggest && this.suggest.length) {\n\t\tthis.suggest.forEach(index => {\n\t\t\tthis.suggestions.push(ERROR_SUGGESTIONS[index]);\n\t\t})\n\t}\n\n\tthis.closeDialog = () => {\n\t\t$state.reload();\n\t\t$mdDialog.hide();\n\t}\n\n\tthis.goToSettings = () => {\n\t\t$mdDialog.hide();\n\t\t$state.go('settings');\n\t\t$mdSidenav('right').open();\n\t}\n\n\tthis.refreshApp = () => {\n\t\t$window.location.reload();\n\t}\n\n\tthis.stopProp = $event => {\n\t\t$event.stopPropagation();\n\t}\n\n}\n\nexport default ErrorController;\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/common/popup/error/error.controller.js","import angular from 'angular';\nimport uiRouter from 'angular-ui-router';\nimport ngSanitize from 'angular-sanitize';\nimport ngMaterial from 'angular-material';\n\nimport template from './info.html';\nimport controller from './info.controller';\n\nlet infoModule = angular.module('popup.info', [\n  uiRouter,\n  ngSanitize,\n\tngMaterial\n])\n\n.config(($mdDialogProvider) => {\n  'ngInject';\n\n\t$mdDialogProvider.addPreset('info', {\n\t  options() {\n\t    return {\n\t    \ttemplate,\n\t    \tcontroller,\n\t    \tparent: angular.element(document.body),\n\t      controllerAs: '$ctrl',\n\t      bindToController: true,\n\t      clickOutsideToClose: true,\n\t      escapeToClose: true\n\t    };\n\t  }\n\t})\n})\n\n.name;\n\nexport default infoModule;\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/common/popup/info/info.js","module.exports = \"<md-dialog class=\\\"login-message\\\">\\n\\t<md-dialog-content>\\n\\t\\t<md-content layout-padding>\\n\\t\\t\\t<h2 class=\\\"md-display-1\\\" ng-if=\\\"$ctrl.name\\\">{{ ::$ctrl.name }}</h2>\\n\\t\\t\\t<h2 class=\\\"md-subhead\\\" ng-if=\\\"$ctrl.href\\\"><a ng-href=\\\"{{ ::$ctrl.href }}\\\">Learn more at {{ ::$ctrl.href }} &raquo;</a></h2>\\n\\t\\t\\t<div ng-bind-html=\\\"$ctrl.desc\\\" ng-if=\\\"$ctrl.desc\\\">\\n\\t\\t\\t</div>\\n\\t\\t</md-content>\\n\\t</md-dialog-content>\\n\\t<md-dialog-actions>\\n\\t\\t<md-button ng-click=\\\"$ctrl.viewInTour()\\\" class=\\\"md-primary md-raised\\\" ng-if=\\\"$ctrl.type === 'feature'\\\">\\n\\t\\t\\tView in Virtual Tour\\n\\t\\t</md-button>\\n\\t\\t<md-button ng-click=\\\"$ctrl.viewOnMap()\\\" class=\\\"md-primary md-raised\\\" ng-if=\\\"$ctrl.type === 'hotspot'\\\">\\n\\t\\t\\tView on Campus Map\\n\\t\\t</md-button>\\n\\t\\t<md-button ng-click=\\\"$ctrl.closeDialog()\\\" class=\\\"md-primary\\\">\\n\\t\\t\\tClose\\n\\t\\t</md-button>\\n\\t</md-dialog-actions>\\n</md-dialog>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/common/popup/info/info.html\n// module id = 356\n// module chunks = 0","class InfoController {\n\tconstructor($state, $sce, $mdSidenav, $mdDialog) {\n\t\t'ngInject';\n\t\tthis.$state = $state;\n\t\tthis.$sce = $sce;\n\t\tthis.$mdSidenav = $mdSidenav;\n\t\tthis.$mdDialog = $mdDialog;\n\t}\n\tcloseDialog() {\n\t\tthis.$mdDialog.hide();\n\t}\n\tviewOnMap() {\n\t\tthis.$mdDialog.hide();\n\t\tthis.$state.go('map');\n\t\tthis.$mdSidenav('right').open();\n\t}\n\tviewInTour() {\n\t\tthis.$mdDialog.hide();\n\t\tthis.$state.go('building');\n\t\tthis.$mdSidenav('right').close();\n\t}\n\n}\n\nexport default InfoController;\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/common/popup/info/info.controller.js","import angular from 'angular';\nimport ngMaterial from 'angular-material';\n\nimport template from './login.html';\nimport controller from './login.controller';\n\nimport './login.scss';\n\nlet loginModule = angular.module('popup.login', [\n  ngMaterial\n])\n\n.config(($mdDialogProvider) => {\n  'ngInject';\n\n\t$mdDialogProvider.addPreset('login', {\n\t  options() {\n\t    return {\n\t    \ttemplate,\n\t    \tcontroller,\n\t    \tparent: angular.element(document.body),\n\t      controllerAs: '$ctrl',\n\t      bindToController: true,\n\t      clickOutsideToClose: true,\n\t      escapeToClose: true\n\t    };\n\t  }\n\t});\n})\n\n.name;\n\nexport default loginModule;\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/common/popup/login/login.js","module.exports = \"<md-dialog class=\\\"login-message\\\">\\n\\t<md-dialog-content>\\n\\t\\t<div layout=\\\"column\\\" layout-padding>\\n\\t\\t  <div layout=\\\"column\\\" layout-align=\\\"center center\\\" ng-if=\\\"!$ctrl.state.attempt\\\">\\n\\t\\t  \\t<h2>Please sign in</h2>\\n\\t\\t    <md-input-container class=\\\"md-icon-float md-icon-left md-block\\\">\\n\\t\\t      <label>User name</label>\\n\\t\\t      <ng-md-icon icon=\\\"person_outline\\\"></ng-md-icon>\\n\\t\\t      <input ng-model=\\\"$ctrl.username\\\"/>\\n\\t\\t    </md-input-container>\\n\\n\\t\\t    <md-input-container class=\\\"md-icon-float md-icon-left md-block\\\">\\n\\t\\t      <label>Password</label>\\n\\t\\t      <ng-md-icon icon=\\\"lock_outline\\\"></ng-md-icon>\\n\\t\\t      <input ng-model=\\\"$ctrl.password\\\" type=\\\"password\\\">\\n\\t\\t    </md-input-container>\\n\\t\\t    \\n\\t\\t    <md-button class=\\\"md-raised md-primary\\\" ng-click=\\\"$ctrl.login()\\\">Sign in</md-button>\\n\\t\\t  </div>\\n\\n\\t\\t  <div layout=\\\"column\\\" layout-align=\\\"center center\\\" ng-if=\\\"$ctrl.state.attempt && !($ctrl.state.success || $ctrl.state.failed)\\\">\\n\\t\\t\\t  <md-progress-circular md-mode=\\\"indeterminate\\\" md-diameter=\\\"56\\\" style=\\\"margin: 10% auto\\\"></md-progress-circular>\\n\\t\\t  \\t<h2>Logging in, please wait...</h2>\\n\\t\\t  </div>\\n\\t\\t  <div layout=\\\"column\\\" layout-align=\\\"center center\\\" ng-if=\\\"$ctrl.state.attempt && $ctrl.state.success\\\">\\n\\t\\t  \\t<svg class=\\\"checkmark\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 52 52\\\">\\n\\t\\t  \\t\\t<circle class=\\\"checkmark__circle\\\" cx=\\\"26\\\" cy=\\\"26\\\" r=\\\"25\\\" fill=\\\"none\\\"/>\\n\\t\\t  \\t\\t<path class=\\\"checkmark__check\\\" fill=\\\"none\\\" d=\\\"M14.1 27.2l7.1 7.2 16.7-16.8\\\"/>\\n\\t\\t  \\t</svg>\\n\\t\\t  \\t<h2>Logged in successfully!</h2>\\n\\t\\t  </div>\\n\\t\\t  <div layout=\\\"column\\\" layout-align=\\\"center center\\\" ng-if=\\\"$ctrl.state.attempt && $ctrl.state.failed\\\">\\n\\t\\t  \\t<h2>Login failure! Please try again.</h2>\\n\\t\\t  </div>\\n\\t\\t</div>\\n\\t</md-dialog-content>\\n<!-- \\t<md-dialog-actions>\\n\\t\\t<md-button ng-click=\\\"refreshApp()\\\" class=\\\"md-primary md-raised\\\">\\n\\t\\t\\tRefresh page\\n\\t\\t</md-button>\\n\\t\\t<md-button ng-click=\\\"closeDialog()\\\" class=\\\"md-primary\\\">\\n\\t\\t\\tClose and try again\\n\\t\\t</md-button>\\n\\t</md-dialog-actions> -->\\n</md-dialog>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/common/popup/login/login.html\n// module id = 359\n// module chunks = 0","function LoginController($rootScope, $timeout, $window, $mdDialog, UserAuth, AUTH_EVENTS) {\n  'ngInject';\n  this.state = {\n  \tattempt: false,\n  \tsuccess: false,\n  \tfailed: false\n  };\n\tthis.login = () => {\n\t\tif (!this.state.attempt) {\n\n\t\t\tconst { username, password } = this;\n\t\t\tif (!username || !password) return;\n\t\t\tthis.state.attempt = true;\n\n\t\t\tUserAuth.login({ username, password }).then(user => {\n\t      $rootScope.$broadcast(AUTH_EVENTS.loginSuccess, user);\n\t      this.state.success = true;\n\t      $timeout(() => {\n\t      \t$mdDialog.hide();\n\t      }, 2000);\n\t    }, () => {\n\t      $rootScope.$broadcast(AUTH_EVENTS.loginFailed);\n\t      this.state.failed = true;\n\t      $timeout(() => {\n\t\t\t\t\tthis.state.attempt = false;\n\t      }, 2000);\n\t    });\n\t\t}\n\t};\n\n\tthis.logout = () => {\n\t\tUserAuth.logout();\n\t}\n}\n\nexport default LoginController;\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/common/popup/login/login.controller.js","import angular from 'angular';\nimport ngMaterial from 'angular-material';\n// import nzTour from 'nz-tour';\n\nimport template from './welcome.html';\nimport controller from './welcome.controller';\nimport './welcome.scss';\n\nlet welcomeModule = angular.module('popup.welcome', [\n  ngMaterial,\n  // nzTour\n])\n\n.config(($mdDialogProvider) => {\n  'ngInject';\n\t\n\t$mdDialogProvider.addPreset('welcome', {\n\t  options() {\n\t    return {\n\t    \ttemplate,\n\t    \tcontroller,\n\t    \tparent: angular.element(document.body),\n\t      controllerAs: '$ctrl',\n\t      bindToController: true,\n\t      // targetEvent: ev,\n\t      clickOutsideToClose: true,\n\t      openFrom: {\n\t      \ttop: 18,\n\t      \tleft: 18,\n\t      \twidth: 36,\n\t      \theight: 60\n\t      },\n\t      closeTo: {\n\t      \ttop: 18,\n\t      \tleft: 18,\n\t      \twidth: 36,\n\t      \theight: 60\n\t      }\n\t    }\n\t  }\n\t});\n})\n\n.constant('TOUR_STEPS', {\n  config: {\n    mask: {\n      visible: true,\n      clickThrough: false, \n      clickExit: true,\n      scrollThrough: false,\n      color: 'rgba(0,60,113,.7)'\n    },\n    container: 'body',\n    scrollBox: 'body',\n    previousText: 'Previous',\n    nextText: 'Next',\n    finishText: 'Finish',\n    animationDuration: 400,\n    dark: true\n  },\n  steps: [{\n      target: '#locations',\n      placementPriority: [ 'top', 'left', 'bottom', 'right' ],\n      content: '<h3>This is the location menu.</h3>UOIT locations can be explored manually using an expanding location menu. <strong>Click this button to open it!</strong>'\n  }, {\n      target: '#map',\n      placementPriority: [ 'left', 'top', 'bottom', 'right' ],\n      content: '<h3>Explore locations on the campus map!</h3>The same locations featured above are layed out on an <strong>interactive map, available in this menu</strong>.'\n  }, {\n      target: '#search',\n      placementPriority: [ 'left', 'top', 'bottom', 'right' ],\n      content: '<h3>Not sure where to start?</h3>If you have an idea of something you\\'re looking for, <strong>try searching for it</strong>.'\n  }, {\n      target: '#toolbar-controls',\n      placementPriority: [ 'bottom', 'left', 'right', 'top' ],\n      content: 'The button toolbar below and to the right can be <strong>expanded, condensed, or hidden entirely</strong> with the buttons to the right-hand side here.<br/><br/>Don\\' forget to <strong>register your user account</strong> for future visits or <strong>book a real tour</strong> at the university!'\n  }, {\n      target: '#settings',\n      placementPriority: [ 'left', 'top', 'bottom', 'right' ],\n      content: 'If you want your preferences saved for future visits, you can <strong>configure your own personal settings</strong> for the Virtual Tour experience here!'\n  }, {\n      // target: '#aframe-scene',\n      placementPriority: [ 'bottom', 'top', 'left', 'right' ],\n      content: 'Would you like to learn how to navigate through <strong>scenes</strong>?<br/><div class=\"text-center\" layout-margin><md-button class=\"md-raised md-primary\">Show me how</md-button><md-button>No thanks</md-button></div>'\n  }]\n})\n\n.constant('WELCOME_TIPS', {\n\tnavigation: {\n\t\ttitle: ['Learn how to', 'Navigate the Tour!'],\n\t\ttips: [{\n\t\t\tlabel: 'Scene links',\n\t\t\timage: 'images/tip-scene_link.gif',\n\t\t\tcontent: `<p class=\"md-body-1\">Around the Tour, you will find many <strong>blue arrows</strong> <ng-md-icon icon=\"near_me\" size=\"14\" style=\"fill:#0077CA\"></ng-md-icon>\n\t\t\t\tpointing to different areas. They are called <strong>scene links</strong>; use them to travel.\n\t\t\t\t<p class=\"md-body-1\">Move your cursor over a scene link to highlight it, and click it to travel in the\n\t\t\t\tdirection it's pointing.`\n\t\t},{\n\t\t\tlabel: 'Location menu',\n\t\t\timage: 'images/tip-location_menu.gif',\n\t\t\tcontent: `<p class=\"md-body-1\">The <ng-md-icon icon=\"pin_drop\" size=\"14\" style=\"fill:#666\"></ng-md-icon> button \n\t\t\t\ton the far-right bar opens the <strong>location menu</strong>.</p>\n\t\t\t\t<p class=\"md-body-1\">Navigate by picking a location; choose a building to list scenes\n\t\t\t\tfrom; click a scene to view it.</p>\n\t\t\t\t<p class=\"md-body-1\">Use this menu to jump to a scene or between far-away scenes. Close\n\t\t\t\tthe menu by clicking the <ng-md-icon icon=\"pin_drop\" size=\"14\" style=\"fill:#666\"></ng-md-icon> button again.</p>`\n\t\t},{\n\t\t\tlabel: 'Campus map',\n\t\t\timage: 'images/tip-campus_map.gif',\n\t\t\tcontent: `<p class=\"md-body-1\">The Tour's built-in <strong>Campus Map</strong> can be used to navigate the Tour.</p>\n\t\t\t\t<p class=\"md-body-1\">The <ng-md-icon icon=\"map\" size=\"14\" style=\"fill:#666\"></ng-md-icon> button \n\t\t\t\ton the far-right bar opens the Map.\n\t\t\t\t<p class=\"md-body-1\">Choose a building on the map by clicking it; click the <strong>Take a tour </strong> button\n\t\t\t\tin the building info to go to that building's first scene.`\n\t\t}]\n\t},\n\tpoi: {\n\t\ttitle: ''\n\t}\n})\n\n.constant('WELCOME_TIP_LIST', [\n\t[{\n\t\ttitle: 'Tour navigation',\n\t\ticon: 'my_location',\n\t\tlink: 'navigation',\n\t\tdesc: 'Learn how to use warp arrows, map view and the location menu to move from scene to scene.',\n\t},{\n\t\ttitle: 'Points of interest',\n\t\ticon: 'place',\n\t\tlink: '',\n\t\tdesc: 'See which tour elements offer interactivity and how to use them.',\n\t}],[{\n\t\ttitle: 'Virtual reality',\n\t\ticon: '3d_rotation',\n\t\tlink: '',\n\t\tdesc: 'Experience the UOIT virtual tour immersively with an Oculus Rift.',\n\t},{\n\t\ttitle: 'Mobile VR',\n\t\ticon: 'screen_rotation',\n\t\tlink: '',\n\t\tdesc: 'Turn your smartphone into a portal to UOIT with a mobile VR peripheral like HTC Vive, Samsung Gear or Google Cardboard.',\n\t},{\n\t\ttitle: 'Customization',\n\t\ticon: 'settings',\n\t\tlink: '',\n\t\tdesc: 'Learn about the options available for fine-tuning the virtual tour interface.'\n\t}]\n])\n\n.name;\nexport default welcomeModule;\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/common/popup/welcome/welcome.js","module.exports = \"<md-dialog aria-label=\\\"Welcome to the UOIT Virtual Tour\\\" class=\\\"welcome-dialog\\\">\\n\\t<form>\\n\\t\\t<!-- TOOLBAR / TITLE / CLOSE BUTTON -->\\n\\t\\t<md-toolbar>\\n\\t\\t\\t<div class=\\\"md-toolbar-tools\\\">\\n\\t\\t\\t\\t<h2>UOIT Virtual Tour</h2>\\n\\t\\t\\t\\t<span flex></span>\\n\\t\\t\\t\\t<md-button ng-if=\\\"!$ctrl.currentTips\\\" class=\\\"md-icon-button\\\" ng-click=\\\"$ctrl.cancel()\\\" aria-label=\\\"Close this window\\\">\\n\\t\\t\\t\\t\\t<ng-md-icon\\n\\t\\t\\t\\t\\t\\ticon=\\\"close\\\"\\n\\t\\t\\t\\t\\t\\tstyle=\\\"fill: white;\\\">\\n\\t\\t\\t\\t\\t</ng-md-icon>\\n\\t\\t\\t\\t</md-button>\\n\\t\\t\\t</div>\\n\\t\\t</md-toolbar>\\n\\n\\t\\t<!-- STANDARD: WELCOME TABS DISPLAY -->\\n\\t\\t<md-dialog-content ng-if=\\\"!$ctrl.currentTips\\\">\\n\\t\\t\\t<md-tabs\\n\\t\\t\\t\\tmd-dynamic-height\\n\\t\\t\\t\\tmd-border-bottom\\n\\t\\t\\t\\tmd-center-tabs>\\n\\t\\t\\t\\t<!-- WELCOME -->\\n\\t\\t\\t\\t<md-tab label=\\\"Welcome\\\">\\n\\t\\t\\t\\t\\t<md-content class=\\\"md-padding\\\" layout=\\\"column\\\" layout-align=\\\"start center\\\">\\n<!-- \\t\\t\\t\\t\\t\\t<ng-md-icon\\n\\t\\t\\t\\t\\t\\t\\tclass=\\\"dialog-icon compass-icon\\\"\\n\\t\\t\\t\\t\\t\\t\\ticon=\\\"explore\\\"\\n\\t\\t\\t\\t\\t\\t\\tsize=\\\"90\\\"\\n\\t\\t\\t\\t\\t\\t\\tstyle=\\\"fill: #0077CA;\\\">\\n\\t\\t\\t\\t\\t\\t</ng-md-icon> -->\\n\\t\\t\\t\\t\\t\\t<div class=\\\"dialog-icon compass-icon\\\">\\n\\t\\t\\t\\t\\t\\t\\t<!-- <img src=\\\"images/uoit-shield.svg\\\"> -->\\n\\t\\t\\t\\t\\t\\t\\t<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 68 84.86\\\">\\n\\t\\t\\t\\t\\t\\t\\t  <path d=\\\"M43.82,82.91c-17.6,0-25.67-15.73-25.67-31.62s8.07-31.62,25.67-31.62c13.27,0,21.11,8.93,24.18,20.15L67.94,0H0L0,51C.71,70.93,15.27,84.86,34,84.86a28.57,28.57,0,0,0,10-2Z\\\" style=\\\"fill: #0077ca\\\"/>\\n\\t\\t\\t\\t\\t\\t\\t  <path d=\\\"M43.89,22.17c-14.13,0-15.16,19.16-15.16,29.2s1,29.21,15.16,29.21S59,61.42,59,51.37,58,22.17,43.89,22.17Z\\\" style=\\\"fill: #0077ca\\\"/>\\n\\t\\t\\t\\t\\t\\t\\t</svg>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t<h2 class=\\\"md-display-2\\\">Welcome to the Virtual Tour!</h2>\\n\\t\\t\\t\\t\\t\\t<p class=\\\"md-headline\\\">Experience an immersive 3D visit to the University of Ontario Institute of Technology.</p>\\n\\t\\t\\t\\t\\t\\t<p class=\\\"md-headline\\\">Use the tabs above to learn more about how to use the Virtual Tour, or just dive in!<br/>You'll learn quickly.</p>\\n\\t\\t\\t\\t\\t</md-content>\\n\\t\\t\\t\\t</md-tab>\\n\\t\\t\\t\\t<!-- USAGE TIPS -->\\n\\t\\t\\t\\t<md-tab label=\\\"Usage tips\\\">\\n\\t\\t\\t\\t\\t<md-content class=\\\"md-padding\\\" layout=\\\"column\\\">\\n\\t\\t\\t\\t\\t\\t<div>\\n\\t\\t\\t\\t\\t\\t\\t<ng-md-icon\\n\\t\\t\\t\\t\\t\\t\\t\\tclass=\\\"dialog-icon tips-icon\\\"\\n\\t\\t\\t\\t\\t\\t\\t\\ticon=\\\"live_help\\\"\\n\\t\\t\\t\\t\\t\\t\\t\\tsize=\\\"90\\\"\\n\\t\\t\\t\\t\\t\\t\\t\\tstyle=\\\"fill: #0077CA;\\\">\\n\\t\\t\\t\\t\\t\\t\\t</ng-md-icon>\\n\\t\\t\\t\\t\\t\\t\\t<h2><span class=\\\"md-display-2\\\">Tips</span><br/><span class=\\\"md-headline\\\">for better usage</span></h2>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t<div layout=\\\"row\\\">\\n\\t\\t\\t\\t\\t\\t\\t<md-list flex>\\n\\t\\t\\t\\t\\t\\t\\t\\t<md-subheader class=\\\"md-no-sticky\\\">First steps</md-subheader>\\n\\t\\t\\t\\t\\t\\t\\t\\t<md-divider ></md-divider>\\n\\t\\t\\t\\t\\t\\t\\t\\t<md-list-item class=\\\"md-2-line md-long-text\\\" ng-repeat=\\\"tips in ::$ctrl.welcomeTipsList[0]\\\" ng-click=\\\"$ctrl.viewTip(tips.link)\\\" layout=\\\"row\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<ng-md-icon icon=\\\"{{ ::tips.icon }}\\\" size=\\\"24\\\" style=\\\"fill: #0077CA;\\\"></ng-md-icon>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"md-list-item-text\\\" layout=\\\"column\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<h3>{{ ::tips.title }}</h3>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<p>{{ ::tips.desc }}</p>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t\\t\\t</md-list-item>\\n\\t\\t\\t\\t\\t\\t\\t</md-list>\\n\\t\\t\\t\\t\\t\\t\\t<md-list flex>\\n\\t\\t\\t\\t\\t\\t\\t\\t<md-subheader class=\\\"md-no-sticky\\\">Digging deeper</md-subheader>\\n\\t\\t\\t\\t\\t\\t\\t\\t<md-divider ></md-divider>\\n\\t\\t\\t\\t\\t\\t\\t\\t<md-list-item class=\\\"md-2-line md-long-text\\\" ng-repeat=\\\"tips in ::$ctrl.welcomeTipsList[1]\\\" ng-click=\\\"$ctrl.viewTip(tips.link)\\\" layout=\\\"row\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<ng-md-icon icon=\\\"{{ ::tips.icon }}\\\" size=\\\"24\\\" style=\\\"fill: #0077CA;\\\"></ng-md-icon>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"md-list-item-text\\\" layout=\\\"column\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<h3>{{ ::tips.title }}</h3>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<p>{{ ::tips.desc }}</p>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t\\t\\t</md-list-item>\\n\\t\\t\\t\\t\\t\\t\\t</md-list>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</md-content>\\n\\t\\t\\t\\t</md-tab>\\n\\t\\t\\t\\t<!-- ACCESSIBILITY -->\\n\\t\\t\\t\\t<md-tab label=\\\"Accessibility\\\">\\n\\t\\t\\t\\t\\t<md-content class=\\\"md-padding\\\" layout=\\\"column\\\">\\n\\t\\t\\t\\t\\t\\t<div>\\n\\t\\t\\t\\t\\t\\t\\t<ng-md-icon\\n\\t\\t\\t\\t\\t\\t\\t\\tclass=\\\"dialog-icon access-icon\\\"\\n\\t\\t\\t\\t\\t\\t\\t\\ticon=\\\"accessibility\\\"\\n\\t\\t\\t\\t\\t\\t\\t\\tsize=\\\"90\\\"\\n\\t\\t\\t\\t\\t\\t\\t\\tstyle=\\\"fill: #0077CA;\\\">\\n\\t\\t\\t\\t\\t\\t\\t</ng-md-icon>\\n\\t\\t\\t\\t\\t\\t\\t<h2><span class=\\\"md-display-2\\\">Accessibility</span><br/><span class=\\\"md-headline\\\">information</span></h2>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</md-content>\\n\\t\\t\\t\\t</md-tab>\\n\\t\\t\\t</md-tabs>\\n\\t\\t</md-dialog-content>\\n\\n\\t\\t<!-- INCLUDE: ACTIVE TIP DISPLAY -->\\n\\t\\t<md-dialog-content ng-if=\\\"$ctrl.currentTips\\\">\\n\\t\\t\\t<div layout layout-align=\\\"center center\\\">\\n\\t\\t\\t\\t<md-button class=\\\"md-primary\\\" ng-click=\\\"$ctrl.currentTips = false\\\"> Go back</md-button>\\n\\t\\t\\t</div>\\n\\t\\t\\t<div>\\n\\t\\t\\t\\t<h2 layout-padding>\\n\\t\\t\\t\\t\\t<span class=\\\"md-headline\\\">{{ ::$ctrl.currentTips.title[0] }}</span><br/>\\n\\t\\t\\t\\t\\t<span class=\\\"md-display-2\\\">{{ ::$ctrl.currentTips.title[1] }}</span>\\n\\t\\t\\t\\t</h2>\\n\\t\\t\\t</div>\\n\\t\\t\\t<md-tabs\\n\\t\\t\\t\\tmd-dynamic-height\\n\\t\\t\\t\\tmd-border-bottom\\n\\t\\t\\t\\tmd-center-tabs\\n\\t\\t\\t\\tmd-selected=\\\"$ctrl.activeTip\\\">\\n\\t\\t\\t\\t<!-- md-stretch-tabs=\\\"always\\\" -->\\n\\n\\t\\t\\t  <md-tab ng-repeat=\\\"tip in ::$ctrl.currentTips.tips\\\" label=\\\"{{ ::tip.label }}\\\">\\n\\t\\t\\t    <md-content layout=\\\"column\\\"> \\n\\t\\t\\t\\t    <div layout=\\\"row\\\" layout-padding> \\n\\t\\t\\t\\t\\t  \\t<div bind-html-compile compile=\\\"::tip.content\\\" layout=\\\"column\\\" layout-align=\\\"center center\\\" flex>\\n\\t\\t\\t\\t\\t  \\t</div>\\n\\t\\t\\t\\t\\t  \\t<img ng-src=\\\"{{ ::tip.image }}\\\" flex>\\n\\t\\t\\t\\t  \\t</div>\\n\\t\\t\\t    </md-content>\\n\\t\\t\\t  </md-tab>\\n\\t\\t\\t</md-tabs>\\n\\t\\t</md-dialog-content>\\n\\n\\t\\t<!-- TIP DISPLAY PREV/NEXT BUTTONS -->\\n\\t\\t<md-dialog-actions ng-if=\\\"$ctrl.currentTips\\\" layout layout-align=\\\"space-between center\\\">\\n\\t\\t\\t<md-button class=\\\"md-primary\\\" ng-click=\\\"$ctrl.prevTip()\\\"> Previous</md-button>\\n\\t\\t\\t<md-button class=\\\"md-primary\\\" ng-click=\\\"$ctrl.nextTip()\\\">Next </md-button>\\n\\t\\t</md-dialog-actions>\\n\\t\\t\\n\\t\\t<!-- WELCOME TOUR/DISMISSAL -->\\n\\t\\t<md-dialog-actions layout=\\\"row\\\" class=\\\"footer-pane\\\" ng-if=\\\"!$ctrl.currentTips\\\">\\n\\t\\t\\t<md-checkbox class=\\\"md-primary\\\" aria-label=\\\"Permanently dismiss this dialog\\\" md-autofocus ng-model=\\\"$ctrl.showWelcome\\\" ng-true-value=\\\"false\\\" ng-false-value=\\\"true\\\" ng-change=\\\"$ctrl.syncSettings()\\\">\\n\\t\\t\\t\\t<strong>Don't show me this again</strong>\\n\\t\\t\\t</md-checkbox>\\n\\t\\t\\t<span flex></span>\\n\\t\\t\\t<md-button class=\\\"md-raised md-primary\\\" ng-click=\\\"$ctrl.startTour()\\\">\\n\\t\\t\\t\\tTake an interactive tour\\n\\t\\t\\t</md-button>\\n\\t\\t\\t<md-button class=\\\"md-primary\\\" ng-click=\\\"$ctrl.hide()\\\" style=\\\"margin-right:20px;\\\" >\\n\\t\\t\\t\\tNo thanks\\n\\t\\t\\t</md-button>\\n\\t\\t</md-dialog-actions>\\n\\t</form>\\n</md-dialog>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/common/popup/welcome/welcome.html\n// module id = 364\n// module chunks = 0","/**\n * This controller manages a welcome dialog created by the `$mdDialog`\n * service, which the user is presented with when the application first\n * launches (if their preferences include the welcome window).\n *\n * It contains wrapper methods for `$mdDialog`'s injected utility methods\n * (hide/cancel), as well as methods for initializing the onboard tutorial\n * and syncing user settings (e.g. when user dismisses welcome dialog).\n *\n * @param  {object} $mdDialog   ng-material's dialog service\n * @param  {object} UserSession The current user session/settings\n * @param  {object} nzTour      Onboard tour service\n * @param  {object} TOUR_STEPS  Configuration of onboard tour\n */\nclass WelcomeController {\n\t/**\n\t * Initializes dialog's dependencies.\n\t */\n\tconstructor($mdDialog, UserSession, TOUR_STEPS, WELCOME_TIP_LIST, WELCOME_TIPS) {  //nzTour, \n\t  'ngInject';\n\t\tthis.$mdDialog = $mdDialog;\n\t\tthis.UserSession = UserSession;\n\t\tthis.OnboardTour = () => alert('fix me!');//nzTour\n\t\tthis.TOUR_STEPS = TOUR_STEPS;\n\t\tthis.WELCOME_TIPS = WELCOME_TIPS;\n\n\t\tthis.welcomeTipsList = WELCOME_TIP_LIST;\n\t\tthis.currentTips = false;\n\t}\n\n\t/**\n\t * Hides the dialog; fulfills promise.\n\t * @return {Promise} Promise that will be fulfilled on hide\n\t */\n  hide() {\n    return this.$mdDialog.hide();\n  }\n\n\t/**\n\t * Cancels the dialog; rejects promise.\n\t * @return {Promise} Promise that will be rejected on cancel\n\t */\n  cancel() {\n    return this.$mdDialog.cancel();\n  }\n\n  /**\n   * Hides the dialog, providing an answer to resolve its promise with.\n   * @param  {string} answer The result of the dialog upon hide\n   * @return {Promise}       Promise containing the resolved answer\n   */\n  answer(answer) {\n    return this.$mdDialog.hide(answer);\n  }\n\n  /**\n   * Changes the active view of the dialog, e.g. \"user tips\" detail panels. \n   * @param  {string} view The view to transition to\n   */\n  viewTip(tip) {\n  \tconsole.log(this.WELCOME_TIPS[tip]);\n  \tthis.currentTips = this.WELCOME_TIPS[tip];\n  }\n\n  nextTip() {\n  \tthis.activeTip = (this.activeTip === this.currentTips.tips.length - 1) ? 0 : (this.activeTip + 1);\n  }\n  prevTip() {\n  \tthis.activeTip = (this.activeTip === 0) ? this.currentTips.tips.length - 1 : (this.activeTip - 1);\n  }\n\n  /**\n   * Hides the dialog with the answer `'tour'` and begins the onboard tour\n   * using the `TOUR_STEPS` as a config object.\n   * @return {Promise} Promise representing tour completion\n   */\n  startTour() {\n    this.$mdDialog.hide('tour');\n  \treturn this.OnboardTour.start(this.TOUR_STEPS);\n  }\n\n  /**\n   * Performs a fromtofrom assignment of user settings to force a sync\n   * with the setter. Ensures that the dialog's 'Do not show this message again'\n   * checkbox affects the user's settings.\n   */\n  syncSettings() {\n  \tconst currentSettings = this.UserSession.settings;\n  \tcurrentSettings.showWelcome.val = this.showWelcome;\n  \tthis.UserSession.settings = currentSettings;\n  }\n}\n\nexport default WelcomeController;\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/common/popup/welcome/welcome.controller.js","class PopupService {\n\tconstructor($mdDialog, $mdToast, $mdMedia) {\n\t\t'ngInject';\n\t\tthis.$mdDialog = $mdDialog;\n\t\tthis.$mdToast = $mdToast\n\t\tthis.$mdMedia = $mdMedia;\n\t\tthis.standardToast = $mdToast.simple()\n      .action('Dismiss')\n      .hideDelay(5000)\n      .highlightAction(true)\n      .highlightClass(`md-warn`)\n      .position('bottom left');\n\t}\n\twelcome() {\n\t  return this.$mdDialog.show(\n\t\t\tthis.$mdDialog.welcome()\n\t\t);\n\t}\n\tlogin() {\n\t  return this.$mdDialog.show(\n\t\t\tthis.$mdDialog.login()\n\t\t);\n\t}\n\tinfo({locals = null} = {}) {\n\t\treturn this.$mdDialog.show(\n\t\t\tthis.$mdDialog.info({ locals })\n\t\t);\n\t}\n\ttoast(type = 'primary', { message, action = 'Dismiss' }) {\n\t\tconst toast = this.standardToast\n      .textContent(message)\n      .action(action)\n      .highlightClass(`md-${type}`);\n\t\treturn this.$mdToast.show(toast);\n\t}\n\terror({locals = null} = {}) {\n\t\treturn this.$mdDialog.show(\n\t\t\tthis.$mdDialog.error({ locals })\n\t\t);\n\t}\n\twarning({ locals = { message: 'An unknown error occurred!', action: 'Dismiss'} } = {}) {\n\t\tconst toast = this.standardToast\n      .textContent(locals.message || 'An unknown error occurred!')\n      .action(locals.action || 'Dismiss')\n      .position('bottom right');\n\t\treturn this.$mdToast.show(toast);\n\t}\n}\n\nexport default PopupService;\n\n\n// WEBPACK FOOTER //\n// ./client/app/common/popup/popup.service.js","import angular from 'angular';\nimport ngMaterial from 'angular-material';\n\nimport titleBarComponent from './titlebar.component';\nimport titleBarButtonDirective from './titlebarButton.directive';\n\nconst titleBarModule = angular.module('titlebar', [\n\tngMaterial\n])\n\n.component('titleBar', titleBarComponent)\n\n.directive('titleBarButton', titleBarButtonDirective)\n\n.constant('TITLEBAR_OPTS', {\n\tregister: {\n\t\tactive: true,\n\t\tlabel: 'Register now',\n\t\ttooltip: false,\n\t\ticon: ['person_outline', 'person_outline'],\n\t\tclass: 'cta-button bg-pink'\n\t},\n\tschedule: {\n\t\tactive: true,\n\t\tlabel: 'Schedule visit',\n\t\ttooltip: false,\n\t\ticon: ['add_alarm', 'add_alarm'],\n\t\tclass: 'cta-button bg-green'\n\t},\n\tapply: {\n\t\tactive: true,\n\t\tlabel: 'Apply online',\n\t\ttooltip: false,\n\t\ticon: ['bookmark_outline', 'bookmark_outline'],\n\t\tclass: 'cta-button bg-orange'\n\t},\n\tcondense: {\n\t\tactive: true,\n\t\tlabel: 'Toolbar size',\n\t\ttooltip: [ 'Expand toolbar', 'Condense toolbar' ],\n\t\ticon: [ 'flip_to_front', 'flip_to_back' ]\n\t},\n\tright: {\n\t\tactive: true,\n\t\tlabel: 'Toolbar visibility',\n\t\ttooltip: [ 'Hide toolbar', 'Show toolbar' ],\n\t\ticon: [ 'last_page', 'first_page' ]\n\t}\n})\n\n.name;\n\nexport default titleBarModule;\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/common/titlebar/titlebar.js","import template from './titlebar.html';\nimport './titlebar.scss';\n\nconst titleBarComponent = {\n\ttemplate,\n  transclude: true,\n  bindings: {\n  \ttitle: '@',\n  \tmobile: '<'\n  }\n}\n\nexport default titleBarComponent;\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/common/titlebar/titlebar.component.js","module.exports = \"<md-toolbar class=\\\"md-accent md-hue-1 title-bar\\\" layout=\\\"row\\\" ng-class=\\\"{'is-mobile' : $ctrl.mobile.screen}\\\">\\n\\n  <md-toolbar-filler flex=\\\"nogrow\\\" layout layout-align=\\\"start center\\\" layout-align-gt-sm=\\\"center center\\\">\\n<!--     <img ui-sref=\\\"home\\\" src=\\\"images/uoit-shield.svg\\\" alt=\\\"University of Ontario Institute of Technology\\\" class=\\\"logo-shield\\\" id=\\\"uoit_logo\\\"> -->\\n    <svg ui-sref=\\\"home\\\" alt=\\\"University of Ontario Institute of Technology\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 68 84.86\\\" class=\\\"logo-shield\\\" id=\\\"uoit_logo\\\" preserveAspectRatio=\\\"xMaxYMax meet\\\">\\n\\t\\t  <path d=\\\"M43.82,82.91c-17.6,0-25.67-15.73-25.67-31.62s8.07-31.62,25.67-31.62c13.27,0,21.11,8.93,24.18,20.15L67.94,0H0L0,51C.71,70.93,15.27,84.86,34,84.86a28.57,28.57,0,0,0,10-2Z\\\"/>\\n\\t\\t  <path d=\\\"M43.89,22.17c-14.13,0-15.16,19.16-15.16,29.2s1,29.21,15.16,29.21S59,61.42,59,51.37,58,22.17,43.89,22.17Z\\\"/>\\n\\t\\t</svg>\\n  </md-toolbar-filler>\\n\\n  <div class=\\\"md-toolbar-tools\\\" ng-if=\\\"!$ctrl.mobile.screen\\\">\\n    <h1 ui-sref=\\\"locations\\\">{{::$ctrl.title}} <small class=\\\"beta-label\\\">BETA</small></h1>\\n    <span flex></span>\\n    <ng-transclude id=\\\"toolbar-controls\\\" layout layout-align=\\\"center center\\\"></ng-transclude>\\n  </div>\\n\\n</md-toolbar>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/common/titlebar/titlebar.html\n// module id = 371\n// module chunks = 0","import template from './titlebarButton.html';\n\nfunction titleBarButtonDirective($log) {\n\t'ngInject';\n  return {\n    template,\n    require: '^titleBar',\n    scope: {\n    \tonClick: '&',\n    \tlabel: '@',\n\t\t\tclass: '@',\n    \tactive: '<',\n\t\t\ttooltip: '<',\n\t\t\ticon: '<'\n    }\n  };\n}\n\nexport default titleBarButtonDirective;\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/common/titlebar/titlebarButton.directive.js","module.exports = \"<md-button\\n\\tclass=\\\"icon-button {{ ::class }}\\\"\\n\\tng-click=\\\"onClick()\\\"\\n\\tng-class=\\\"{ 'active': active }\\\"\\n\\taria-label=\\\"{{ ::label }}\\\">\\n  <ng-md-icon\\n  \\ticon=\\\"{{ active ? icon[0] || icon : icon[1] || icon }}\\\"\\n  \\tstyle=\\\"fill: currentColor;\\\">\\n  </ng-md-icon>\\n  <md-tooltip md-direction=\\\"bottom\\\" md-autohide ng-if=\\\"tooltip && !(mc.mobile||!$ctrl.settings.showHints.val)\\\">\\n    {{ active ? (tooltip[0] || tooltip) : (tooltip[1] || tooltip) }}\\n  </md-tooltip>\\n\\t<span ng-if=\\\"::(!tooltip)\\\">{{ ::label }}</span>\\n</md-button>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/common/titlebar/titlebarButton.html\n// module id = 375\n// module chunks = 0","import angular from 'angular';\nimport uiRouter from 'angular-ui-router';\n\nimport userAuthFactory from './userAuth.factory';\nimport userResolverFactory from './userResolver.factory';\nimport userSessionService from './userSession.service';\n\nlet userModule = angular.module('user', [\n  uiRouter\n])\n\n.factory('UserAuth', userAuthFactory)\n\n.factory('UserResolver', userResolverFactory)\n\n.service('UserSession', userSessionService)\n\n.constant('USER_DEFAULTS', {\n\tsettings: {\n    toolbarOpen: {\n      val: true,\n      label: 'Toolbar open by default',\n      icon: 'last_page'\n    },\n    toolbarCondensed: {\n      val: false,\n      label: 'Toolbar condensed by default',\n      icon: 'flip_to_back'\n    },\n    showHints: {\n      val: true,\n      label: 'Show hint messages',\n      icon: 'announcement'\n    },\n    showWelcome: {\n      val: true,\n      label: 'Always show welcome',\n      icon: 'live_tv'\n    }\n  },\n  usage: {\n  \tauto: {\n  \t\tval: true\n  \t},\n  \tcompression: {\n  \t\tval: 1,\n  \t\tmin: 1,\n  \t\tmax: 5,\n  \t\tstep: 1,\n  \t\tlabel: 'Compression level',\n  \t\tlabels: ['Less', 'More'],\n  \t\tlevels: {\n  \t\t\t// [imageQual, loadTime, dataUse] / 0=low, 10=high\n  \t\t\t'<= 2': [10, 5, 10],\n  \t\t\t'== 3': [5, 5, 5],\n  \t\t\t'>= 4': [0, 10, 0]\n  \t\t}\n  \t},\n  \tpreloading: {\n  \t\tval: 0,\n  \t\tmin: 0,\n  \t\tmax: 2,\n  \t\tstep: 1,\n  \t\tlabel: 'Preloading strategy',\n  \t\tlabels: ['None', 'Proactive'],\n  \t\tlevels: {\n  \t\t\t// [imageQual, loadTime, dataUse] / 0=low, 10=high\n  \t\t\t'== 0': [5, 10, 0], //no preload\n  \t\t\t'== 1': [5, 5, 5], //preload\n  \t\t\t'== 2': [5, 0, 5] //preload & keep last\n  \t\t}\n  \t},\n  \t// cache: {\n  \t// \tval: 0,\n  \t// \tmin: 0,\n  \t// \tmax: 250,\n  \t// \tstep: 25,\n  \t// \tlabel: 'Cache control',\n  \t// \tlabels: ['No cache', '250MB'],\n  \t// \tlevels: [\n  \t// \t]\n  \t// },\n  \tresolution: {\n  \t\tval: 1,\n  \t\tmin: 0,\n  \t\tmax: 1,\n  \t\tstep: 1,\n  \t\tlabel: 'Image resolution',\n  \t\tlabels: ['Low', 'High'],\n  \t\tlevels: {\n  \t\t\t// [imageQual, loadTime, dataUse] / 0=low, 10=high\n  \t\t\t'== 0': [0, 0, 0], //low-res\n  \t\t\t'== 1': [10, 5, 10], //high-res\n  \t\t}\n  \t}\n  },\n  profiles: {\n  \tconserve: {\n  \t\tauto: { val: true },\n  \t\tcompression: { val: 5 },\n  \t\tpreloading: { val: 0 },\n  \t\tresolution: { val: 0 }\n  \t},\n  \tbalanced: {\n  \t\tauto: { val: true },\n  \t\tcompression: { val: 3 },\n  \t\tpreloading: { val: 1 },\n  \t\tresolution: { val: 1 }\n  \t},\n  \tmobile3g: {\n  \t\tauto: { val: true },\n  \t\tcompression: { val: 4 },\n  \t\tpreloading: { val: 1 },\n  \t\tresolution: { val: 0 }\n  \t},\n  \tmobileWifi: {\n  \t\tauto: { val: true },\n  \t\tcompression: { val: 2 },\n  \t\tpreloading: { val: 1 },\n  \t\tresolution: { val: 0 }\n  \t},\n  \tdesktopSlow: {\n  \t\tauto: { val: true },\n  \t\tcompression: { val: 5 },\n  \t\tpreloading: { val: 2 },\n  \t\tresolution: { val: 1 }\n  \t},\n  \tdesktopFast: {\n  \t\tauto: { val: true },\n  \t\tcompression: { val: 1 },\n  \t\tpreloading: { val: 2 },\n  \t\tresolution: { val: 1 }\n  \t}\n  }\n})\n\n.constant('USER_ROLES', {\n\tadmin: 'admin',\n\teditor: 'editor',\n\tcontributor: 'contributor'\n})\n\n.constant('AUTH_EVENTS', {\n  loginSuccess: 'auth-login-success',\n  loginFailed: 'auth-login-failed',\n  logoutSuccess: 'auth-logout-success',\n  sessionTimeout: 'auth-session-timeout',\n  notAuthenticated: 'auth-not-authenticated',\n  notAuthorized: 'auth-not-authorized'\n})\n\n.name;\n\nexport default userModule;\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/common/user/user.js","import { isArray } from 'angular';\n\n/**\n * Factory constructor function to provide authentication\n * details to app on runtime.\n *\n * Contains methods for login/logout, as well as a check\n * at initialization to determine if the server already\n * has an active user session. It also has utility methods\n * for determining the status of authorization.\n * \n * @param {object} $http       Angular's $http service\n * @param {object} UserSession The user session object/factory\n */\nfunction UserAuthFactory($http, UserSession) {\n  'ngInject';\n\n  /**\n   * Wrapper function for the `UserSession.create()`.\n   * \n   * @param  {object} user User object from db\n   * @return {object}      User stored into session\n   */\n  this.createSession = user => {\n  \tconsole.log('starting session creation...');\n    return UserSession.create(user);\n  }\n\n  /**\n   * Sends a small check to the server with `$http.get()` to\n   * determine if there is already an active user session.\n   *\n   * Creates a session with the returned user; creates a blank\n   * session by calling `createSesstion(false)` if no user (403)\n   * is returned.\n   * \n   * @return {Promise} Promise that will resolve to a user session\n   */\n  this.initAuth = () => {\n  \tconsole.log('checking for user...');\n    return $http\n      .get('/user/me')\n      .then(res => {\n\t\t  \tconsole.log('user found');\n        return this.createSession(res.data.user);\n      }).catch(err => {\n\t\t  \tconsole.log('user not found');\n        return this.createSession(false);\n      });\n  }\n  // TODO: RETURN A BETTER VERSION OF THIS PROMISE? PROMISE FROM CREATESESSION?\n\n  /**\n   * Logs a user in with a username and password.\n   * @param  {string} $0.username The user's email\n   * @param  {string} $0.password User's keystone password\n   * @return {Promise}            Promise that will resolve to a user session\n   */\n  this.login = ({ username, password }) => {\n    return $http\n      .post('/user/signin', { username, password })\n      .then(res => {\n        return this.createSession(res.data.user);\n      });\n  };\n  // TODO: REJECTION HANDLING\n\n  /**\n   * Logs a user out.\n   * \n   * @return {Promise} Promise that destroys session when resolved\n   */\n  this.logout = () => {\n\t\treturn $http\n\t\t\t.post('/user/signout')\n\t\t\t.then(res =>{\n\t\t\t\tUserSession.destroy();\n\t\t  \tconsole.log('user logged out');\n\t\t\t}, error => {\n\t\t  \tconsole.log('error, user not logged out');\n\t\t\t});\n  }\n  // TODO: REJECTION HANDLING\n\n  /**\n   * Utility method to tell whether a user is authenticated\n   * with a username and password (only authenticated sessions)\n   * have a userId.\n   * \n   * @return {string} User _id field\n   */\n  this.isAuthenticated = () => {\n    return !!UserSession.userId;\n  };\n\n  /**\n   * Utility method to check the current authorized user's\n   * roles in the the application.\n   *\n   * If there are no `authorizedRoles` speficied for the context,\n   * it is public/allowed and the method can return true. If there\n   * are roles specified, they are forced into an array (if not\n   * already) and checked against the array of roles attached to\n   * the current user session.\n   *\n   * If the user's roles contain a role that is in the `authorizedRoles`\n   * list, a flag that the user is authorized is set. If the user is\n   * still authenticated and is also authorized, the method can\n   * return true.\n   * \n   * @param  {[Array<String>]|[String]} authorizedRoles A list of roles allowed\n   * @return {Boolean}                 \t\t\t\t\t\t\t\t\tWhether user is allowed\n   */\n  this.isAuthorized = authorizedRoles => {\n    if (!authorizedRoles || authorizedRoles.length === 0) return true;\n\n    if (!isArray(authorizedRoles)) {\n      authorizedRoles = [authorizedRoles];\n    }\n\n    let isAuthorized = false;\n    for (const role of UserSession.roles) {\n    \tif (authorizedRoles.indexOf(role) !== -1) {\n    \t\tisAuthorized = true;\n    \t}\n    }\n    return (this.isAuthenticated() && isAuthorized);\n  };\n\n  return this;\n}\n\nexport default UserAuthFactory;\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/common/user/userAuth.factory.js","function UserResolverFactory($q, $rootScope, $state, UserSession) {\n  return {\n    resolve() {\n      var deferred = $q.defer();\n      var unwatch = $rootScope.$watch(() => UserSession.user, function (currentUser) {\n        if (angular.isDefined(currentUser)) {\n          if (currentUser) {\n            deferred.resolve(currentUser);\n          } else {\n            deferred.reject();\n            $state.go('login');\n          }\n          unwatch();\n        }\n      });\n      return deferred.promise;\n    }\n  };\n}\n\nexport default UserResolverFactory;\n\n\n// WEBPACK FOOTER //\n// ./client/app/common/user/userResolver.factory.js","import { isDefined, equals } from 'angular';\n\n/**\n * User session management service.\n */\nclass UserSessionService {\n\tconstructor($http, $popupWindow, SettingsFactory, USER_ROLES, USER_DEFAULTS) {\n\t  'ngInject';\n\t  this.$http = $http;\n\t  this.$popupWindow = $popupWindow;\n\t  this.SettingsFactory = SettingsFactory;\n\n\t\tthis._roles = USER_ROLES;\n\t\tthis._settings = USER_DEFAULTS.settings;\n\t\tthis._usage = USER_DEFAULTS.usage;\n\n\t\tthis.user = {};\n\t}\n\t/**\n\t * This function creates a new user session, which is\n\t * necessary to store application settings regardless of\n\t * whether there is a \"real\" user logged in. If there is\n\t * a user, the UserSession service will:\n\t * \n\t * - set the `userId` property to indicate an active user\n\t * - read user roles based on their boolean values on user\n\t * - push role strings into a `roles` property on UserSession\n\t * \n\t * If not, the service checks for local settings and inits\n\t * a \"blank\" user with those settings (or the app defaults).\n\t * \n\t * @param  {Object} user DB user object to use for session\n\t * @return {Object}      Fully-formed user object after settings\n\t */\n\tcreate(user) {\n\t\tthis.roles = [];\n\t\tif (user) {\n\t\t\tthis.userId = user._id;\n\t\t\tthis.user = user;\n\t\n\t\t\tconst { isAdmin, isEditor, isContributor } = user;\n\t\t\t(isAdmin) && this.roles.push(this._roles.admin);\n\t\t\t(isEditor) && this.roles.push(this._roles.editor);\n\t\t\t(isContributor) && this.roles.push(this._roles.Contributor);\n\n\t  \tconsole.log('created session from user');\n\t\t} else {\n\t\t\t/**\n\t\t\t * Looks inside SettingsFactory for user data matching the pattern\n\t\t\t * defined in USER_DEFAULTS; store in temporary vars.\n\t\t\t *\n\t\t\t * @alias _settings/_usage\n\t\t\t * @memberof UserSession\n\t\t\t */\n\t\t\tconst _settings = this.SettingsFactory.get('settings'),\n\t\t\t\t\t\t_usage = this.SettingsFactory.get('usage');\n\n\t\t\t/**\n\t\t\t * Init a 'blank' user with the required settings properties to\n\t\t\t * avoid assignment errors (i.e. `this.user.settings[key] = ...`)\n\t\t\t * \n\t\t\t * @memberof UserSession\n\t\t\t * @type {Object}\n\t\t\t * @prop {Object} settings The user's unparsed settings\n\t\t\t * @prop {Object} usage \t The user's unparsed usage prefs\n\t\t\t */\n\t\t\tthis.user = {\n\t\t\t\tsettings: {},\n\t\t\t\tusage: {}\n\t\t\t}\n\n\t\t\t// Use the UserSession's getter/setters to merge the found setting\n\t\t\t// values into USER_DEFAULTS via the user model.\n\t\t\tthis.settings = _settings && !equals(_settings, {}) ? _settings : this._settings;\n\t\t\tthis.usage = _usage && !equals(_usage, {}) ? _usage : this._usage;\n\n\t  \tconsole.log('created session from local defaults', _settings);\n\t\t}\n\t\treturn this.user;\n\t}\n\t/**\n\t * Checks the `userId` property to verify whether settings should\n\t * save to a logged in user; if not, saves them to localStorage using\n\t * the `SettingsFactory`.\n\t */\n\tsave() {\n  \tconsole.log('saving settings to user...');\n\t\tif (this.userId) {\n\t\t\tthis.$http.post('/user/save', this.user).then(user => {\n\t\t\t\tthis.$popupWindow.toast('primary', {\n\t\t    \tmessage: 'User settings updated!',\n\t\t    \taction: 'Dismiss'\n\t\t    });\n\t\t  \tconsole.log('saved settings to user!');\n\t\t\t});\n\t\t} else {\n\t\t\tthis.SettingsFactory.set('settings', this.settings);\n\t\t\tthis.SettingsFactory.set('usage', this.usage);\n\n\t  \tconsole.log('saved settings to local!', this.user);\n\t\t}\n\t}\n\t/**\n\t * Removes user session data and nulls out roles/ID.\n\t */\n\tdestroy() {\n\t\tthis.user = {\n\t\t\tsettings: {},\n\t\t\tusage: {}\n\t\t};\n\t\tthis.roles = null;\n\t\tthis.userId = null;\n\n  \tconsole.log('user session destroyed');\n\t}\n\t/**\n\t * Getter/setter pairs for merging user setting objects from\n\t * the DB the form of:\n\t * \n\t * `{ toolbarOpen: false }`\n\t * \n\t * into fully-qualified app-level settings objects that look like:\n\t * \n\t * ```\n\t * {\n\t *   toolbarOpen: {\n\t *     val: false,\n\t *     label: 'Toolbar open',\n\t *     ...\n\t *   }\n\t * }\n\t * ```\n\t *\n\t * or vice-versa for setting the user object based on app prefs.\n\t *\n\t * @alias settings/usage\n\t * @param  {Object} [settings/usage] Incoming app settings to merge into user\n\t * @return {Object} \t\t\t\t\t\t\t\t Merged app settings built from user\n\t */\n\tget settings() {\n\t\tif (this.user.settings) {\n\t  \tObject.keys(this.user.settings).map(key => {\n\t  \t\tif (this._settings[key]) this._settings[key].val = this.user.settings[key];\n\t\t  });\n\t\t  return this._settings;\n\t\t}\n\t}\n\tset settings(settings) {\n\t  if (isDefined(settings)) {\n\t  \tObject.keys(settings).map(key => {\n\t  \t\tif (this._settings[key]) this.user.settings[key] = settings[key].val;\n\t\t  });\n\t\t  this.save();\n\t\t}\n\t}\n\tget usage() {\n\t\tif (this.user.usage) {\n\t  \tObject.keys(this.user.usage).map(key => {\n\t  \t\tif (this._usage[key]) this._usage[key].val = this.user.usage[key];\n\t\t  });\n\t\t  return this._usage;\n\t\t}\n\t}\n\tset usage(usage) {\n\t  if (isDefined(usage)) {\n\t  \tObject.keys(usage).map(key => {\n\t  \t\tif (this._usage[key]) this.user.usage[key] = usage[key].val;\n\t\t  });\n\t\t  this.save();\n\t\t}\n\t}\n}\n\nexport default UserSessionService;\n\n\n// WEBPACK FOOTER //\n// ./client/app/common/user/userSession.service.js","import angular from 'angular';\n\nimport UtilDom from './dom/dom';\nimport UtilModel from './model/model';\nimport UtilResource from './resource/resource';\n\nlet utilModule = angular.module('util', [\n  UtilDom,\n  UtilModel,\n  UtilResource\n])\n\n.name;\n\nexport default utilModule;\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/common/util/util.js","import angular from 'angular';\nimport bindCompileDirective from './bindCompile.directive';\n\nconst domModule = angular.module('util.dom', [])\n\n.directive('bindHtmlCompile', bindCompileDirective)\n\n.name;\n\nexport default domModule;\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/common/util/dom/dom.js","function bindCompileDirective($compile) {\n\t'ngInject';\n  return function(scope, element, attrs) {\n    const ensureCompileRunsOnce = scope.$watch(\n      scope => {\n        return scope.$eval(attrs.compile);\n      },\n      value => {\n        element.html(value);\n        $compile(element.contents())(scope);\n        ensureCompileRunsOnce();\n      }\n    );\n  };\n}\n\nexport default bindCompileDirective;\n\n\n// WEBPACK FOOTER //\n// ./client/app/common/util/dom/bindCompile.directive.js","import angular from 'angular';\n\nimport toNumberDirective from './toNumber.directive';\n\nlet modelModule = angular.module('util.model', [])\n\n.directive('toNumber', toNumberDirective)\n\n.name;\n\nexport default modelModule;\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/common/util/model/model.js","function toNumberDirective() {\n  return {\n    restrict: 'A',\n    require: 'ngModel',\n    link: function (scope, elem, attrs, ngModel) {\n      ngModel.$parsers.push(function(value) {\n        return '' + value;\n      });\n      ngModel.$formatters.push(function(value) {\n        return parseFloat(value);\n      });\n    }\n  };\n}\n\nexport default toNumberDirective;\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/common/util/model/toNumber.directive.js","import angular from 'angular';\nimport ngResource from 'angular-resource';\n\nimport DraftResourceFactory from './draftResource.factory';\nimport MapResourceFactory from './mapResource.factory';\nimport TourResourceFactory from './tourResource.factory';\n\nlet resourceModule = angular.module('util.resource', [\n  ngResource\n])\n\n.factory('DraftResource', DraftResourceFactory)\n\n.factory('$mapApi', MapResourceFactory)\n\n.factory('$tourApi', TourResourceFactory)\n\n.constant('GLOBAL_SETTINGS', {\n\tapiUrl: '/api/v1',\n\timageApiUrl: '//res.cloudinary.com/uoit-virtual-tour/image/upload'\n  // KEYSTONE HEROKU\n  // https://virtualtour-cms.herokuapp.com\n  // \n  // VTS HEROKU\n  // https://virtualtour-server.herokuapp.com\n  // \n  // KEYSTONE LOCAL\n  // http://localhost:3000/api/v1\n  // \n  // VTS LOCAL\n  // http://localhost:8080/api\\\n})\n\n.name;\n\nexport default resourceModule;\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/common/util/resource/resource.js","function DraftResourceFactory($resource, GLOBAL_SETTINGS) {\n  'ngInject';\n  \n  return $resource(GLOBAL_SETTINGS.apiUrl + '/drafts/:id', null, {\n\t\t'update': { method: 'PATCH' }\n  });\n}\n\nexport default DraftResourceFactory;\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/common/util/resource/draftResource.factory.js","function MapResourceFactory($resource, GLOBAL_SETTINGS) {\n  'ngInject';\n  return {\n  \tcategory: $resource(GLOBAL_SETTINGS.apiUrl + '/categories/:id'),\n  \tfeature: $resource(GLOBAL_SETTINGS.apiUrl + '/features/:id'),\n  \tcollection: $resource(GLOBAL_SETTINGS.apiUrl + '/feature-collections/:id')\n  }\n}\n\nexport default MapResourceFactory;\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/common/util/resource/mapResource.factory.js","function TourResourceFactory($resource, GLOBAL_SETTINGS) {\n  'ngInject';\n  return {\n  \tlocation: $resource(GLOBAL_SETTINGS.apiUrl + '/locations/:id'),\n  \tbuilding: $resource(GLOBAL_SETTINGS.apiUrl + '/buildings/:id'),\n  \tscene: $resource(GLOBAL_SETTINGS.apiUrl + '/scenes/:id', null, {\n\t\t\t'update': { method: 'PATCH' }\n\t  }),\n\t  preload: $resource(GLOBAL_SETTINGS.apiUrl + '/scenes/:id/preload', null, {\n\t  \t'get': {method:'GET', isArray:true}\n\t  }),\n  \tentity: $resource(GLOBAL_SETTINGS.apiUrl + '/entities/:id')\n  }\n}\n\nexport default TourResourceFactory;\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/common/util/resource/tourResource.factory.js","import 'aframe';\nimport 'aframe-animation-component';\nimport 'aframe-look-at-component';\nimport 'aframe-mouse-cursor-component';\n\nimport { primitives, loaders } from 'aframe-extras';\n\nimport sceneLink from './scenelink';\nimport hotSpot from './hotspot';\nimport textPanel from './textpanel';\nimport hoverAnimation from './hover';\nimport levelScaleTo from './scale';\nimport delegateEvent from './delegate';\n\nexport default {\n\tsceneLink,\n\thotSpot,\n\ttextPanel,\n\thoverAnimation,\n\tlevelScaleTo,\n\tdelegateEvent,\n\tregisterAll() {\n\t\tloaders.registerAll();\n\t\tprimitives.registerAll();\n\n\t\tdelegateEvent.register();\n\t\tlevelScaleTo.register();\n\t\thoverAnimation.register();\n\t\ttextPanel.register();\n\t\thotSpot.register();\n\t\tsceneLink.register();\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./client/app/common/aframe/aframe.js","import { registerPrimitive, primitives, utils } from 'aframe';\n\nconst sceneLinkPrimitive = {\n\tconfig: {\n\t  defaultComponents: {\n\t    geometry: {\n\t      primitive: 'cone',\n\t      height: 0.5,\n\t      radiusBottom: 0.5,\n\t      radiusTop: 0,\n\t      segmentsHeight: 1,\n\t      segmentsRadial: 4\n\t    },\n\t    scale: {\n\t      x: 0.1,\n\t      y: 1,\n\t      z: 1\n\t    },\n\t    animation: {\n\t      property: 'position',\n\t      dir: 'alternate',\n\t      dur: 1200,\n\t      easing: 'easeInOutSine',\n\t      from: '0 0 0',\n\t      to: '0 -0.1 0',\n\t      loop: true\n\t    }\n\t  }\n\t},\n\tregister() {\n\t\tregisterPrimitive('scene-link', utils.extendDeep(primitives.getMeshMixin(), this.config));\n\t}\n};\n\nexport default sceneLinkPrimitive;\n\n\n// WEBPACK FOOTER //\n// ./client/app/common/aframe/scenelink.js","import { registerPrimitive, primitives, utils } from 'aframe';\n\nconst hotSpotPrimitive = {\n\tconfig: {\n\t  defaultComponents: {\n\t    geometry: {\n\t    \tarc: 360,\n\t      primitive: 'torus',\n\t\t\t\tradius: 0.25,\n\t\t\t\tradiusTubular: 0.015,\n\t\t\t\tsegmentsTubular: 32,\n\t    },\n\t    material: {\n\t    \tcolor: '#0077CA',\n\t    \tshader: 'flat',\n\t    \topacity: 0.6,\n\t    \ttransparent: true\n\t    },\n\t    text: {\n\t    \tvalue: 'i',\n\t    \theight: 5,\n\t    \tside: 'double',\n\t    \twrapCount: 4,\n\t    \talign: 'center',\n\t    \tcolor: '#0077CA'\n\t    },\n\t    animation: {\n\t      property: 'rotation',\n\t      easing: 'easeInOutSine',\n\t      dur: 2000,\n\t      from: '0 0 0',\n\t      to: '0 360 0',\n\t      loop: true\n\t    }\n\t  }\n\t},\n\tregister() {\n\t\tregisterPrimitive('hot-spot', utils.extendDeep(primitives.getMeshMixin(), this.config));\n\t}\n};\n\nexport default hotSpotPrimitive;\n\n\n// WEBPACK FOOTER //\n// ./client/app/common/aframe/hotspot.js","import { registerPrimitive, primitives, utils } from 'aframe';\n\nconst textPanelPrimitive = {\n\tconfig: {\n\t  defaultComponents: {\n\t    geometry: {\n\t      primitive: 'plane',\n\t      height: 0.75,\n\t      width: 2\n\t    },\n\t    material: {\n\t    \tcolor: '#000000',\n\t    \topacity: 0.6,\n\t    \ttransparent: true\n\t    },\n\t    text: {\n\t    \tvalue: 'Insert text here\\nSecond line\\nThird, somewhat longer line',\n\t    \talign: 'center',\n\t    \twrapCount: 25\n\t    }\n\t  },\n\t  mappings: {\n\t  \tcontent: 'text.value'\n\t  }\n\t},\n\tregister() {\n\t\tregisterPrimitive('text-panel', utils.extendDeep(primitives.getMeshMixin(), this.config));\n\t}\n};\n\nexport default textPanelPrimitive;\n\n\n// WEBPACK FOOTER //\n// ./client/app/common/aframe/textpanel.js","import { registerComponent } from 'aframe';\n\nconst hoverAnimationComponent = {\n\tconfig: {\n\t  schema: {\n\t    scaleFactor: {\n\t      default: 1.1\n\t    },\n\t    opacityFactor: {\n\t      default: 0.9\n\t    },\n\t    colorFactor: {\n\t      type: 'color',\n\t      default: '#FFFFFF'\n\t    }\n\t  },\n\t  \n\t  init() {\n\t    this.defaultScale = { x: 1, y: 1, z: 1 };\n\t    this.defaultOpacity = 1;\n\t    this.defaultColor = '#FFF';\n\t    \n\t    if (!this.el.getAttribute('tabindex')) {\n\t      this.el.setAttribute('tabindex', 0);\n\t    }\n\t    \n\t    this.setColorAnimation();\n\t    this.setOpacityAnimation();\n\t    this.setScaleAnimation();\n\t  },\n\t  \n\t  setScaleAnimation() {\n\t    const originalScale = this.el.getAttribute('scale') || this.defaultScale,\n\t        factoredScale = {\n\t          x: (originalScale.x * this.data.scaleFactor),\n\t          y: (originalScale.y * this.data.scaleFactor),\n\t          z: (originalScale.z * this.data.scaleFactor)\n\t        };\n\t    this.el.setAttribute('animation__scale-mouseenter', {\n\t      property: 'scale',\n\t      from: originalScale,\n\t      to: factoredScale,\n\t      dur: 600,\n\t      easing: 'easeOutElastic',\n\t      elasticity: 600,\n\t      startEvents: 'mouseenter,focus',\n\t      pauseEvents: 'mouseleave,blur'\n\t    });\n\t    this.el.setAttribute('animation__scale-mouseleave', {\n\t      property: 'scale',\n\t      from: factoredScale,\n\t      to: originalScale,\n\t      dur: 600,\n\t      easing: 'easeOutElastic',\n\t      elasticity: 600,\n\t      startEvents: 'mouseleave,blur',\n\t      pauseEvents: 'mouseenter,focus'\n\t    });\n\t  },\n\t  \n\t  setOpacityAnimation() {\n\t  \tconst originalOpacity = this.el.getAttribute('material').opacity || this.defaultOpacity,\n\t    \t\tfactoredOpacity = originalOpacity * this.data.opacityFactor;\n\t    this.el.setAttribute('animation__opacity-mouseenter', {\n\t      property: 'opacity',\n\t      from: originalOpacity,\n\t      to: factoredOpacity,\n\t      dur: 300,\n\t      easing: 'linear',\n\t      startEvents: 'mouseenter,focus',\n\t      pauseEvents: 'mouseleave,blur'\n\t    });\n\t    this.el.setAttribute('animation__opacity-mouseleave', {\n\t      property: 'opacity',\n\t      from: factoredOpacity,\n\t      to: originalOpacity,\n\t      dur: 300,\n\t      easing: 'linear',\n\t      startEvents: 'mouseleave,blur',\n\t      pauseEvents: 'mouseenter,focus'\n\t    });\n\t  },\n\t  \n\t  setColorAnimation() {\n\t  \tconst originalColor = this.el.getAttribute('material').color || this.defaultColor;\n\t    this.el.setAttribute('animation__color-mouseenter', {\n\t      property: 'color',\n\t      from: originalColor,\n\t      to: this.data.colorFactor,\n\t      dur: 100,\n\t      easing: 'linear',\n\t      startEvents: 'mouseenter,focus',\n\t      pauseEvents: 'mouseleave,blur'\n\t    });\n\t    this.el.setAttribute('animation__color-mouseleave', {\n\t      property: 'color',\n\t      from: this.data.colorFactor,\n\t      to: originalColor,\n\t      dur: 100,\n\t      easing: 'linear',\n\t      startEvents: 'mouseleave,blur',\n\t      pauseEvents: 'mouseenter,focus'\n\t    });\n\t  }\n\t},\n\tregister() {\n\t\tregisterComponent('hover-animation', this.config);\n\t}\n}\n\nexport default hoverAnimationComponent;\n\n\n// WEBPACK FOOTER //\n// ./client/app/common/aframe/hover.js","import { registerComponent } from 'aframe';\n\nconst levelScaleToComponent = {\n\tconfig: {\n\t  schema: {\n\t    type: 'selector'\n\t  },\n\t  init() {\n\t    const scaleToLevel = this.data.getAttribute('scale'),\n\t        \tcurrentScale = this.el.getAttribute('scale'),\n\t        \tadjusted = {\n\t\t\t\t      x: currentScale.x / scaleToLevel.x,\n\t\t\t\t      y: currentScale.y / scaleToLevel.y,\n\t\t\t\t      z: currentScale.z / scaleToLevel.z\n\t\t\t\t    };\n\t    this.el.setAttribute('scale', adjusted);\n\t  }\n\t},\n\tregister() {\n\t\tregisterComponent('level-scale-to', this.config);\n\t}\n}\n\nexport default levelScaleToComponent;\n\n\n// WEBPACK FOOTER //\n// ./client/app/common/aframe/scale.js","import { registerComponent } from 'aframe';\n\nconst delegateEventComponent = {\n\tconfig: {\n\t\tschema: {\n\t\t\telements: {\n\t\t\t\ttype: 'selectorAll'\n\t\t\t},\n\t\t\tevents: {\n\t\t\t\ttype: 'array'\n\t\t\t}\n\t\t},\n\n\t\tinit() {\n\t\t\tthis.validateProperties();\n\n\t\t\tthis.unbinders = {};\n\n\t\t\tthis.bindAllEventsToElements();\n\t\t},\n\n\t\tupdate(oldData) {\n\t    if (Object.keys(oldData).length === 0) return;\n\n\t\t\tthis.validateProperties();\n\t\t\t\n\t\t\tthis.oldData.elements.forEach(element => {\n\t\t\t\tconst elementIndex = this.data.elements.indexOf(element);\n\t\t\t\tif (elementIndex === -1) {\n\t\t\t\t\tthis.unbindAllEventsFromElement(element);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.oldData.events.forEach(eventName => {\n\t\t\t\tconst eventNameIndex = this.data.events.indexOf(eventName);\n\t\t\t\tif (eventNameIndex === -1) {\n\t\t\t\t\tthis.unbinders[eventName].forEach(unbind => unbind());\n\t\t\t\t\tthis.unbinders.delete(eventName);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tbindAllEventsToElements() {\n\t\t\tthis.data.elements.forEach(element => this.bindAllEventsTo(element));\n\t\t},\n\n\t\tbindAllEventsTo(element) {\n\t\t\tthis.data.events.forEach(eventName => this.bindEventTo(eventName, element));\n\t\t},\n\n\t\tbindEventTo(eventName, element) {\n\t\t\tconst boundDelegateFn = this.delegateEvent.bind(element);\n\t\t\tthis.el.addEventListener(eventName, boundDelegateFn);\n\n\t\t\tconst unbindFn = () => this.el.removeEventListener(eventName, boundDelegateFn);\n\n\t\t\tthis.unbinders[eventName] = new Map();\n\t\t\tthis.unbinders[eventName].set(element, unbindFn);\n\t\t},\n\n\t\tdelegateEvent(originalEv) {\n\t\t\tthis.emit(originalEv.type, { originalEv }, false);\n\t\t},\n\n\t\tunbindAllEventsFromElement(element) {\n\t\t\tObject.keys(this.unbinders).forEach(eventName => {\n\t\t\t\tif (this.unbinders[eventName].has(element)) {\n\t\t\t\t\tconst unbind = this.unbinders[eventName].get(element);\n\t\t\t\t\tunbind();\n\t\t\t\t\tthis.unbinders[eventName].delete(element);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tvalidateProperties() {\n\t\t\tif (!this.data.elements) {\n\t\t\t\tthrow new Error('delegateEvent: Please provide an element selector to delegate events to!')\n\t\t\t}\n\t\t\tif (!this.data.events || !this.data.events.length) {\n\t\t\t\tthrow new Error('delegateEvent: Please provide at least one event to delegate!')\n\t\t\t}\n\t\t}\n\t},\n\tregister() {\n\t\tregisterComponent('delegate-event', this.config);\n\t}\n}\n\nexport default delegateEventComponent;\n\n\n// WEBPACK FOOTER //\n// ./client/app/common/aframe/delegate.js","import angular from 'angular';\n\nimport AFrame from './aframe/aframe';\nimport Drilldown from './drilldown/drilldown';\nimport CampusMap from './map/map';\nimport Search from './search/search';\nimport Settings from './settings/settings';\n\nconst componentModule = angular.module('app.components', [\n  AFrame,\n  Drilldown,\n  CampusMap,\n  Search,\n\tSettings\n])\n\n.name;\n\nexport default componentModule;\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/components.js","import angular from 'angular';\n\nimport AframeScene from './scene/scene';\nimport AframeSky from './sky/sky';\nimport AframeSceneLink from './scenelink/scenelink';\nimport AframeHotSpot from './hotspot/hotspot';\nimport AframeEditor from './editor/editor';\nimport AframeEntity from './entity/entity';\n\nlet aframeModule = angular.module('aframe', [\n  AframeScene,\n  AframeSky,\n\tAframeSceneLink,\n\tAframeHotSpot,\n\tAframeEditor,\n\tAframeEntity\n])\n\n.name;\n\nexport default aframeModule;\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/aframe/aframe.js","import angular from 'angular';\nimport sceneComponent from './scene.component';\nimport sceneService from './scene.service';\n\nconst sceneModule = angular.module('aframe.scene', [])\n\n.component('aframeScene', sceneComponent)\n\n.service('$aframeScene', sceneService)\n\n.name;\n\nexport default sceneModule;\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/aframe/scene/scene.js","import template from './scene.html';\nimport controller from './scene.controller';\nimport './scene.scss';\n\n/**\n * The aframeScene component definition initializes\n * the scene's bindings for its child components as\n * well as a transclusion point for the server-rendered\n * scene editor.\n *\n * @example\n * <aframe-scene\n *   sky=\"{{ $ctrl.scene.sky }}\"\n *   scene-links=\"$ctrl.scene.sceneLinks\"\n *   hot-spots=\"$ctrl.scene.hotSpots\"\n *   mobile=\"$ctrl.mobile\">\n * </aframe-scene>\n * \n * @prop {String} sky \t\t\t\tInterpolated sky url\n * @prop {Array}  sceneLinks  Array of scenelink objects\n * @prop {Array}  hotSpots\t\tArray of hotspot object\n * @prop {Object} mobile \t\t\tObject with device info\n */\nconst sceneComponent = {\n  controller,\n \ttemplate,\n  bindings: {\n    sky: '@',\n    sceneLinks: '<?',\n    hotSpots: '<?',\n    entities: '<?',\n    mobile: '<?'\n  },\n  transclude: {\n    'editor': '?sceneEditor'\n  }\n};\n\nexport default sceneComponent;\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/aframe/scene/scene.component.js","module.exports = \"<ng-transclude ng-transclude-slot=\\\"editor\\\"></ng-transclude>\\n\\n<a-scene id=\\\"aframe-scene\\\" ng-transclude-slot=\\\"sky\\\"> <!-- stats -->\\n\\t\\n\\t<!-- ASSET CACHE -->\\n\\t<a-assets>\\n\\t\\t<a-mixin id=\\\"mixin-blue\\\" material=\\\"color: #0077CA;opacity: 0.85; transparent: true;\\\"></a-mixin>\\n\\t\\t<a-mixin id=\\\"mixin-glow\\\" material=\\\"color:white;shader:flat;opacity:0.1;transparent: true;\\\"></a-mixin>\\n\\t\\t<img src=\\\"assets/images/plnsk_bg_default.jpg\\\" id=\\\"default_sky_bg\\\" />\\n\\t</a-assets>\\n\\n\\t<!-- SKY -->\\n\\t<aframe-sky sky=\\\"$ctrl.sky\\\"></aframe-sky>\\n\\t<a-sky src=\\\"#default_sky_bg\\\" ng-if=\\\"!$ctrl.sky\\\" animation__sky-rotate=\\\"property: rotation; dur: 90000; easing: linear; to: 0 360 0; loop: true;\\\"></a-sky>\\n\\n\\t<!-- LIGHT -->\\n\\t<a-light type=\\\"ambient\\\" color=\\\"#BBB\\\"\\\"></a-light>\\n\\t<a-light type=\\\"directional\\\" color=\\\"#FFF\\\" intensity=\\\"0.6\\\" position=\\\"-0.5 1 1\\\"></a-light>\\n\\n\\t<!-- CAMERA ENTITY -->\\n\\t<!-- <a-entity position=\\\"0 1.8 0\\\"> -->\\n\\t\\t<a-camera\\n\\t\\t\\tid=\\\"aframe-camera\\\"\\n\\t\\t\\tmouse-cursor\\n\\t\\t\\twasd-controls=\\\"enabled: false;\\\"\\n\\t\\t\\tlook-controls=\\\"reverseMouseDrag: true;\\\">\\n\\t\\t\\t<!-- VR CURSOR -->\\n\\t\\t  <a-entity ng-if=\\\"$ctrl.mobile.device && $ctrl.mobile.landscape\\\"\\n\\t\\t  \\t\\t\\t\\t\\tcursor=\\\"fuse: true; fuseTimeout: 2000\\\"\\n\\t\\t            position=\\\"0 0 -1\\\"\\n\\t\\t            geometry=\\\"primitive: ring; radiusInner: 0.007; radiusOuter: 0.01; thetaLength: 360;\\\"\\n\\t\\t            material=\\\"color: white; opacity: 0.8; shader: flat\\\"\\n\\t\\t            animation__cursor-mouseenter-outer=\\\"property: geometry.radiusOuter; dur: 600; easing: easeOutBounce; elasticity: 500; to: 0.025; startEvents: mouseenter;\\\"\\n\\t\\t            animation__cursor-mouseenter-inner=\\\"property: geometry.radiusInner; dur: 600; easing: easeOutBounce; elasticity: 500; to: 0.02; startEvents: mouseenter;\\\"\\n\\t\\t            animation__cursor-mouseleave-outer=\\\"property: geometry.radiusOuter; dur: 600; to: 0.01; startEvents: mouseleave;\\\"\\n\\t\\t            animation__cursor-mouseleave-inner=\\\"property: geometry.radiusInner; dur: 600; to: 0.007; startEvents: mouseleave;\\\">\\n\\t\\t            <!-- animation__cursor-fusing=\\\"property: geometry.thetaLength; dur: 2000; delay: 1000; easing: easeInQuart; elasticity: 600; to: 0; startEvents: fusing;\\\" -->\\n  \\t\\t\\t<a-animation begin=\\\"cursor-fusing\\\" dur=\\\"1600\\\" delay=\\\"400\\\" easing=\\\"ease-in\\\" attribute=\\\"geometry.thetaLength\\\" fill=\\\"both\\\" from=\\\"360\\\" to=\\\"0\\\"></a-animation>\\n  \\t\\t\\t<a-animation begin=\\\"mouseleave\\\" dur=\\\"600\\\" attribute=\\\"geometry.thetaLength\\\" to=\\\"360\\\"></a-animation>\\n\\t\\t  </a-entity>\\n\\t\\t</a-camera>\\n\\t<!-- </a-entity> -->\\n\\t\\n\\t<!-- GENERIC ENTITIES -->\\n\\t<aframe-entity ng-model=\\\"entity\\\" ng-repeat=\\\"entity in $ctrl.entities track by entity._id\\\"></aframe-entity>\\n\\n\\t<!-- SCENE LINKS -->\\n\\t<a-entity ng-repeat=\\\"sceneLink in $ctrl.sceneLinks track by sceneLink._id\\\"\\n\\t\\t\\t\\t\\t\\tng-attr-position=\\\"{{ sceneLink.position.join(' ') }}\\\"\\n\\t\\t\\t\\t\\t\\tng-attr-rotation=\\\"{{ sceneLink.rotation.join(' ') }}\\\"\\n\\t\\t\\t\\t\\t\\teditable=\\\"sceneLink\\\">\\n\\t\\t<scene-link ng-attr-id=\\\"link_{{ ::sceneLink._id }}\\\"\\n\\t\\t\\t\\t\\t\\t\\t\\tng-attr-delegate-event=\\\"events: mouseenter,focus,mouseleave,blur; elements: #link_{{ ::sceneLink._id }} .text-panel;\\\"\\n\\t\\t\\t\\t\\t\\t\\t\\tui-sref=\\\"scene({ location: sceneLink.scene.parent.parent.code, building: sceneLink.scene.parent.code, scene: sceneLink.scene.code })\\\"\\n\\t\\t\\t\\t\\t\\t\\t\\thover-animation=\\\"scaleFactor:1.1;colorFactor:#c71566;opacityFactor:0.7;\\\"\\n\\t\\t\\t\\t\\t\\t\\t\\tcolor=\\\"#0077CA\\\">\\n\\t\\t\\t<a-animation begin=\\\"click\\\" dur=\\\"600\\\" easing=\\\"ease-out\\\" attribute=\\\"scale\\\" fill=\\\"backwards\\\" to=\\\"0 0 0\\\"></a-animation>\\n\\t\\t\\t<text-panel ng-if=\\\"sceneLink.scene.parent._id !== $ctrl.parent._id\\\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\thover-animation=\\\"scaleFactor:1000;colorFactor:#000000;opacityFactor:1;\\\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tcontent=\\\"GO TO:\\\\n\\\\n{{sceneLink.scene.parent.name}}\\\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\trotation=\\\"90 90 0\\\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tposition=\\\"5.25 0 0\\\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tscale=\\\"0.001 0.01 0.001\\\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tclass=\\\"text-panel\\\">\\n\\t\\t\\t</text-panel>\\n\\t\\t</scene-link>\\n\\t</a-entity>\\n\\n\\t<!-- HOTSPOTS -->\\n<!-- \\t<a-entity\\n\\t\\tng-repeat=\\\"hotSpot in $ctrl.hotSpots track by hotSpot._id\\\"\\n\\t\\tclass=\\\"hot-spot\\\"\\n\\t\\thot-spot=\\\"hotSpot\\\">\\n\\t</a-entity> -->\\n\\n\\t<a-entity ng-repeat=\\\"hotSpot in $ctrl.hotSpots track by hotSpot._id\\\"\\n\\t\\t\\t\\t\\t\\tng-attr-position=\\\"{{ hotSpot.position.join(' ') }}\\\"\\n\\t\\t\\t\\t\\t\\tng-attr-id=\\\"hotSpot_{{ ::hotSpot._id }}\\\"\\n\\t\\t\\t\\t\\t\\tlook-at=\\\"[camera]\\\" editable=\\\"hotSpot\\\">\\n\\t\\t<hot-spot hover-animation=\\\"scaleFactor:1;colorFactor:#c71566;opacityFactor:0.7;\\\"\\n\\t\\t\\t\\t\\t\\t\\tng-attr-delegate-event=\\\"events: mouseenter,focus,mouseleave,blur,click; elements: #hotSpot_{{ ::hotSpot._id }} .text-panel;\\\"></hot-spot>\\n\\t\\t<text-panel content=\\\"{{ ['More about ', hotSpot.name.toUpperCase(), '\\\\n\\\\n', hotSpot.desc].join('') }}\\\"\\n\\t\\tanimation=\\\"property: scale; from: 0 0 0; to: 1 1 1; dur: 600; easing: easeOutElastic; elasticity: 600; startEvents: click\\\"\\n\\t\\t\\t\\t\\t\\t\\t\\tscale=\\\"0.001 0.001 0.001\\\"\\n\\t\\t\\t\\t\\t\\t\\t\\tposition=\\\"0 0 1\\\"\\n\\t\\t\\t\\t\\t\\t\\t\\trotation=\\\"0 0 0\\\"\\n\\t\\t\\t\\t\\t\\t\\t\\tclass=\\\"text-panel\\\">\\n\\t\\t</text-panel>\\n\\t</a-entity>\\n\\n</a-scene>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/components/aframe/scene/scene.html\n// module id = 574\n// module chunks = 0","import { isDefined, equals, element } from 'angular';\n\n/**\n * The scene controller manages all top-level functionality\n * of the scene component; it is responsible for initializing\n * the DOM elements of the scene and updating them when the\n * $aframeScene service changes.\n */\nclass SceneController {\n\t/**\n\t * Initializes the SceneCtrl's dependencies\n\t * @param  {object} $scope       The current scope\n\t * @param  {jqlite} $element     The component's <aframe-scene> element\n\t * @param  {object} $aframeScene The scene service\n\t * @param  {object} $aframeSky   The sky service\n\t */\n\tconstructor($scope, $element, $aframeScene, $aframeSky) {\n\t\t'ngInject';\n\t\tthis.$scope = $scope;\n\t\tthis.$element = $element;\n\t\tthis.$aframeScene = $aframeScene;\n\t\tthis.$aframeSky = $aframeSky;\n\t}\n\n  /**\n   * Lifecycle hook to initialize component properties; sets\n   * a boolean to hold the rightclick-active flag (for when a\n   * user mouseups the scene with right button) and a string\n   * for the current active scene's ID.\n   * \n\t * Also stores JQLite-wrapped <a-scene> and <a-assets> for\n\t * appending child elements into the scene from inner components.\n   */\n  $onInit() {\n\t\tthis._rightClick = false;\n\t\tthis._isMobile = false;\n\t\tthis._currentSceneId = '';\n\n\t\tthis.$sceneEl = this.$element.find('a-scene');\n\t\tthis.$assetsEl = this.$sceneEl.find('a-assets');\n\t\tthis.$cameraEl = element(document.getElementById('aframe-camera'));\n  }\n\n\t$onChanges(changes) {\n\t\tconsole.log(changes);\n\t\tif (changes.mobile.isFirstChange()) return;\n\t\tif (!this._isMobile && changes.mobile.currentValue.screen) {\n\t\t\t// this.$cursorEl = element(document.createElement('a-cursor'));\n\t\t\t// this.$cursorEl.attr({\n\t\t\t// \tfuse: true,\n\t\t\t// \tfuseTimeout: 1000,\n\t\t\t// \tmaxDistance: 100,\n\t\t\t// \tmaterial: 'color:white;'\n\t\t\t// });\n\t\t\t// this.$cameraEl\n\t\t\t// \t.attr({ 'look-controls': 'enabled: true;', 'reverse-look-controls': 'enabled: false;' });\n\t\t\t// this.$cameraEl.append(this.$cursorEl);\n\t\t\tthis._isMobile = true;\n\t\t\t// console.log('mobile detected; scene adapted', this.$cameraEl, this.$cursorEl)\n\t\t}\n\t\tif (this._isMobile && !changes.mobile.currentValue.screen) {\n\t\t\t// this.$cursorEl.remove();\n\t\t\t// this.$cameraEl\n\t\t\t// \t.attr({\n\t\t\t// \t\t'look-controls': 'enabled: false;',\n\t\t\t// \t\t'reverse-look-controls': 'enabled: true;'\n\t\t\t// \t});\n\t\t\tthis._isMobile = false;\n\t\t}\n\t}\n\n  /**\n   * Extracts an incoming scene object's relevant data (`id`, `sceneLinks`,\n   * and `hotSpots`) and assigns them to the controller for rendering\n   * on the component.\n   *\n   * If the server-side editor component is attached (i.e. admin user is\n   * logged in), it will have mounted a `checkForDraft()` method on the\n   * controller, which is called here to announce if a newly-navigated-to\n   * scene has saved drafts.\n   * \n   * @param {object} scene A scene object from API/database\n   */\n\tsetScene(scene) {\n\t\t\n\t\tconst { sceneLinks, hotSpots, entities, parent, _id } = scene;\n\n  \tthis.sceneLinks = sceneLinks;\n  \tthis.hotSpots = hotSpots;\n  \tthis.entities = entities;\n  \tthis.parent = parent;\n  \tthis._currentSceneId = _id;\n\n    this.checkForDraft&&this.checkForDraft();\n\t}\n\n  /**\n   * Lifecycle hook to run a check on every digest loop cycle.\n   * \n   * Checks $aframeScene's current scene object; proceeds if\n   * scene is defined and calls `setScene()` on the incoming data.\n   *\n   * Checks if there is a sky active on $aframeSky, and if so, if\n   * it is different from the current active sky. Sets the conroller's\n   * sky if they differ or if the controller has no sky.\n   * \n   */\n  $doCheck() {\n  \tif (isDefined(this.$aframeScene.scene)) {\n  \t\tif (this.$aframeScene.scene._id && this.$aframeScene.scene._id !== this._currentSceneId) {\n\t\t\t// if (!this.sky || this.$aframeScene.sky !== this.sky) {\n\t\t\t\t// this.sky = this.$aframeScene.sky;\n\t  \t\tthis.setScene(this.$aframeScene.scene);\n\t  \t}\n  \t} else return;\n  \tif (this.$aframeSky.sky) {\n\t\t\tif (!this.sky || this.$aframeSky.sky !== this.sky) {\n\t\t\t\tthis.sky = this.$aframeSky.sky;\n\t\t\t\tconsole.log('scene controller detects change in sky service', this.sky);\n\t  \t}\n  \t}\n  }\n}\n\nexport default SceneController;\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/aframe/scene/scene.controller.js","import { isArray, isObject } from 'angular';\n\n/**\n * The scene service class is the lead orchestrator of the `<aframe-scene/>`\n * component's business logic. It is the application and component's main\n * interface to the current scene data.\n *\n * Scene manipulation is accomplished using the `$aframeScene.scene` getter\n * and setter property; internally, the scene data is stored in the service\n * \"raw\" under the property `sceneData`. The getter and setter are\n * responsible for transliterating changes into the \"raw\" data object and\n * back again. The setter also sets the `$aframeSky.sky` property, thus kicking\n * off a sky change from its respective service.\n *\n * @param {object} $mdToast        ng-material's toast service\n * @param {object} $aframeSky\t\t\t The sky service\n * @param {object} EDITOR_MESSAGES Constant to define toast configs\n */\nclass SceneService {\n\tconstructor($mdToast, $aframeSky, EDITOR_MESSAGES) {\n\t\t'ngInject';\n\n\t\tthis.$mdToast = $mdToast;\n\t\tthis.$aframeSky = $aframeSky;\n\n\t\tthis.toasts = {};\n\t\tObject.keys( EDITOR_MESSAGES ).forEach(type => {\n\t\t\tconst toast = $mdToast.simple();\n\t\t\tconst toastConfig = EDITOR_MESSAGES[type];\n\t\t\tObject.keys(toastConfig).forEach(prop => {\n\t\t\t\ttoast[prop]( toastConfig[prop] );\n\t\t\t});\n\t\t\tthis.toasts[type] = toast;\n\t\t});\n\t}\n\t/**\n\t * Getter and setter pair for internal scene data.\n\t * \n\t * @param  {[Object]} sceneData Incoming scene data to set\n\t * @return {[Object]}\t\t\t\t\t\tThe scene's current data\n\t * @example\n\t * {\n\t *   _id: '583f17cfd2cd0c0400072d9c',\n\t *   parent: '57a8e38b12ad99fe889c95f3',\n\t *   code: '2b',\n\t *   name: 'Atrium 2B',\n\t *   hotSpots: [ ... ],\n\t *   sceneLinks: [ ... ],\n\t *   panorama: { ... }\n\t * }\n\t */\n\tget scene() {\n\t\tif (this.sceneData) {\n\t\t\treturn this.sceneData;\n\t\t}\n\t}\n\tset scene(sceneData) {\n\t\tthis.$aframeSky.sky = sceneData.panorama;\n\t\tthis.sceneData = this.lastPublished = sceneData; // { _id, sceneLinks, hotSpots, sky };\n\t}\n\n\t/**\n\t * Method for `Array.splice()`ing items out of scene elements (`sceneLinks`,\n\t * `hotSpots`) for removal from the active scene (what is being viewed, not\n\t * necessarily what is saved on the server).\n\t *\n\t * Confirms with the user before deleting, saves a draft after, and\n\t * offers to publish once removed (which will commit the changes).\n\t *\n\t * @example\n\t * $aframeScene.removeItemFrom(\n\t *   { name: 'thing' },\n\t *   [{ name: 'thing' }, { name: 'thung' }, { name: 'thong' }],\n\t *   () => this.updateView()\n\t * );\n\t * // ...results in:\n\t * // >> [{ name: 'thung' }, { name: 'thong' }]\n\t * \n\t * @param  {object}   \t\t item       The item being removed\n\t * @param  {Array<Object>} collection The array it will be removed from\n\t * @param  {Function} \t\t cb         Callback to run when item removed\n\t * @return {Promise}\t\t\t\t\t\t\t\t\tPromise resolves to result of toast\n\t */\n  removeItemFrom(item, collection, cb) {\n    this.$mdToast.show(this.toasts.confirm).then(response => {\n      if ( response == 'ok' ) {\n\t\t\t  const index = collection.indexOf(item);\n\t\t\t  if (index !== -1) {\n\t\t\t  \tcollection.splice(index, 1);\n\t      \tcb&&cb();\n\t      \treturn this.$mdToast.show(this.toasts.itemRemoved);\n\t\t\t  } \n      }\n    }).then(response => {\n      if ( response == 'ok' ) {\n      \tthis.$aframeEditor.publish();\n      }\n    });\n\t}\n\n\t/**\n\t * Method for `Array.push()`ing items onto the list of current scene\n\t * elements (`sceneLinks`, `hotSpots`) for display in the scene.\n\t *\n\t * Checks validity of collection and item; adds item and informs user\n\t * of the newly added item's default position. Offers to publish changes.\n\t * \n\t * @param {Object}   \t\t\titem       The item being added\n\t * @param {Array<Object>} collection The array it will be added to\n\t * @param {Function}\t\t\tcb         Callback to run when item added\n\t */\n\taddItemTo(item, collection, cb) {\n\t  if (isObject(item) && isArray(collection)) {\n\t  \tcollection.push(item)\n    \tcb&&cb(collection);\n    \tif (item.position && item.position.length) {\n    \t\tthis.toasts.itemAdded.textContent(`Item added at ${ item.position.join(', ') }!`);\n    \t}\n\t    this.$mdToast.show(this.toasts.itemAdded).then(response => {\n\t      if ( response == 'ok' ) {\n\t\t\t  \tthis.$aframeEditor.publish();\n\t      }\n\t    });\n\t  }\n\t}\n}\n\nexport default SceneService;\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/aframe/scene/scene.service.js","import angular from 'angular';\nimport skyComponent from './sky.component';\nimport skyService from './sky.service';\n\nlet skyModule = angular.module('aframe.sky', [])\n\n.component('aframeSky', skyComponent)\n\n.service('$aframeSky', skyService)\n\n.name;\n\nexport default skyModule;\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/aframe/sky/sky.js","import controller from './sky.controller';\n\nconst skyComponent = {\n  controller,\n  bindings: {\n    sky: '<',\n    preload: '<?'\n  },\n  require: {\n  \tSceneCtrl: '^aframeScene'\n  }\n};\n\n\nexport default skyComponent;\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/aframe/sky/sky.component.js","/**\n * The `SkyCtrl` class is largely responsible for\n * orchestrating the translation of URLs into IDs\n * and then into DOM elements for attaching to the scene.\n *\n * It attaches a single `<a-sky/>` the first time a sky is\n * loaded, and attaches `<img/>`s to the scenes assets\n * preload bucket based on the `$aframeSky` service's instructions.\n * \n * @memberOf app.components.aframe.sky\n */\nclass SkyController {\n\t/**\n\t * Initializes the controller's dependencies:\n\t * - Binds a special one-off $compile function for when\n\t * \t the scene's `<a-sky />` needs to be compiled\n\t * - Attaches the $aframeSky service directly\n\t * \n\t * @param  {object} $scope     The SkyCtrl's scope\n\t * @param  {object} $compile   Angular's compile service\n\t * @param  {object} $aframeSky The sky component's biz logic\n\t */\n\tconstructor($scope, $compile, $aframeSky) {\n\t\t'ngInject';\n\t\tthis.compileSkyEl = callback => $compile('<a-sky ng-src=\"{{ \\'#\\' + $ctrl.loadedSky }}\" />')($scope, callback);\n\t\tthis.$aframeSky = $aframeSky;\n\t}\n\n  /**\n\t * Store JQLite-wrapped `<a-scene>` and `<a-assets>`;\n\t * init internal check for right click event.\n   * \n   * @return {void}\t\tNo return\n   */\n  $onInit() {\n\t\t/**\n\t\t * Cache vars to store JQLite <img> and <a-sky>\n\t\t * Flag for init sky load and array of loaded skies\n\t\t * \n\t\t * @type {null}\n\t\t * @type {null}\n\t\t * @type {boolean}\n\t\t * @type {Array}\n\t\t */\n\t\tthis.$sceneEl = this.SceneCtrl.$sceneEl;\n\t\tthis.$assetsEl = this.SceneCtrl.$assetsEl;\n\t\tthis._skyElLoaded = false;\n\t\tthis._skyLoadedList = []; //this.$aframeSky.CircularBuffer(10);\n  }\n\n  /**\n   * Lifecycle hook that is invoked every time `SkyCtrl.sky`\n   * changes value. The first change is discarded since it will\n   * always return `null` or `undefined`.\n   * \n   * @param  {object} newData Incoming change object\n   */\n  $onChanges(newData) {\n  \tif (newData.sky.isFirstChange()) return;\n  \tlet skyUrl = newData.sky.currentValue;\n  \tif (skyUrl) this.setSky(skyUrl, this.assetIdFromSkyUrl(skyUrl));\n  }\n\n  /**\n   * Utility function for stripping the `public_id`\n   * property out of a URL segment in the form of\n   * `[version]/[path/to/image]/[public_id]`.\n   * \n   * @param  {string} skyUrl Panorama URL segment\n   * @return {string}        Panorama's public_id\n   */\n\tassetIdFromSkyUrl(skyUrl) {\n\t\treturn skyUrl.split('scenes/panorama/')[1].split('.')[0]\n\t}\n\n\t/**\n\t * Uses the $aframeSky service to fetch a server-generated\n\t * list of `skyUrl`s for asset preloading. It grabs the `_id`\n\t * of the current active scene from `SceneCtrl` and sends it\n\t * through `$aframeSky.getPreloadList()` to generate the list\n\t * based on scenelinks in the current active scene.\n\t *\n\t * `assetIdFromSkyUrl()` turns each `skyUrl` into an `assetId`,\n\t * which is checked against the list of preloaded assets.\n\t * If the asset hasn't been loaded and stored already, 'loadSkyAsset()'\n\t * queues it up for loading into the scene's `<a-assets></a-assets>`.\n\t * \n\t * @return {Promise} Promise that holds an array of skyUrls from server\n\t */\n\tpreload() {\n\t\tthis.$aframeSky.getPreloadList(this.SceneCtrl._currentSceneId)\n\t\t\t.then(toPreload => {\n\t\t\t\ttoPreload.forEach(skyUrl => {\n\t\t\t\t\tconst newAssetId = this.assetIdFromSkyUrl(skyUrl)\n\t\t\t\t\tif (!this._skyLoadedList.includes(newAssetId)) {\n\t\t\t\t\t\tthis.loadSkyAsset(skyUrl, newAssetId);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t})\n\t\t\t.catch(err => {\n\t\t\t\tconsole.warn(err);\n\t\t\t});\n\t}\n\n\t/**\n\t * Sets the current active sky to an `assetId`. This updates the\n\t * binding in the scene's `<a-sky ng-src=\"{{ $ctrl.loadedSky }}\" />`\n\t * to the provided `assetId`, which should match the `id=\"\"` of a\n\t * asset that has already been fully loaded since this represents\n\t * the largest and final change a user perceives when switching scenes.\n\t *\n\t * If this function is being called, it is safe to assume all\n\t * requisite loading steps for scene transition have completed, so\n\t * it is safe to `preload()` the next wave of assets.\n\t * \n\t * @param {string} assetId public_id of panorama that is done loading\n\t */\n\tsetSkyId(assetId) {\n\t\tthis.loadedSky = assetId;\n\t\tthis.preload();\n\t}\n\n\t/**\n\t * Acts as a buffer function to `setSkyId()` by checking if the\n\t * incoming assetId is already in the list of loaded skies \n\t * if the list includes the ID, `setSkyId()` is called on the ID\n\t * directly. If the ID is missing from the list, `loadSkyAsset()`\n\t * is initiated.\n\t * \n\t * `setSkyId()` is called after the promise is resolved inside its\n\t * `then()` method, where a check is also performed whether the\n\t * scene needs an `<a-sky />` element.\n\t * \n\t * @param {string} skyUrl  Panorama URL segment\n\t * @param {string} assetId Panorama's public_id\n\t */\n\tsetSky(skyUrl, assetId) {\n    return this._skyLoadedList.includes(assetId) ?\n      this.setSkyId(assetId) :\n      this.loadSkyAsset(skyUrl, assetId)\n      \t.then(assetId => {\n\t        if(!this._skyElLoaded) {\n\t          this.$skyEl = this.loadSkyEl();\n\t        }\n\t        this.setSkyId(assetId)\n\t      });\n\t}\n\n\t/**\n\t * Compiles a new image asset with requested URL and ID;\n\t * adds element to assets and ID to list to prevent reload.\n\t * \n\t * @param {string} skyUrl  Panorama URL segment\n\t * @param {string} assetId Panorama's public_id\n\t * @return {string}        The original assetId\n\t */\n\tloadSkyAsset(skyUrl, assetId) {\n\t\treturn this.$aframeSky.getSkyDomNode(skyUrl, assetId)\n\t\t\t.then(imgNode => {\n\t\t\t\tthis.$assetsEl.append(imgNode);\n\t\t\t\tthis._skyLoadedList.push(assetId);\n\t\t\t\tconsole.log('sky asset preloaded: ', skyUrl)\n\t\t\t\treturn assetId;\n\t\t\t})\n\t}\n\n\t/**\n\t * Runs the `compileSkyEl()` method from the constructor\n\t * to build the sky element; attaches it to the scene\n\t * and marks the element as loaded.\n\t * \n\t * @param  {string} sky ID for asset reference\n\t * @return {Element}    JQLite-wrapped <a-sky> element\n\t */\n\tloadSkyEl() {\n\t\treturn this.compileSkyEl(clone => {\n\t\t\tthis.$sceneEl.append(clone);\n\t\t\tthis._skyElLoaded = true;\n\t\t\treturn clone;\n\t\t});\n\t}\n}\n\nexport default SkyController;\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/aframe/sky/sky.controller.js","import { utils } from 'aframe';\n\nconst COMPRESS_MAX = 100, COMPRESS_FACTOR = 12;\n\n/**\n * The $aframeSky class is a service responsible for\n * the business logic of the aframeSky component.\n *\n * The SceneCtrl controller uses the `$aframeSky.sky`\n * getter/setter to detect changes to the active scene's\n * sky; the SkyCtrl controller uses the `getSkyDomNode()`\n * method to produce a fully loaded `<img>` for appending\n * the SceneCtrl.$assetsEl (`<a-assets>`).\n * \n * @memberOf app.components.aframe.sky\n */\nclass SkyService {\n\tconstructor($q, $tourApi, UserSession, GLOBAL_SETTINGS) {\n\t\t'ngInject';\n\t\tthis.$q = $q;\n\t\tthis.Preload = $tourApi.preload;\n\t\tthis.UserSession = UserSession;\n\n\t\tthis.imageApiUrl = GLOBAL_SETTINGS.imageApiUrl;\n\t}\n\t/**\n\t * Getter/setter for formatting sky URL from sceneData.\n\t * \n\t * @type {string}\n\t * @example\n\t * 'http://res.cloudinary.com/uoit-virtual-tour/image/upload/v1480529929/scenes/panorama/k23dnerigdctblxgq5vm.jpg'\n\t */\n\tget sky() {\n\t\treturn this.panorama ? [ this.panorama.version, this.panorama.public_id].join('/') : null;\n\t}\n\tset sky(panorama) {\n\t\tconsole.log('sky service set to:', panorama)\n\t\tthis.panorama = panorama;\n\t}\n\n\t/**\n\t * Utility function for reading and parsing user settings\n\t * based on aframe's isMobile() method and the UserSession\n\t * service's usage settings; parses into an object that\n\t * eventually becomes a Cloudinary URL component string.\n\t * \n\t * If the device is mobile, limit image resolution to 2048x1024\n\t * due to rendering limit.\n\t * \n\t * @return {string} Formatted Cloudinary setting string (`c_scale,f_auto,etc`)\n\t */\n\tgetSettings() {\n\t\tconst mobile = utils.device.isMobile(),\n\t\t\t\t\tlowRes = !this.UserSession.usage.resolution.val;\n\t\tconst settings = {\n\t\t\tw: mobile||lowRes ? 2048 : 4096,\n\t\t\th: mobile||lowRes ? 1024 : 2048,\n\t\t\tc: 'scale',\n\t\t\tf: 'auto',\n\t\t\tq: COMPRESS_MAX - (COMPRESS_FACTOR * this.UserSession.usage.compression.val)\n\t\t}\n\t\tconst output = [];\n\t\tObject.keys(settings).forEach(key => {\n\t\t\toutput.push(`${key}_${settings[key]}`)\n\t\t})\n\t\treturn output.join(',');\n\t}\n\n\t/**\n\t * Fetches an efficiently-generated list of `skyUrl`s\n\t * from the server, which uses a scene `_id` to read\n\t * potential candidates for preloading from the scene's\n\t * scenelinks.\n\t *\n\t * If the `UserSession` service's preloading settings are\n\t * set to 1 or 2, it returns the full list for further\n\t * manipulation; otherwise, it returns an empty array\n\t * (0/no preload).\n\t * \n\t * @param  {string} id The _id of a scene to preload links for\n\t * @return {Promise}   A promise that will fulfill the preload list\n\t */\n\tgetPreloadList(id) {\n\t\treturn this.$q((resolve, reject) => {\n\t\t\tswitch(this.UserSession.usage.preloading.val) {\n\t\t\t\tcase 0:\n\t\t\t\t\tresolve([]);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 1:\n\t\t\t\tcase 2:\n\t\t\t\t\tthis.Preload.get({ id }).$promise.then(data => resolve(data));\n\t\t\t\t\tbreak;\n\t\t\t\tdefault: \n\t\t\t\t\treject('Can\\'t determine preload settings')\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Converts a skyUrl and an assetId into a fully\n\t * compiled DOM element; returns a promise representing\n\t * a sky asset that will eventually be fully loaded.\n\t *\n\t * Uses `getSettings()` to parse userSession settings\n\t * into a Cloudinary setting string.\n\t * \n\t * @param  {string} url Partial URL, e.g. `this.sky` getter/setter\n\t * @param  {string} id  An asset ID, e.g. the panorama's `public_id`\n\t * @return {Promise}    A promise that will resolve to the loaded `<img>`\n\t */\n\tgetSkyDomNode(url, id) {\n\t  return this.$q((resolve, reject) => {\n\t\t\tconst img = angular.element(`<img src=\"${ this.imageApiUrl }/${ this.getSettings() }/v${ url }\" id=\"${ id }\" crossOrigin=\"anonymous\" />`);\n\t    img.on('load', () => resolve(img));\n\t    img.on('error', () => reject('Image load error'));\n\t  });\n\t}\n}\n\nexport default SkyService;\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/aframe/sky/sky.service.js","import angular from 'angular';\nimport uiRouter from 'angular-ui-router';\nimport angulartics from 'angulartics';\nimport angularticsGa from 'angulartics-google-analytics';\nimport scenelinkDirective from './scenelink.directive';\n\nconst scenelinkModule = angular.module('aframe.scenelink', [\n  uiRouter,\n  angulartics,\n\tangularticsGa\n])\n\n.directive('sceneLink', scenelinkDirective)\n\n.name;\n\nexport default scenelinkModule;\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/aframe/scenelink/scenelink.js","import template from './scenelink.html';\n\nfunction scenelinkDirective($state, $popupWindow, $tourApi, $analytics) {\n  'ngInject';\n  return {\n  \ttemplate,\n    restrict: 'A',\n    scope: {\n    \tsceneLink: '='\n    },\n    require: '^aframeScene',\n\t\tlink(scope, elem, attrs, SceneCtrl) {\n\t\t\tconst SceneResource = $tourApi.scene,\n\t\t\t\t\t\tLocationResource = $tourApi.location;\n\t\t\t//  and handlers: success...\n\t\t\tconst gotoSceneHandler = data => {\n\t\t\t\t$analytics.eventTrack('click', { category: 'scenelink', label: [data.scene.parent.code, data.scene.code].join('_') });\n\t\t\t\t$state.transitionTo('scene', { location: data.location.code, building: data.scene.parent.code, scene: data.scene.code });\n\t\t\t\t// $state.go('scene', { building: data.parent.code, scene: data.code });\n\t\t\t}\n\t\t\t// ...and error\n\t\t\tconst errorHandler = error => {\n\t\t\t  const locals = {\n\t\t\t\t\ttype: 'Scene load error!',\n\t\t\t\t\tmessage: 'Looks like this scene link is broken  darn.'\n\t\t  \t}\n\t\t\t\t$popupWindow.error({ locals });\n\t\t\t}\n\t\t\t//\n\t\t\t// Listen for clicks on scene link element\n\t\t\tscope.elemClick =  () => {\n\t\t\t\t// If there's a right click active...\n\t\t\t\tif (SceneCtrl._rightClick && SceneCtrl._editable) {\n\t\t\t\t\t// ...open the scene link editor:\n\t\t\t\t\tSceneCtrl.editItem(SceneCtrl._rightClick, scope.sceneLink, SceneCtrl.sceneLinks);\n\t\t\t\t} else {\n\t\t\t\t\t// ...otherwise just use the default scene link behavior\n\t\t\t\t\tdocument.getElementById(`link_${scope.sceneLink._id}`).emit('goto');\n\t\t\t\t\tlet scene;\n\t\t\t\t\tSceneResource.get({ id: scope.sceneLink.scene._id }).$promise\n\t\t\t\t\t\t.then(data => {\n\t\t\t\t\t\t\tscene = data;\n\t\t\t\t\t\t\treturn LocationResource.get({ id: scene.parent.parent }).$promise;\n\t\t\t\t\t\t}) //**\n\t\t\t\t\t\t.then(location => ({ location, scene }) ) //**\n\t\t\t\t\t\t.then(gotoSceneHandler, errorHandler);\n\t\t\t\t}\n\t\t\t};\n\t\t\t// elem.on('click', elemClick);\n    }\n  };\n}\n\nexport default scenelinkDirective;\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/aframe/scenelink/scenelink.directive.js","module.exports = \"<a-entity ng-attr-position=\\\"{{ sceneLink.position.join(' ') }}\\\"\\n\\t\\t\\t\\t\\tng-attr-rotation=\\\"{{ sceneLink.rotation.join(' ') }}\\\">\\n  <scene-link ng-attr-id=\\\"{{ ::sceneLink._id }}\\\"\\n              color=\\\"#0077CA\\\"\\n              opacity=\\\"0.85\\\"\\n              hover-animation=\\\"scaleFactor:1.1;colorFactor:#c71566;opacityFactor:0.7\\\"\\n              ui-sref=\\\"scene({ location: sceneLink.scene.parent.parent.code, building: sceneLink.scene.parent.code, scene: sceneLink.scene.code })\\\">\\n\\t  <!-- <a-animation attribute=\\\"rotation\\\" begin=\\\"goto\\\" dur=\\\"500\\\" to=\\\"360 0 90\\\"></a-animation> -->\\n  </scene-link>\\n\\t<a-animation attribute=\\\"scale\\\" begin=\\\"goto\\\" dur=\\\"100\\\" to=\\\"0 0 0\\\"></a-animation>\\n</a-entity>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/components/aframe/scenelink/scenelink.html\n// module id = 585\n// module chunks = 0","import angular from 'angular';\nimport uiRouter from 'angular-ui-router';\nimport angulartics from 'angulartics';\nimport angularticsGa from 'angulartics-google-analytics';\nimport hotspotDirective from './hotspot.directive';\n\nconst hotspotModule = angular.module('aframe.hotspot', [\n  uiRouter,\n  angulartics,\n\tangularticsGa\n])\n\n.directive('hotSpot', hotspotDirective)\n\n.name;\n\nexport default hotspotModule;\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/aframe/hotspot/hotspot.js","import template from './hotspot.html';\n\nfunction hotspotDirective($state, $mapApi, $popupWindow, $analytics) {\n  'ngInject';\n  return {\n\t  template,\n    restrict: 'A',\n    scope: {\n    \thotSpot: '='\n    },\n    require: '^aframeScene',\n\t\tlink(scope, elem, attrs, SceneCtrl) {\n\t\t\tconst FeatureResource = $mapApi.feature;\n\t\t\tconst hotspotId = scope.hotSpot._id;\n\n\t\t\t//  and handlers: success...\n\t\t\tconst viewHotspot = data => {\n\t\t\t\tconst { category, desc, href, name } = data.properties || data,\n\t\t\t\t\t\t\tlocals = { type: 'hotspot', category, desc, href, name };\n\t\t\t\t$analytics.eventTrack('click', { category: 'hotspot', label: hotspotId });\n\t\t\t\treturn $popupWindow.info({ locals });\n\t\t\t}\n\t\t\t// ...and error\n\t\t\tconst errorHandler = error => {\n\t\t\t  const locals = {\n\t\t\t\t\ttype: 'Hotspot load error!',\n\t\t\t\t\tmessage: 'Looks like this hotspot is broken  darn.'\n\t\t  \t}\n\t\t\t\t$popupWindow.error({ locals });\n\t\t\t}\n\n\t\t\t// Listen for clicks on scene link element\n\t\t\tscope.elemClick = () => {\n\t\t\t\t// If there's a right click active...\n\t\t\t\tif (SceneCtrl._rightClick && SceneCtrl._editable) {\n\t\t\t\t\t// ...open the scene link editor:\n\t\t\t\t\tSceneCtrl.editItem(SceneCtrl._rightClick, scope.hotSpot, SceneCtrl.hotSpots);\n\t\t\t\t} else {\n\t\t\t\t\tdocument.getElementById(`hotSpot_${hotspotId}`).emit('goto');\n\t\t\t\t\tif (scope.hotSpot.linked && scope.hotSpot.feature) {\n\t\t\t\t\t\tFeatureResource.get({\n\t\t\t\t\t\t\tid: scope.hotSpot.feature\n\t\t\t\t\t\t}).$promise\n\t\t\t\t\t\t\t.then(data => viewHotspot(data), errorHandler)\n\t\t\t\t\t\t\t.then(result => {\n\t\t\t\t\t\t\t\t// ...\n\t\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tviewHotspot(scope.hotSpot)\n\t\t\t\t\t\t\t.then(result => {\n\t\t\t\t\t\t\t\t// ...\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\t// elem.on('click', elemClick);\n    }\n\t  //\n  };\n}\n\nexport default hotspotDirective;\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/aframe/hotspot/hotspot.directive.js","module.exports = \"<a-entity\\n\\tng-attr-position=\\\"{{ hotSpot.position.join(' ') }}\\\" look-at=\\\"[camera]\\\">\\n\\t<a-entity>\\n\\t\\t<a-torus \\n\\t\\t\\tarc=\\\"360\\\"\\n\\t\\t\\tradius=\\\"0.25\\\"\\n\\t\\t\\tradius-tubular=\\\"0.015\\\"\\n\\t\\t\\tsegments-tubular=\\\"32\\\"\\n\\t\\t\\trotation=\\\"0 0 0\\\"\\n\\t\\t\\tmixin=\\\"mixin-blue\\\"\\n\\t\\t\\tshader=\\\"flat\\\"\\n\\t\\t\\tng-click=\\\"elemClick()\\\"\\n\\t\\t\\tevent-set__1=\\\"_event: mouseenter; material.opacity: 0.6; material.color: #C71566;\\\"\\n\\t\\t\\tevent-set__2=\\\"_event: mouseleave; material.opacity: 0.85; material.color: #0077CA;\\\"\\n\\t\\t\\tevent-set__3=\\\"_event: focus; material.opacity: 0.6; material.color: #C71566;\\\"\\n\\t\\t\\tevent-set__4=\\\"_event: blur; material.opacity: 0.85; material.color: #0077CA;\\\">\\n\\t\\t\\t<a-animation\\n\\t\\t\\t\\tbegin=\\\"goto\\\"\\n\\t\\t\\t\\tattribute=\\\"rotation\\\"\\n\\t\\t\\t\\tfrom=\\\"0 0 0\\\"\\n\\t\\t\\t\\tto=\\\"0 720 0\\\"\\n\\t\\t\\t\\tdur=\\\"500\\\">\\n\\t\\t\\t</a-animation>\\n\\t\\t\\t<a-entity\\n\\t\\t\\t\\tposition=\\\"-0.025 -0.165 -0.01\\\"\\n\\t\\t\\t\\tscale=\\\"0.6 0.6 0.6\\\"\\n\\t\\t\\t\\ttext=\\\"text:i\\\"\\n\\t\\t\\t\\tmaterial=\\\"shader: flat;color:#0077CA;\\\"\\n\\t\\t\\t\\tevent-set__1=\\\"_event: mouseenter; material.opacity: 0.6; material.color: #C71566;\\\"\\n\\t\\t\\t\\tevent-set__2=\\\"_event: mouseleave; material.opacity: 0.85; material.color: #0077CA;\\\"\\n\\t\\t\\t\\tevent-set__3=\\\"_event: focus; material.opacity: 0.6; material.color: #C71566;\\\"\\n\\t\\t\\t\\tevent-set__4=\\\"_event: blur; material.opacity: 0.85; material.color: #0077CA;\\\">\\n\\t\\t\\t</a-entity>\\n\\t\\t\\t<a-entity \\n\\t\\t\\t\\tng-attr-id=\\\"hotSpot_{{ ::hotSpot._id }}\\\"\\n\\t\\t\\t\\tscale=\\\"0.5 0.5 0.5\\\"\\n\\t\\t\\t\\tvisible=\\\"false\\\"\\n\\t\\t\\t\\tevent-set__1=\\\"_event: mouseenter; visible: true;\\\"\\n\\t\\t\\t\\tevent-set__2=\\\"_event: mouseleave; visible: false;\\\">\\n\\t\\t\\t\\t<a-sphere radius=\\\"0.6\\\"  mixin=\\\"mixin-glow\\\">\\n\\t\\t\\t\\t\\t<a-animation\\n\\t\\t\\t\\t\\t\\tattribute=\\\"scale\\\"\\n\\t\\t\\t\\t\\t\\tfrom=\\\"0.9 0.9 0.9\\\"\\n\\t\\t\\t\\t\\t\\tto=\\\"1.25 1.25 1.25\\\"\\n\\t\\t\\t\\t\\t\\trepeat=\\\"indefinite\\\"\\n\\t\\t\\t\\t\\t\\tdirection=\\\"alternate\\\"\\n\\t\\t\\t\\t\\t\\tdur=\\\"1500\\\">\\n\\t\\t\\t\\t\\t</a-animation>\\n\\t\\t\\t\\t</a-sphere>\\n\\t\\t\\t\\t<a-sphere radius=\\\"0.6\\\" mixin=\\\"mixin-glow\\\">\\n\\t\\t\\t\\t\\t<a-animation\\n\\t\\t\\t\\t\\t\\tattribute=\\\"scale\\\"\\n\\t\\t\\t\\t\\t\\tfrom=\\\"1 1 1\\\"\\n\\t\\t\\t\\t\\t\\tto=\\\"1.5 1.5 1.5\\\"\\n\\t\\t\\t\\t\\t\\trepeat=\\\"indefinite\\\"\\n\\t\\t\\t\\t\\t\\tdirection=\\\"alternate\\\"\\n\\t\\t\\t\\t\\t\\tdur=\\\"1500\\\">\\n\\t\\t\\t\\t\\t</a-animation>\\n\\t\\t\\t\\t</a-sphere>\\n\\t\\t\\t</a-entity>\\n\\t\\t</a-torus>\\n\\t\\t<a-animation\\n\\t\\t\\tattribute=\\\"rotation\\\"\\n\\t\\t\\tfrom=\\\"0 0 0\\\"\\n\\t\\t\\tto=\\\"0 360 0\\\"\\n\\t\\t\\trepeat=\\\"indefinite\\\"\\n\\t\\t\\tdirection=\\\"alternate\\\"\\n\\t\\t\\tdur=\\\"2000\\\">\\n\\t\\t</a-animation>\\n\\t</a-entity>\\n</a-entity>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/components/aframe/hotspot/hotspot.html\n// module id = 588\n// module chunks = 0","import angular from 'angular';\nimport ngMaterial from 'angular-material';\n\nimport editorDirective from './editor.directive';\nimport editorComponent from './editor.component';\nimport editorService from './editor.service';\n\nimport template from './editorDialog.html';\nimport controller from './editorDialog.controller';\n\nlet editorModule = angular.module('aframe.editor', [\n  ngMaterial\n])\n\n.directive('editable', editorDirective)\n\n.component('sceneEditor', editorComponent)\n\n.service('$aframeEditor', editorService)\n\n.config(($mdPanelProvider) => {\n  'ngInject';\n\t$mdPanelProvider.definePreset('editorDialog', {\n\t\ttemplate,\n\t\tcontroller,\n    attachTo: angular.element(document.body),\n    controllerAs: '$ctrl',\n\t  bindToController: true,\n    panelClass: 'editor-dialog',\n\t\tclickOutsideToClose: true,\n\t\tescapeToClose: true,\n    focusOnOpen: true,\n    zIndex: 85\n  });\n})\n\n.constant('EDITOR_MESSAGES', {\n\tconfirm: {\n\t\ttextContent: 'Are you sure?',\n\t\taction: 'Confirm',\n\t\thighlightAction: true,\n\t\thighlightClass: 'md-warn',\n\t\tposition: 'bottom left',\n\t\thideDelay: 0\n\t},\n\titemRemoved: {\n\t\ttextContent: 'Item removed!',\n\t\taction: 'Publish changes',\n\t\thighlightAction: true,\n\t\thighlightClass: 'md-primary',\n\t\tposition: 'bottom left',\n\t\thideDelay: 5000\n\t},\n\titemAdded: {\n\t\ttextContent: 'Item added!',\n\t\taction: 'Publish changes',\n\t\thighlightAction: true,\n\t\thighlightClass: 'md-primary',\n\t\tposition: 'bottom left',\n\t\thideDelay: 5000\n\t},\n\tdraftLoaded: {\n\t\ttextContent: 'Draft loaded!',\n\t\taction: 'Publish changes',\n\t\thighlightAction: true,\n\t\thighlightClass: 'md-primary',\n\t\tposition: 'bottom left',\n\t\thideDelay: 5000\n\t},\n\tsaveDraft: {\n\t\ttextContent: 'Draft saved!',\n\t\taction: 'Publish changes',\n\t\thighlightAction: true,\n\t\thighlightClass: 'md-primary',\n\t\tposition: 'bottom left',\n\t\thideDelay: 5000\n\t},\n\tdraftFound: {\n\t\ttextContent: 'Saved drafts found!',\n\t\taction: 'Load most recent',\n\t\thighlightAction: true,\n\t\thighlightClass: 'md-primary',\n\t\tposition: 'bottom left',\n\t\thideDelay: 5000\n\t},\n\tpublish: {\n\t\ttextContent: 'Changes published!',\n\t\taction: 'Dismiss',\n\t\tposition: 'bottom left',\n\t\thideDelay: 5000\n\t},\n\tdiscardDraft: {\n\t\ttextContent: 'Draft discarded!',\n\t\taction: 'Dismiss',\n\t\tposition: 'bottom left',\n\t\thideDelay: 1000\n\t},\n\trevertToDraft: {\n\t\ttextContent: 'Reverted to last draft!',\n\t\taction: 'Dismiss',\n\t\tposition: 'bottom left',\n\t\thideDelay: 2000\n\t}\n})\n\n.constant('DATA_MODELS', {\n\tscene: {\n\t\tname: '',\n\t\tcode: '',\n\t\t// state: ''\n\t\tparent: '',\n\t\tpanorama: ''//{}\n\t\t// sceneLinks: []\n\t\t// hotSpots: []\n\t\t// assets: []\n\t\t// entities: []\n\t\t// script: ''\n\t},\n\tsceneLinks: {\n\t\tscene: '',\n\t\tposition: [\n\t\t\t0,\n\t\t\t0,\n\t\t\t0\n\t\t],\n\t\trotation: [\n\t\t\t0,\n\t\t\t0,\n\t\t\t70\n\t\t]\n\t},\n\thotSpots: {\n\t\tlinked: false,\n\t\tname: '',\n\t\tdesc: '',\n\t\tfeature: '',\n\t\tposition: [\n\t\t\t0,\n\t\t\t0,\n\t\t\t0\n\t\t]\n\t}\n})\n\n.name;\n\nexport default editorModule;\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/aframe/editor/editor.js","function editorDirective($analytics) {\n  'ngInject';\n  return {\n    restrict: 'A',\n    scope: {\n    \teditable: '@'\n    },\n    require: '^aframeScene',\n\t\tlink(scope, elem, attrs, SceneCtrl) {\n\t\t\tconst openEditor = event => {\n\t\t\t\t// If there's a right click active...\n\t\t\t\tconsole.log(scope.$parent)\n\t\t\t\tif (SceneCtrl._rightClick && SceneCtrl._editable) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t// ...open the scene link editor:\n\t\t\t\t\tSceneCtrl.editItem(SceneCtrl._rightClick, scope.$parent[scope.editable], SceneCtrl[`${scope.editable}s`]);\n\t\t\t\t\t$analytics.eventTrack('click', {\n\t\t\t\t\t\tcategory: 'edit:scene',\n\t\t\t\t\t\tlabel: scope.$parent[scope.editable]._id\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\t\t\telem.on('click', openEditor);\n    }\n  };\n}\n\nexport default editorDirective;\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/aframe/editor/editor.directive.js","import template from './editor.html';\nimport controller from './editor.controller';\nimport './editor.scss';\n\n/**\n * The scene editor is an attachment for the scene\n * component that allows in-scene editing of scene elements.\n * It should only be rendered directly by the server, when\n * an admin user is logged in.\n * @example\n * <aframe-scene> <!-- required -->\n *   <scene-editor></scene-editor>\n * </aframe-scene>\n */\nconst editorComponent = {\n\ttemplate,\n\tcontroller,\n  require: {\n  \tSceneCtrl: '^aframeScene'\n  }\n};\n\nexport default editorComponent;\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/aframe/editor/editor.component.js","module.exports = \"<md-fab-toolbar md-open=\\\"demo.isOpen\\\" count=\\\"demo.count\\\" md-direction=\\\"left\\\">\\n  <md-fab-trigger class=\\\"align-with-text\\\">\\n    <md-button aria-label=\\\"Open scene editor menu\\\" class=\\\"md-fab md-primary\\\">\\n\\t\\t  <md-tooltip md-direction=\\\"left\\\" md-autohide ng-if=\\\"!$root.appSettings.settings.showHints.val\\\">\\n\\t\\t    Open scene editor menu\\n\\t\\t  </md-tooltip>\\n      <ng-md-icon icon=\\\"edit\\\"></ng-md-icon>\\n    </md-button>\\n  </md-fab-trigger>\\n\\n  <md-toolbar>\\n    <md-fab-actions class=\\\"md-toolbar-tools\\\" ng-mouseleave=\\\"$ctrl.tooltipMsg = false\\\">\\n      <md-button aria-label=\\\"New scene\\\" class=\\\"md-icon-button\\\" ng-mouseenter=\\\"$ctrl.tooltipMsg = 'New scene'\\\" ng-click=\\\"$ctrl.newScene($event)\\\">\\n        <ng-md-icon icon=\\\"insert_drive_file\\\"></ng-md-icon>\\n      </md-button>\\n      <span class=\\\"fab-divider\\\"></span>\\n      <md-button aria-label=\\\"New scene link\\\" class=\\\"md-icon-button\\\" ng-mouseenter=\\\"$ctrl.tooltipMsg = 'New scene link'\\\" ng-click=\\\"$ctrl.addItem($event, 'sceneLinks')\\\">\\n        <ng-md-icon icon=\\\"add_location\\\"></ng-md-icon>\\n      </md-button>\\n      <md-button aria-label=\\\"photo\\\" class=\\\"md-icon-button\\\" ng-mouseenter=\\\"$ctrl.tooltipMsg = 'New hotspot'\\\" ng-click=\\\"$ctrl.addItem($event, 'hotSpots')\\\">\\n        <ng-md-icon icon=\\\"info_outline\\\"></ng-md-icon>\\n      </md-button>\\n      <span class=\\\"fab-divider\\\"></span>\\n      <md-button aria-label=\\\"Save draft\\\" class=\\\"md-icon-button\\\" ng-mouseenter=\\\"$ctrl.tooltipMsg = 'Save draft'\\\" ng-click=\\\"$ctrl.saveDraft()\\\">\\n        <ng-md-icon icon=\\\"save\\\"></ng-md-icon>\\n      </md-button>\\n\\n      <md-menu md-offset=\\\"0 -7\\\">\\n        <md-button aria-label=\\\"Load draft\\\" class=\\\"md-icon-button\\\" ng-mouseenter=\\\"$ctrl.tooltipMsg = 'Load draft'\\\" ng-click=\\\"$ctrl.checkForDraft(false);$mdOpenMenu($event)\\\">\\n\\t        <ng-md-icon icon=\\\"folder_open\\\"></ng-md-icon>\\n\\t      </md-button>\\n        <md-menu-content width=\\\"6\\\" ng-switch=\\\"$ctrl.draftList.length\\\">\\n          <md-menu-item ng-repeat=\\\"draft in $ctrl.draftList\\\">\\n            <md-button ng-click=\\\"$ctrl.loadDraft(draft)\\\" ng-attr-id=\\\"draft_{{ ::draft.updatedAt }}\\\">{{ draft.updatedAt | date:'medium' }}</md-button>\\n            <md-button ng-click=\\\"$ctrl.discardDraft(draft)\\\" class=\\\"md-icon-button md-raised md-warn\\\" aria-label=\\\"Discard this draft\\\" aria-labelledby=\\\"draft_{{ ::draft.updatedAt }}\\\">\\n\\t\\t\\t        <ng-md-icon icon=\\\"delete\\\" size=\\\"22\\\"></ng-md-icon>\\n\\t\\t\\t      </md-button>\\n          </md-menu-item>\\n          <md-menu-item ng-hide=\\\"$ctrl.draftList.length\\\">\\n          \\t<span>No drafts available</span>\\n          </md-menu-item>\\n        </md-menu-content>\\n      </md-menu>\\n\\n      <md-button aria-label=\\\"Publish changes\\\" class=\\\"md-icon-button\\\" ng-mouseenter=\\\"$ctrl.tooltipMsg = 'Publish changes'\\\" ng-click=\\\"$ctrl.publish()\\\">\\n        <ng-md-icon icon=\\\"publish\\\"></ng-md-icon>\\n      </md-button>\\n      <md-button ng-show=\\\"$ctrl.tooltipMsg\\\">{{ $ctrl.tooltipMsg }}</md-button>\\n    </md-fab-actions>\\n  </md-toolbar>\\n</md-fab-toolbar>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/components/aframe/editor/editor.html\n// module id = 592\n// module chunks = 0","/**\n * This controller is only instantiated with the server-rendered\n * editor component. It works by mounting a number of its\n * behaviours onto the scene component's `SceneCtrl` directly\n * and by proxying the `$aframeScene` service.\n * \n * @param {Object} $mdPanel      ng-material's panel service\n * @param {Object} $mdDialog     ng-material's dialog service\n * @param {Object} $aframeScene  The scene service\n * @param {Object} $aframeEditor The editor service\n * @param {Object} DATA_MODELS\t Database schema representations\n */\nclass EditorController {\n\tconstructor($timeout, $mdPanel, $mdDialog, $aframeScene, $aframeEditor, DATA_MODELS) {\n\t\t'ngInject';\n\t\tthis.$timeout = $timeout;\n\t\tthis.$mdPanel = $mdPanel;\n\t\tthis.$mdDialog = $mdDialog;\n\t\tthis.$aframeScene = $aframeScene;\n\t\tthis.$aframeEditor = $aframeEditor;\n\t\t/**\n\t\t * Property to store the state of the current scene with regard to\n\t\t * whether there are unsaved changes.\n\t\t * \n\t\t * @memberof EditorCtrl\n\t\t * @type {Boolean}\n\t\t */\n\t\tthis._unpublishedChanges = false;\n\t\t/**\n\t\t * Editor's reference to what the database's data schema's should look like.\n\t\t * \n\t\t * @memberof EditorCtrl\n\t\t * @type {Object}\n\t\t */\n\t\tthis._schemas = DATA_MODELS;\n\t}\n\n\t/**\n\t * Utility method for keeping controller's model of scene data in\n\t * sync with `$aframeScene`'s.\n\t * \n\t * @param  {Object} data Scene data to update with\n\t */\n\tupdateSceneData(data) {\n\t\tObject.assign(this.SceneCtrl, data);\n\t\tthis.$aframeScene.scene = data;\n\t\tconsole.info('updated scene with data from editor:', data);\n\t}\n\n\t/**\n\t * Proxy method for `$aframeEditor.saveDraft()`.\n\t * \n\t * @param  {Boolean}\tnotify\tWhether to inform user of success.\n\t */\n\tsaveDraft(notify = true) {\n\t\tthis.$aframeEditor.saveDraft(notify);\n\t}\n\n\t/**\n\t * Proxy method for `$aframeEditor.loadDraft()`.\n\t * \n\t * @param  {Object}   draft   Chosen draft from draftList\n\t * @param  {Boolean}\tnotify\tWhether to inform user of success.\n\t */\n\tloadDraft(draft, notify = true) {\n\t\tthis.$aframeEditor.loadDraft(draft._id, notify)\n\t\t\t.then(draftContent => this.updateSceneData(draftContent));\n\t}\n\n\t/**\n\t * Calls `$aframeEditor.checkForDraft()` and sets the controller's\n\t * `draftList` property to an array of drafts resolved from promise.\n\t *\n\t * If drafts are found, notifies the user; offers to load the latest draft.\n\t * Loads draft if user confirms and updates the scene data accordingly.\n\t * \n\t * @param {Boolean}\tnotify\tWhether to inform the user with toast\n\t */\n\tcheckForDraft(notify = true) {\n\t\tthis.draftList = null;\n\t\tthis.$aframeEditor.checkForDraft(notify)\n\t\t\t.then(drafts => {\n\t\t\t\tthis.draftList = drafts;\n\t\t\t\treturn drafts.length&&notify&&this.$aframeEditor.draftFound(drafts);\n\t\t\t})\n\t\t\t.then(foundDraftContent => foundDraftContent&&this.updateSceneData(foundDraftContent));\n\t}\n\n\t/**\n\t * Confirms with user that they would like to discard the draft\n\t * in question; calls `$aframeEditor.discardDraft()` if user confirms.\n\t * \n\t * @param {Object}  draft   The draft to discard\n\t * @param {Boolean}\tnotify\tWhether to inform user with toast\n\t */\n\tdiscardDraft(draft, notify = true) {\n\t\tconst confirm = this.$mdDialog.confirm()\n      .title('Are you sure?')\n      .textContent('This action cannot be undone.')\n      .ok('Confirm')\n      .cancel('Cancel');\n    this.$mdDialog.show(confirm).then(() => {\n\t\t\tthis.$aframeEditor.discardDraft(draft._id, notify);\n    });\n\t}\n\n\t/**\n\t * Calls `$aframeEditor.publish()` directly (proxy method); updates\n\t * scene data immediately afterward to keep app and server in sync.\n\t * \n\t * @param  {Object|Boolean}  newData Data to publish or false\n\t * @param  {Boolean}         notify  Whether to inform user with toast\n\t * @return {Promise} \t\t\t\t\t\t\t\t Resolves to updated scene data\n\t */\n\tpublish(newData, notify = true) {\n\t\treturn this.$aframeEditor.publish(newData, notify)\n\t\t\t.then(sceneData => this.updateSceneData(sceneData));\n\t}\n\n\t/**\n\t * The editor controller's `$onInit` hook takes care of attaching a few\n\t * editor methods and properties directly on the scene controller  it's\n\t * strategy is to define and intialize all editor behaviour _separate_ from\n\t * the scene, so that non-admin users do not have any of its behaviours\n\t * attached (or included).\n\t *\n\t * The things it attaches are:\n\t * - A contextmenu listener: since a number of components have different actions\n\t * based on right clicks, a general \"flag\" needs to be set on the scene\n\t * controller (`_rightclick`) so components can just check for the flag on any scene click.\n\t *   - Also attaches `$onDestroy` for cleanup\n\t * - The editor's `checkForDraft()` and `openEditor()` methods\n\t * - An `_editable` flag that allows the scene controller to display the UI\n\t */\n\t$onInit() {\n\t\tconst contextMenu = event => {\n\t\t  event.stopPropagation();\n\t\t\tif (!this.SceneCtrl._rightClick) {\n\t\t\t\tthis.SceneCtrl._rightClick = event;\n\t\t\t\tevent.preventDefault();\n\t\t\t\tthis.SceneCtrl.$sceneEl.on('mouseup', () => {\n\t\t\t\t\tthis.SceneCtrl.$sceneEl.off('mouseup');\n\t\t\t\t\tthis.$timeout(() => {\n\t\t\t\t\t\tthis.SceneCtrl._rightClick = false;\n\t\t\t\t\t})\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t\tthis.SceneCtrl.$sceneEl.on('contextmenu', contextMenu);\n\t  this.SceneCtrl.$onDestroy = () => {\n\t\t\tthis.$sceneEl.off('contextmenu', contextMenu);\n\t  }\n\n\t\tthis.SceneCtrl.checkForDraft = () => this.checkForDraft();\n\t\tthis.SceneCtrl.editItem = (ev, item, collection) => this.editItem(ev, item, collection);\n\n\t\tthis.SceneCtrl._editable = true;\n\t}\n\n\t/**\n\t * Queues up a new item (hotSpot/sceneLink/entity/etc) for addition to the current\n\t * scene. Only collections that have their model explicitly defined in `DATA_MODELS`\n\t * **and** as an option in the editor 'add item' selection (`_editor.html`) will be\n\t * available for use.\n\t * \n\t * @param  {Event}   ev         The mouseEvent that called the method\n\t * @param  {Array}   collection Collection of scene elements to add item to\n\t * @return {Promise} \t\t\t\t\t\tPromise representing dialog reference\n\t */\n\taddItem(ev, collection) {\n\t\tconst locals = { item: this._schemas[collection] };\n\n\t\tlocals.newItem = true;\n    locals.publish = () => this.$aframeScene.addItemTo(locals.item, this.SceneCtrl[collection], newData => {\n\t\t\tthis.$aframeScene.scene[collection] = newData;\n\t\t\tthis._panelRef&&this._panelRef.close();\n\t\t});\n    locals.saveDraft = () => this.$aframeScene.addItemTo(locals.item, this.SceneCtrl[collection], newData => {\n\t\t\tthis.$aframeScene.scene[collection] = newData;\n\t\t\tthis.saveDraft();\n\t\t});\n\t\tlocals.removeThis = () => this._panelRef&&this._panelRef.close();\n\t\tlocals.closeDialog = locals.removeThis;\n\n\t\treturn this.openEditor(ev, locals);\n\t}\n\n\t/**\n\t * Queues up a new scene for creation/publishing. WIP.\n\t *\n\t * @todo Panorama upload\n\t * @todo Go to scene after created\n\t * \n\t * @param  {Event} ev The mouseEvent that called the method\n\t * @return {Promise}  Promise representing dialog reference\n\t */\n\tnewScene(ev) {\n\t\tconst locals = { item: this._schemas.scene };\n\n\t\tlocals.newItem = true;\n    locals.publish = () => {\n\t\t\tthis.$aframeEditor.publish(locals.item);\n\t\t\tthis._panelRef&&this._panelRef.close();\n\t\t};\n    locals.saveDraft = () => {\n    \tlocals.item.state = 'draft';\n    \tlocals.publish();\n\t\t};\n\t\tlocals.removeThis = () => this._panelRef&&this._panelRef.close();\n\t\tlocals.closeDialog = locals.removeThis;\n\n\t\treturn this.openEditor(ev, locals);\n\t}\n\n\t/**\n\t * Opens a generic context menu 'edit' dialog for scene elements. Mostly\n\t * proxies this controller's method's directly inside the editor dialog.\n\t * Includes a horizontal offset that approximates the width of most average\n\t * scene elements to center the dialog's origin.\n\t * \t\n\t * @param  {Event} ev         \t\t\t\tThe mouseEvent that called the method\n\t * @param  {Object} item       \t\t\t\tThe item to edit\n\t * @param  {Array<Object>} collection The item's collection in the scene\n\t * @return {Promise}  \t\t\t\t\t\t\t\tPromise representing dialog reference\n\t */\n\teditItem(ev, item, collection) {\n\n\t\tconst locals = { item };\n    locals.publish = () => this.publish();\n    locals.saveDraft = () => this.saveDraft();\n\t\tlocals.removeThis = () => this.$aframeScene.removeItemFrom(item, collection, () => {\n\t\t\tthis._panelRef&&this._panelRef.close();\n\t\t});\n\t\tlocals.closeDialog = () => this._panelRef&&this._panelRef.close();\n\n\t\treturn this.openEditor(ev, locals, { offsetY: -250 });\n\t}\n\n\t/**\n\t * Base method for layering other dialog types into. This method\n\t * handles the actual initialization of the editor dialog component\n\t * using the ng-material panel service's `$mdPanel.open()` method on\n\t * a panel preset built in `editor_config.js`.\n\t *\n\t * If the item loaded into the editor is considered \"new\", the dialog\n\t * is readied for the center of the screen; otherwise, it is placed\n\t * in the bottom-left. The animate-to-and-from is calculated using\n\t * the original MouseEvent that opened the dialog.\n\t *\n\t * An `onDomRemoved()` method is added to clean up the dialog scope\n\t * when its elements are removed; the scope is provided by a promise\n\t * returned by this method.\n\t * \n\t * @param  {Event} ev              \tThe mouseEvent that called the method\n\t * @param  {Object} locals          Local values to pass into dialog\n\t * @param  {Number} $2.offsetX \t\t\tPixels to shift dialog along X\n\t * @param  {Number} $2.offsetY \t\t\tPixels to shift dialog along Y\n\t * @return {Promise}  \t\t\t\t\t\t\tPromise representing dialog scope\n\t */\n\topenEditor(ev, locals, { offsetX = 0, offsetY = 0 } = {}) {\n\t\tconsole.log((ev.clientY + offsetY))\n\t\tconst position = this.$mdPanel.newPanelPosition();\n\t\tif (locals.newItem) {\n\t\t\tposition.absolute().center();\n\t\t} else {\n\t\t\tposition.absolute().bottom(0).left(0);\n\t\t}\n    const animation = this.$mdPanel.newPanelAnimation()\n      .openFrom({top: (ev.clientY + offsetY), left:( ev.clientX + offsetX) })\n      .withAnimation(this.$mdPanel.animation.SCALE)\n      .closeTo({top: (ev.clientY + offsetY), left:( ev.clientX + offsetX) });\n    const onDomRemoved = () => {\n\t\t\tthis._panelRef&&this._panelRef.destroy();\n\t\t};\n\n\t\treturn this.$mdPanel.open('editorDialog', {\n\t\t\tposition, animation, onDomRemoved, locals\n\t\t}).then(scope => {\n      this._panelRef = scope;\n    });\n\t}\n}\n\nexport default EditorController;\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/aframe/editor/editor.controller.js","import { pick } from 'lodash';\n/**\n * Service for handling all CRUD operations pertaining to scenes.\n *\n * Contains methods for drafting and publishing; interfaces directly\n * with the `$aframeScene` service for a reference to the current\n * scene object. Uses:\n * \n * - ng-material's `$mdToast` service to display UI messages to user\n * - the `$tourApi`'s scene resource and the `DraftResource` for CRUD ops\n * - the 'EDITOR_MESSAGES' constant to provide prebuilt dialogs and toasts\n * \n * @param  {object} $mdToast        ng-material's toast service\n * @param  {object} $tourApi        Tour $resource factory service\n * @param  {object} DraftResource   Draft $resource factory\n * @param  {object} EDITOR_MESSAGES Constant to define toast configs\n */\nclass EditorService {\n\tconstructor($mdToast, $aframeScene, $tourApi, DraftResource, EDITOR_MESSAGES) {\n\t\t'ngInject';\n\t\tthis.$mdToast = $mdToast;\n\t\tthis.$aframeScene = $aframeScene;\n\t\tthis.DraftResource = DraftResource;\n\t\tthis.SceneResource = $tourApi.scene;\n\t\t/**\n\t\t * Property to hold an array of fully initialized toast config objects; loops\n\t\t * through `EDITOR_MESSAGES` and sets properties using the methods provided\n\t\t * by `$mdToast.simple()`'s return.\n\t\t *\n\t\t * @memberof EditorService\n\t\t * @type {Object}\n\t\t */\n\t\tthis.toasts = {};\n\t\tObject.keys( EDITOR_MESSAGES ).forEach(type => {\n\t\t\tconst toast = $mdToast.simple();\n\t\t\tconst toastConfig = EDITOR_MESSAGES[type];\n\t\t\tObject.keys(toastConfig).forEach(prop => {\n\t\t\t\ttoast[prop]( toastConfig[prop] );\n\t\t\t});\n\t\t\tthis.toasts[type] = toast;\n\t\t});\n\t}\n\n\t/**\n\t * Sends an HTTP `POST` or `PATCH` request via the `$tourApi`'s\n\t * scene resource to publish (save) the current scene.\n\t *\n\t * If the scene is new, the first parameter of this method can be\n\t * passed the new scene data, which makes it implicity truthy and\n\t * tells the method to send the request as a new scene creation. If\n\t * left to default, it will stay false and the method will assume\n\t * the scene already exists and is being updated.\n\t * \n\t * In the case of an update, Lodash's `pick()` method is used to grab\n\t * applicable properties from the current `$aframeScene.scene` _without_\n\t * creating ones that don't exist. A new `updatedAt` property is assigned\n\t * a date for every action; if the data was new, the same date is given\n\t * to a `createdAt` property.\n\t * \n\t * @param  {Boolean}  _newData\tWhether incoming data should be treated as new\n\t * @param  {Boolean}  notify \t\tWhether to notify the user (toast)\n\t * @return {Promise} \t\t\t\t\t\tResolves to latest scene data\n\t */\n\tpublish(_newData = false, notify = true) {\n\t\tlet action = 'update';\n\t\tconst newData = _newData || pick(this.$aframeScene.scene, [\n\t\t\t'_id',\n\t\t\t'code',\n\t\t\t'name',\n\t\t\t'assets',\n\t\t\t'entities',\n\t\t\t'hotSpots',\n\t\t\t'sceneLinks',\n\t\t\t'panorama',\n\t\t\t'parent',\n\t\t\t'script'\n\t\t]);\n\t\tnewData.updatedAt = new Date();\n\t\tif (_newData) {\n\t\t\tnewData.createdAt = newData.updatedAt;\n\t\t\taction = 'save';\n\t\t}\n\n  \treturn this.SceneResource[action](_newData ? null : { \n  \t\tid: newData._id\n  \t}, newData)\n  \t.$promise.then(scene => {\n\t\t\tthis.lastPublished = this.$aframeScene.scene || scene;\n  \t\tnotify&&this.$mdToast.show(this.toasts.publish);\n  \t\treturn scene;\n  \t});\n\t}\n\n\t/**\n\t * Sends an HTTP `POST` request to save a draft of the current scene.\n\t * Offers to publish the scene when the draft is done saving; calls\n\t * `publish()` if the user confirms.\n\t * \n\t * @param  {Boolean} notify \tWhether to notify the user (toast)\n\t * @return {Promise} \t\t\t\t\tResolves to saved draft\n\t */\n\tsaveDraft(notify = true) {\n  \treturn this.DraftResource.save({\n  \t\tcontent: this.$aframeScene.scene,\n  \t\tkind: 'Scene',\n  \t\toriginal: this.$aframeScene.scene._id\n  \t}).$promise.then(draft => {\n\t  \tthis.lastDraft = draft.content;\n\t    notify&&this.$mdToast.show(this.toasts.saveDraft).then(response => {\n\t      if ( response == 'ok' ) {\n\t      \tthis.publish();\n\t      }\n\t    });\n\t    return draft;\n  \t});\n  }\n\n\t/**\n\t * If there is scene data available, queries the database by the current\n\t * scene ID via the `DraftResource` factory to check for active drafts\n\t * held by the current logged in user.\n\t * \n\t * @param  {Boolean}  notify \t\tWhether to notify the user (toast)\n\t * @return {Promise}            Promise that will resolve to draft list\n\t */\n\tcheckForDraft(notify = true) {\n\t\treturn (this.$aframeScene.scene)&&this.DraftResource.query({\n\t\t\tsort: '-updatedAt',\n\t\t\tfilter: {\n\t\t\t\toriginal: this.$aframeScene.scene._id\n\t\t\t}\n\t\t}).$promise;\n\t}\n\n\t/**\n\t * Informs a user that draft[s] have been found for the scene\n\t * they are viewing and offers to load the most recent draft; calls\n\t * `loadDraft()` if the user confirms and supplies it the `_id` of\n\t * the first draft in the found draft list.\n\t * \n\t * @param  {Array}   drafts A list of available drafts\n\t * @return {Promise}      \tResolves to toast result  loadDraft promise\n\t */\n\tdraftFound(drafts) {\n\t\treturn this.$mdToast.show(this.toasts.draftFound)\n\t\t\t.then( response => (response === 'ok') && this.loadDraft(drafts[0]._id) );\n\t}\n\n\t/**\n\t * Gets a single stored draft by its database `_id` and passes\n\t * the result to a callback; notifies user that draft was loaded and\n\t * offers to publish.\n\t * \n\t * @param  {string}   id        The id of the draft to fetch\n\t * @param  {Boolean}  notify \t\tWhether to notify the user (toast)\n\t * @return {Promise} \t\t\t\t\t  Resolves to content of the loaded draft\n\t */\n\tloadDraft(id, notify = true) {\n  \treturn this.DraftResource.get({ id }).$promise.then(draft => {\n\t  \tthis.lastDraft = draft.content;\n\t    notify && this.$mdToast.show(this.toasts.draftLoaded)\n\t\t    .then( response => ( response === 'ok' ) && this.publish() );\n\t    return draft.content;\n  \t});\n\t}\n\n\t/**\n\t * Immediately load last saved draft of current scene.\n\t * @param  {Boolean}  notify \t\tWhether to notify the user (toast)\n\t * @return {Promise} \t\t\t\t\t  Resolves to state of confirm toast\n\t */\n\trevertToDraft(notify = true) {\n\t\treturn this.checkForDraft(false)\n\t\t\t.then( drafts => this.loadDraft(drafts[0]._id, false) )\n\t  \t.then( draftContent => notify && this.$mdToast.show(this.toasts.revertToDraft) );\t\n\t}\n\n\t/**\n\t * Sends an HTTP `DELETE` request to remove a stored draft by\n\t * its database `_id`; notifies user if successful.\n\t * \n\t * @param  {string}   id        The id of the draft to delete\n\t * @param  {Boolean}  notify \t\tWhether to notify the user (toast)\n\t * @return {Promise} \t\t\t\t\t  Resolves to state of confirm toast\n\t */\n\tdiscardDraft(id, notify = true) {\n  \treturn this.DraftResource.remove({ id }).$promise\n\t  \t.then( discardedDraft => notify && this.$mdToast.show(this.toasts.discardDraft) );\n\t}\n}\n\nexport default EditorService;\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/aframe/editor/editor.service.js","module.exports = \"<div class=\\\"md-whiteframe-16dp\\\" layout=\\\"column\\\">\\n\\n  <div class=\\\"md-toolbar-tools\\\">\\n    <span class=\\\"md-title\\\">{{ ::($ctrl.newItem ? 'New' : 'Edit') }} {{ ::($ctrl.item.hasOwnProperty('scene') ? 'scene link': '') }}{{ ::($ctrl.item.hasOwnProperty('parent') ? 'scene': '') }}{{ ::($ctrl.item.hasOwnProperty('content') || $ctrl.item.hasOwnProperty('feature') ? 'hotspot' : '') }}{{ ::($ctrl.item.hasOwnProperty('attrs') ? 'entity' : '') }}</span>\\n    <span flex></span>\\n    <md-button class=\\\"md-icon-button md-primary\\\" aria-label=\\\"Cancel\\\" ng-click=\\\"$ctrl.closeDialog()\\\">\\n      <ng-md-icon icon=\\\"close\\\" size=\\\"24\\\"></ng-md-icon>\\n    </md-button>\\n  </div>\\n\\t<v-accordion class=\\\"vAccordion--default\\\" multiple flex>\\n\\t  <!-- add expanded attribute to open the section -->\\n\\t  <v-pane ng-if=\\\"::($ctrl.item.hasOwnProperty('name') || $ctrl.item.hasOwnProperty('label') || $ctrl.item.hasOwnProperty('code') || $ctrl.item.hasOwnProperty('desc') || $ctrl.item.hasOwnProperty('feature'))\\\">\\n\\t    <v-pane-header>\\n\\t\\t\\t\\tMetadata\\n\\t    </v-pane-header>\\n\\t    <v-pane-content>\\n\\t\\t\\t  <div layout=\\\"row\\\" layout-padding ng-if=\\\"::$ctrl.item.hasOwnProperty('name')\\\">\\n\\t\\t\\t    <md-input-container flex style=\\\"margin-bottom:0;padding-bottom:0;\\\">\\n\\t\\t\\t    \\t<label>Name</label>\\n\\t\\t\\t      <input type=\\\"text\\\" flex ng-model=\\\"$ctrl.item.name\\\" aria-label=\\\"name\\\">\\n\\t\\t\\t    </md-input-container>\\n\\t\\t\\t  </div>\\n\\t\\t\\t  <div layout=\\\"row\\\" layout-padding ng-if=\\\"::$ctrl.item.hasOwnProperty('label')\\\">\\n\\t\\t\\t    <md-input-container flex style=\\\"margin-bottom:0;padding-bottom:0;\\\">\\n\\t\\t\\t    \\t<label>Label</label>\\n\\t\\t\\t      <input type=\\\"text\\\" flex ng-model=\\\"$ctrl.item.label\\\" aria-label=\\\"label\\\">\\n\\t\\t\\t    </md-input-container>\\n\\t\\t\\t  </div>\\n\\t\\t\\t  <div layout=\\\"row\\\" layout-padding ng-if=\\\"::$ctrl.item.hasOwnProperty('code')\\\">\\n\\t\\t\\t    <md-input-container flex style=\\\"margin-bottom:0;padding-bottom:0;\\\">\\n\\t\\t\\t    \\t<label>Code</label>\\n\\t\\t\\t      <input type=\\\"text\\\" flex ng-model=\\\"$ctrl.item.code\\\" aria-label=\\\"code\\\">\\n\\t\\t\\t    </md-input-container>\\n\\t\\t\\t  </div>\\n\\t\\t\\t  <div layout=\\\"column\\\" layout-padding ng-if=\\\"::($ctrl.item.hasOwnProperty('desc') || $ctrl.item.hasOwnProperty('feature'))\\\">\\n\\t\\t    \\t<div><md-checkbox\\n              ng-model=\\\"$ctrl.item.linked\\\"\\n              aria-label=\\\"Link to campus map feature\\\"\\n              class=\\\"md-primary\\\">\\n            Link to campus map feature?\\t\\n          </md-checkbox></div>\\n\\t\\t\\t\\t\\t<div ng-if=\\\"$ctrl.item.linked\\\">\\n\\t\\t\\t\\t    <md-select placeholder=\\\"Select category\\\" ng-model=\\\"$ctrl.category\\\" md-on-open=\\\"$ctrl.loadCategories()\\\" ng-model-options=\\\"{trackBy: '$value._id'}\\\" ng-change=\\\"$ctrl.onChangeCategory()\\\">\\n\\t\\t\\t\\t      <md-option ng-value=\\\"category\\\" ng-repeat=\\\"category in $ctrl.categories track by category._id\\\">{{::category.name}}</md-option>\\n\\t\\t\\t\\t    </md-select>\\n\\t\\t\\t\\t    <md-select placeholder=\\\"Select feature\\\" ng-model=\\\"$ctrl.feature\\\" md-on-open=\\\"$ctrl.loadFeatures()\\\" ng-model-options=\\\"{trackBy: '$value._id'}\\\" ng-change=\\\"$ctrl.onChangeFeature()\\\">\\n\\t\\t\\t\\t      <md-option ng-value=\\\"feature\\\" ng-repeat=\\\"feature in $ctrl.features track by feature._id\\\">{{::feature.properties.name}}</md-option>\\n\\t\\t\\t\\t    </md-select>\\n\\t\\t\\t\\t  </div>\\n\\t        <md-input-container ng-if=\\\"!$ctrl.item.linked\\\">\\n\\t          <label>Content</label>\\n\\t          <!-- <textarea ng-model=\\\"$ctrl.item.desc\\\" md-maxlength=\\\"250\\\" rows=\\\"4\\\" md-select-on-focus></textarea> -->\\n\\t          <ng-wig ng-model=\\\"$ctrl.item.desc\\\"></ng-wig>\\n\\t        </md-input-container>\\n        </div>\\n\\t    </v-pane-content>\\n\\t  </v-pane>\\n\\t  <v-pane ng-if=\\\"::$ctrl.item.position.length\\\">\\n\\t    <v-pane-header>\\n\\t\\t\\t\\tPosition\\n\\t    </v-pane-header>\\n\\t    <v-pane-content>\\n\\t\\t\\t  <div layout=\\\"row\\\" layout-padding>\\n\\t\\t\\t    <md-input-container flex ng-repeat=\\\"val in ::[{label:'x',path:'M21,9L17,5V8H10V10H17V13M7,11L3,15L7,19V16H14V14H7V11Z'},{label:'z',path:'M9,3L5,7H8V14H10V7H13M16,17V10H14V17H11L15,21L19,17H16Z'},{label:'y',path:'M14.83,13.41L13.42,14.82L16.55,17.95L14.5,20H20V14.5L17.96,16.54L14.83,13.41M14.5,4L16.54,6.04L4,18.59L5.41,20L17.96,7.46L20,9.5V4M10.59,9.17L5.41,4L4,5.41L9.17,10.58L10.59,9.17Z'}] track by $index\\\" style=\\\"margin-bottom:0;padding-bottom:0;margin-top:36px;\\\">\\n\\t\\t\\t    \\t<label layout layout-align=\\\"space-between center\\\"><strong>{{ ::val.label }}</strong><svg style=\\\"width:24px;height:24px\\\" viewBox=\\\"0 0 24 24\\\"><path fill=\\\"#000000\\\" ng-attr-d=\\\"{{ ::val.path }}\\\" /></svg></label>\\n\\t\\t\\t      <input type=\\\"number\\\" min=\\\"-15\\\" max=\\\"15\\\" step=\\\"0.05\\\" flex ng-model=\\\"$ctrl.item.position[$index]\\\" to-number aria-label=\\\"position\\\" aria-controls=\\\"scenelink-position\\\">\\n\\t\\t\\t    </md-input-container>\\n\\t\\t\\t  </div>\\n\\t    </v-pane-content>\\n\\t  </v-pane>\\n\\n\\t  <v-pane ng-if=\\\"::$ctrl.item.rotation.length\\\">\\n\\t    <v-pane-header>\\n\\t\\t\\t\\tRotation\\n\\t    </v-pane-header>\\n\\t    <v-pane-content>\\n\\t\\t\\t  <div layout=\\\"row\\\" layout-padding>\\n\\t\\t\\t    <md-input-container flex ng-repeat=\\\"val in ::[{label:'roll',path:'M17,17H7V14L3,18L7,22V19H19V13H17M7,7H17V10L21,6L17,2V5H5V11H7V7Z'},{label:'yaw',path:'M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z'},{label:'pitch',path:'M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z'}] track by $index\\\" style=\\\"margin-bottom:0;padding-bottom:0;margin-top:36px;\\\">\\n\\t\\t\\t    \\t<label layout layout-align=\\\"space-between center\\\"><strong>{{ ::val.label }}</strong><svg style=\\\"width:24px;height:24px\\\" viewBox=\\\"0 0 24 24\\\"><path fill=\\\"#000000\\\" ng-attr-d=\\\"{{ ::val.path }}\\\" /></svg></label>\\n\\t\\t\\t      <input type=\\\"number\\\" min=\\\"-180\\\" max=\\\"180\\\" step=\\\"5\\\" flex ng-model=\\\"$ctrl.item.rotation[$index]\\\" to-number aria-label=\\\"rotation\\\" aria-controls=\\\"scenelink-rotation\\\">\\n\\t\\t\\t    </md-input-container>\\n\\t\\t\\t  </div>\\n\\t    </v-pane-content>\\n\\t  </v-pane>\\n\\n\\t  <v-pane ng-if=\\\"::($ctrl.item.hasOwnProperty('scene') || $ctrl.item.hasOwnProperty('parent') || $ctrl.item.hasOwnProperty('building'))\\\">\\n\\t    <v-pane-header>\\n\\t\\t\\t\\tLink\\n\\t    </v-pane-header>\\n\\t    <v-pane-content>\\n\\t\\t\\t  <div layout=\\\"row\\\" layout-padding>\\n\\t\\t\\t    <md-select placeholder=\\\"Select location\\\" ng-model=\\\"$ctrl.location\\\" md-on-open=\\\"$ctrl.loadLocations()\\\" ng-model-options=\\\"{trackBy: '$value._id'}\\\" ng-change=\\\"$ctrl.onChangeLocation()\\\">\\n\\t\\t\\t      <md-option ng-value=\\\"location\\\" ng-repeat=\\\"location in $ctrl.locations track by location._id\\\">{{::location.label}}</md-option>\\n\\t\\t\\t    </md-select>\\n\\t\\t\\t    <md-select placeholder=\\\"Select building\\\" ng-model=\\\"$ctrl.building\\\" md-on-open=\\\"$ctrl.loadBuildings()\\\" ng-model-options=\\\"{trackBy: '$value._id'}\\\" ng-change=\\\"$ctrl.onChangeBuilding()\\\">\\n\\t\\t\\t      <md-option ng-value=\\\"building\\\" ng-repeat=\\\"building in $ctrl.buildings track by building._id\\\">{{::building.label}}</md-option>\\n\\t\\t\\t    </md-select>\\n\\t\\t\\t    <md-select ng-if=\\\"$ctrl.item.hasOwnProperty('scene')\\\" placeholder=\\\"Select scene\\\" ng-model=\\\"$ctrl.scene\\\" md-on-open=\\\"$ctrl.loadScenes()\\\" ng-model-options=\\\"{trackBy: '$value._id'}\\\" ng-change=\\\"$ctrl.onChangeScene()\\\">\\n\\t\\t\\t      <md-option ng-value=\\\"scene\\\" ng-repeat=\\\"scene in $ctrl.scenes track by scene._id\\\">{{::scene.name}}</md-option>\\n\\t\\t\\t    </md-select>\\n\\t\\t\\t  </div>\\n\\t    </v-pane-content>\\n\\t  </v-pane>\\n\\n\\t  <v-pane ng-if=\\\"::($ctrl.item.hasOwnProperty('attrs'))\\\">\\n\\t    <v-pane-header>\\n\\t\\t\\t\\tAttributes\\n\\t    </v-pane-header>\\n\\t    <v-pane-content>\\n\\t\\t\\t  <div layout=\\\"row\\\" layout-padding>\\n\\t\\t\\t  \\t<entity-controls ng-model=\\\"$ctrl.item\\\"></entity-controls>\\n\\t\\t\\t  </div>\\n\\t    </v-pane-content>\\n\\t  </v-pane>\\n\\t</v-accordion>\\n\\n  <div class=\\\"md-toolbar-tools\\\">\\n    <md-button class=\\\"md-warn\\\" aria-label=\\\"Go Back\\\" ng-click=\\\"$ctrl.removeThis()\\\">\\n      {{ ::($ctrl.newItem ? 'Cancel' : 'Delete') }}\\n    </md-button>\\n    <span flex></span>\\n    <md-button class=\\\"md-primary\\\" aria-label=\\\"Save draft\\\" ng-click=\\\"$ctrl.saveDraft()\\\">\\n      Save draft\\n    </md-button>\\n    <md-button class=\\\"md-raised md-primary\\\" aria-label=\\\"Publish\\\" ng-click=\\\"$ctrl.publish()\\\">\\n      {{ ::($ctrl.newItem ? 'Add' : 'Publish') }}\\n    </md-button>\\n  </div>\\n\\n</div>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/components/aframe/editor/editorDialog.html\n// module id = 605\n// module chunks = 0","class EditorDialogController {\n\tconstructor(\n\t\t$scope, $filter,\n\t\t$tourApi, $mapApi) {\n\t\t'ngInject';\n\t\tthis.$filter = $filter;\n\t\tthis.LocationResource = $tourApi.location;\n\t\tthis.BuildingResource = $tourApi.building;\n\t\tthis.SceneResource = $tourApi.scene;\n\t\tthis.CategoryResource = $mapApi.category;\n\t\tthis.FeatureResource = $mapApi.feature;\n\t\tthis.CollectionResource = $mapApi.collection;\n\t\tif (this.item.scene) {\n\t\t\t$scope.$applyAsync(() => {\n\t\t\t\tthis.initCurrentScene();\n\t\t\t});\n\t\t}\n\t\tif (this.item.feature) {\n\t\t\t$scope.$applyAsync(() => {\n\t\t\t\tthis.initCurrentFeature();\n\t\t\t});\n\t\t}\n\t}\n\tinitCurrentCategory() {\n\t\tlet _id;\n\t\tthis.loadCategories(categories => {\n\t\t\t_id = this.feature.properties.category&&this.feature.properties.category.hasOwnProperty('_id') \n\t\t\t\t? this.feature.properties.category._id\n\t\t\t\t: this.feature.properties.category;\n\t\t\tthis.category = this.$filter('filter')(categories, { _id }, true)[0];\n\t\t});\n\t}\n\tinitCurrentFeature() {\n\t\tlet _id;\n\t\tthis.loadFeatures(features => {\n\t\t\t_id = this.item.feature&&this.item.feature.hasOwnProperty('_id')\n\t\t\t\t? this.item.feature._id\n\t\t\t\t: this.item.feature;\n\t\t\tthis.feature = this.$filter('filter')(features, { _id }, true)[0];\n\t\t\tthis.initCurrentCategory();\n\t\t});\n\t}\n\tinitCurrentScene() {\n\t\tlet _id;\n\t\tthis.loadScenes(scenes => {\n\t\t\t_id = this.item.scene.hasOwnProperty('_id')\n\t\t\t\t? this.item.scene._id\n\t\t\t\t: this.item.scene;\n\t\t\tthis.scene = this.$filter('filter')(scenes, { _id }, true)[0];\n\t\t\tthis.initCurrentBuilding();\n\t\t});\n\t}\n\tinitCurrentBuilding() {\n\t\tlet _id;\n\t\tthis.loadBuildings(buildings => {\n\t\t\t_id = this.scene.parent.hasOwnProperty('_id')\n\t\t\t\t? this.scene.parent._id\n\t\t\t\t: this.scene.parent;\n\t\t\tthis.building = this.$filter('filter')(buildings, { _id }, true)[0];\n\t\t\tthis.initCurrentLocation();\n\t\t});\n\t}\n\tinitCurrentLocation() {\n\t\tlet _id;\n\t\tthis.loadLocations(locations => {\n\t\t\t_id = this.building.parent.hasOwnProperty('_id')\n\t\t\t\t? this.building.parent._id\n\t\t\t\t: this.building.parent;\n\t\t\tthis.location = this.$filter('filter')(locations, { _id }, true)[0];\n\t\t});\n\t}\n\tloadLocations(cb) {\n\t\treturn this.LocationResource.query().$promise.then(locations => {\n\t\t\tthis.locations = locations;\n\t\t\tcb&&cb(locations);\n\t\t});\n\t}\n\tloadBuildings(cb) {\n\t\treturn this.BuildingResource.query(this.location ? {\n\t\t\tfilter: {\n\t\t\t\tparent: this.location._id\n\t\t\t}\n\t\t} : null).$promise.then(buildings => {\n\t\t\tthis.buildings = buildings;\n\t\t\tcb&&cb(buildings);\n\t\t});\n\t}\n\tloadScenes(cb) {\n\t\treturn this.SceneResource.query(this.building ? {\n\t\t\tfilter: {\n\t\t\t\tparent: this.building._id\n\t\t\t}\n\t\t} : null).$promise.then(scenes => {\n\t\t\tthis.scenes = scenes;\n\t\t\tcb&&cb(scenes);\n\t\t});\n\t}\n\tloadCategories(cb) {\n\t\treturn this.CategoryResource.query().$promise.then(categories => {\n\t\t\tthis.categories = categories;\n\t\t\tcb&&cb(categories);\n\t\t});\n\t}\n\tloadFeatures(cb) {\n\t\treturn this.FeatureResource.query(this.category ? {\n\t\t\tfilter: {\n\t\t\t\t\"properties.category\": this.category._id\n\t\t\t}\n\t\t} : null).$promise.then(features => {\n\t\t\tthis.features = features;\n\t\t\tcb&&cb(features);\n\t\t});\n\t}\n\tonChangeCategory() {\n\t\tthis.feature = null;\n\t}\n\tonChangeFeature() {\n\t\tthis.item.feature = this.feature;\n\t}\n\tonChangeScene() {\n\t\tthis.item.scene = this.scene._id;\n\t}\n\tonChangeBuilding() {\n\t\tthis.item.building = this.building._id;\n\t\tthis.scene = null;\n\t}\n\tonChangeLocation() {\n\t\tthis.item.location = this.location._id;\n\t\tthis.building = null;\n\t\tthis.scene = null;\n\t}\n\t//\n}\n\n\nexport default EditorDialogController;\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/aframe/editor/editorDialog.controller.js","import angular from 'angular';\nimport entityComponent from './entity.component';\nimport entityControlsComponent from './entityControls.component';\n\nconst entityModule = angular.module('aframe.entity', [])\n\n.component('aframeEntity', entityComponent)\n.component('entityControls', entityComponent)\n\n.name;\n\nexport default entityModule;\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/aframe/entity/entity.js","import controller from './entity.controller';\n\nconst entityComponent = {\n  controller,\n  require: {\n    $ngModel: 'ngModel',\n    SceneCtrl: '^aframeScene'\n  }\n};\n\nexport default entityComponent;\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/aframe/entity/entity.component.js","/**\n * The `EntityCtrl` acts as an observer of the `ngModel` directive (annotated\n * as `$ngModel` in this controller because it is injected); the entity's\n * model is controlled externally (e.g. by the `EditorCtrl`) though ng-model,\n * so the component has no bindings.\n *\n * The controller's main responsibility is setting up `$watch`es for\n * the relevant model properties and translating them into the\n * appropriaten DOM modifications.\n *\n * An entity's life cycle goes:\n * - Detect change to model\n * - If the model has a `type` property, `$compile()` a new `<a-[type]>`\n * - If the model has an `attrs` property, `parseAttrs()` into a hash object\n * - Apply the attribute hash to the compiled element with `attr()`\n * - Remove element and `$destroy` scope when parent (`ng-repeat`ed) scope is destroyed\n * \n * @param {object}  $scope    Current scope; parent scope is ngRepeat\n * @param {element} $element  Component wrapper element\n * @param {object}  $compile  Angular's compile service\n * @param {object}  SceneCtrl The parent controller\n */\nclass EntityController {\n  constructor($scope, $element, $compile) {\n  \t'ngInject';\n    this.$scope = $scope;\n    this.$element = $element;\n    this.$compile = $compile;\n    /**\n     * Property to hold the `<a-></a->` element after it has been\n     * compiled by `compileTemplate()`. Remains false until loaded\n     * so attributes are not set before element has initialized.\n     *\n     * @memberof EntityCtrl\n     * @type {Boolean|element}\n     */\n  \tthis.entityEl = false;\n  }\n  /**\n   * Sets up `$watch` statements and scope cleanup. The model properties `type`\n   * and `attrs` each receive a watch because `type` only needs top-level\n   * evaluation, while `attrs` needs deep-watching.\n   *\n   * TODO: REMOVE DEEP-WATCH FOR PERFORMANCE\n   */\n  $onInit() {\n    this.$scope.$watch(\n      () => this.$ngModel.$modelValue.type,\n      (type, lastType) => {\n        if (type && this.$ngModel.$valid) {\n          console.info('entity type $watch', type);\n          this.entityEl = this.compileTemplate(type);\n          console.log(this.entityEl);\n          this.entityEl.attr(this.parseAttrs(this.$ngModel.$modelValue.attrs));\n\t\t\t\t\tthis.entityEl.on('click', () => {\n\t\t\t\t\t\t// If there's a right click active...\n\t\t\t\t\t\tif (this.SceneCtrl._rightClick && this.SceneCtrl._editable) {\n\t\t\t\t\t\t\t// ...open the scene link editor:\n\t\t\t\t\t\t\tthis.SceneCtrl.editItem(this.SceneCtrl._rightClick, this.$ngModel.$modelValue, this.SceneCtrl.entities);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n        }\n      });\n\n    this.$scope.$watch(\n      () => this.$ngModel.$modelValue.attrs,\n      (attrs) => {\n        if (this.entityEl && attrs && angular.isArray(attrs) && this.$ngModel.$valid) {\n          console.info('entity attrs $watch', attrs);\n          this.entityEl.attr(this.parseAttrs(attrs));\n        }\n      }, true\n    );\n\n    this.$scope.$parent.$on('$destroy', () => {\n    \tthis.entityEl.remove();\n    \tthis.$scope.$destroy();\n    });\n  }\n\n  /**\n   * Compiles a new basic A-Frame element using Angular's `$compile`\n   * service; replaces the component's wrapper with the new element.\n   * @param  {string} type The element type to compile\n   * @return {element}     The compiled element\n   */\n  compileTemplate(type) {\n    return this.$compile(`<a-${type}></a-${type}>`)\n    (this, (clone, cloneScope) => {\n      \tthis.$element.after(clone);\n      \tthis.$element.remove();\n        console.info('entity recompiled', clone);\n        return clone;\n      }\n    );\n  }\n  /**\n   * Formats an array of attribute objects into a attribute hash object\n   * that can be applied to a jqLite element in a single `attr()` call.\n   *\n   * Contains validation helpers to check for array and object values,\n   * which are mapped to special (A-Frame specific) attribute syntax.\n   *\n   * @example\n   * // An array with objects like...\n   * [{\n   *   prop: 'scale'\n   *   val: 0.8\n   * },{\n   *   prop: 'position',\n   *   val: [ 0, 0, 10 ]\n   * },{\n   *   prop: 'material',\n   *   val: {\n   *     color: '#0077CA'\n   *   }\n   * }]\n   * \n   * // ...becomes an object like:\n   * {\n   *   scale: '0.8',\n   *   position: '0 0 10',\n   *   material: 'color:#0077CA;'\n   * }\n   * \n   * @param  {Array} attrs An array of prop/val attrs\n   * @return {Object}      An a-frame ready attribute hash\n   */\n  parseAttrs(attrs) {\n\t  const newAttrs = {};\n\t  for (let { prop, val } of attrs) {\n\t    if ( prop )  {\n\t      // this feels dirty, but seems\n\t      // to maintain integrity of arrays from user input\n\t      val = JSON.parse(JSON.stringify(val));\n\t      // check if the value is an array\n\t      // format into space-separated if so\n\t      if (angular.isArray(val)) {\n\t        val = val.map( (a, i) => {\n\t          return val[i];\n\t        }).join(' ');\n\t      }\n\t      // check if the value is an object\n\t      // format into a css-style prop declaration\n\t      // e.g. width:400px;color:white;etc..\n\t      if (angular.isObject(val)) {\n\t        let condensedProps = [];\n\t        angular.forEach(val, (value, rule) => {\n\t          condensedProps.push([rule, value].join(': '));\n\t        });\n\t        val = condensedProps.join('; ');\n\t      }\n\t      newAttrs[prop] = val;\n\t      console.info(`attr added:%c ${prop} = ${val}`, 'color: blue;')\n\t    }\n\t  }\n\t  return newAttrs;\n\t}\n}\n\nexport default EntityController;\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/aframe/entity/entity.controller.js","import template from './entityControls.html';\nimport controller from './entityControls.controller';\n\nconst entityComponent = {\n  template,\n  controller,\n  require: {\n    $ngModel: 'ngModel'\n  }\n};\n\nexport default entityComponent;\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/aframe/entity/entityControls.component.js","module.exports = \"<div class=\\\"md-title\\\">\\n  Element:\\n</div>\\n<md-input-container>\\n  <label>\\n    Type:\\n  </label>\\n    <input ng-model=\\\"type\\\" />\\n</md-input-container>\\n<div class=\\\"md-title\\\">\\n  Attributes:\\n</div>\\n<md-list layout=\\\"column\\\">\\n  <md-list-item layout layout-wrap ng-repeat=\\\"attr in attrs\\\">\\n    <span class=\\\"md-subheader\\\" flex=\\\"100\\\">\\n      <strong>{{attr.prop}}=\\\"<em>{{attr.val}}</em></strong>\\\"\\n    </span><br/>\\n    <md-input-container>\\n      <label>\\n        Property\\n      </label>\\n      <input ng-model=\\\"attr.prop\\\" />\\n    </md-input-container>\\n    <md-input-container>\\n      <label>\\n        Value\\n      </label>\\n      <input ng-model=\\\"attr.val\\\" />\\n    </md-input-container>\\n    <md-button class=\\\"md-raised md-warn\\\" ng-click=\\\"$ctrl.removeAttr(attr)\\\">Remove</md-button>\\n  </md-list-item>\\n  <md-list-item>\\n    <md-button class=\\\"md-raised md-primary\\\" ng-click=\\\"$ctrl.addAttr()\\\">Add attribute</md-button>\\n  </md-list-item>\\n</md-list>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/components/aframe/entity/entityControls.html\n// module id = 613\n// module chunks = 0","class EntityController {\n  ///////\n  constructor($scope) {\n  \t'ngInject';\n    this.$scope = $scope;\n  }\n  ////////\n  $onInit() {\n    this.$ngModel.$formatters.push(modelValue => {\n      let { type, attrs } = modelValue;\n      console.info('control $formatter', { type, attrs });\n      return {\n          type,\n          attrs\n      };\n    });\n    ////\n    this.$ngModel.$render = () => {\n      const { type, attrs } = this.$ngModel.$viewValue;\n      console.log('control $render', { type, attrs });\n      this.$scope.type = type;\n      this.$scope.attrs = attrs;\n    };\n    ////\n    this.$scope.$watch(\n      () => { \n        return {\n          attrs: this.$scope.attrs, type: this.$scope.type \n        }\n      },\n      (newVal) => {\n        console.log('control $watch', newVal);\n        this.$ngModel.$setViewValue({\n          type: this.$scope.type,\n          attrs: this.$scope.attrs\n        });\n      }, true\n    );\n    ////\n    this.$ngModel.$parsers.push(viewValue => {\n      let { type, attrs } = viewValue;\n      console.log('control $parser', { type, attrs });\n      return { type, attrs };\n    });\n  }\n  ////////\n  addAttr() {\n    console.log('attr added from control');\n    return this.$scope.attrs.push({prop:'', val:''});\n  }\n  ////////\n  removeAttr(attr) {\n    angular.forEach(this.$scope.attrs, (a, i) => {\n      if (a.$$hashKey === attr.$$hashKey) {\n        console.log('attr removed from control', a);\n        return this.$scope.attrs.splice(i, 1);\n      };\n    });\n  }\n}\n\nexport default EntityController;\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/aframe/entity/entityControls.controller.js","import angular from 'angular';\nimport uiRouter from 'angular-ui-router';\nimport ngMaterial from 'angular-material';\nimport angulartics from 'angulartics';\nimport angularticsGa from 'angulartics-google-analytics';\n\nimport drilldownComponent from './drilldown.component';\n\n\nlet drilldownModule = angular.module('drilldown', [\n  uiRouter,\n  ngMaterial,\n  angulartics,\n\tangularticsGa\n])\n\n.component('drilldownMenu', drilldownComponent)\n\n.config(($stateProvider) => {\n  'ngInject'\n\n  function alphaGroupReducer(output, name) {\n    let lCase = name.name.toUpperCase();\n    if (output[lCase[0]]) //if lCase is a key\n      output[lCase[0]].push(name); //Add name to its list\n    else\n      output[lCase[0]] = [name]; // Else add a key\n    return output;\n  }\n\n\t$stateProvider\n    .state('locations', {\n      parent: 'home',\n      url: '/',\n      component: 'drilldownMenu',\n      resolve: {\n      \tTour: '$tourApi',\n      \tchildren(Tour) {\n      \t\treturn Tour.location.query({\n  \t\t\t\t\tsort: 'name'\n  \t\t\t\t}).$promise;\n      \t},\n      \tnextLevel() {\n      \t\treturn 'location';\n      \t}\n      }\n    })\n      .state('location', {\n      \tparent: 'locations',\n        url: ':location',\n        component: 'drilldownMenu',\n        resolve: {\n          currentLocation($stateParams, Tour) {\n      \t\t\treturn Tour.location.query({ \n      \t\t\t\tfilter: {\n      \t\t\t\t\tcode: $stateParams.location \n      \t\t\t\t}\n      \t\t\t}).$promise;\n          },\n          sceneData(currentLocation, Tour) {\n        \t\tif (currentLocation[0] && currentLocation[0].default) {\n      \t\t\t\treturn Tour.scene.get({ id: currentLocation[0].default }).$promise;\n        \t\t}\n          },\n          children($stateParams, $aframeScene, currentLocation, sceneData, Tour) {\n          \tif (!$stateParams.building && !$stateParams.scene && sceneData) {\n\t          \t$aframeScene.scene = sceneData;\n\t          }\n      \t\t\treturn Tour.building.query({\n      \t\t\t\tfilter: {\n      \t\t\t\t\tparent: currentLocation[0]._id\n      \t\t\t\t},\n      \t\t\t\tsort: 'name'\n      \t\t\t}).$promise;\n          },\n\t      \tnextLevel(children) {\n\t      \t\treturn 'building';\n\t      \t}\n        }\n      })\n        .state('building', {\n          parent: 'location',\n          url: '/:building',\n        \tcomponent: 'drilldownMenu',\n          resolve: {\n\t          currentBuilding($stateParams, Tour) {\n      \t\t\t\treturn Tour.building.query({\n      \t\t\t\t\tfilter: {\n      \t\t\t\t\t\tcode: $stateParams.building\n      \t\t\t\t\t}\n      \t\t\t\t}).$promise;\n\t          },\n            sceneData(currentBuilding, Tour) {\n          \t\tif (currentBuilding[0] && currentBuilding[0].default) {\n\t      \t\t\t\treturn Tour.scene.get({ id: currentBuilding[0].default }).$promise;\n          \t\t}\n            },\n            children($stateParams, $aframeScene, currentLocation, currentBuilding, sceneData, Tour) {\n\t          \tif (!$stateParams.scene && sceneData) {\n\t\t          \t$aframeScene.scene = sceneData;\n\t            }\n      \t\t\t\treturn Tour.scene.query({\n      \t\t\t\t\tfilter: {\n      \t\t\t\t\t\tparent: currentBuilding[0]._id\n      \t\t\t\t\t},\n      \t\t\t\t\tsort: 'name'\n      \t\t\t\t}).$promise;\n            },\n\t\t      \tnextLevel() {\n\t\t      \t\treturn 'scene';\n\t\t      \t}\n          }\n        })\n        .state('scene', {\n          parent: 'building',\n          url: '/:scene',\n          resolve: {\n            currentScene($stateParams, currentBuilding, Tour) {\n      \t\t\t\treturn Tour.scene.query({\n      \t\t\t\t\tfilter: {\n      \t\t\t\t\t\tcode: $stateParams.scene,\n      \t\t\t\t\t\tparent: currentBuilding[0]._id\n      \t\t\t\t\t}\n      \t\t\t\t}).$promise;\n            },\n            sceneData(currentScene, Tour) {\n          \t\tif (currentScene.length === 1 && currentScene[0]._id) {\n\t      \t\t\t\treturn Tour.scene.get({ id: currentScene[0]._id }).$promise;\n          \t\t}\n            },\n            item($aframeScene, sceneData) {\n          \t\tif (sceneData && sceneData.panorama) {\n\t\t          \t$aframeScene.scene = sceneData;\n          \t\t}\n\t          \treturn sceneData;\n            }\n          }\n        });\n})\n\n.name;\n\nexport default drilldownModule;\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/drilldown/drilldown.js","import template from './drilldown.html';\nimport controller from './drilldown.controller';\nimport './drilldown.scss';\n\nconst drilldownComponent = {\n  template,\n  controller,\n\tcontrollerAs: 'item',\n\tbindings: {\n\t\tnextLevel: '@',\n\t\tchildren: '<'\n\t}\n};\n\nexport default drilldownComponent;\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/drilldown/drilldown.component.js","module.exports = \"<md-content\\n\\tclass=\\\"drilldown-menu\\\"\\n\\tng-init=\\\"children = item.children\\\">\\n\\t<div ng-if=\\\"!item.children.length\\\" style=\\\"padding-right: 30px;\\\" class=\\\"drilldown-content\\\">\\n\\t\\t<span class=\\\"md-title\\\">No {{ ::item.nextLevel }}s found!<br/>\\n\\t\\t<strong class=\\\"md-caption\\\">&laquo; Back</strong></span>\\n\\t</div>\\n</md-content>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/components/drilldown/drilldown.html\n// module id = 617\n// module chunks = 0","import { forEach } from 'angular';\n\nfunction selectItem(item) {\n\titem.selected = (item === this);\n}\n\nfunction deactivateItem(item) {\n\t// make item inactive but unhide (default state)\n\titem.active = item.hidden = false;\n\n\t// if the item has children...\n\tif (item.children) {\n\t\t// recursively deactivate its children as well\n\t\tforEach(item.children, deactivateItem);\n\t}\n}\n\nfunction toggleItem(item) {\n\t// compare the current iterated item to 'this'\n\t// make the item active and unhide if same\n\t// make the item inactive and hide if not\n\titem.active = (item === this);\n\titem.hidden = !(item === this);\n\n\t// if the item is NOW inactive and has children...\n\tif (!item.active && item.children) {\n\t\t// ...then deactivateItem() all its children\n\t\tforEach(item.children, deactivateItem);\n\t}\n}\n\nclass DrilldownController {\n\tconstructor($scope, $element, $compile, $state, $analytics) {\n\t\t'ngInject';\n\t\t// save a reference to the $scope\n\t\tthis.$scope = $scope;\n\t\tthis.$state = $state;\n\t\tthis.$element = $element;\n\t\tthis.$compile = $compile;\n\t\tthis.$analytics = $analytics;\n\t}\n\t$onInit() {\n\t\t// this.$scope.toggle = ($event, code, nextLevel) => {\n\t\tthis.$scope.toggle = ($event, $sc) => {\n\t\t\t// prevent click from bubbling up\n\t\t\t$event.stopPropagation();\n\t\t\t// only open drilldown if final level not reached\n\t\t\tif (this.nextLevel !== 'scene') {\n\t\t\t\t// if clicked item is inactive...\n\t\t\t\tif (!$sc.item.active) {\n\t\t\t\t\t// ...then go up a level, run toggleItem() on every item\n\t\t\t\t\t// ...using the clicked item as the context of 'this'\n\t\t\t\t\tforEach($sc.$parent.children, toggleItem, $sc.item);\n\t\t\t\t} else {\n\t\t\t\t\t// ...otherwise, go up a level and deactivateItem() all\n\t\t\t\t\tforEach($sc.$parent.children, deactivateItem);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tforEach($sc.$parent.children, selectItem, $sc.item);\n\t\t\t}\n\t\t\t// go to state based on nextLevel prop and item code\n\t\t\tthis.$analytics.eventTrack('click', { category: 'drilldown', label: [$sc.$parent.code, $sc.item.code].join('_') });\n\t\t\tthis.$state.go(this.nextLevel, { [this.nextLevel]: $sc.item.code });\n\t\t}\n\n\t\tconst $content = this.$element.find('md-content')[0];\n\t\tthis.children.forEach((item, index) => {\n\t\t\tconst childScope = this.$scope.$new();\n\t\t\tchildScope.item = item;\n\t\t\tthis.$compile(`<div\n\t\t\t\tclass=\"drilldown-item\"\n\t\t\t\tng-class=\"{ 'is-active': item.active, 'is-hidden': item.hidden }\"\n\t\t\t\tmd-ink-ripple=\"{{ item.active ? false : '#003C71' }}\"\n\t\t\t\tng-click=\"toggle($event, this)\"\n\t\t\t\tmd-autofocus=\"${ index === 0 }\">\n\t\t\t\t<div ng-if=\"!item.hidden\" style=\"padding-right: 30px;\" class=\"drilldown-content\" ng-class=\"{'md-caption': item.active, 'md-title': !item.active, 'selected': item.selected }\">\n\t\t\t\t\t<span>{{ ::item.name }}</span>\n\t\t\t\t\t<div class=\"open-indicator\"></div>\n\t\t\t\t</div>\n\t\t\t\t<ui-view ng-if=\"item.active\" />\n\t\t\t</div>`)(childScope, (clone, scope) => {\n\t\t\t\t$content.append(clone[0]);\n\t\t\t})\n\t\t});\n\t}\n}\n\n\nexport default DrilldownController;\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/drilldown/drilldown.controller.js","import angular from 'angular';\nimport uiRouter from 'angular-ui-router';\nimport ngMap from 'ngmap';\nimport uoitCampusMap from 'uoit-campus-map';\n\n// import mapComponent from './map.component';\nimport template from './map.html';\nimport controller from './map.controller';\nimport './map.scss';\n\nlet mapModule = angular.module('map', [\n  uiRouter,\n  ngMap,\n  uoitCampusMap\n])\n\n// .component('uoitMap', mapComponent)\n\n.config(($stateProvider) => {\n  'ngInject'\n\t$stateProvider\n    .state('map', {\n      parent: 'home',\n      // component: 'uoitMap'\n      template,\n\t\t\tcontroller\n    });\n})\n\n.name;\n\nexport default mapModule;\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/map/map.js","module.exports = \"<campus-map\\n\\tmap-data=\\\"$ctrl.mapData\\\"\\n\\ton-goto-bldg=\\\"$ctrl.onGotoBldg()\\\"\\n\\tlayout\\n\\tflex=\\\"grow\\\">\\n\\t<campus-map-controls ng-model=\\\"$ctrl.mapData\\\" layout=\\\"column\\\" flex=\\\"grow\\\"></campus-map-controls>\\n</campus-map>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/components/map/map.html\n// module id = 625\n// module chunks = 0","class MapController {\n\tconstructor($state) {\n\t\t'ngInject';\n\t\tthis._$state = $state;\n\t}\n\tonGotoBldg() {\n\t\treturn data => {\n\t\t\tthis._$state.go('building', data);\n\t\t}\n\t}\n}\n\nexport default MapController;\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/map/map.controller.js","import angular from 'angular';\nimport uiRouter from 'angular-ui-router';\nimport ngMaterial from 'angular-material';\n\nimport searchComponent from './search.component';\n\nlet searchModule = angular.module('search', [\n  uiRouter,\n  ngMaterial\n])\n\n.component('searchMenu', searchComponent)\n\n.config(($stateProvider) => {\n  'ngInject'\n\n\t$stateProvider\n    .state('search', {\n      parent: 'home',\n      url: '/',\n      component: 'searchMenu'\n    });\n})\n\n.constant('SEARCH_FILTERS', {\n\ttypeFilters: [{\n\t\tlabel:'Virtual Tour',\n\t\tvalue:'tour'\n\t},{\n\t\tlabel:'Campus Map',\n\t\tvalue:'map'\n\t}],\n\tmodelFilters: {\n\t\ttour: [{\n\t\t\tlabel:'Buildings',\n\t\t\tvalue:'buildings'\n\t\t},{\n\t\t\tlabel:'Tour scenes',\n\t\t\tvalue:'scenes'\n\t\t}],\n\t\tmap: [{\n\t\t\tlabel:'Map features',\n\t\t\tvalue:'features'\n\t\t},{\n\t\t\tlabel:'Feature collections',\n\t\t\tvalue:'collections'\n\t\t}]\n\t},\n\tfieldFilters: [{\n\t\tlabel:'Name',\n\t\tvalue:'name,label'\n\t},{\n\t\tlabel:'Description',\n\t\tvalue:'desc'\n\t},{\n\t\tlabel:'Acronym',\n\t\tvalue:'code'\n\t}]\n})\n\n.name;\n\nexport default searchModule;\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/search/search.js","import template from './search.html';\nimport controller from './search.controller';\nimport './search.scss';\n\nconst searchComponent = {\n  template,\n  controller,\n\tbindings: {\n\t\tquery: '@',\n\t\tfilters: '<'\n\t}\n};\n\nexport default searchComponent;\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/search/search.component.js","module.exports = \"<div class=\\\"search-bar\\\" layout=\\\"column\\\" layout-fill>\\n\\n\\t<div layout=\\\"column\\\" layout-align=\\\"center center\\\" layout-margin layout-padding flex>\\n<!-- \\t  <md-input-container md-no-float class=\\\"md-block md-icon-left\\\">\\n\\t\\t\\t<ng-md-icon icon=\\\"search\\\" size=\\\"24\\\"></ng-md-icon>\\n\\t\\t\\t<input ng-model=\\\"$ctrl.query\\\" aria-label=\\\"Search the Virtual Tour\\\" id=\\\"search_q\\\">\\n\\t\\t</md-input-container> -->\\n\\t\\t<label for=\\\"search_q\\\">I'm looking for things with</label>\\n\\t\\t<div layout=\\\"row\\\" layout-align=\\\"space-between center\\\">\\n\\t\\t\\t<ng-md-icon class=\\\"search-icon\\\" icon=\\\"search\\\" size=\\\"24\\\" ng-class=\\\"{ 'active': searchActive }\\\"></ng-md-icon>\\n\\t\\t\\t<form ng-submit=\\\"$event.preventDefault()\\\" class=\\\"search-form\\\" flex=\\\"shrink\\\">\\n\\t\\t\\t\\t<md-autocomplete\\n\\t\\t\\t\\t\\t\\tmd-search-text=\\\"$ctrl.searchText\\\"\\n\\t\\t\\t\\t\\t\\tmd-search-text-change=\\\"$ctrl.searchTextChange($ctrl.searchText)\\\"\\n\\t\\t\\t\\t\\t\\tmd-items=\\\"item in $ctrl.querySearch($ctrl.searchText)\\\"\\n\\t\\t\\t\\t\\t\\tmd-item-text=\\\"item\\\"\\n\\t\\t\\t\\t\\t\\tmd-selected-item=\\\"$ctrl.selectedItem\\\"\\n\\t\\t\\t\\t\\t\\tmd-selected-item-change=\\\"$ctrl.selectedItemChange(item)\\\"\\n\\t\\t\\t\\t\\t\\tmd-min-length=\\\"2\\\"\\n\\t\\t\\t\\t\\t\\tmd-no-cache\\n\\t\\t\\t\\t\\t\\tplaceholder=\\\"charles st\\\"\\n\\t\\t\\t\\t\\t\\tmd-menu-class=\\\"search-results\\\"\\n\\t\\t\\t\\t\\t\\tmd-autofocus\\n\\t\\t\\t\\t\\t\\tng-focus=\\\"searchActive = true\\\"\\n\\t\\t\\t\\t\\t\\tng-blur=\\\"searchActive = false\\\"\\n\\t\\t\\t\\t\\t\\tflex>\\n\\t\\t\\t\\t\\t\\t<md-item-template>\\n\\t\\t\\t\\t\\t\\t\\t<span md-highlight-text=\\\"$ctrl.searchText\\\" md-highlight-flags=\\\"gi\\\">{{ item }}</span>\\n\\t\\t\\t\\t\\t\\t</md-item-template> \\n\\t\\t\\t\\t\\t<!-- <md-item-template>\\n\\t\\t\\t\\t\\t\\t<span class=\\\"md-headline\\\" md-highlight-text=\\\"$ctrl.searchText\\\" md-highlight-flags=\\\"gi\\\">{{ item.name }}</span><br/>\\n\\t\\t\\t\\t\\t\\t<span class=\\\"md-caption\\\">{{ item.parent.name }}</span><\\n\\t\\t\\t\\t\\t\\t<span class=\\\"md-subhead\\\" ng-bind-html=\\\"item.desc\\\" md-highlight-text=\\\"$ctrl.searchText\\\"></span>\\n\\t\\t\\t\\t\\t</md-item-template> -->\\n\\t\\t\\t\\t</md-autocomplete>\\n\\t\\t\\t</form>\\n\\t\\t</div>\\n\\t\\t<div layout=\\\"row\\\" layout-wrap class=\\\"search-filters\\\">\\n\\t\\t\\t<div layout=\\\"row\\\" layout-align=\\\"space-between center\\\">\\n\\t\\t\\t\\t<label flex=\\\"noshrink\\\">within the</label>\\n\\t\\t\\t\\t<md-input-container>\\n\\t\\t\\t\\t\\t<md-select ng-model=\\\"$ctrl.filters.in\\\"\\n\\t\\t\\t\\t\\t\\tid=\\\"search_filter\\\"\\n\\t\\t\\t\\t\\t\\taria-label=\\\"filter - search in\\\"\\n\\t\\t\\t\\t\\t\\tmultiple\\n\\t\\t\\t\\t\\t\\tflex=\\\"shrink\\\">\\n\\t\\t\\t\\t\\t\\t\\t<md-option ng-value=\\\"type.value\\\" ng-repeat=\\\"type in ::$ctrl.typeFilters\\\">{{type.label}}</md-option>\\n\\t\\t\\t\\t\\t</md-select>\\n\\t\\t\\t\\t</md-input-container>\\n\\t\\t\\t</div>\\n\\t\\t\\t<div layout=\\\"row\\\" layout-align=\\\"space-between center\\\">\\n\\t\\t\\t\\t<label flex=\\\"noshrink\\\">for all</label>\\n\\t\\t\\t\\t<md-input-container>\\n\\t\\t\\t\\t\\t<md-select ng-model=\\\"$ctrl.filters.for\\\"\\n\\t\\t\\t\\t\\t\\tid=\\\"search_filter\\\"\\n\\t\\t\\t\\t\\t\\taria-label=\\\"filter - search for\\\"\\n\\t\\t\\t\\t\\t\\tmultiple\\n\\t\\t\\t\\t\\t\\tflex=\\\"shrink\\\">\\n\\t\\t\\t\\t\\t\\t<md-optgroup label=\\\"Virtual Tour\\\" ng-show=\\\"!$ctrl.filters.in.length || $ctrl.filters.in.includes('tour')\\\">\\n\\t\\t\\t\\t\\t\\t\\t<md-option ng-value=\\\"type.value\\\" ng-repeat=\\\"type in ::$ctrl.modelFilters.tour\\\">{{type.label}}</md-option>\\n\\t\\t\\t\\t\\t\\t</md-optgroup>\\n\\t\\t\\t\\t\\t\\t<md-optgroup label=\\\"Campus Map\\\" ng-show=\\\"!$ctrl.filters.in.length || $ctrl.filters.in.includes('map')\\\">\\n\\t\\t\\t\\t\\t\\t\\t<md-option ng-value=\\\"type.value\\\" ng-repeat=\\\"type in ::$ctrl.modelFilters.map\\\">{{type.label}}</md-option>\\n\\t\\t\\t\\t\\t\\t</md-optgroup>\\n\\t\\t\\t\\t\\t</md-select>\\n\\t\\t\\t\\t</md-input-container>\\n\\t\\t\\t</div>\\n\\t\\t\\t<div layout=\\\"row\\\" layout-align=\\\"space-between center\\\">\\n\\t\\t\\t\\t<label flex=\\\"noshrink\\\">by their</label>\\n\\t\\t\\t\\t<md-input-container>\\n\\t\\t\\t\\t\\t\\t<md-select ng-model=\\\"$ctrl.filters.by\\\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t aria-label=\\\"filter - search by\\\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t multiple\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t flex=\\\"shrink\\\">\\n\\t\\t\\t\\t\\t\\t\\t<!-- <md-optgroup label=\\\"Virtual tour\\\" ng-repeat=\\\"type in ::$ctrl.typeFilters\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<md-option ng-value=\\\"::type.value\\\">{{::type.label}}</md-option>\\n\\t\\t\\t\\t\\t\\t\\t</md-optgroup> -->\\n\\t\\t\\t\\t\\t\\t\\t<!-- <md-optgroup label=\\\"Campus map\\\"> -->\\n\\t\\t\\t\\t\\t\\t\\t\\t<md-option ng-value=\\\"::field.value\\\" ng-repeat=\\\"field in ::$ctrl.fieldFilters\\\">{{::field.label}}</md-option>\\n\\t\\t\\t\\t\\t\\t\\t<!-- </md-optgroup> -->\\n\\t\\t\\t\\t\\t\\t</md-select>\\n\\t\\t\\t\\t</md-input-container>\\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\t</div>\\n\\t<md-content layout=\\\"column\\\" layout-align=\\\"start center\\\" layout-margin layout-padding class=\\\"search-results\\\" flex>\\n\\t\\t<span class=\\\"md-headline\\\" ng-show=\\\"!$ctrl.searchResults.length\\\">No results found<span ng-show=\\\"$ctrl.searchText\\\"> matching \\\"<em>{{ $ctrl.searchText }}</em>\\\"</span>!</span>\\n\\t\\t<md-list>\\n      <md-list-item class=\\\"md-3-line\\\" ng-repeat-start=\\\"item in $ctrl.searchResults\\\" ng-click=\\\"null\\\">\\n        <!-- <img ng-src=\\\"{{item.face}}?{{$index}}\\\" class=\\\"md-avatar\\\" alt=\\\"{{item.who}}\\\" /> -->\\n        <div class=\\\"md-list-item-text\\\" layout=\\\"column\\\">\\n          <h3><strong>{{ ::item.name }}</strong><span ng-if=\\\"::item.parent.parent.name\\\">, {{::item.parent.name}}</span></h3>\\n          <h4>{{ ::(item.parent.parent.name || item.parent.name) }}</h4>\\n          <span ng-bind-html=\\\"::item.desc | limitTo:150\\\" ng-class=\\\"{ 'truncated-text': (item.desc.length >= 100) }\\\"></span>\\n        </div>\\n      </md-list-item>\\n\\t\\t\\t<md-divider ng-repeat-end></md-divider>\\n\\t\\t</md-list>\\n\\t</md-content>\\n\\t\\n</div>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/components/search/search.html\n// module id = 631\n// module chunks = 0","import { lowercase } from 'angular';\n\nclass SearchController {\n\tconstructor($timeout, $log, $http, SEARCH_FILTERS) {\n\t\t'ngInject';\n\t\tthis.$timeout = $timeout;\n\t\tthis.$log = $log;\n\t\tthis.$http = $http;\n\n\t\tconst { typeFilters, modelFilters, fieldFilters } = SEARCH_FILTERS;\n\t\tObject.assign(this, { typeFilters, modelFilters, fieldFilters });\n\t}\n\n\t$onInit() {\n\t\tthis.searchResults = [];\n\t\tthis.filters = {\n\t\t\tin: [],\n\t\t\tfor: [],\n\t\t\tby: []\n\t\t};\n\t}\n\tquerySearch (q) {\n\t\tif (!q) return [];\n\t\tconst params = { q };\n\t\tif (this.filters.for.length) params.filter = this.filters.for;\n\t\tif (this.filters.by.length) params.fields = this.filters.by;\n\t\tconsole.log(params);\n\t\treturn this.$http.get('/api/v1/search', { params }).then(result => {\n\t\t\tconst output = [];\n\t\t\tObject.keys(result.data.results).forEach(type => output.push(...result.data.results[type]));\n\t\t\tthis.searchResults = output;\n\t\t\t// return output;\n\t\t\treturn result.data.overview;\n\t\t});\n\t}\n\n\tsearchTextChange(text) {\n\t\tthis.$log.info('Text changed to ' + text);\n\t}\n\n\tselectedItemChange(item) {\n\t\tthis.$log.info('Item changed to ' + JSON.stringify(item));\n\t}\n}\n\nexport default SearchController;\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/search/search.controller.js","import angular from 'angular';\nimport uiRouter from 'angular-ui-router';\nimport ngAnimate from 'angular-animate';\nimport ngMaterial from 'angular-material';\nimport ngCookies from 'angular-cookies';\nimport ngStorage from 'angular-storage';\n\nimport settingsComponent from './settings.component';\nimport settingsFactory from './settings.factory';\nimport connectionDetailsService from './connectionDetails.service.js';\n\nlet settingsModule = angular.module('settings', [\n  uiRouter,\n  ngAnimate,\n  ngMaterial,\n  ngCookies,\n\tngStorage\n])\n\n.component('userSettings', settingsComponent)\n\n.factory('SettingsFactory', settingsFactory)\n\n.service('ConnectionDetails', connectionDetailsService)\n\n.config(($stateProvider) => {\n  'ngInject'\n\t$stateProvider\n    .state('settings', {\n      parent: 'home',\n      url: '/',\n      component: 'userSettings'\n    });\n})\n\n.name;\n\nexport default settingsModule;\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/settings/settings.js","import template from './settings.html';\nimport controller from './settings.controller';\nimport './settings.scss';\n\nlet settingsComponent = {\n  restrict: 'E',\n  bindings: {},\n  template,\n  controller\n};\n\nexport default settingsComponent;\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/settings/settings.component.js","module.exports = \"<md-content layout=\\\"column\\\" layout-align=\\\"start center\\\" class=\\\"user-dashboard\\\" layout-fill>\\n\\n\\t<md-card id=\\\"user_dashboard\\\" layout=\\\"column\\\" layout-align=\\\"center center\\\" flex=\\\"noshrink\\\" ng-if=\\\"!$ctrl.isLoggedIn()\\\">\\n\\t  <md-card-header layout-align=\\\"space-around center\\\" class=\\\"signin-msg\\\">\\n\\t    <md-card-content layout=\\\"column\\\">\\n\\t      <p class=\\\"md-headline\\\"><strong>Sign in or register</strong> to save your user preferences permanently!</p>\\n\\t      <p class=\\\"md-subtitle\\\">Preferences will still be saved without a user but will be limited to your browser session.</p>\\n\\t      <md-button ng-click=\\\"$ctrl.promptLogin()\\\" class=\\\"md-raised md-primary\\\" md-autofocus=\\\"!$ctrl.isLoggedIn()\\\">Sign in</md-button>\\n\\t      <md-button href=\\\"/keystone/signin\\\" target=\\\"_self\\\" class=\\\"md-primary\\\">Register</md-button>\\n\\t    </md-card-content>\\n\\t  </md-card-header>\\n\\t</md-card>\\n\\n\\t<md-card id=\\\"user_dashboard\\\" flex=\\\"none\\\" ng-if=\\\"$ctrl.isLoggedIn()\\\">\\n\\t\\t<img src=\\\"assets/images/north_bg.jpg\\\" alt=\\\"\\\" class=\\\"md-card-image\\\" />\\n\\t  <md-card-header layout-align=\\\"space-around center\\\">\\n\\t    <md-card-avatar><img ng-src=\\\"{{ $ctrl.user.avatar.secure_url }}\\\" class=\\\"md-user-avatar\\\"/></md-card-avatar>\\n\\t    <md-card-header-text><span class=\\\"md-headline\\\">{{ [$ctrl.user.name.first, $ctrl.user.name.last].join(' ') }}</span><span class=\\\"md-subhead\\\">{{ $ctrl.user.bannerId }}</span></md-card-header-text>\\n\\t  </md-card-header>\\n\\t  <md-card-actions layout=\\\"row\\\" layout-align=\\\"start center\\\">\\n      <md-button aria-label=\\\"go to admin\\\" class=\\\"md-primary md-raised\\\" ng-if=\\\"$ctrl.user.isAdmin || $ctrl.user.isEditor\\\" href='/keystone', target='_self'>\\n        Admin\\n      </md-button>\\n\\t    <md-button ng-click=\\\"$ctrl.logout()\\\" class=\\\"md-raised\\\">Sign out</md-button>\\n\\t    <md-card-icon-actions>\\n\\t      <md-button aria-label=\\\"edit profile\\\" class=\\\"md-icon-button md-primary\\\" md-autofocus=\\\"$ctrl.isLoggedIn()\\\">\\n\\t        <ng-md-icon icon=\\\"edit\\\"></ng-md-icon>\\n\\t      </md-button>\\n\\t    </md-card-icon-actions>\\n\\t  </md-card-actions>\\n\\t</md-card>\\n\\n\\t<md-card flex=\\\"nogrow\\\" id=\\\"user_settings\\\">\\n  \\t<v-accordion class=\\\"vAccordion--default\\\" multiple flex control=\\\"accordion\\\">\\n\\t\\t  <!-- add expanded attribute to open the section -->\\n\\t\\t  <v-pane>\\n\\t\\t    <v-pane-header>\\n  \\t\\t\\t\\tApp settings\\n\\t\\t    </v-pane-header>\\n\\t\\t    <v-pane-content>\\n\\t\\t\\t\\t\\t<md-list>\\n\\t\\t\\t\\t\\t  <md-list-item ng-repeat=\\\"(key, setting) in $ctrl.settings\\\">\\n\\t\\t\\t\\t\\t    <ng-md-icon icon=\\\"{{::setting.icon}}\\\" ng-attr-style=\\\"fill: {{ setting.val? '#003c71':'#cccccc'}}\\\" flex=\\\"nogrow\\\"></ng-md-icon>\\n\\t\\t\\t\\t\\t    <span flex>{{ ::setting.label }}</span>\\n\\t\\t\\t\\t\\t    <md-switch class=\\\"md-primary\\\" ng-model=\\\"$ctrl.settings[key].val\\\" ng-change=\\\"$ctrl.updateSettings()\\\" aria-label=\\\"{{ ::setting.label }}\\\"></md-switch>\\n\\t\\t\\t\\t\\t  </md-list-item>\\n\\t\\t\\t\\t\\t</md-list>\\n\\t\\t    </v-pane-content>\\n\\t\\t  </v-pane>\\n\\n\\t\\t  <v-pane>\\n\\t\\t    <v-pane-header>\\n\\t\\t      Data usage\\n\\t\\t    </v-pane-header>\\n\\n\\t\\t    <v-pane-content>\\n\\t\\t    \\t<div layout=\\\"column\\\" layout-padding>\\n\\t\\t\\t\\t\\t\\t<span class=\\\"md-subhead\\\">\\n\\t\\t\\t\\t\\t\\t\\t<strong>Current:</strong>\\n\\t\\t\\t\\t\\t\\t\\t<span class=\\\"md-caption\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<strong>{{ $ctrl.usageLevel[0] }} image quality</strong> with <strong>{{ $ctrl.usageLevel[1] }} load time</strong> and <strong>{{ $ctrl.usageLevel[2] }} data consumption</strong> \\n\\t\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t<md-divider></md-divider>\\n\\t\\t\\t\\t\\t\\t<label ng-repeat=\\\"(key, setting) in $ctrl.usage\\\" flex>\\n\\t\\t\\t\\t\\t    <md-checkbox ng-if=\\\"key === 'auto'\\\" class=\\\"md-primary\\\" ng-model=\\\"setting.val\\\" ng-change=\\\"$ctrl.detectConnection()\\\" aria-label=\\\"Auto-detect optimum settings\\\" ng-disabled=\\\"$ctrl.connection.loading\\\">\\n\\t\\t            <div layout=\\\"row\\\" layout-align=\\\"space-between stretch\\\">\\n\\t\\t            \\t<span flex=\\\"noshrink\\\">{{ $ctrl.connection.loading ? 'Detecting network...' : 'Auto-detect optimum settings'; }}</span>\\n\\t\\t            \\t<span flex=\\\"grow\\\"></span>\\n\\t\\t            \\t<md-progress-circular md-mode=\\\"indeterminate\\\" md-diameter=\\\"16\\\" ng-show=\\\"$ctrl.connection.loading\\\"></md-progress-circular>\\n\\t\\t            </div>\\n\\t\\t          </md-checkbox>\\n\\t\\t\\t\\t\\t\\t\\t{{ ::setting.label }}<br/>\\n\\t\\t\\t\\t    \\t<md-slider-container flex ng-if=\\\"key !== 'auto'\\\" ng-disabled=\\\"$ctrl.usage.auto.val\\\">\\n\\t\\t\\t\\t\\t      <h5>{{ ::setting.labels[0] }}</h5>\\n\\t\\t\\t\\t\\t      <md-slider ng-model=\\\"setting.val\\\" step=\\\"{{::setting.step}}\\\" min=\\\"{{::setting.min}}\\\" max=\\\"{{::setting.max}}\\\" aria-label=\\\"{{setting.label}}\\\" class=\\\"md-primary\\\" md-discrete ng-change=\\\"$ctrl.updateUsage()\\\"></md-slider>\\n\\t\\t\\t\\t\\t      <h5>{{ ::setting.labels[1] }}</h5>\\n\\t\\t\\t\\t\\t    </md-slider-container>\\n\\t\\t\\t\\t\\t\\t</label>\\n\\n\\t\\t\\t    </div>\\n\\n\\t\\t    </v-pane-content>\\n\\t\\t  </v-pane>\\n\\n\\t\\t</v-accordion>\\n\\t</md-card>\\n</md-content>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/components/settings/settings.html\n// module id = 647\n// module chunks = 0","import { element } from 'angular';\n\n/**\n * The settings controller provides a high-level interface to\n * the app's user preferences and data usage settings, login/logout\n * functions, and a set of automatic usage detection functions.\n * \n * @param {object} $scope \t\t\t\t\t The current scope\n * @param {object} $animate          For animating backdrop only\n * @param {object} $mdUtil           Init backdrop utility\n * @param {object} $popupWindow      Supplies login window\n * @param {object} UserAuth          Authentication check\n * @param {object} UserSession       Holds all settings\n * @param {object} ConnectionDetails Detects network and device\n * @param {object} AUTH_EVENTS       Authorization event names\n */\nclass SettingsController {\n\tconstructor($scope, $animate, $mdUtil, $popupWindow,\n\tUserAuth, UserSession, ConnectionDetails,\n\tAUTH_EVENTS) {\n\t\t'ngInject';\n\t\tthis.$scope = $scope;\n\t\tthis.$animate = $animate;\n\t\tthis.$mdUtil = $mdUtil;\n\t\tthis.$popupWindow = $popupWindow;\n\t\tthis.UserAuth = UserAuth;\n\t\tthis.UserSession = UserSession;\n\t\tthis.ConnectionDetails = ConnectionDetails;\n\t\tthis.AUTH_EVENTS = AUTH_EVENTS;\n\t}\n\t/**\n\t * Lifecycle hook to initialize dependencies when component\n\t * is mounted.\n\t * \n\t * Stores authentication and user preference detail objects,\n\t * inits connection object to hold network info. Sets up\n\t * one-time `$watch` binding to listen for accordion init\n\t * since its contents load async before it can open.\n\t *\n\t * Sets up `$on('event')` listener for login success; passes\n\t * user data from event into controller and syncs applicable\n\t * view elements; opens accordion to expose settings to user.\n\t */\n\t$onInit() {\n\t\tthis.isLoggedIn = this.UserAuth.isAuthenticated;\n\t\tthis.user = this.UserSession.user;\n\t\tthis.settings = this.UserSession.settings;\n\t\tthis.usage = this.UserSession.usage;\n\n\t\t/**\n\t\t * This property will hold the user's network and\n\t\t * device information when it becomes available; it\n\t\t * remains false until availability.\n\t\t *\n\t\t * @memberof SettingsCtrl\n\t\t * @type {boolean|object}\n\t\t * @example\n\t\t * {\n\t\t *   \"network\": {\n\t\t *     \"speeds\": { ... },\n\t\t *     ...\n\t\t *   },\n\t\t *   \"useragent\": {\n\t\t *     \"device\": { ... },\n\t\t *     ...\n\t\t *   }\n\t\t * }\n\t\t */\n\t\tthis.connection = false;\n\n\t\t/**\n\t\t * The accordion initializer watches for a valid\n\t\t * instance and opens the accordion once it becomes\n\t\t * available. Performed once then deregistered.\n\t\t * \n\t\t * @memberof SettingsCtrl\n\t\t */\n\t\tconst accordionReady = this.$scope.$watch('accordion', accordion => {\n\t\t\tif (accordion) {\n\t\t\t\tthis.$scope.$applyAsync(() => {\n\t\t\t\t\tthis.isLoggedIn() && accordion.expandAll();\n\t\t\t\t});\n\t\t\t\taccordionReady();\n\t\t\t}\n\t\t});\n\n\t\tthis.$scope.$on(this.AUTH_EVENTS.loginSuccess, this.loadUserAfterLogin.bind(this) );\n\t\t\n\t\tthis.getUsageLevel();\n\t}\n\n\t/**\n\t * Expands all accordion sections.\n\t */\n\texpandAll() {\n\t\tthis.$scope.accordion.expandAll();\n\t}\n\t/**\n\t * Collapses all accordion sections.\n\t */\n\tcollapseAll() {\n\t\tthis.$scope.accordion.collapseAll();\n\t}\n\n\t/**\n\t * Prompts user for login using `$popupWindow` service's `login()` dialog.\n\t * @return {Promise} Status of popupWindow\n\t */\n\tpromptLogin() {\n\t\treturn this.$popupWindow.login();\n\t}\n\t/**\n\t * Logs user out directly with `UserAuth.logout()`.\n\t */\n\tlogout() {\n\t\tconst backdrop = this.$mdUtil.createBackdrop(this.$scope, \"md-dialog-backdrop md-opaque\");\n\t\tbackdrop[0].tabIndex = -1;\n\t\tthis.$animate.enter(backdrop, element(document.body), null);\n\t\tthis.UserAuth.logout().then(() => {\n\t\t\tthis.$animate.leave(backdrop);\n\t\t\tthis.collapseAll();\n\t\t});\n\t}\n\n\t/**\n\t * Stores user info and opens accordion sections when login is detected.\n\t * \n\t * @param  {Event} event  The originating event object\n\t * @param  {Object} user  The newly logged-in user\n\t */\n\tloadUserAfterLogin(event, user) {\n\t\tthis.user = this.UserSession.user;\n\t\tthis.settings = this.UserSession.settings;\n\t\tthis.usage = this.UserSession.usage;\n\t\tthis.updateUsage();\n\t\tthis.updateSettings();\n\t\tthis.expandAll();\n\t}\n\n\t/**\n\t * Updates the user's setting preferences.\n\t */\n\tupdateSettings() {\n\t\tthis.UserSession.settings = this.settings;\n\t}\n\t/**\n\t * Updates the user's usage preferences and usage level description text.\n\t * \n\t * @param  {[object]} usage Optional data override\n\t */\n\tupdateUsage(usage) {\n\t\tthis.UserSession.usage = usage || this.usage;\n\t\tthis.getUsageLevel();\n\t}\n\t/**\n\t * Uses the `ConnectionDetails` service to convert the current\n\t * session's usage preferences into a user-friendly description\n\t * of what the preferences' effects will be.\n\t * - Grabs `UserSession.usage` details\n\t * - Uses `ConnectionDetails.calculateUsageLevel()` to tally usage stats from details\n\t * - Passes resulting tally to `ConnectionDetails.getLabelsFromTally()`\n\t * - Assigns resulting descriptions to controller\n\t */\n\tgetUsageLevel() {\n\t\tthis.ConnectionDetails.calculateUsageLevel(this.UserSession.usage).then(usageLevelTally => {\n\t\t\tthis.usageLevel = this.ConnectionDetails.getLabelsFromTally(usageLevelTally);\n\t\t});\n\t}\n\n\t/**\n\t * User-activated function for auto-optimizing usage\n\t * level using the `ConnectionDetails` service.\n\t * - Sets loading animation during detection\n\t * - Fetches connection information with `detect()`\n\t * - Stores returned connection information\n\t * - Sets optimized usage settings with `optimize()`\n\t */\n\tdetectConnection() {\n\t\tif (this.usage.auto.val) {\n\t\t\tthis.connection = { loading: true };\n\t\t\tthis.ConnectionDetails.detect().then(connection => {\n\t\t\t\tthis.connection = connection;\n\t\t\t\tthis.usage = this.ConnectionDetails.optimize(connection);\n\t\t\t\tthis.updateUsage();\n\t\t\t});\n\t\t}\n\t}\n}\n\nexport default SettingsController;\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/settings/settings.controller.js","function SettingsFactory(store) {\n  'ngInject';\n  return store.getNamespacedStore('appSettings');\n}\n\nexport default SettingsFactory;\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/settings/settings.factory.js","import { isNumber } from 'angular';\n\n/**\n * Upper limit of \"high-speed\" connection rating (in Mbps).\n * @memberof ConnectionDetails\n * @type {Number}\n */\nconst SPEED_HI = 50;\n\n/**\n * Upper limit of \"wi-fi\" connection rating (in Mbps).\n * @memberof ConnectionDetails\n * @type {Number}\n */\nconst SPEED_WF = 8;\n\n/**\n * Upper limit of \"mobile/3G\" connection rating (in Mbps).\n * @memberof ConnectionDetails\n * @type {Number}\n */\nconst SPEED_3G = 2;\n\n/**\n * This service is responsible for translating user network and device\n * details into a usable format for application settings.\n *\n * It contains methods for detecting details, optimizing settings based\n * on details, calculating general reports of setting levels, and\n * providing human-readable versions of those reports.\n * \n * @param  {Object} $rootScope    The root of the app scopes\n * @param  {Object} $http         Angular's http service\n * @param  {Object} $q            Angular's promise builder\n * @param  {Object} USER_DEFAULTS Constant for default settings\n */\nclass ConnectionDetailsService {\n\t/**\n\t * Initializes the service's dependencies. Extracts usage profiles\n\t * from the `USER_DEFAULTS.profiles` constant and discards other settings.\n\t */\n\tconstructor($rootScope, $http, $q, USER_DEFAULTS) {\n\t  'ngInject';\n\t  this.$rootScope = $rootScope;\n\t\tthis.$http = $http;\n\t\tthis.$q = $q;\n\n\t\tthis.profiles = USER_DEFAULTS.profiles;\n\t}\n\n\t/**\n\t * Uses Angular's `$http` service to send a request to the server\n\t * for a connection test. Internally, the server API measures\n\t * connection speed in the background, and supplies this info back\n\t * to the app along with device details when it becomes available.\n\t * \n\t * @return {Promise} Promise that will resolve to connection details\n\t */\n\tdetect() {\n\t  return this.$http.get('/user/connection').then(connection => {\n\t  \tthis.connection = connection;\n\t  \treturn connection;\n\t  });\n\t}\n\n\t/**\n\t * Determines the best usage profile (from `USER_DEFAULTS.profiles`)\n\t * to select based on a connection details object (e.g. the result of\n\t * calling `detect()`).\n\t * @param  {Object} connection Incoming connection details object\n\t * @return {Object}            The chosen optimal settings profile\n\t */\n\toptimize(connection) {\n\t\tconst { network, useragent } = connection.data,\n\t\t\t\t\tdownloadSpeed = network.speeds.download,\n\t\t\t\t\tdeviceType = useragent.device.type;\n\n\t\tif (downloadSpeed >= SPEED_HI && !deviceType)\n\t\t\treturn this.profiles.desktopFast;\n\t\tif (downloadSpeed >= SPEED_WF && downloadSpeed < SPEED_HI && !deviceType)\n\t\t\treturn this.profiles.desktopSlow;\n\t\tif (downloadSpeed < SPEED_WF && !deviceType)\n\t\t\treturn this.profiles.balanced;\n\t\tif (downloadSpeed >= SPEED_WF && deviceType  === 'mobile')\n\t\t\treturn this.profiles.mobileWifi;\n\t\tif (downloadSpeed >= SPEED_3G && deviceType  === 'mobile')\n\t\t\treturn this.profiles.mobile3g;\n\t\tif (downloadSpeed < SPEED_3G)\n\t\t\treturn this.profiles.conserve;\n\t\t// default return\n\t\treturn this.profiles.balanced;\n\t}\n\n\t/**\n\t * Tallies up values of usage settings asynchronously\n\t * by using `$scope.$eval()` to match applicable usage\n\t * level values against their keys (which are keyed by\n\t * \"condition\").\n\t * @example\n\t * {\n\t *   '<= 15': [0, 0, 5],\n\t *   '== 0': [...]\n\t * }\n\t * @param\t {Object}\tusage Incoming usage preference object\n\t * @return {Promise}\t\t\tPromise representing final levels\n\t */\n\tcalculateUsageLevel(usage) {\n\t\tconst tally = [0, 0, 0], // [imageQual, loadTime, dataUse] / 0=low, 10=high\n\t  \t\t\tdeferred = this.$q.defer(),\n\t  \t\t\taddToTally = values => {\n\t\t\t\t\t\ttally.forEach((v, index) => {\n\t\t\t\t\t\t\ttally[index] += values[index];\n\t\t\t\t\t\t});\n\t\t\t\t\t};\n\t\tthis.$rootScope.$applyAsync(() => {\n\t\t\tObject.keys(usage).forEach(setting => {\n\t\t\t\tif (setting !== 'auto') {\n\t\t\t\t\tObject.keys(usage[setting].levels).forEach(expression => {\n\t\t\t\t\t\tconst inRange = this.$rootScope.$eval(`(${ usage[setting].val } ${expression})`);\n\t\t\t\t\t\tif (inRange) addToTally(usage[setting].levels[expression]);\n\t\t\t\t\t\tif (isNumber(inRange)) deferred.reject('Usage calculation error');\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t\tdeferred.resolve(tally);\n\t\t});\n\t\treturn deferred.promise;\n\t}\n\t// TODO(PERF): CLEAN UP THIS FUNCTION; TOO MANY NESTED CLOSURES\n\n\t/**\n\t * Maps a tally array of numbers into a label\n\t * array of human-readable usage level strings.\n\t * @param  {Array<Number>}  tally Array of tallied usage values\n\t * @return {Array<String>}       \tUsage descriptions\n\t */\n\tgetLabelsFromTally(tally) {\n\t\treturn tally.map(value => {\n\t\t\tif (value <= 5) return 'very low';\n\t\t\tif (value > 5 && value <= 10) return 'low';\n\t\t\tif (value > 10 && value <= 15) return 'moderate';\n\t\t\tif (value > 15 && value <= 20) return 'high';\n\t\t\tif (value > 20) return 'very high';\n\t\t});\n\t}\n}\n\nexport default ConnectionDetailsService;\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/settings/connectionDetails.service.js","import template from './app.html';\nimport controller from './app.controller';\nimport './app.scss';\n\nlet appComponent = {\n  template,\n  controller,\n  controllerAs: 'mc',\n  restrict: 'E'\n};\n\nexport default appComponent;\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/app.component.js","module.exports = \"<svg version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" style=\\\"display:none;\\\">\\n  <filter id=\\\"blur\\\">\\n    <fegaussianblur stddeviation=\\\"10\\\"></fegaussianblur>\\n  </filter>\\n</svg>\\n\\n<div flex=\\\"\\\" layout=\\\"column\\\" layout-fill=\\\"\\\">\\n  <title-bar title=\\\"Virtual Tour\\\" mobile=\\\"mc.mobile\\\" flex=\\\"nogrow\\\">\\n    <title-bar-button ng-repeat=\\\"(o, option) in mc.titlebar.options\\\" on-click=\\\"mc.titlebar.clickHandlers[o]()\\\" label=\\\"{{ ::option.label }}\\\" active=\\\"option.active\\\" icon=\\\"option.icon\\\" tooltip=\\\"option.tooltip\\\" class=\\\"{{ ::option.class }}\\\">\\n    </title-bar-button>\\n  </title-bar>\\n\\n  <div layout=\\\"column\\\"\\n  \\t\\t layout-gt-sm=\\\"row\\\"\\n  \\t\\t layout-align=\\\"end stretch\\\"\\n  \\t\\t layout-align-gt-sm=\\\"end start\\\"\\n  \\t\\t flex\\n  \\t\\t class=\\\"scene-container\\\"\\n  \\t\\t ng-class=\\\"{ 'toolbar-open' : mc.toolbar.isOpen&amp;&amp;!mc.mobile.landscape, 'toolbar-condensed': mc.toolbar.isCondensed }\\\">\\n    <section id=\\\"scene-view\\\"\\n\\t\\t\\t\\t     flex=\\\"grow\\\"\\n\\t\\t\\t\\t     layout=\\\"column\\\"\\n\\t\\t\\t\\t     layout-fill=\\\"\\\"\\n\\t\\t\\t\\t     ng-class=\\\"{ 'blur-active' : mc.sidebar.hasBlur() }\\\"\\n\\t\\t\\t\\t     class=\\\"scene-view\\\">\\n      <aframe-scene mobile=\\\"mc.mobile\\\">\\n\\t      <scene-editor ng-if=\\\"!(mc.mobile.device &amp;&amp; mc.mobile.landscape)\\\"></scene-editor>\\n      </aframe-scene>\\n    </section>\\n\\n    <button-bar layout=\\\"row\\\"\\n    \\t\\t\\t\\t\\t\\tlayout-gt-sm=\\\"column\\\"\\n    \\t\\t\\t\\t\\t\\tflex=\\\"nogrow\\\"\\n    \\t\\t\\t\\t\\t\\titems=\\\"mc.toolbar.views\\\"\\n    \\t\\t\\t\\t\\t\\topen=\\\"mc.toolbar.isOpen\\\"\\n    \\t\\t\\t\\t\\t\\tcondensed=\\\"mc.toolbar.isCondensed\\\"\\n    \\t\\t\\t\\t\\t\\tmobile=\\\"mc.mobile\\\">\\n    </button-bar>\\n  </div>\\n</div>\\n\\n<div ng-class=\\\"{ 'toolbar-open' : mc.toolbar.isOpen&amp;&amp;!landscapeMobile, 'toolbar-condensed': mc.toolbar.isCondensed }\\\" layout=\\\"row\\\" flex=\\\"\\\">\\n  <md-sidenav ng-class=\\\"{ 'blur-active' : mc.sidebar.hasBlur(), 'is-mobile': mc.mobile.screen, 'is-landscape': mc.mobile.landscape }\\\" md-component-id=\\\"right\\\" md-disable-backdrop=\\\"\\\" md-whiteframe=\\\"4\\\" flex=\\\"\\\" class=\\\"md-sidenav-right main-menu\\\">\\n    <ui-view flex=\\\"\\\" layout=\\\"column\\\" layout-fill=\\\"\\\" resizable=\\\"\\\" r-directions=\\\"[&quot;left&quot;]\\\" ng-style=\\\"{ maxWidth: ('map' | isState) ? 'none' : '600px' }\\\"></ui-view>\\n  </md-sidenav>\\n</div>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/app.html\n// module id = 654\n// module chunks = 0","import { utils } from 'aframe';\nimport { element, isUndefined } from 'angular';\n\nfunction AppController(\n\t$scope, $state, $timeout, // ng deps\n\t$mdSidenav, $mdMedia, // md deps\n\t$popupWindow, UserSession, // my libs\n\tBUTTONBAR_VIEWS, TITLEBAR_OPTS // consts\n) {\n  'ngInject';\n  const WELCOME_MSG_DELAY = 500; //ms\n  const SETTINGS_MSG_DELAY = 1000; //ms\n  const BLURRED_VIEWS = [ 'search', 'map' ];\n  // check for mobile/landscape on every digest\n  this.mobile = {};\n  $scope.$watch(\n    () => ({\n    \tscreen: !$mdMedia('gt-sm'),\n    \tlandscape: $mdMedia('landscape'),\n    \tdevice: utils.device.isMobile()\n    }),\n    m => {\n      this.mobile = m; //console.log(m);\n    },\n    true\n  );\n\n\tconst goToSettings = response => {\n\t\tswitch (response) {\n\t\t\tcase 'ok':\n        $state.go('settings');\n        $mdSidenav('right').open();\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n  const showSettingsMsg = () => {\n  \tconst autoconfig = UserSession.usage.auto;\n  \tif (autoconfig && autoconfig.val) {\n\t    $popupWindow.toast('primary', {\n\t    \tmessage: 'Data usage settings auto-configured to your device!',\n\t    \taction: 'Change settings'\n\t    }).then(response => {\n\t    \tgoToSettings(response);\n\t    });\n  \t} else {\n\t    $popupWindow.toast('warn', {\n\t    \tmessage: 'Automatic data usage is currently disabled, but can be enabled in Settings.',\n\t    \taction: 'Show me how'\n\t    }).then(response => {\n\t    \tgoToSettings(response);\n\t    });\n\t  }\n  }\n\n  const showWelcomeMsg = () => {\n\t\t$popupWindow.welcome()\n\t    .then( answer => (answer != 'tour') && showSettingsMsg() )\n\t    .catch( () => showSettingsMsg() );\n  }\n\n  const settingsLoaded = $scope.$watch(\n  \t() => UserSession.settings, \n  \tuserSettings => {\n\t  \tif (!isUndefined(userSettings)) {\n\t  \t\tconsole.log('main controller applying settings')\n\t\t\t  const { showWelcome, toolbarOpen, toolbarCondensed } = UserSession.settings;\n\n\t\t\t\tif (showWelcome.val) {\n\t\t\t\t  $timeout(showWelcomeMsg, WELCOME_MSG_DELAY);\n\t\t\t\t} else {\n\t\t\t\t  $timeout(showSettingsMsg, SETTINGS_MSG_DELAY);\n\t\t\t\t}\n\n\t\t\t  this.titlebar = {\n\t\t\t\t\toptions: TITLEBAR_OPTS,\n\t\t\t\t\tclickHandlers: {\n\t\t\t\t\t\tconfig: () => {\n\t\t\t      \t$mdSidenav('config').toggle();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tright: () => {\n\t\t\t\t\t    this.toolbar.toggle();\n\t\t\t      \tthis.titlebar.options.right.active = this.toolbar.isOpen;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcondense: () => {\n\t\t\t\t\t    this.toolbar.condense();\n\t\t\t      \tthis.titlebar.options.condense.active = this.toolbar.isCondensed;\n\t\t\t\t\t\t}\n\t\t\t\t\t} \n\t\t\t  }\n\n\t\t\t  this.toolbar = {\n\t\t\t  \tviews: BUTTONBAR_VIEWS,\n\t\t\t    isOpen: toolbarOpen.val,\n\t\t\t    isCondensed: toolbarCondensed.val,\n\t\t\t    toggle() {\n\t\t\t  \t\tthis.isOpen = !this.isOpen;\n\t\t\t  \t\tthis.isOpen&&$mdSidenav('right').close();\n\t\t\t    },\n\t\t\t    condense() {\n\t\t\t      !this.isOpen&&this.toggle();\n\t\t\t      this.isCondensed = !this.isCondensed;\n\t\t\t      return this.isCondensed;\n\t\t\t    }\n\t\t\t  }\n\t\t\t  \n\t\t\t  this.sidebar = {\n\t\t\t  \thasState(view) {\n\t\t\t  \t\treturn $state.includes(view);\n\t\t\t  \t},\n\t\t\t  \thasBlur() {\n\t\t\t  \t\treturn BLURRED_VIEWS.some(this.hasState);\n\t\t\t  \t}\n\t\t\t  }\n\n\t\t\t  settingsLoaded();\n\t  \t}\n\t  }\n  );\n\n}\n\n\nexport default AppController;\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/app.controller.js"],"sourceRoot":""}