webpackJsonp([2],{258:function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var i=e(2),a=n(i),o=e(27),r=n(o);e(674);var l=e(638),c=n(l),s=e(636),d=n(s),u=e(639),m=n(u),f=e(684),h=n(f),p=e(640),g=n(p),v=a.default.module("aframe.editor",[r.default,"ngWig"]).directive("editable",c.default).component("sceneEditor",d.default).service("$aframeEditor",m.default).config(["$mdPanelProvider",function(t){"ngInject";t.definePreset("editorDialog",{template:h.default,controller:g.default,attachTo:a.default.element(document.body),controllerAs:"$ctrl",bindToController:!0,panelClass:"editor-dialog",clickOutsideToClose:!0,escapeToClose:!0,focusOnOpen:!0,zIndex:85})}]).constant("EDITOR_MESSAGES",{confirm:{textContent:"Are you sure?",action:"Confirm",highlightAction:!0,highlightClass:"md-warn",position:"bottom left",hideDelay:0},itemRemoved:{textContent:"Item removed!",action:"Publish changes",highlightAction:!0,highlightClass:"md-primary",position:"bottom left",hideDelay:5e3},itemAdded:{textContent:"Item added!",action:"Publish changes",highlightAction:!0,highlightClass:"md-primary",position:"bottom left",hideDelay:5e3},draftLoaded:{textContent:"Draft loaded!",action:"Publish changes",highlightAction:!0,highlightClass:"md-primary",position:"bottom left",hideDelay:5e3},saveDraft:{textContent:"Draft saved!",action:"Publish changes",highlightAction:!0,highlightClass:"md-primary",position:"bottom left",hideDelay:5e3},draftFound:{textContent:"Saved drafts found!",action:"Load most recent",highlightAction:!0,highlightClass:"md-primary",position:"bottom left",hideDelay:5e3},publish:{textContent:"Changes published!",action:"Dismiss",position:"bottom left",hideDelay:5e3},discardDraft:{textContent:"Draft discarded!",action:"Dismiss",position:"bottom left",hideDelay:1e3},revertToDraft:{textContent:"Reverted to last draft!",action:"Dismiss",position:"bottom left",hideDelay:2e3}}).constant("DATA_MODELS",{scene:{name:"",code:"",parent:"",panorama:""},sceneLinks:{scene:"",position:[0,0,0],rotation:[0,0,70]},hotSpots:{linked:!1,name:"",desc:"",feature:"",position:[0,0,0]}}).name;exports.default=v},588:function(t,exports){},636:function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var i=e(683),a=n(i),o=e(637),r=n(o);e(588);var l={template:a.default,controller:r.default,require:{SceneCtrl:"^aframeScene"}};exports.default=l},637:function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var i=e(184),a=n(i),o=e(13),r=n(o),l=e(14),c=n(l),s=function(){function t(e,n,i,a,o,l){"ngInject";(0,r.default)(this,t),this.$timeout=e,this.$mdPanel=n,this.$mdDialog=i,this.$aframeScene=a,this.$aframeEditor=o,this._unpublishedChanges=!1,this._schemas=l}return t.$inject=["$timeout","$mdPanel","$mdDialog","$aframeScene","$aframeEditor","DATA_MODELS"],(0,c.default)(t,[{key:"updateSceneData",value:function(t){(0,a.default)(this.SceneCtrl,t),this.$aframeScene.scene=t,console.info("updated scene with data from editor:",t)}},{key:"saveDraft",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.$aframeEditor.saveDraft(t)}},{key:"loadDraft",value:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.$aframeEditor.loadDraft(t._id,n).then(function(t){return e.updateSceneData(t)})}},{key:"checkForDraft",value:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.draftList=null,this.$aframeEditor.checkForDraft(e).then(function(n){return t.draftList=n,n.length&&e&&t.$aframeEditor.draftFound(n)}).then(function(e){return e&&t.updateSceneData(e)})}},{key:"discardDraft",value:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this.$mdDialog.confirm().title("Are you sure?").textContent("This action cannot be undone.").ok("Confirm").cancel("Cancel");this.$mdDialog.show(i).then(function(){e.$aframeEditor.discardDraft(t._id,n)})}},{key:"publish",value:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.$aframeEditor.publish(t,n).then(function(t){return e.updateSceneData(t)})}},{key:"$onInit",value:function(){var t=this,e=function(e){e.stopPropagation(),t.SceneCtrl._rightClick||(t.SceneCtrl._rightClick=e,e.preventDefault(),t.SceneCtrl.$sceneEl.on("mouseup",function(){t.SceneCtrl.$sceneEl.off("mouseup"),t.$timeout(function(){t.SceneCtrl._rightClick=!1})}))};this.SceneCtrl.$sceneEl.on("contextmenu",e),this.SceneCtrl.$onDestroy=function(){t.$sceneEl.off("contextmenu",e)},this.SceneCtrl.checkForDraft=function(){return t.checkForDraft()},this.SceneCtrl.editItem=function(e,n,i){return t.editItem(e,n,i)},this.SceneCtrl._editable=!0}},{key:"addItem",value:function(t,e){var n=this,i={item:this._schemas[e]};return i.newItem=!0,i.publish=function(){return n.$aframeEditor.addItemTo(i.item,n.SceneCtrl[e],function(t){n.$aframeScene.scene[e]=t,n._panelRef&&n._panelRef.close()})},i.saveDraft=function(){return n.$aframeEditor.addItemTo(i.item,n.SceneCtrl[e],function(t){n.$aframeScene.scene[e]=t,n.saveDraft()})},i.removeThis=function(){return n._panelRef&&n._panelRef.close()},i.closeDialog=i.removeThis,this.openEditor(t,i)}},{key:"newScene",value:function(t){var e=this,n={item:this._schemas.scene};return n.newItem=!0,n.publish=function(){e.$aframeEditor.publish(n.item),e._panelRef&&e._panelRef.close()},n.saveDraft=function(){n.item.state="draft",n.publish()},n.removeThis=function(){return e._panelRef&&e._panelRef.close()},n.closeDialog=n.removeThis,this.openEditor(t,n)}},{key:"editItem",value:function(t,e,n){var i=this,a={item:e};return a.publish=function(){return i.publish()},a.saveDraft=function(){return i.saveDraft()},a.removeThis=function(){return i.$aframeEditor.removeItemFrom(e,n,function(){i._panelRef&&i._panelRef.close()})},a.closeDialog=function(){return i._panelRef&&i._panelRef.close()},this.openEditor(t,a,{offsetY:-250})}},{key:"openEditor",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=i.offsetX,o=void 0===a?0:a,r=i.offsetY,l=void 0===r?0:r;console.log(t.clientY+l);var c=this.$mdPanel.newPanelPosition();e.newItem?c.absolute().center():c.absolute().bottom(0).left(0);var s=this.$mdPanel.newPanelAnimation().openFrom({top:t.clientY+l,left:t.clientX+o}).withAnimation(this.$mdPanel.animation.SCALE).closeTo({top:t.clientY+l,left:t.clientX+o}),d=function(){n._panelRef&&n._panelRef.destroy()};return this.$mdPanel.open("editorDialog",{position:c,animation:s,onDomRemoved:d,locals:e}).then(function(t){n._panelRef=t})}}]),t}();exports.default=s},638:function(t,exports,e){"use strict";function n(t){"ngInject";return{restrict:"A",scope:{editable:"@"},require:"^aframeScene",link:function(e,n,i,a){var o=function(n){console.log(e.$parent),a._rightClick&&a._editable&&(n.preventDefault(),a.editItem(a._rightClick,e.$parent[e.editable],a[e.editable+"s"]),t.eventTrack("click",{category:"edit:scene",label:e.$parent[e.editable]._id}))};n.on("click",o)}}}n.$inject=["$analytics"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n},639:function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var i=e(68),a=n(i),o=e(13),r=n(o),l=e(14),c=n(l),s=e(597),d=function(){function t(e,n,i,o,l){"ngInject";var c=this;(0,r.default)(this,t),this.$mdToast=e,this.$aframeScene=n,this.DraftResource=o,this.SceneResource=i.scene,this.toasts={},(0,a.default)(l).forEach(function(t){var n=e.simple(),i=l[t];(0,a.default)(i).forEach(function(t){n[t](i[t])}),c.toasts[t]=n})}return t.$inject=["$mdToast","$aframeScene","$tourApi","DraftResource","EDITOR_MESSAGES"],(0,c.default)(t,[{key:"publish",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i="update",a=e||(0,s.pick)(this.$aframeScene.scene,["_id","code","name","assets","entities","hotSpots","sceneLinks","panorama","parent","script"]);return a.updatedAt=new Date,e&&(a.createdAt=a.updatedAt,i="save"),this.SceneResource[i](e?null:{id:a._id},a).$promise.then(function(e){return t.lastPublished=t.$aframeScene.scene||e,n&&t.$mdToast.show(t.toasts.publish),e})}},{key:"saveDraft",value:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.DraftResource.save({content:this.$aframeScene.scene,kind:"Scene",original:this.$aframeScene.scene._id}).$promise.then(function(n){return t.lastDraft=n.content,e&&t.$mdToast.show(t.toasts.saveDraft).then(function(e){"ok"==e&&t.publish()}),n})}},{key:"checkForDraft",value:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.$aframeScene.scene&&this.DraftResource.query({sort:"-updatedAt",filter:{original:this.$aframeScene.scene._id}}).$promise}},{key:"draftFound",value:function(t){var e=this;return this.$mdToast.show(this.toasts.draftFound).then(function(n){return"ok"===n&&e.loadDraft(t[0]._id)})}},{key:"loadDraft",value:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.DraftResource.get({id:t}).$promise.then(function(t){return e.lastDraft=t.content,n&&e.$mdToast.show(e.toasts.draftLoaded).then(function(t){return"ok"===t&&e.publish()}),t.content})}},{key:"revertToDraft",value:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.checkForDraft(!1).then(function(e){return t.loadDraft(e[0]._id,!1)}).then(function(n){return e&&t.$mdToast.show(t.toasts.revertToDraft)})}},{key:"discardDraft",value:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.DraftResource.remove({id:t}).$promise.then(function(t){return n&&e.$mdToast.show(e.toasts.discardDraft)})}},{key:"removeItemFrom",value:function(t,e,n){var i=this;this.$mdToast.show(this.toasts.confirm).then(function(a){if("ok"==a){var o=e.indexOf(t);if(o!==-1)return e.splice(o,1),n&&n(),i.$mdToast.show(i.toasts.itemRemoved)}}).then(function(t){"ok"==t&&i.publish()})}},{key:"addItemTo",value:function(t,e,n){var i=this;isObject(t)&&isArray(e)&&(e.push(t),n&&n(e),t.position&&t.position.length&&this.toasts.itemAdded.textContent("Item added at "+t.position.join(", ")+"!"),this.$mdToast.show(this.toasts.itemAdded).then(function(t){"ok"==t&&i.publish()}))}}]),t}();exports.default=d},640:function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var i=e(13),a=n(i),o=e(14),r=n(o),l=function(){function t(e,n,i,o){"ngInject";var r=this;(0,a.default)(this,t),this.$filter=n,this.LocationResource=i.location,this.BuildingResource=i.building,this.SceneResource=i.scene,this.CategoryResource=o.category,this.FeatureResource=o.feature,this.CollectionResource=o.collection,this.item.scene&&e.$applyAsync(function(){r.initCurrentScene()}),this.item.feature&&e.$applyAsync(function(){r.initCurrentFeature()})}return t.$inject=["$scope","$filter","$tourApi","$mapApi"],(0,r.default)(t,[{key:"initCurrentCategory",value:function(){var t=this,e=void 0;this.loadCategories(function(n){e=t.feature.properties.category&&t.feature.properties.category.hasOwnProperty("_id")?t.feature.properties.category._id:t.feature.properties.category,t.category=t.$filter("filter")(n,{_id:e},!0)[0]})}},{key:"initCurrentFeature",value:function(){var t=this,e=void 0;this.loadFeatures(function(n){e=t.item.feature&&t.item.feature.hasOwnProperty("_id")?t.item.feature._id:t.item.feature,t.feature=t.$filter("filter")(n,{_id:e},!0)[0],t.initCurrentCategory()})}},{key:"initCurrentScene",value:function(){var t=this,e=void 0;this.loadScenes(function(n){e=t.item.scene.hasOwnProperty("_id")?t.item.scene._id:t.item.scene,t.scene=t.$filter("filter")(n,{_id:e},!0)[0],t.initCurrentBuilding()})}},{key:"initCurrentBuilding",value:function(){var t=this,e=void 0;this.loadBuildings(function(n){e=t.scene.parent.hasOwnProperty("_id")?t.scene.parent._id:t.scene.parent,t.building=t.$filter("filter")(n,{_id:e},!0)[0],t.initCurrentLocation()})}},{key:"initCurrentLocation",value:function(){var t=this,e=void 0;this.loadLocations(function(n){e=t.building.parent.hasOwnProperty("_id")?t.building.parent._id:t.building.parent,t.location=t.$filter("filter")(n,{_id:e},!0)[0]})}},{key:"loadLocations",value:function(t){var e=this;return this.LocationResource.query().$promise.then(function(n){e.locations=n,t&&t(n)})}},{key:"loadBuildings",value:function(t){var e=this;return this.BuildingResource.query(this.location?{filter:{parent:this.location._id}}:null).$promise.then(function(n){e.buildings=n,t&&t(n)})}},{key:"loadScenes",value:function(t){var e=this;return this.SceneResource.query(this.building?{filter:{parent:this.building._id}}:null).$promise.then(function(n){e.scenes=n,t&&t(n)})}},{key:"loadCategories",value:function(t){var e=this;return this.CategoryResource.query().$promise.then(function(n){e.categories=n,t&&t(n)})}},{key:"loadFeatures",value:function(t){var e=this;return this.FeatureResource.query(this.category?{filter:{"properties.category":this.category._id}}:null).$promise.then(function(n){e.features=n,t&&t(n)})}},{key:"onChangeCategory",value:function(){this.feature=null}},{key:"onChangeFeature",value:function(){this.item.feature=this.feature}},{key:"onChangeScene",value:function(){this.item.scene=this.scene._id}},{key:"onChangeBuilding",value:function(){this.item.building=this.building._id,this.scene=null}},{key:"onChangeLocation",value:function(){this.item.location=this.location._id,this.building=null,this.scene=null}}]),t}();exports.default=l},683:function(t,exports){t.exports='<md-fab-toolbar md-open="demo.isOpen" count="demo.count" md-direction="left">\n  <md-fab-trigger class="align-with-text">\n    <md-button aria-label="Open scene editor menu" class="md-fab md-primary">\n\t\t  <md-tooltip md-direction="left" md-autohide ng-if="!$root.appSettings.settings.showHints.val">\n\t\t    Open scene editor menu\n\t\t  </md-tooltip>\n      <ng-md-icon icon="edit"></ng-md-icon>\n    </md-button>\n  </md-fab-trigger>\n\n  <md-toolbar>\n    <md-fab-actions class="md-toolbar-tools" ng-mouseleave="$ctrl.tooltipMsg = false">\n      <md-button aria-label="New scene" class="md-icon-button" ng-mouseenter="$ctrl.tooltipMsg = \'New scene\'" ng-click="$ctrl.newScene($event)">\n        <ng-md-icon icon="insert_drive_file"></ng-md-icon>\n      </md-button>\n      <span class="fab-divider"></span>\n      <md-button aria-label="New scene link" class="md-icon-button" ng-mouseenter="$ctrl.tooltipMsg = \'New scene link\'" ng-click="$ctrl.addItem($event, \'sceneLinks\')">\n        <ng-md-icon icon="add_location"></ng-md-icon>\n      </md-button>\n      <md-button aria-label="photo" class="md-icon-button" ng-mouseenter="$ctrl.tooltipMsg = \'New hotspot\'" ng-click="$ctrl.addItem($event, \'hotSpots\')">\n        <ng-md-icon icon="info_outline"></ng-md-icon>\n      </md-button>\n      <span class="fab-divider"></span>\n      <md-button aria-label="Save draft" class="md-icon-button" ng-mouseenter="$ctrl.tooltipMsg = \'Save draft\'" ng-click="$ctrl.saveDraft()">\n        <ng-md-icon icon="save"></ng-md-icon>\n      </md-button>\n\n      <md-menu md-offset="0 -7">\n        <md-button aria-label="Load draft" class="md-icon-button" ng-mouseenter="$ctrl.tooltipMsg = \'Load draft\'" ng-click="$ctrl.checkForDraft(false);$mdOpenMenu($event)">\n\t        <ng-md-icon icon="folder_open"></ng-md-icon>\n\t      </md-button>\n        <md-menu-content width="6" ng-switch="$ctrl.draftList.length">\n          <md-menu-item ng-repeat="draft in $ctrl.draftList">\n            <md-button ng-click="$ctrl.loadDraft(draft)" ng-attr-id="draft_{{ ::draft.updatedAt }}">{{ draft.updatedAt | date:\'medium\' }}</md-button>\n            <md-button ng-click="$ctrl.discardDraft(draft)" class="md-icon-button md-raised md-warn" aria-label="Discard this draft" aria-labelledby="draft_{{ ::draft.updatedAt }}">\n\t\t\t        <ng-md-icon icon="delete" size="22"></ng-md-icon>\n\t\t\t      </md-button>\n          </md-menu-item>\n          <md-menu-item ng-hide="$ctrl.draftList.length">\n          \t<span>No drafts available</span>\n          </md-menu-item>\n        </md-menu-content>\n      </md-menu>\n\n      <md-button aria-label="Publish changes" class="md-icon-button" ng-mouseenter="$ctrl.tooltipMsg = \'Publish changes\'" ng-click="$ctrl.publish()">\n        <ng-md-icon icon="publish"></ng-md-icon>\n      </md-button>\n      <md-button ng-show="$ctrl.tooltipMsg">{{ $ctrl.tooltipMsg }}</md-button>\n    </md-fab-actions>\n  </md-toolbar>\n</md-fab-toolbar>'},684:function(t,exports){t.exports='<div class="md-whiteframe-16dp" layout="column">\n\n  <div class="md-toolbar-tools">\n    <span class="md-title">{{ ::($ctrl.newItem ? \'New\' : \'Edit\') }} {{ ::($ctrl.item.hasOwnProperty(\'scene\') ? \'scene link\': \'\') }}{{ ::($ctrl.item.hasOwnProperty(\'parent\') ? \'scene\': \'\') }}{{ ::($ctrl.item.hasOwnProperty(\'content\') || $ctrl.item.hasOwnProperty(\'feature\') ? \'hotspot\' : \'\') }}{{ ::($ctrl.item.hasOwnProperty(\'attrs\') ? \'entity\' : \'\') }}</span>\n    <span flex></span>\n    <md-button class="md-icon-button md-primary" aria-label="Cancel" ng-click="$ctrl.closeDialog()">\n      <ng-md-icon icon="close" size="24"></ng-md-icon>\n    </md-button>\n  </div>\n\t<v-accordion class="vAccordion--default" multiple flex>\n\t  <!-- add expanded attribute to open the section -->\n\t  <v-pane ng-if="::($ctrl.item.hasOwnProperty(\'name\') || $ctrl.item.hasOwnProperty(\'label\') || $ctrl.item.hasOwnProperty(\'code\') || $ctrl.item.hasOwnProperty(\'desc\') || $ctrl.item.hasOwnProperty(\'feature\'))">\n\t    <v-pane-header>\n\t\t\t\tMetadata\n\t    </v-pane-header>\n\t    <v-pane-content>\n\t\t\t  <div layout="row" layout-padding ng-if="::$ctrl.item.hasOwnProperty(\'name\')">\n\t\t\t    <md-input-container flex style="margin-bottom:0;padding-bottom:0;">\n\t\t\t    \t<label>Name</label>\n\t\t\t      <input type="text" flex ng-model="$ctrl.item.name" aria-label="name">\n\t\t\t    </md-input-container>\n\t\t\t  </div>\n\t\t\t  <div layout="row" layout-padding ng-if="::$ctrl.item.hasOwnProperty(\'label\')">\n\t\t\t    <md-input-container flex style="margin-bottom:0;padding-bottom:0;">\n\t\t\t    \t<label>Label</label>\n\t\t\t      <input type="text" flex ng-model="$ctrl.item.label" aria-label="label">\n\t\t\t    </md-input-container>\n\t\t\t  </div>\n\t\t\t  <div layout="row" layout-padding ng-if="::$ctrl.item.hasOwnProperty(\'code\')">\n\t\t\t    <md-input-container flex style="margin-bottom:0;padding-bottom:0;">\n\t\t\t    \t<label>Code</label>\n\t\t\t      <input type="text" flex ng-model="$ctrl.item.code" aria-label="code">\n\t\t\t    </md-input-container>\n\t\t\t  </div>\n\t\t\t  <div layout="column" layout-padding ng-if="::($ctrl.item.hasOwnProperty(\'desc\') || $ctrl.item.hasOwnProperty(\'feature\'))">\n\t\t    \t<div><md-checkbox\n              ng-model="$ctrl.item.linked"\n              aria-label="Link to campus map feature"\n              class="md-primary">\n            Link to campus map feature?\t\n          </md-checkbox></div>\n\t\t\t\t\t<div ng-if="$ctrl.item.linked">\n\t\t\t\t    <md-select placeholder="Select category" ng-model="$ctrl.category" md-on-open="$ctrl.loadCategories()" ng-model-options="{trackBy: \'$value._id\'}" ng-change="$ctrl.onChangeCategory()">\n\t\t\t\t      <md-option ng-value="category" ng-repeat="category in $ctrl.categories track by category._id">{{::category.name}}</md-option>\n\t\t\t\t    </md-select>\n\t\t\t\t    <md-select placeholder="Select feature" ng-model="$ctrl.feature" md-on-open="$ctrl.loadFeatures()" ng-model-options="{trackBy: \'$value._id\'}" ng-change="$ctrl.onChangeFeature()">\n\t\t\t\t      <md-option ng-value="feature" ng-repeat="feature in $ctrl.features track by feature._id">{{::feature.properties.name}}</md-option>\n\t\t\t\t    </md-select>\n\t\t\t\t  </div>\n\t        <md-input-container ng-if="!$ctrl.item.linked">\n\t          <label>Content</label>\n\t          <!-- <textarea ng-model="$ctrl.item.desc" md-maxlength="250" rows="4" md-select-on-focus></textarea> -->\n\t          <ng-wig ng-model="$ctrl.item.desc"></ng-wig>\n\t        </md-input-container>\n        </div>\n\t    </v-pane-content>\n\t  </v-pane>\n\t  <v-pane ng-if="::$ctrl.item.position.length">\n\t    <v-pane-header>\n\t\t\t\tPosition\n\t    </v-pane-header>\n\t    <v-pane-content>\n\t\t\t  <div layout="row" layout-padding>\n\t\t\t    <md-input-container flex ng-repeat="val in ::[{label:\'x\',path:\'M21,9L17,5V8H10V10H17V13M7,11L3,15L7,19V16H14V14H7V11Z\'},{label:\'z\',path:\'M9,3L5,7H8V14H10V7H13M16,17V10H14V17H11L15,21L19,17H16Z\'},{label:\'y\',path:\'M14.83,13.41L13.42,14.82L16.55,17.95L14.5,20H20V14.5L17.96,16.54L14.83,13.41M14.5,4L16.54,6.04L4,18.59L5.41,20L17.96,7.46L20,9.5V4M10.59,9.17L5.41,4L4,5.41L9.17,10.58L10.59,9.17Z\'}] track by $index" style="margin-bottom:0;padding-bottom:0;margin-top:36px;">\n\t\t\t    \t<label layout layout-align="space-between center"><strong>{{ ::val.label }}</strong><svg style="width:24px;height:24px" viewBox="0 0 24 24"><path fill="#000000" ng-attr-d="{{ ::val.path }}" /></svg></label>\n\t\t\t      <input type="number" min="-15" max="15" step="0.05" flex ng-model="$ctrl.item.position[$index]" to-number aria-label="position" aria-controls="scenelink-position">\n\t\t\t    </md-input-container>\n\t\t\t  </div>\n\t    </v-pane-content>\n\t  </v-pane>\n\n\t  <v-pane ng-if="::$ctrl.item.rotation.length">\n\t    <v-pane-header>\n\t\t\t\tRotation\n\t    </v-pane-header>\n\t    <v-pane-content>\n\t\t\t  <div layout="row" layout-padding>\n\t\t\t    <md-input-container flex ng-repeat="val in ::[{label:\'roll\',path:\'M17,17H7V14L3,18L7,22V19H19V13H17M7,7H17V10L21,6L17,2V5H5V11H7V7Z\'},{label:\'yaw\',path:\'M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z\'},{label:\'pitch\',path:\'M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z\'}] track by $index" style="margin-bottom:0;padding-bottom:0;margin-top:36px;">\n\t\t\t    \t<label layout layout-align="space-between center"><strong>{{ ::val.label }}</strong><svg style="width:24px;height:24px" viewBox="0 0 24 24"><path fill="#000000" ng-attr-d="{{ ::val.path }}" /></svg></label>\n\t\t\t      <input type="number" min="-180" max="180" step="5" flex ng-model="$ctrl.item.rotation[$index]" to-number aria-label="rotation" aria-controls="scenelink-rotation">\n\t\t\t    </md-input-container>\n\t\t\t  </div>\n\t    </v-pane-content>\n\t  </v-pane>\n\n\t  <v-pane ng-if="::($ctrl.item.hasOwnProperty(\'scene\') || $ctrl.item.hasOwnProperty(\'parent\') || $ctrl.item.hasOwnProperty(\'building\'))">\n\t    <v-pane-header>\n\t\t\t\tLink\n\t    </v-pane-header>\n\t    <v-pane-content>\n\t\t\t  <div layout="row" layout-padding>\n\t\t\t    <md-select placeholder="Select location" ng-model="$ctrl.location" md-on-open="$ctrl.loadLocations()" ng-model-options="{trackBy: \'$value._id\'}" ng-change="$ctrl.onChangeLocation()">\n\t\t\t      <md-option ng-value="location" ng-repeat="location in $ctrl.locations track by location._id">{{::location.label}}</md-option>\n\t\t\t    </md-select>\n\t\t\t    <md-select placeholder="Select building" ng-model="$ctrl.building" md-on-open="$ctrl.loadBuildings()" ng-model-options="{trackBy: \'$value._id\'}" ng-change="$ctrl.onChangeBuilding()">\n\t\t\t      <md-option ng-value="building" ng-repeat="building in $ctrl.buildings track by building._id">{{::building.label}}</md-option>\n\t\t\t    </md-select>\n\t\t\t    <md-select ng-if="$ctrl.item.hasOwnProperty(\'scene\')" placeholder="Select scene" ng-model="$ctrl.scene" md-on-open="$ctrl.loadScenes()" ng-model-options="{trackBy: \'$value._id\'}" ng-change="$ctrl.onChangeScene()">\n\t\t\t      <md-option ng-value="scene" ng-repeat="scene in $ctrl.scenes track by scene._id">{{::scene.name}}</md-option>\n\t\t\t    </md-select>\n\t\t\t  </div>\n\t    </v-pane-content>\n\t  </v-pane>\n\n\t  <v-pane ng-if="::($ctrl.item.hasOwnProperty(\'attrs\'))">\n\t    <v-pane-header>\n\t\t\t\tAttributes\n\t    </v-pane-header>\n\t    <v-pane-content>\n\t\t\t  <div layout="row" layout-padding>\n\t\t\t  \t<entity-controls ng-model="$ctrl.item"></entity-controls>\n\t\t\t  </div>\n\t    </v-pane-content>\n\t  </v-pane>\n\t</v-accordion>\n\n  <div class="md-toolbar-tools">\n    <md-button class="md-warn" aria-label="Go Back" ng-click="$ctrl.removeThis()">\n      {{ ::($ctrl.newItem ? \'Cancel\' : \'Delete\') }}\n    </md-button>\n    <span flex></span>\n    <md-button class="md-primary" aria-label="Save draft" ng-click="$ctrl.saveDraft()">\n      Save draft\n    </md-button>\n    <md-button class="md-raised md-primary" aria-label="Publish" ng-click="$ctrl.publish()">\n      {{ ::($ctrl.newItem ? \'Add\' : \'Publish\') }}\n    </md-button>\n  </div>\n\n</div>'},714:function(t,exports,e){e(122),t.exports=e(258)}},[714]);